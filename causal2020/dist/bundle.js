!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="/dist",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(9),s=n(2),o=!0;o||(console.log=function(){}),a.render(r.createElement(s.default,null),document.getElementById("wrapper"))},function(e,t){e.exports=React},function(e,t,n){"use strict";function r(e){var t,n,r;for(r=e.length-1;r>0;r--)t=Math.floor(Math.random()*(r+1)),n=e[r],e[r]=e[t],e[t]=n;return e}function a(){var e=r([0,1,2]),t=r([0,1,2]),n=r([0,1,2]),a=r([{dataIdx:e[0],visual:y.Table,dataType:"high"},{dataIdx:t[0],visual:y.Table,dataType:"med"},{dataIdx:n[0],visual:y.Table,dataType:"low"},{dataIdx:e[1],visual:y.Heatmap,dataType:"high"},{dataIdx:t[1],visual:y.Heatmap,dataType:"med"},{dataIdx:n[1],visual:y.Heatmap,dataType:"low"},{dataIdx:e[2],visual:y.Interactive,dataType:"high"},{dataIdx:t[2],visual:y.Interactive,dataType:"med"},{dataIdx:n[2],visual:y.Interactive,dataType:"low"}]);return a}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),l=n(3),c=n(4),u=n(5),p=n(6),h=n(8);!function(e){e[e.High=0]="High",e[e.Med=1]="Med",e[e.Low=2]="Low"}(o||(o={}));var d;!function(e){e[e.Start=0]="Start",e[e.HasSubmitted=1]="HasSubmitted"}(d||(d={}));var y;!function(e){e.Table="Table",e.Heatmap="Heatmap",e.Interactive="Interactive"}(y=t.PresentationChoice||(t.PresentationChoice={}));var m=function(e){function t(t){var n=e.call(this,t)||this;n.goToNextStep=n.goToNextStep.bind(n),n.showAnswerAsNext=n.showAnswerAsNext.bind(n),n.revealAnswer=n.revealAnswer.bind(n),n.setAnswer=n.setAnswer.bind(n),n.setInteractions=n.setInteractions.bind(n),n.downloadExpData=n.downloadExpData.bind(n);var r=a(),s=[];return n.state={expStep:-1,expSequence:r,stepState:d.Start,log:s,answer:50},n}return s(t,e),t.prototype.downloadExpData=function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.state.log)),t=document.createElement("a");t.href=e;var n=new Date;t.setAttribute("download","causal_exp_log_"+n+".json"),t.click()},t.prototype.revealAnswer=function(){this.setState(function(e){return{totalSeconds:Math.floor((Date.now()-e.startTime)/1e3),stepState:d.HasSubmitted}})},t.prototype.goToNextStep=function(){var e=this;this.setState(function(t){if(e.state.expStep>-1){var n=e.state.expSequence[e.state.expStep],r=l.DATA[n.dataType][n.dataIdx],a=e.state.totalSeconds?e.state.totalSeconds:Math.floor((Date.now()-t.startTime)/1e3),s={step:e.state.expStep,data:r.values,dataId:n.dataType+"-"+n.dataIdx,dataCount:r.total,answer:e.state.answer,visual:n.visual.toString(),interactions:e.state.currentInteraction,totalSeconds:a,expectedValue:e.state.expectedAnswer};t.log.push(s)}var o=e.state.expStep+1;if(e.state.expStep<8){var i=e.state.expSequence[o],c=l.DATA[i.dataType][i.dataIdx];return{log:t.log,expStep:o,startTime:Date.now(),stepState:d.Start,expectedAnswer:l.computeModel2Posterior(c.values),currentInteraction:[],answer:50}}return{log:t.log,expStep:o,startTime:Date.now(),stepState:d.Start,currentInteraction:[],expectedAnswer:-1,answer:50}})},t.prototype.showAnswerAsNext=function(){var e=this.state.stepState===d.Start&&this.state.expStep>4;return e&&console.log("Show answer NEXT, current step is",this.state.expStep,"state",d.Start),e},t.prototype.setAnswer=function(e){this.setState({answer:e})},t.prototype.setInteractions=function(e){this.setState(function(t){return t.currentInteraction.push(e),{currentInteraction:t.currentInteraction}})},t.prototype.render=function(){var e,t=this.state.expSequence[this.state.expStep],n=this.state.expStep===-1?"Start":this.showAnswerAsNext()?"Submit, show reference answer and next":this.state.expStep>4?"Next":"Submit and next",r=this.state.stepState===d.HasSubmitted&&this.state.expStep>4,a=Math.round(100*this.state.expectedAnswer)/100,s=0===a?"very close to 0":a,o=r?i.createElement("div",null,"The probability we calculated on the data was ",s,i.createElement("b",null)):null;if(this.state.expStep===-1)e=i.createElement(u.Landing,null);else if(this.state.expStep<9){var l=i.createElement(p.default,{disabled:r,changeAnswer:this.setAnswer,value:this.state.answer});e=i.createElement("div",null,i.createElement(h.default,{combo:t,step:this.state.expStep,setAnswer:this.setAnswer,setInteractions:this.setInteractions}),l,o)}else this.downloadExpData(),e=i.createElement("div",null,i.createElement(c.Exit,null),i.createElement("button",{onClick:this.downloadExpData},"download data if not downloaded already"));var y=9===this.state.expStep?null:this.showAnswerAsNext()?i.createElement("button",{onClick:this.revealAnswer},n):i.createElement("button",{onClick:this.goToNextStep},n);return i.createElement("div",{id:"content"},e,y)},t}(i.Component);t.default=m},function(e,t){"use strict";function n(e,t){var n=1;return e.forEach(function(e){var r="yes"===e.rain?t.rainProbyes:1-t.rainProbyes,a=t.sprinklerProb[e.rain],s="yes"===e.sprinkler?a:1-a,o=t.grassProb[e.rain][e.sprinkler],i="yes"===e.grass?o:1-o;n*=Math.pow(r*s*i,e.count)}),n}function r(e){var t=n(e,u),r=n(e,p),a=l*t,s=c*r;return s/(a+s)}function a(){t.DATA.high.forEach(function(e,t){console.log("high",t,r(e.values))}),t.DATA.med.forEach(function(e,t){console.log("med",t,r(e.values))}),t.DATA.low.forEach(function(e,t){console.log("low",t,r(e.values))})}function s(e,n){console.log(r(t.DATA[e][n].values))}Object.defineProperty(t,"__esModule",{value:!0});var o=.5,i=.2,l=.3,c=.7,u={rainProbyes:i,sprinklerProb:{yes:o,no:o},grassProb:{yes:{yes:.8,no:.3},no:{yes:.3,no:.1}}},p={rainProbyes:i,sprinklerProb:{yes:.1,no:.7},grassProb:{yes:{yes:.8,no:.3},no:{yes:.3,no:.1}}};t.DATA={high:[{values:[{rain:"no",sprinkler:"no",grass:"no",count:6},{rain:"no",sprinkler:"no",grass:"yes",count:1},{rain:"no",sprinkler:"yes",grass:"no",count:20},{rain:"no",sprinkler:"yes",grass:"yes",count:11},{rain:"yes",sprinkler:"no",grass:"no",count:3},{rain:"yes",sprinkler:"no",grass:"yes",count:3},{rain:"yes",sprinkler:"yes",grass:"no",count:2},{rain:"yes",sprinkler:"yes",grass:"yes",count:4}],hasOutlier:!1,total:50},{values:[{rain:"no",sprinkler:"no",grass:"no",count:1},{rain:"no",sprinkler:"no",grass:"yes",count:1},{rain:"no",sprinkler:"yes",grass:"no",count:3},{rain:"no",sprinkler:"yes",grass:"yes",count:2},{rain:"yes",sprinkler:"no",grass:"no",count:2},{rain:"yes",sprinkler:"no",grass:"yes",count:1}],hasOutlier:!1,total:10},{values:[{rain:"no",sprinkler:"no",grass:"no",count:13},{rain:"no",sprinkler:"no",grass:"yes",count:1},{rain:"no",sprinkler:"yes",grass:"no",count:18},{rain:"no",sprinkler:"yes",grass:"yes",count:11},{rain:"yes",sprinkler:"no",grass:"yes",count:0},{rain:"yes",sprinkler:"no",grass:"no",count:5},{rain:"yes",sprinkler:"yes",grass:"yes",count:2}],hasOutlier:!1,total:50}],med:[{values:[{rain:"no",sprinkler:"no",grass:"no",count:7},{rain:"no",sprinkler:"no",grass:"yes",count:3},{rain:"no",sprinkler:"yes",grass:"no",count:23},{rain:"no",sprinkler:"yes",grass:"yes",count:8},{rain:"yes",sprinkler:"no",grass:"no",count:2},{rain:"yes",sprinkler:"no",grass:"yes",count:1},{rain:"yes",sprinkler:"yes",grass:"no",count:2},{rain:"yes",sprinkler:"yes",grass:"yes",count:4}],hasOutlier:!1,total:50},{values:[{rain:"no",sprinkler:"no",grass:"no",count:1},{rain:"no",sprinkler:"no",grass:"yes",count:1},{rain:"no",sprinkler:"yes",grass:"no",count:6},{rain:"yes",sprinkler:"yes",grass:"yes",count:2}],hasOutlier:!0,total:10},{values:[{rain:"no",sprinkler:"no",grass:"no",count:12},{rain:"no",sprinkler:"no",grass:"yes",count:1},{rain:"no",sprinkler:"yes",grass:"no",count:20},{rain:"no",sprinkler:"yes",grass:"yes",count:11},{rain:"yes",sprinkler:"no",grass:"no",count:3},{rain:"yes",sprinkler:"no",grass:"yes",count:1},{rain:"yes",sprinkler:"yes",grass:"yes",count:5}],hasOutlier:!1,total:50}],low:[{values:[{rain:"no",sprinkler:"no",grass:"no",count:34},{rain:"no",sprinkler:"no",grass:"yes",count:7},{rain:"no",sprinkler:"yes",grass:"no",count:23},{rain:"no",sprinkler:"yes",grass:"yes",count:10},{rain:"yes",sprinkler:"no",grass:"no",count:5},{rain:"yes",sprinkler:"no",grass:"yes",count:4},{rain:"yes",sprinkler:"yes",grass:"no",count:6},{rain:"yes",sprinkler:"yes",grass:"yes",count:11}],hasOutlier:!1,total:100},{values:[{rain:"no",sprinkler:"no",grass:"no",count:4},{rain:"no",sprinkler:"no",grass:"yes",count:1},{rain:"no",sprinkler:"yes",grass:"no",count:3},{rain:"yes",sprinkler:"yes",grass:"yes",count:2}],hasOutlier:!1,total:10},{values:[{rain:"no",sprinkler:"no",grass:"no",count:21},{rain:"no",sprinkler:"no",grass:"yes",count:1},{rain:"no",sprinkler:"yes",grass:"no",count:13},{rain:"no",sprinkler:"yes",grass:"yes",count:5},{rain:"yes",sprinkler:"no",grass:"no",count:3},{rain:"yes",sprinkler:"no",grass:"yes",count:2},{rain:"yes",sprinkler:"yes",grass:"yes",count:5}],hasOutlier:!1,total:50}]},t.computeModel2Posterior=r,window.showAllPosterior=a,window.testSpecific=s},function(e,t,n){"use strict";function r(){var e=a.createElement("div",null,a.createElement("h3",null,"Exit Question"),a.createElement("p",null,a.createElement("b",null,"Please include your answers in the email/chat to Yifan")),a.createElement("p",null,"1. Were you confident about your answers (before and after we started sharing the analytical results from our algorithm)?"),a.createElement("p",null,"2. Did one of the three data presentation styles (table, heatmap, interactive barchart) stand out to you as more helpful?"),a.createElement("p",null,"3. Did you develop any kind of strategies with the visualizations to help think about the answer?"),a.createElement("p",null,"4. Any other comments you have about your experience?"));return e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.Exit=r},function(e,t,n){"use strict";function r(){var e=a.createElement("div",null,a.createElement("h1",null,"Is the Sprinkler Controlled by the Rain?"),a.createElement("p",null,"Thanks for participanting in the user study! You help is crucial for our work!")," ",a.createElement("p",null,"In this study, we will set up a data analysis scenario and ask you to view some data and answer a couple questions.   Please do not try to do any explicit mathematical calculations with calculators or your computer.  We want to elicit your ",a.createElement("b",null,"intuitive understanding"),".  There will be 9 questions total and each question should take no more than 1 minute once you understand the setup."),a.createElement("p",null,a.createElement("b",null,"Please use the Chrome browser")," (others were not tested). When you are done, there will be a button that will download a JSON file of your choices. (If you don't see any files, please double check if your browser is blocking the download). Then please email that file to Yifan, along with your answers to the final exit questions."));return e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.Landing=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=function(e){function t(){var t=e.call(this)||this;return t.slide=t.slide.bind(t),t}return r(t,e),t.prototype.slide=function(e){this.props.changeAnswer(e.target.value)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.value;return a.createElement("div",null,a.createElement("input",{className:"answer-slider",type:"range",min:"0",max:"100",step:"5",disabled:t,value:n,onChange:this.slide}),n,"%")},t}(a.Component);t.default=s},function(e,t,n){"use strict";function r(e){var t=e.map(function(e){return a.createElement("tr",null,a.createElement("td",null,e.rain),a.createElement("td",null,e.sprinkler),a.createElement("td",null,e.grass),a.createElement("td",null,e.count))});return a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"rain"),a.createElement("th",null,"sprinkler"),a.createElement("th",null,"grass wet"),a.createElement("th",null,"count"))),a.createElement("tbody",null,t))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.Table=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(3),o=n(2),i=n(7),l="VegaVis",c={$schema:"https://vega.github.io/schema/vega-lite/v4.json",data:{values:[]},repeat:{column:["rain","sprinkler","grass"]},spec:{layer:[{selection:{click:{type:"single",encodings:["x"]}},mark:"bar",encoding:{x:{field:{repeat:"column"},type:"ordinal"},y:{aggregate:"sum",field:"count",type:"quantitative"},color:{value:"#ddd"}}},{transform:[{filter:{selection:"click"}}],mark:"bar",encoding:{x:{field:{repeat:"column"},type:"ordinal"},y:{aggregate:"sum",field:"count",type:"quantitative"}}}]}},u={$schema:"https://vega.github.io/schema/vega-lite/v4.json",data:{values:[]},mark:"rect",encoding:{row:{field:"grass",type:"nominal"},y:{field:"rain",type:"nominal"},x:{field:"sprinkler",type:"nominal"},color:{field:"count",type:"quantitative"}},config:{axis:{grid:1,tickBand:"extent"}}},p=function(e){function t(t){var n=e.call(this,t)||this;return console.log("Rending task",t),n}return r(t,e),t.prototype.embed=function(){var e=this,t=this.props.combo.visual===o.PresentationChoice.Heatmap?JSON.parse(JSON.stringify(u)):JSON.parse(JSON.stringify(c)),n=s.DATA[this.props.combo.dataType][this.props.combo.dataIdx].values;t.data.values=n,vegaEmbed("#"+l,t).then(function(t){t.view;if(e.props.combo.visual===o.PresentationChoice.Interactive){var n=function(t,n){console.log("VEGA",t,n),e.props.setInteractions({selection:JSON.stringify(n)})};t.view.addSignalListener("click",n)}}).catch(function(e){return console.error(e)})},t.prototype.checkAndEmbed=function(){this.props.combo.visual!==o.PresentationChoice.Table&&this.embed()},t.prototype.componentDidMount=function(){this.checkAndEmbed()},t.prototype.componentDidUpdate=function(e,t){var n=this.props.combo,r=e.combo;r!==n&&this.checkAndEmbed()},t.prototype.render=function(){var e=s.DATA[this.props.combo.dataType][this.props.combo.dataIdx].values,t=this.props.combo.visual===o.PresentationChoice.Table?i.Table(e):a.createElement("div",{id:l}),n=this.props.combo.visual===o.PresentationChoice.Heatmap?a.createElement("p",null,"This is a heatmap view of the data---the darker the color, the higher the count. If the block is white (empty), the value is 0"):this.props.combo.visual===o.PresentationChoice.Interactive?a.createElement("p",null,'This is an interactive view of the data recorded for a particular park---you can click on a value to filter the rest of the data---for instance, if you clicked on "yes" in the chart for rain, you can see the distribution of the situation for the sprinkler and grass.'):a.createElement("p",null,"Simple table count. If there is no row, then there is no combination.");return a.createElement("div",null,a.createElement("p",null,"You are visiting an imaginary city that ",a.createElement("b",null,"rains about 2 out of 10 days"),".  The city has been phasing out an old basic irrigation system with a new ``smart'' one that could detect the rain.  So far, the project is 30% complete, so if you were to go to a public park, ",a.createElement("b",null,'7 out of 10 times, it\'s the new "smart" system where the sprinkler is controlled by the rain'),".  Note that our models are not deterministic---so a smart system is not guranteed to have the sprinkler on when there is no rain.  For the basic system, the sprinkler is on half of the time, and ",a.createElement("b",null,"for the smart system, the spinkler is on more likely when there is no rain: 7 out of 10 times and when there is rain, it's only on 1 out of 10 times"),".  Additionally the ",a.createElement("b",null,"smart sprinkler system is more effective"),", which means that the grass is more likely to be wet when the smart sprinkler is on, than the basic sprinkler.  Please refer to the probability tables in the diagrams below."),a.createElement("p",null,"Note that the setting is the same across all the tasks---the only things that change are the particular park you are observing, and how we present the data to you.  There will be three kinds: a table that counts the occurances of the events, a heatmap that visualizes these occurance counts with a color spectrum, and an bar chart where you can interactively filter the occurances of different events."),a.createElement("p",null,"Below is the probability table---note that these do not change between tasks, but we've kept them here for your reference."),a.createElement("img",{src:"assets/prob1.png",width:"500px"}),a.createElement("img",{src:"assets/prob2.png",width:"500px"}),a.createElement("h2",null,"Park # ",this.props.step+1,"/9"),a.createElement("i",null,n),a.createElement("div",null,t),a.createElement("b",null,a.createElement("p",null,"How likely is it that this particular park has a smart sprinkler that is responsive to the rain?")))},t}(a.Component);t.default=p},function(e,t){e.exports=ReactDOM}]);
//# sourceMappingURL=bundle.js.map