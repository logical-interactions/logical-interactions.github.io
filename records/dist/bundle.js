!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist",e(e.s=85)}([function(t,e,n){"use strict";function r(t){return t>1?0:t<-1?u:Math.acos(t)}function a(t){return t>1?f:t<-1?-f:Math.asin(t)}function i(t){return(t=w(t/2))*t}n.d(e,"i",function(){return o}),n.d(e,"j",function(){return c}),n.d(e,"o",function(){return u}),n.d(e,"l",function(){return f}),n.d(e,"q",function(){return s}),n.d(e,"w",function(){return l}),n.d(e,"h",function(){return d}),n.d(e,"r",function(){return b}),n.d(e,"a",function(){return h}),n.d(e,"d",function(){return p}),n.d(e,"e",function(){return g}),n.d(e,"g",function(){return m}),n.d(e,"f",function(){return v}),n.d(e,"k",function(){return y}),n.d(e,"n",function(){return O}),n.d(e,"p",function(){return j}),n.d(e,"t",function(){return w}),n.d(e,"s",function(){return E}),n.d(e,"u",function(){return x}),n.d(e,"v",function(){return S}),e.b=r,e.c=a,e.m=i;var o=1e-6,c=1e-12,u=Math.PI,f=u/2,s=u/4,l=2*u,d=180/u,b=u/180,h=Math.abs,p=Math.atan,g=Math.atan2,m=Math.cos,v=Math.ceil,y=Math.exp,O=(Math.floor,Math.log),j=Math.pow,w=Math.sin,E=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,S=Math.tan},function(t,e,n){"use strict";e.a=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}},function(t,e,n){"use strict";var r=n(173);e.a=function(t){return Object(r.a)(t[t.length-1])}},function(t,e){t.exports=React},function(t,e,n){"use strict";function r(t){return Object(b.b)({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function a(t){return i(function(){return t})()}function i(t){function e(t){return t=j(t[0]*l.r,t[1]*l.r),[t[0]*N+v,y-t[1]*N]}function n(t){return(t=j.invert((t[0]-v)/N,(y-t[1])/N))&&[t[0]*l.h,t[1]*l.h]}function a(t,e){return t=m(t,e),[t[0]*N+v,y-t[1]*N]}function i(){j=Object(f.a)(O=Object(d.b)(T,A,C),m);var t=m(P,R);return v=k-t[0]*N,y=I+t[1]*N,b()}function b(){return S=M=null,e}var m,v,y,O,j,w,E,x,S,M,N=150,k=480,I=250,P=0,R=0,T=0,A=0,C=0,L=null,_=o.a,D=null,q=s.a,B=.5,F=Object(p.a)(a,B);return e.stream=function(t){return S&&M===t?S:S=g(r(O)(_(F(q(M=t)))))},e.preclip=function(t){return arguments.length?(_=t,L=void 0,b()):_},e.postclip=function(t){return arguments.length?(q=t,D=w=E=x=null,b()):q},e.clipAngle=function(t){return arguments.length?(_=+t?Object(c.a)(L=t*l.r):(L=null,o.a),b()):L*l.h},e.clipExtent=function(t){return arguments.length?(q=null==t?(D=w=E=x=null,s.a):Object(u.a)(D=+t[0][0],w=+t[0][1],E=+t[1][0],x=+t[1][1]),b()):null==D?null:[[D,w],[E,x]]},e.scale=function(t){return arguments.length?(N=+t,i()):N},e.translate=function(t){return arguments.length?(k=+t[0],I=+t[1],i()):[k,I]},e.center=function(t){return arguments.length?(P=t[0]%360*l.r,R=t[1]%360*l.r,i()):[P*l.h,R*l.h]},e.rotate=function(t){return arguments.length?(T=t[0]%360*l.r,A=t[1]%360*l.r,C=t.length>2?t[2]%360*l.r:0,i()):[T*l.h,A*l.h,C*l.h]},e.precision=function(t){return arguments.length?(F=Object(p.a)(a,B=t*t),b()):Object(l.u)(B)},e.fitExtent=function(t,n){return Object(h.a)(e,t,n)},e.fitSize=function(t,n){return Object(h.c)(e,t,n)},e.fitWidth=function(t,n){return Object(h.d)(e,t,n)},e.fitHeight=function(t,n){return Object(h.b)(e,t,n)},function(){return m=t.apply(this,arguments),e.invert=m.invert&&n,i()}}e.a=a,e.b=i;var o=n(43),c=n(61),u=n(17),f=n(42),s=n(24),l=n(0),d=n(16),b=n(18),h=n(27),p=n(121),g=Object(b.b)({point:function(t,e){this.stream.point(t*l.r,e*l.r)}})},function(t,e,n){"use strict";function r(t){try{e.db.run(t)}catch(e){console.log("%cDB execution error for query "+t+", "+e,"background: red")}}function a(t){var n=e.db.exec(t);n.length>0?console.log(JSON.stringify(n[0].values).replace(/\],\[/g,"\n").replace("[[","").replace("]]","").replace(/,/g,"\t")):console.log("NO RESULT")}function i(t,n){var r=p?"./dist/sql":"/src/records",a=h.readFileSync(r+"/"+t+"/"+n+".sql"),i=a.split(";\n\n");i.forEach(function(t,n){t=t.replace(/^ *--.*$/gm,""),n<i.length-1&&(t+=";"),console.log("executing ",t),e.db.run(t)})}function o(t,e){return console.log("["+e+"] "+t),1}function c(){return+new Date}function u(t,e,n){if(t>e)throw new Error(t+" is larger than "+e+", "+n)}function f(t,e){var n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=e,n.onclick=function(){setTimeout(function(){window.URL.revokeObjectURL(n.href)},1500)},n.click()}function s(){console.log("download session");var t=e.db.export();f(new Blob([t]),"session.db")}function l(t){var n="",r=e.db.exec(t);if(r.length&&r[0].values){n+=r[0].columns.join(",")+"\r\n",r[0].values.forEach(function(t){var e=t.join(",");n+=e+"\r\n"});f(new Blob([n],{type:"text/plain;charset=UTF-8"}),"userData.csv"),console.log("should have downloaded",n)}else console.log("NO RESULT")}function d(t){var n=new FileReader;n.onload=function(){console.log("Updated to the updated session");var t=new Uint8Array(n.result);e.db=new b.Database(t)},n.readAsArrayBuffer(t)}Object.defineProperty(e,"__esModule",{value:!0});var b=n(90),h=n(11),p=!0;console.log("DB setup file executing"),e.db=new b.Database,window.db=e.db,e.db.run("PRAGMA foreign_keys = ON;"),e.tryDB=r,window.d=a,e.executeFile=i,e.db.create_function("timeNow",c),e.db.create_function("log",o),e.db.create_function("assertNoBigger",u),e.downloadDB=s,e.downloadQueryResultAsCSV=l,e.loadDb=d},function(t,e,n){"use strict";function r(){}e.a=r},function(t,e,n){"use strict";function r(t,e){t&&c.hasOwnProperty(t.type)&&c[t.type](t,e)}function a(t,e,n){var r,a=-1,i=t.length-n;for(e.lineStart();++a<i;)r=t[a],e.point(r[0],r[1],r[2]);e.lineEnd()}function i(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)a(t[n],e,1);e.polygonEnd()}var o={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,a=-1,i=n.length;++a<i;)r(n[a].geometry,e)}},c={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){a(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)a(n[r],e,0)},Polygon:function(t,e){i(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)i(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,a=-1,i=n.length;++a<i;)r(n[a],e)}};e.a=function(t,e){t&&o.hasOwnProperty(t.type)?o[t.type](t,e):r(t,e)}},function(t,e,n){"use strict";function r(){this.reset()}function a(t,e,n){var r=t.s=e+n,a=r-e,i=r-a;t.t=e-i+(n-a)}e.a=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){a(i,t,this.t),a(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new r},function(t,e,n){"use strict";e.a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},function(t,e,n){"use strict";var r=n(37);n.d(e,"a",function(){return r.e}),n.d(e,"f",function(){return r.g}),n.d(e,"d",function(){return r.f});var a=n(174);n.d(e,"e",function(){return a.a}),n.d(e,"c",function(){return a.b});var i=n(175);n.d(e,"b",function(){return i.a})},function(t,e,n){"use strict";function r(t,e,n,r){return h.geoMercator().scale(e*t.k).translate([n-t.x,r-t.y])}function a(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),200===e.status?e.responseText:""}function i(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.onload=function(){return e(r.responseText)},r.onerror=function(){return n(r.statusText)},r.send()})}function o(t,n,r){return Math.abs(r[0]-n[0])<20&&Math.abs(r[1]-n[1])<20&&(t.in=!0),t.left=n[0]===e.NW[0],t.right=r[0]===e.SE[0],t.up=n[1]===e.NW[1],t.down=r[1]===e.SE[1],t.out=JSON.stringify(n)===JSON.stringify(e.NW)&&JSON.stringify(r)===JSON.stringify(e.SE),t}function c(t,e){return"in"===e||"out"===e?f(t,e):u(t,e)}function u(t,e){var n=[.2*(t.se[0]-t.nw[0]),.2*(t.nw[1]-t.se[1])],r={left:function(t){return[t[0]-n[0],t[1]]},right:function(t){return[t[0]+n[0],t[1]]},up:function(t){return[t[0],t[1]+n[1]]},down:function(t){return[t[0],t[1]-n[1]]}},a=r[e](t.nw),i=r[e](t.se);return o=l({nw:a,se:i}),a=o.nw,i=o.se,{nw:a,se:i};var o}function f(t,e){switch(e){case"in":return s(t);case"out":return d(t);default:throw new Error("zoom must be in or out")}}function s(t){return{nw:[(5*t.nw[0]+t.se[0])/6,(5*t.nw[1]+t.se[1])/6],se:[(t.nw[0]+5*t.se[0])/6,(t.nw[1]+3*t.se[1])/6]}}function l(t){var n=t.nw,r=t.se;return n[0]=n[0]<e.NW[0]?e.NW[0]:n[0],n[1]=n[1]>e.NW[1]?e.NW[1]:n[1],r[0]=r[0]>e.SE[0]?e.SE[0]:r[0],r[1]=r[1]<e.SE[1]?e.SE[1]:r[1],{nw:n,se:r}}function d(t){var e=[(5*t.nw[0]-t.se[0])/4,(5*t.nw[1]-t.se[1])/4],n=[(5*t.se[0]-t.nw[0])/4,(5*t.se[1]-t.nw[1])/4];return r=l({nw:e,se:n}),e=r.nw,n=r.se,{nw:e,se:n};var r}function b(t,e){return Object.keys(e).forEach(function(n){n in t||(t[n]=e[n])}),t}Object.defineProperty(e,"__esModule",{value:!0});var h=n(21);e.getTranslatedMapping=r,e.readFileSync=a,e.readFileAsync=i,e.NW=[-173,77],e.SE=[163,-43],e.NWStart=[-140,54],e.SEStart=[-54,20],e.checkBounds=o,e.interactionHelper=c,e.panHelper=u,e.zoomHelper=f,e.bindDefault=b},function(t,e,n){"use strict";function r(t){return[Object(s.e)(t[1],t[0]),Object(s.c)(t[2])]}function a(t){var e=t[0],n=t[1],r=Object(s.g)(n);return[r*Object(s.g)(e),r*Object(s.t)(e),Object(s.t)(n)]}function i(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function o(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function c(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function u(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function f(t){var e=Object(s.u)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}e.g=r,e.a=a,e.d=i,e.c=o,e.b=c,e.f=u,e.e=f;var s=n(0)},function(t,e,n){"use strict";e.a=function(t){return null===t?NaN:+t}},function(t,e,n){"use strict";function r(t){return function(e,n){var r=Object(i.g)(e),a=Object(i.g)(n),o=t(r*a);return[o*a*Object(i.t)(e),o*Object(i.t)(n)]}}function a(t){return function(e,n){var r=Object(i.u)(e*e+n*n),a=t(r),o=Object(i.t)(a),c=Object(i.g)(a);return[Object(i.e)(e*o,r*c),Object(i.c)(r&&n*o/r)]}}e.b=r,e.a=a;var i=n(0)},function(t,e,n){"use strict";function r(t,e){return function(n){return t+n*e}}function a(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function i(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):Object(u.a)(isNaN(t)?e:t)}function o(t){return 1==(t=+t)?c:function(e,n){return n-e?a(e,n,t):Object(u.a)(isNaN(e)?n:e)}}function c(t,e){var n=e-t;return n?r(t,n):Object(u.a)(isNaN(t)?e:t)}e.c=i,e.b=o,e.a=c;var u=n(78)},function(t,e,n){"use strict";function r(t,e){return[t>f.o?t-f.w:t<-f.o?t+f.w:t,e]}function a(t,e,n){return(t%=f.w)?e||n?Object(u.a)(o(t),c(e,n)):o(t):e||n?c(e,n):r}function i(t){return function(e,n){return e+=t,[e>f.o?e-f.w:e<-f.o?e+f.w:e,n]}}function o(t){var e=i(t);return e.invert=i(-t),e}function c(t,e){function n(t,e){var n=Object(f.g)(e),c=Object(f.g)(t)*n,u=Object(f.t)(t)*n,s=Object(f.t)(e),l=s*r+c*a;return[Object(f.e)(u*i-l*o,c*r-s*a),Object(f.c)(l*i+u*o)]}var r=Object(f.g)(t),a=Object(f.t)(t),i=Object(f.g)(e),o=Object(f.t)(e);return n.invert=function(t,e){var n=Object(f.g)(e),c=Object(f.g)(t)*n,u=Object(f.t)(t)*n,s=Object(f.t)(e),l=s*i-u*o;return[Object(f.e)(u*i+s*o,c*r+l*a),Object(f.c)(l*r-c*a)]},n}e.b=a;var u=n(42),f=n(0);r.invert=r,e.a=function(t){function e(e){return e=t(e[0]*f.r,e[1]*f.r),e[0]*=f.h,e[1]*=f.h,e}return t=a(t[0]*f.r,t[1]*f.r,t.length>2?t[2]*f.r:0),e.invert=function(e){return e=t.invert(e[0]*f.r,e[1]*f.r),e[0]*=f.h,e[1]*=f.h,e},e}},function(t,e,n){"use strict";function r(t,e,n,r){function l(a,i){return t<=a&&a<=n&&e<=i&&i<=r}function d(a,i,o,c){var u=0,f=0;if(null==a||(u=b(a,o))!==(f=b(i,o))||p(a,i)<0^o>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+o+4)%4)!==f);else c.point(i[0],i[1])}function b(r,i){return Object(a.a)(r[0]-t)<a.i?i>0?0:3:Object(a.a)(r[0]-n)<a.i?i>0?2:1:Object(a.a)(r[1]-e)<a.i?i>0?1:0:i>0?3:2}function h(t,e){return p(t.x,e.x)}function p(t,e){var n=b(t,1),r=b(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function b(t,e){l(t,e)&&T.point(t,e)}function p(){for(var e=0,n=0,a=w.length;n<a;++n)for(var i,o,c=w[n],u=1,f=c.length,s=c[0],l=s[0],d=s[1];u<f;++u)i=l,o=d,s=c[u],l=s[0],d=s[1],o<=r?d>r&&(l-i)*(r-o)>(d-o)*(t-i)&&++e:d<=r&&(l-i)*(r-o)<(d-o)*(t-i)&&--e;return e}function g(){T=A,j=[],w=[],R=!0}function m(){var t=p(),e=R&&t,n=(j=Object(u.a)(j)).length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),d(null,null,1,a),a.lineEnd()),n&&Object(c.a)(j,h,t,d,a),a.polygonEnd()),T=a,j=w=E=null}function v(){C.point=O,w&&w.push(E=[]),P=!0,I=!1,N=k=NaN}function y(){j&&(O(x,S),M&&I&&A.rejoin(),j.push(A.result())),C.point=b,I&&T.lineEnd()}function O(a,i){var c=l(a,i);if(w&&E.push([a,i]),P)x=a,S=i,M=c,P=!1,c&&(T.lineStart(),T.point(a,i));else if(c&&I)T.point(a,i);else{var u=[N=Math.max(s,Math.min(f,N)),k=Math.max(s,Math.min(f,k))],d=[a=Math.max(s,Math.min(f,a)),i=Math.max(s,Math.min(f,i))];Object(o.a)(u,d,t,e,n,r)?(I||(T.lineStart(),T.point(u[0],u[1])),T.point(d[0],d[1]),c||T.lineEnd(),R=!1):c&&(T.lineStart(),T.point(a,i),R=!1)}N=a,k=i,I=c}var j,w,E,x,S,M,N,k,I,P,R,T=a,A=Object(i.a)(),C={point:b,lineStart:v,lineEnd:y,polygonStart:g,polygonEnd:m};return C}}e.a=r;var a=n(0),i=n(45),o=n(111),c=n(46),u=n(22),f=1e9,s=-f},function(t,e,n){"use strict";function r(t){return function(e){var n=new a;for(var r in t)n[r]=t[r];return n.stream=e,n}}function a(){}e.b=r,e.a=function(t){return{stream:r(t)}},a.prototype={constructor:a,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e-=t,function(n){return t+e*n}}},function(t,e,n){"use strict";function r(t,e){return Math.abs(t-e)>Math.abs(.01*t)&&console.log("big diff",t,e),Math.abs(t-e)>Math.abs(.2*t)}function a(t,e,n,r){if(!t)throw new Error("Selection is null");var a=f.geoMercator().scale(e).translate([n/2,r/2]),i=a(t.nw),o=a(t.se),c=o[0]-i[0],u=o[1]-i[1],s=1/Math.max(c/n,u/r),l=f.geoMercator().scale(e*s).translate([n/2,r/2]);i=l(t.nw),o=l(t.se);var d=(i[0]+o[0])/2,b=(i[1]+o[1])/2;if(isNaN(d)||isNaN(b)||isNaN(s))throw new Error("Transformations are invalid");return{x:d,y:b,k:s}}function i(t,e){return Math.floor(Math.random()*(e-t+1))+t}function o(t,e,n){if(Object.keys(d).indexOf(t)<0)throw new Error("[getLatency] "+t+" not found, "+Object.keys(d));if(e>n)throw new Error("[getLatency] min("+e+") must be smaller than max("+n+") ");return e&&n&&(d[t]={min:e,max:n}),d[t]}function c(t,e){var n=o("pin"),r=i(n.min,n.max),a=s.PINS.filter(function(t){return t[1]<e.nw[1]&&t[1]>e.se[1]&&t[0]<e.se[0]&&t[0]>e.nw[0]});return 0===a.length&&(a=[[0,0,"dummy"]]),new Promise(function(n,i){setTimeout(function(){return n({s:e,data:a,itxId:t})},r)})}function u(t){for(var e=o("user"),n=i(e.min,e.max),r=Array(l).fill(4),a=0;a<t.length;a++)r[a%l]+=t.charCodeAt(a);return new Promise(function(e,a){setTimeout(function(){return e({data:r,userId:t})},n)})}Object.defineProperty(e,"__esModule",{value:!0});var f=n(21),s=n(212),l=4;e.approxEqual=r,e.mapBoundsToTransform=a,e.getRandomInt=i;var d={pin:{max:4e3,min:1e3},user:{max:4e3,min:3e3}};e.mapZoomLatency=o,e.getMapEventData=c,e.getUserData=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40);n.d(e,"geoArea",function(){return r.c});var a=n(91);n.d(e,"geoBounds",function(){return a.a});var i=n(92);n.d(e,"geoCentroid",function(){return i.a});var o=n(41);n.d(e,"geoCircle",function(){return o.b});var c=n(43);n.d(e,"geoClipAntimeridian",function(){return c.a});var u=n(61);n.d(e,"geoClipCircle",function(){return u.a});var f=n(110);n.d(e,"geoClipExtent",function(){return f.a});var s=n(17);n.d(e,"geoClipRectangle",function(){return s.a});var l=n(112);n.d(e,"geoContains",function(){return l.a});var d=n(62);n.d(e,"geoDistance",function(){return d.a});var b=n(113);n.d(e,"geoGraticule",function(){return b.a}),n.d(e,"geoGraticule10",function(){return b.b});var h=n(114);n.d(e,"geoInterpolate",function(){return h.a});var p=n(63);n.d(e,"geoLength",function(){return p.a});var g=n(115);n.d(e,"geoPath",function(){return g.a});var m=n(65);n.d(e,"geoAlbers",function(){return m.a});var v=n(123);n.d(e,"geoAlbersUsa",function(){return v.a});var y=n(124);n.d(e,"geoAzimuthalEqualArea",function(){return y.b}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return y.a});var O=n(125);n.d(e,"geoAzimuthalEquidistant",function(){return O.b}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return O.a});var j=n(126);n.d(e,"geoConicConformal",function(){return j.b}),n.d(e,"geoConicConformalRaw",function(){return j.a});var w=n(25);n.d(e,"geoConicEqualArea",function(){return w.b}),n.d(e,"geoConicEqualAreaRaw",function(){return w.a});var E=n(127);n.d(e,"geoConicEquidistant",function(){return E.b}),n.d(e,"geoConicEquidistantRaw",function(){return E.a});var x=n(66);n.d(e,"geoEquirectangular",function(){return x.a}),n.d(e,"geoEquirectangularRaw",function(){return x.b});var S=n(128);n.d(e,"geoGnomonic",function(){return S.a}),n.d(e,"geoGnomonicRaw",function(){return S.b});var M=n(129);n.d(e,"geoIdentity",function(){return M.a});var N=n(4);n.d(e,"geoProjection",function(){return N.a}),n.d(e,"geoProjectionMutator",function(){return N.b});var k=n(28);n.d(e,"geoMercator",function(){return k.a}),n.d(e,"geoMercatorRaw",function(){return k.c});var I=n(130);n.d(e,"geoNaturalEarth1",function(){return I.a}),n.d(e,"geoNaturalEarth1Raw",function(){return I.b});var P=n(131);n.d(e,"geoOrthographic",function(){return P.a}),n.d(e,"geoOrthographicRaw",function(){return P.b});var R=n(132);n.d(e,"geoStereographic",function(){return R.a}),n.d(e,"geoStereographicRaw",function(){return R.b});var T=n(133);n.d(e,"geoTransverseMercator",function(){return T.a}),n.d(e,"geoTransverseMercatorRaw",function(){return T.b});var A=n(16);n.d(e,"geoRotation",function(){return A.a});var C=n(7);n.d(e,"geoStream",function(){return C.a});var L=n(18);n.d(e,"geoTransform",function(){return L.a})},function(t,e,n){"use strict";var r=(n(49),n(9),n(50),n(94),n(95),n(52),n(54),n(96),n(99),n(100),n(58),n(101),n(102),n(103),n(104));n.d(e,"a",function(){return r.a});var a=(n(59),n(51),n(105),n(23),n(56));n.d(e,"b",function(){return a.a});n(106),n(107),n(108),n(57),n(60),n(53),n(109)},function(t,e,n){"use strict";var r=n(13);e.a=function(t,e,n){if(null==n&&(n=r.a),a=t.length){if((e=+e)<=0||a<2)return+n(t[0],0,t);if(e>=1)return+n(t[a-1],a-1,t);var a,i=(a-1)*e,o=Math.floor(i),c=+n(t[o],o,t);return c+(+n(t[o+1],o+1,t)-c)*(i-o)}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";function r(t,e){function n(t,e){var n=Object(a.u)(c-2*i*Object(a.t)(e))/i;return[n*Object(a.t)(t*=i),u-n*Object(a.g)(t)]}var r=Object(a.t)(t),i=(r+Object(a.t)(e))/2;if(Object(a.a)(i)<a.i)return Object(o.a)(t);var c=1+r*(2*i-r),u=Object(a.u)(c)/i;return n.invert=function(t,e){var n=u-e;return[Object(a.e)(t,Object(a.a)(n))/i*Object(a.s)(n),Object(a.c)((c-(t*t+n*n)*i*i)/(2*i))]},n}e.a=r;var a=n(0),i=n(26),o=n(122);e.b=function(){return Object(i.a)(r).scale(155.424).center([0,33.6442])}},function(t,e,n){"use strict";function r(t){var e=0,n=a.o/3,r=Object(i.b)(t),o=r(e,n);return o.parallels=function(t){return arguments.length?r(e=t[0]*a.r,n=t[1]*a.r):[e*a.h,n*a.h]},o}e.a=r;var a=n(0),i=n(4)},function(t,e,n){"use strict";function r(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Object(u.a)(n,t.stream(f.a)),e(f.a.result()),null!=r&&t.clipExtent(r),t}function a(t,e,n){return r(t,function(n){var r=e[1][0]-e[0][0],a=e[1][1]-e[0][1],i=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+e[0][0]+(r-i*(n[1][0]+n[0][0]))/2,c=+e[0][1]+(a-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,c])},n)}function i(t,e,n){return a(t,[[0,0],e],n)}function o(t,e,n){return r(t,function(n){var r=+e,a=r/(n[1][0]-n[0][0]),i=(r-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];t.scale(150*a).translate([i,o])},n)}function c(t,e,n){return r(t,function(n){var r=+e,a=r/(n[1][1]-n[0][1]),i=-a*n[0][0],o=(r-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([i,o])},n)}e.a=a,e.c=i,e.d=o,e.b=c;var u=n(7),f=n(64)},function(t,e,n){"use strict";function r(t,e){return[t,Object(i.n)(Object(i.v)((i.l+e)/2))]}function a(t){function e(){var e=i.o*l(),c=f(Object(o.a)(f.rotate()).invert([0,0]));return b(null==h?[[c[0]-e,c[1]-e],[c[0]+e,c[1]+e]]:t===r?[[Math.max(c[0]-e,h),n],[Math.min(c[0]+e,a),u]]:[[h,Math.max(c[1]-e,n)],[a,Math.min(c[1]+e,u)]])}var n,a,u,f=Object(c.a)(t),s=f.center,l=f.scale,d=f.translate,b=f.clipExtent,h=null;return f.scale=function(t){return arguments.length?(l(t),e()):l()},f.translate=function(t){return arguments.length?(d(t),e()):d()},f.center=function(t){return arguments.length?(s(t),e()):s()},f.clipExtent=function(t){return arguments.length?(null==t?h=n=a=u=null:(h=+t[0][0],n=+t[0][1],a=+t[1][0],u=+t[1][1]),e()):null==h?null:[[h,n],[a,u]]},e()}e.c=r,e.b=a;var i=n(0),o=n(16),c=n(4);r.invert=function(t,e){return[t,2*Object(i.d)(Object(i.k)(e))-i.l]},e.a=function(){return a(r).scale(961/i.w)}},function(t,e){t.exports=d3},function(t,e,n){"use strict";function r(){function t(t){if(Object.keys(o).indexOf(t)<0)throw new Error("prepared statement undefined");return i[t]||(i[t]=l.db.prepare(o[t])),i[t]}function e(e){var n=(e.selection,e.data),r=e.itxId;if(!n)throw new Error("Pin data should be defined");l.db.exec("BEGIN TRANSACTION;"),n.forEach(function(e){t("insertPin").run(e)}),t("insertPinResponse").run([r,+new Date]),l.db.exec("COMMIT;")}function n(t,n,r,a,i){console.log("sending request for",t,n,r,a,i),d.getMapEventData(t,{nw:[a,r],se:[i,n]}).then(e)}function r(t){d.getUserData(t).then(a)}function a(e){var n=e.data,r=e.userId;e.itxid;t("insertUserData").run([r].concat(n))}["tables","views","dataFetchTriggers","renderTriggers"].map(function(t){l.executeFile("MapZoom",t)});var i={},o={insertPinResponse:"INSERT INTO pinResponses (itxId, ts) VALUES (?, ?)",insertPin:"INSERT OR IGNORE INTO pinData (long, lat, userId) VALUES (?, ?, ?)",insertUserData:"INSERT INTO userData (userId, Q1, Q2, Q3, Q4) VALUES (?, ?, ?, ?, ?);"};l.db.create_function("queryPin",n),l.db.create_function("queryUserData",r)}function a(t,e,n,r){function a(a,i,o,c,u,f){var s={nw:[o,i],se:[c,a]},l=d.mapBoundsToTransform(s,e,n,r),h=b.getTranslatedMapping(l,e,n,r);t.fillStyle="red",t.beginPath();var p=h([u,f]);t.arc(p[0],p[1],2,0,2*Math.PI),t.fill()}function i(e){t.font="20px arial",t.fillStyle="black",t.fillText(e,n-100,r-100)}function o(a,i,o,c,u,f,s,l){var h={nw:[c,a],se:[i,o]},p=d.mapBoundsToTransform(h,e,n,r),g=b.getTranslatedMapping(p,e,n,r);t.fillStyle="rgba(119,136,153,0.4)";var m=g([l,u]),v=g([f,s]);if(isNaN(m[0])||isNaN(m[1])||isNaN(v[0])||isNaN(v[1]))throw new Error("Brush calculation went wrong! for "+arguments);t.fillRect(m[0],m[1],v[0]-m[0],v[1]-m[1])}function c(a,i,o,c){function l(e,n){var r=h.POP[e.id]?.6*Math.pow(h.POP[e.id]/h.MAXPOP,.4)+.1:.2,a=f.interpolateBlues(r);t.fillStyle=a.substring(0,a.length-1)+", 0.5)",t.beginPath(),O(e),t.fill()}t.clearRect(0,0,n,r);var m={nw:[o,i],se:[c,a]},v=d.mapBoundsToTransform(m,e,n,r),y=b.getTranslatedMapping(v,e,n,r),O=s.geoPath().projection(y).context(t);g?p.forEach(l):fetch("/data/world.json").then(function(t){if(200!==t.status)return void console.log("There was a problem: "+t.status);t.json().then(function(t){p=u.feature(t,t.objects.countries).features,g=!0,p.forEach(l)})})}var p,g=!1;l.db.create_function("setPinState",a),l.db.create_function("setMapState",c),l.db.create_function("setBrushState",o),l.db.create_function("renderText",i)}function i(){return p||(p={insertNavItx:l.db.prepare("INSERT INTO mapItx (ts, longMin, latMax, longMax, latMin) VALUES (?, ?, ?, ?, ?)"),insertBrushItx:l.db.prepare("\n        INSERT INTO brushItx (ts, mapItxId)\n        SELECT ?, h.mapItxId\n        FROM renderItxs h\n        JOIN (SELECT MAX(ts) AS ts FROM renderItxs) AS m ON m.ts = h.ts;\n      "),insertBrushItxItems:l.db.prepare("\n        INSERT INTO brushItxItems (itxId, ts, longMin, latMax, longMax, latMin)\n          SELECT MAX(itxId), ?, ?, ?, ?, ?\n          FROM brushItx;\n      "),undoQuery:l.db.prepare(e.undoSQL)}),p}function o(){l.db.exec("\n     SELECT\n      setBrushState(mapLatMax, mapLongMax, mapLatMin, mapLongMin, brushLatMax, brushLongMax, brushLatMin, brushLongMin)\n     FROM getAllBrushState\n  ")}function c(t,e){var n=l.db.exec("\n    SELECT\n      DISTINCT mapItxId, brushItxId\n    FROM\n      renderItxs\n    WHERE cause != 'replay'\n    ORDER BY ts DESC\n  ");if(n[0]&&n[0].values&&n[0].values.length){var r=n[0].values,a=0,i=window.setInterval(function(){l.db.exec("\n        INSERT INTO renderItxs VALUES ("+r[a][0]+", "+r[a][1]+", 'replay', timeNow());\n        SELECT renderText('step "+(r.length-a)+"');\n      "),(a+=1)===r.length&&(window.clearInterval(i),e&&e())},t);return i}return null}Object.defineProperty(e,"__esModule",{value:!0});var u=n(136),f=n(163),s=n(21),l=n(5),d=n(20),b=n(11),h=n(213);e.setupMapDB=r,e.setupCanvasDependentUDFs=a,e.removeCacheSQL="\n  DELETE FROM pinResponses;\n  DELETE FROM pinData;\n",e.undoSQL="\nSELECT log('started', 'undo');\nUPDATE mapItx\n  SET undoed = 1 WHERE itxId IN (SELECT itxId FROM mapItx ORDER BY itxId DESC LIMIT 1);\nINSERT INTO mapItx (ts, latMin, latMax, longMin, longMax, undoed)\n  SELECT timeNow(), latMin, latMax, longMin, longMax, 2\n  FROM mapItx\n  WHERE undoed = 0\n  ORDER BY itxId DESC LIMIT 1;\nUPDATE mapItx\n  SET undoed = 1\n  WHERE itxId IN (\n    SELECT itxId\n    FROM mapItx\n    WHERE undoed = 0\n    ORDER BY itxId DESC LIMIT 1);\nUPDATE mapItx\n  SET undoed = 0 WHERE undoed = 2;\n";var p;e.getMapZoomStatements=i,e.showPastMapBrushes=o,e.replayBackwardsSession=c,e.switchToBlocking="\n  DROP VIEW mapOnlyState;\n  CREATE VIEW mapOnlyState AS\n    SELECT * FROM mapOnlyStateBlocking;\n",e.switchToNoneBlocking="\n  DROP VIEW mapOnlyState;\n  CREATE VIEW mapOnlyState AS\n    SELECT * FROM mapOnlyStateNoneBlocking;\n"},function(t,e,n){"use strict";var r=n(67);n.d(e,"a",function(){return r.a});var a=n(33);n.d(e,"b",function(){return a.a});var i=n(138);n.d(e,"e",function(){return i.a}),n.d(e,"f",function(){return i.b});var o=n(139);n.d(e,"c",function(){return o.a}),n.d(e,"d",function(){return o.b});var c=n(140);n.d(e,"g",function(){return c.a});var u=n(142);n.d(e,"h",function(){return u.a});var f=n(32);n.d(e,"i",function(){return f.a});var s=n(70);n.d(e,"j",function(){return s.a})},function(t,e,n){"use strict";var r=n(68);e.a=function(t){if(null==t)return r.a;var e,n,a=t.scale[0],i=t.scale[1],o=t.translate[0],c=t.translate[1];return function(t,r){r||(e=n=0);var u=2,f=t.length,s=new Array(f);for(s[0]=(e+=t[0])*a+o,s[1]=(n+=t[1])*i+c;u<f;)s[u]=t[u],++u;return s}}},function(t,e,n){"use strict";function r(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=a(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function a(t,e){function n(t,e){e.length&&e.pop();for(var n=l[t<0?~t:t],r=0,a=n.length;r<a;++r)e.push(s(n[r],r));t<0&&Object(i.a)(e,a)}function r(t){return s(t)}function a(t){for(var e=[],r=0,a=t.length;r<a;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function c(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(c)}function f(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(f)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=a(t.arcs);break;case"MultiLineString":e=t.arcs.map(a);break;case"Polygon":e=u(t.arcs);break;case"MultiPolygon":e=t.arcs.map(u);break;default:return null}return{type:n,coordinates:e}}var s=Object(o.a)(t.transform),l=t.arcs;return f(e)}e.b=a;var i=n(137),o=n(32);e.a=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return r(t,e)})}:r(t,e)}},function(t,e,n){"use strict";e.a=function(t,e,n,r,a,i){function o(r,i){for(var o=e(r)&d,c=s[o],u=0;c!=a;){if(n(c,r))return l[o]=i;if(++u>=t)throw new Error("full hashmap");c=s[o=o+1&d]}return s[o]=r,l[o]=i,i}function c(r,i){for(var o=e(r)&d,c=s[o],u=0;c!=a;){if(n(c,r))return l[o];if(++u>=t)throw new Error("full hashmap");c=s[o=o+1&d]}return s[o]=r,l[o]=i,i}function u(r,i){for(var o=e(r)&d,c=s[o],u=0;c!=a;){if(n(c,r))return l[o];if(++u>=t)break;c=s[o=o+1&d]}return i}function f(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=a&&t.push(r)}return t}3===arguments.length&&(r=i=Array,a=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),l=new i(t),d=t-1,b=0;b<t;++b)s[b]=a;return{set:o,maybeSet:c,get:u,keys:f}}},function(t,e,n){"use strict";function r(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))/2}function a(t){for(var e,n=-1,r=t.length,a=t[r-1],i=0;++n<r;)e=a,a=t[n],i+=e[0]*a[1]-e[1]*a[0];return Math.abs(i)/2}e.b=r,e.a=a},function(t,e,n){"use strict";var r=n(10),a=n(76),i=n(79),o=n(80),c=n(19),u=n(81),f=n(82),s=n(78);e.a=function(t,e){var n,l=typeof e;return null==e||"boolean"===l?Object(s.a)(e):("number"===l?c.a:"string"===l?(n=Object(r.a)(e))?(e=n,a.a):f.a:e instanceof r.a?a.a:e instanceof Date?o.a:Array.isArray(e)?i.a:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?u.a:c.a)(t,e)}},function(t,e,n){"use strict";function r(){}function a(t){var e;return t=(t+"").trim().toLowerCase(),(e=j.exec(t))?(e=parseInt(e[1],16),new f(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=w.exec(t))?i(parseInt(e[1],16)):(e=E.exec(t))?new f(e[1],e[2],e[3],1):(e=x.exec(t))?new f(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=S.exec(t))?o(e[1],e[2],e[3],e[4]):(e=M.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=N.exec(t))?s(e[1],e[2]/100,e[3]/100,1):(e=k.exec(t))?s(e[1],e[2]/100,e[3]/100,e[4]):I.hasOwnProperty(t)?i(I[t]):"transparent"===t?new f(NaN,NaN,NaN,0):null}function i(t){return new f(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new f(t,e,n,r)}function c(t){return t instanceof r||(t=a(t)),t?(t=t.rgb(),new f(t.r,t.g,t.b,t.opacity)):new f}function u(t,e,n,r){return 1===arguments.length?c(t):new f(t,e,n,null==r?1:r)}function f(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function s(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new b(t,e,n,r)}function l(t){if(t instanceof b)return new b(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=a(t)),!t)return new b;if(t instanceof b)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),c=Math.max(e,n,i),u=NaN,f=c-o,s=(c+o)/2;return f?(u=e===c?(n-i)/f+6*(n<i):n===c?(i-e)/f+2:(e-n)/f+4,f/=s<.5?c+o:2-c-o,u*=60):f=s>0&&s<1?0:u,new b(u,f,s,t.opacity)}function d(t,e,n,r){return 1===arguments.length?l(t):new b(t,e,n,null==r?1:r)}function b(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function h(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e.a=r,n.d(e,"d",function(){return g}),n.d(e,"c",function(){return m}),e.e=a,e.h=c,e.g=u,e.b=f,e.f=d;var p=n(38),g=.7,m=1/g,v="\\s*([+-]?\\d+)\\s*",y="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",O="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j=/^#([0-9a-f]{3})$/,w=/^#([0-9a-f]{6})$/,E=new RegExp("^rgb\\("+[v,v,v]+"\\)$"),x=new RegExp("^rgb\\("+[O,O,O]+"\\)$"),S=new RegExp("^rgba\\("+[v,v,v,y]+"\\)$"),M=new RegExp("^rgba\\("+[O,O,O,y]+"\\)$"),N=new RegExp("^hsl\\("+[y,O,O]+"\\)$"),k=new RegExp("^hsla\\("+[y,O,O,y]+"\\)$"),I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(p.a)(r,a,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Object(p.a)(f,u,Object(p.b)(r,{brighter:function(t){return t=null==t?m:Math.pow(m,t),new f(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?g:Math.pow(g,t),new f(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Object(p.a)(b,d,Object(p.b)(r,{brighter:function(t){return t=null==t?m:Math.pow(m,t),new b(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?g:Math.pow(g,t),new b(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new f(h(t>=240?t-240:t+120,a,r),h(t,a,r),h(t<120?t+240:t-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}))},function(t,e,n){"use strict";function r(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}e.b=r,e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";function r(t,e,n,r,a){var i=t*t,o=i*t;return((1-3*t+3*i-o)*e+(4-6*i+3*o)*n+(1+3*t+3*i-3*o)*r+o*a)/6}e.a=r,e.b=function(t){var e=t.length-1;return function(n){var a=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[a],o=t[a+1],c=a>0?t[a-1]:2*i-o,u=a<e-1?t[a+2]:2*o-i;return r((n-a/e)*e,c,i,o,u)}}},function(t,e,n){"use strict";function r(){v.point=i}function a(){o(c,u)}function i(t,e){v.point=o,c=t,u=e,t*=b.r,e*=b.r,f=t,s=Object(b.g)(e=e/2+b.q),l=Object(b.t)(e)}function o(t,e){t*=b.r,e*=b.r,e=e/2+b.q;var n=t-f,r=n>=0?1:-1,a=r*n,i=Object(b.g)(e),o=Object(b.t)(e),c=l*o,u=s*i+c*Object(b.g)(a),d=c*r*Object(b.t)(a);g.add(Object(b.e)(d,u)),f=t,s=i,l=o}n.d(e,"a",function(){return g}),n.d(e,"b",function(){return v});var c,u,f,s,l,d=n(8),b=n(0),h=n(6),p=n(7),g=Object(d.a)(),m=Object(d.a)(),v={point:h.a,lineStart:h.a,lineEnd:h.a,polygonStart:function(){g.reset(),v.lineStart=r,v.lineEnd=a},polygonEnd:function(){var t=+g;m.add(t<0?b.w+t:t),this.lineStart=this.lineEnd=this.point=h.a},sphere:function(){m.add(b.w)}};e.c=function(t){return m.reset(),Object(p.a)(t,v),2*m}},function(t,e,n){"use strict";function r(t,e,n,r,o,u){if(n){var f=Object(c.g)(e),s=Object(c.t)(e),l=r*n;null==o?(o=e+r*c.w,u=e-l/2):(o=a(f,o),u=a(f,u),(r>0?o<u:o>u)&&(o+=r*c.w));for(var d,b=o;r>0?b>u:b<u;b-=l)d=Object(i.g)([f,-s*Object(c.g)(b),-s*Object(c.t)(b)]),t.point(d[0],d[1])}}function a(t,e){e=Object(i.a)(e),e[0]-=t,Object(i.e)(e);var n=Object(c.b)(-e[1]);return((-e[2]<0?-n:n)+c.w-c.i)%c.w}e.a=r;var i=n(12),o=n(93),c=n(0),u=n(16);e.b=function(){function t(t,e){n.push(t=a(t,e)),t[0]*=c.h,t[1]*=c.h}function e(){var t=i.apply(this,arguments),e=f.apply(this,arguments)*c.r,o=s.apply(this,arguments)*c.r;return n=[],a=Object(u.b)(-t[0]*c.r,-t[1]*c.r,0).invert,r(l,e,o,1),t={type:"Polygon",coordinates:[n]},n=a=null,t}var n,a,i=Object(o.a)([0,0]),f=Object(o.a)(90),s=Object(o.a)(6),l={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:Object(o.a)([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(f="function"==typeof t?t:Object(o.a)(+t),e):f},e.precision=function(t){return arguments.length?(s="function"==typeof t?t:Object(o.a)(+t),e):s},e}},function(t,e,n){"use strict";e.a=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}},function(t,e,n){"use strict";function r(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,u){var f=o>0?c.o:-c.o,s=Object(c.a)(o-n);Object(c.a)(s-c.o)<c.i?(t.point(n,r=(r+u)/2>0?c.l:-c.l),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(f,r),t.point(o,r),e=0):i!==f&&s>=c.o&&(Object(c.a)(n-i)<c.i&&(n-=i*c.i),Object(c.a)(o-f)<c.i&&(o-=f*c.i),r=a(n,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(f,r),e=0),t.point(n=o,r=u),i=f},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function a(t,e,n,r){var a,i,o=Object(c.t)(t-n);return Object(c.a)(o)>c.i?Object(c.d)((Object(c.t)(e)*(i=Object(c.g)(r))*Object(c.t)(n)-Object(c.t)(r)*(a=Object(c.g)(e))*Object(c.t)(t))/(a*i*o)):(e+r)/2}function i(t,e,n,r){var a;if(null==t)a=n*c.l,r.point(-c.o,a),r.point(0,a),r.point(c.o,a),r.point(c.o,0),r.point(c.o,-a),r.point(0,-a),r.point(-c.o,-a),r.point(-c.o,0),r.point(-c.o,a);else if(Object(c.a)(t[0]-e[0])>c.i){var i=t[0]<e[0]?c.o:-c.o;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(e[0],e[1])}var o=n(44),c=n(0);e.a=Object(o.a)(function(){return!0},r,i,[-c.o,-c.l])},function(t,e,n){"use strict";function r(t){return t.length>1}function a(t,e){return((t=t.x)[0]<0?t[1]-c.l-c.i:c.l-t[1])-((e=e.x)[0]<0?e[1]-c.l-c.i:c.l-e[1])}var i=n(45),o=n(46),c=n(0),u=n(48),f=n(22);e.a=function(t,e,n,c){return function(s){function l(e,n){t(e,n)&&s.point(e,n)}function d(t,e){j.point(t,e)}function b(){S.point=d,j.lineStart()}function h(){S.point=l,j.lineEnd()}function p(t,e){O.push([t,e]),E.point(t,e)}function g(){E.lineStart(),O=[]}function m(){p(O[0][0],O[0][1]),E.lineEnd();var t,e,n,a,i=E.clean(),o=w.result(),c=o.length;if(O.pop(),v.push(O),O=null,c)if(1&i){if(n=o[0],(e=n.length-1)>0){for(x||(s.polygonStart(),x=!0),s.lineStart(),t=0;t<e;++t)s.point((a=n[t])[0],a[1]);s.lineEnd()}}else c>1&&2&i&&o.push(o.pop().concat(o.shift())),y.push(o.filter(r))}var v,y,O,j=e(s),w=Object(i.a)(),E=e(w),x=!1,S={point:l,lineStart:b,lineEnd:h,polygonStart:function(){S.point=p,S.lineStart=g,S.lineEnd=m,y=[],v=[]},polygonEnd:function(){S.point=l,S.lineStart=b,S.lineEnd=h,y=Object(f.a)(y);var t=Object(u.a)(v,c);y.length?(x||(s.polygonStart(),x=!0),Object(o.a)(y,a,t,n,s)):t&&(x||(s.polygonStart(),x=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),x&&(s.polygonEnd(),x=!1),y=v=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};return S}}},function(t,e,n){"use strict";var r=n(6);e.a=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r.a,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},function(t,e,n){"use strict";function r(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function a(t){if(e=t.length){for(var e,n,r=0,a=t[0];++r<e;)a.n=n=t[r],n.p=a,a=n;a.n=n=t[0],n.p=a}}var i=n(47);e.a=function(t,e,n,o,c){var u,f,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,a=t[0],o=t[e];if(Object(i.a)(a,o)){for(c.lineStart(),u=0;u<e;++u)c.point((a=t[u])[0],a[1]);return void c.lineEnd()}s.push(n=new r(a,t,null,!0)),l.push(n.o=new r(a,null,n,!1)),s.push(n=new r(o,t,null,!1)),l.push(n.o=new r(o,null,n,!0))}}),s.length){for(l.sort(e),a(s),a(l),u=0,f=l.length;u<f;++u)l[u].e=n=!n;for(var d,b,h=s[0];;){for(var p=h,g=!0;p.v;)if((p=p.n)===h)return;d=p.z,c.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(u=0,f=d.length;u<f;++u)c.point((b=d[u])[0],b[1]);else o(p.x,p.n.x,1,c);p=p.n}else{if(g)for(d=p.p.z,u=d.length-1;u>=0;--u)c.point((b=d[u])[0],b[1]);else o(p.x,p.p.x,-1,c);p=p.p}p=p.o,d=p.z,g=!g}while(!p.v);c.lineEnd()}}}},function(t,e,n){"use strict";var r=n(0);e.a=function(t,e){return Object(r.a)(t[0]-e[0])<r.i&&Object(r.a)(t[1]-e[1])<r.i}},function(t,e,n){"use strict";var r=n(8),a=n(12),i=n(0),o=Object(r.a)();e.a=function(t,e){var n=e[0],r=e[1],c=[Object(i.t)(n),-Object(i.g)(n),0],u=0,f=0;o.reset();for(var s=0,l=t.length;s<l;++s)if(b=(d=t[s]).length)for(var d,b,h=d[b-1],p=h[0],g=h[1]/2+i.q,m=Object(i.t)(g),v=Object(i.g)(g),y=0;y<b;++y,p=j,m=E,v=x,h=O){var O=d[y],j=O[0],w=O[1]/2+i.q,E=Object(i.t)(w),x=Object(i.g)(w),S=j-p,M=S>=0?1:-1,N=M*S,k=N>i.o,I=m*E;if(o.add(Object(i.e)(I*M*Object(i.t)(N),v*x+I*Object(i.g)(N))),u+=k?S+M*i.w:S,k^p>=n^j>=n){var P=Object(a.c)(Object(a.a)(h),Object(a.a)(O));Object(a.e)(P);var R=Object(a.c)(c,P);Object(a.e)(R);var T=(k^S>=0?-1:1)*Object(i.c)(R[2]);(r>T||r===T&&(P[0]||P[1]))&&(f+=k^S>=0?1:-1)}}return(u<-i.i||u<i.i&&o<-i.i)^1&f}},function(t,e,n){"use strict";var r=n(9),a=n(50),i=Object(a.a)(r.a),o=i.right;i.left;e.a=o},function(t,e,n){"use strict";function r(t){return function(e,n){return Object(a.a)(t(e),n)}}var a=n(9);e.a=function(t){return 1===t.length&&(t=r(t)),{left:function(e,n,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;t(e[i],n)<0?r=i+1:a=i}return r},right:function(e,n,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;t(e[i],n)>0?a=i:r=i+1}return r}}}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.a=r},function(t,e,n){"use strict";var r=n(53);e.a=function(t,e){var n=Object(r.a)(t,e);return n?Math.sqrt(n):n}},function(t,e,n){"use strict";var r=n(13);e.a=function(t,e){var n,a,i=t.length,o=0,c=-1,u=0,f=0;if(null==e)for(;++c<i;)isNaN(n=Object(r.a)(t[c]))||(a=n-u,u+=a/++o,f+=a*(n-u));else for(;++c<i;)isNaN(n=Object(r.a)(e(t[c],c,t)))||(a=n-u,u+=a/++o,f+=a*(n-u));if(o>1)return f/(o-1)}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,a,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=a=n;++o<i;)null!=(n=t[o])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=a=n;++o<i;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]}},function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return i});var r=Array.prototype,a=r.slice,i=r.map},function(t,e,n){"use strict";e.a=function(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(a);++r<a;)i[r]=t+r*n;return i}},function(t,e,n){"use strict";function r(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),c=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/c;return u>=a?c*=10:u>=i?c*=5:u>=o&&(c*=2),e<t?-c:c}e.a=r;var a=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2)},function(t,e,n){"use strict";e.a=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,a=t.length,i=-1;if(null==e){for(;++i<a;)if(null!=(n=t[i])&&n>=n)for(r=n;++i<a;)null!=(n=t[i])&&r>n&&(r=n)}else for(;++i<a;)if(null!=(n=e(t[i],i,t))&&n>=n)for(r=n;++i<a;)null!=(n=e(t[i],i,t))&&r>n&&(r=n);return r}},function(t,e,n){"use strict";function r(t){return t.length}var a=n(59);e.a=function(t){if(!(o=t.length))return[];for(var e=-1,n=Object(a.a)(t,r),i=new Array(n);++e<n;)for(var o,c=-1,u=i[e]=new Array(o);++c<o;)u[c]=t[c][e];return i}},function(t,e,n){"use strict";var r=n(12),a=n(41),i=n(0),o=n(47),c=n(44);e.a=function(t){function e(e,n,r,i){Object(a.a)(i,t,d,r,e,n)}function n(t,e){return Object(i.g)(t)*Object(i.g)(e)>l}function u(t){var e,r,a,c,u;return{lineStart:function(){c=a=!1,u=1},point:function(l,d){var p,g=[l,d],m=n(l,d),v=b?m?0:s(l,d):m?s(l+(l<0?i.o:-i.o),d):0;if(!e&&(c=a=m)&&t.lineStart(),m!==a&&(!(p=f(e,g))||Object(o.a)(e,p)||Object(o.a)(g,p))&&(g[0]+=i.i,g[1]+=i.i,m=n(g[0],g[1])),m!==a)u=0,m?(t.lineStart(),p=f(g,e),t.point(p[0],p[1])):(p=f(e,g),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(h&&e&&b^m){var y;v&r||!(y=f(g,e,!0))||(u=0,b?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!m||e&&Object(o.a)(e,g)||t.point(g[0],g[1]),e=g,a=m,r=v},lineEnd:function(){a&&t.lineEnd(),e=null},clean:function(){return u|(c&&a)<<1}}}function f(t,e,n){var a=Object(r.a)(t),o=Object(r.a)(e),c=[1,0,0],u=Object(r.c)(a,o),f=Object(r.d)(u,u),s=u[0],d=f-s*s;if(!d)return!n&&t;var b=l*f/d,h=-l*s/d,p=Object(r.c)(c,u),g=Object(r.f)(c,b),m=Object(r.f)(u,h);Object(r.b)(g,m);var v=p,y=Object(r.d)(g,v),O=Object(r.d)(v,v),j=y*y-O*(Object(r.d)(g,g)-1);if(!(j<0)){var w=Object(i.u)(j),E=Object(r.f)(v,(-y-w)/O);if(Object(r.b)(E,g),E=Object(r.g)(E),!n)return E;var x,S=t[0],M=e[0],N=t[1],k=e[1];M<S&&(x=S,S=M,M=x);var I=M-S,P=Object(i.a)(I-i.o)<i.i,R=P||I<i.i;if(!P&&k<N&&(x=N,N=k,k=x),R?P?N+k>0^E[1]<(Object(i.a)(E[0]-S)<i.i?N:k):N<=E[1]&&E[1]<=k:I>i.o^(S<=E[0]&&E[0]<=M)){var T=Object(r.f)(v,(-y+w)/O);return Object(r.b)(T,g),[E,Object(r.g)(T)]}}}function s(e,n){var r=b?t:i.o-t,a=0;return e<-r?a|=1:e>r&&(a|=2),n<-r?a|=4:n>r&&(a|=8),a}var l=Object(i.g)(t),d=6*i.r,b=l>0,h=Object(i.a)(l)>i.i;return Object(c.a)(n,u,e,b?[0,-t]:[-i.o,t-i.o])}},function(t,e,n){"use strict";var r=n(63),a=[null,null],i={type:"LineString",coordinates:a};e.a=function(t,e){return a[0]=t,a[1]=e,Object(r.a)(i)}},function(t,e,n){"use strict";function r(){p.point=i,p.lineEnd=a}function a(){p.point=p.lineEnd=d.a}function i(t,e){t*=l.r,e*=l.r,c=t,u=Object(l.t)(e),f=Object(l.g)(e),p.point=o}function o(t,e){t*=l.r,e*=l.r;var n=Object(l.t)(e),r=Object(l.g)(e),a=Object(l.a)(t-c),i=Object(l.g)(a),o=Object(l.t)(a),s=r*o,d=f*n-u*r*i,b=u*n+f*r*i;h.add(Object(l.e)(Object(l.u)(s*s+d*d),b)),c=t,u=n,f=r}var c,u,f,s=n(8),l=n(0),d=n(6),b=n(7),h=Object(s.a)(),p={sphere:d.a,point:d.a,lineStart:r,lineEnd:d.a,polygonStart:d.a,polygonEnd:d.a};e.a=function(t){return h.reset(),Object(b.a)(t,p),+h}},function(t,e,n){"use strict";function r(t,e){t<i&&(i=t),t>c&&(c=t),e<o&&(o=e),e>u&&(u=e)}var a=n(6),i=1/0,o=i,c=-i,u=c,f={point:r,lineStart:a.a,lineEnd:a.a,polygonStart:a.a,polygonEnd:a.a,result:function(){var t=[[i,o],[c,u]];return c=u=-(o=i=1/0),t}};e.a=f},function(t,e,n){"use strict";var r=n(25);e.a=function(){return Object(r.b)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.b=r;var a=n(4);r.invert=r,e.a=function(){return Object(a.a)(r).scale(152.63)}},function(t,e,n){"use strict";var r=n(32);e.a=function(t){function e(t){t=i(t),t[0]<o&&(o=t[0]),t[0]>u&&(u=t[0]),t[1]<c&&(c=t[1]),t[1]>f&&(f=t[1])}function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Point":e(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(e)}}var a,i=Object(r.a)(t.transform),o=1/0,c=o,u=-o,f=-o;t.arcs.forEach(function(t){for(var e,n=-1,r=t.length;++n<r;)e=i(t[n],n),e[0]<o&&(o=e[0]),e[0]>u&&(u=e[0]),e[1]<c&&(c=e[1]),e[1]>f&&(f=e[1])});for(a in t.objects)n(t.objects[a]);return[o,c,u,f]}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t,e){function n(e){var n,r=t.arcs[e<0?~e:e],a=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,a]:[a,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){a[t<0?~t:t]=1}),c.push(r)}}var a={},i={},o={},c=[],u=-1;return e.forEach(function(n,r){var a,i=t.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(a=e[++u],e[u]=n,e[r]=a)}),e.forEach(function(t){var e,r,a=n(t),c=a[0],u=a[1];if(e=o[c])if(delete o[e.end],e.push(t),e.end=u,r=i[u]){delete i[r.start];var f=r===e?e:e.concat(r);i[f.start=e.start]=o[f.end=r.end]=f}else i[e.start]=o[e.end]=e;else if(e=i[u])if(delete i[e.start],e.unshift(t),e.start=c,r=o[c]){delete o[r.end];var s=r===e?e:r.concat(e);i[s.start=r.start]=o[s.end=e.end]=s}else i[e.start]=o[e.end]=e;else e=[t],i[e.start=c]=o[e.end=u]=e}),r(o,i),r(i,o),e.forEach(function(t){a[t<0?~t:t]||c.push([t])}),c}},function(t,e,n){"use strict";var r=n(68);e.a=function(t){if(null==t)return r.a;var e,n,a=t.scale[0],i=t.scale[1],o=t.translate[0],c=t.translate[1];return function(t,r){r||(e=n=0);var u=2,f=t.length,s=new Array(f),l=Math.round((t[0]-o)/a),d=Math.round((t[1]-c)/i);for(s[0]=l-e,e=l,s[1]=d-n,n=d;u<f;)s[u]=t[u],++u;return s}}},function(t,e,n){"use strict";e.a=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},function(t,e,n){"use strict";var r=new ArrayBuffer(16),a=new Float64Array(r),i=new Uint32Array(r);e.a=function(t){a[0]=t[0],a[1]=t[1];var e=i[0]^i[1];return 2147483647&(e=e<<5^e>>7^i[2]^i[3])}},function(t,e,n){"use strict";e.a=function(t){function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":n(t.arcs);break;case"MultiPolygon":t.arcs.forEach(n)}}function n(t){for(var e=0,n=t.length;e<n;++e,++i)for(var r=t[e],o=0,c=r.length;o<c;++o){var u=r[o];u<0&&(u=~u);var f=a[u];null==f?a[u]=i:f!==i&&(a[u]=-1)}}var r,a=new Array(t.arcs.length),i=0;for(r in t.objects)e(t.objects[r]);return function(t){for(var e,n=0,r=t.length;n<r;++n)if(-1===a[(e=t[n])<0?~e:e])return!0;return!1}}},function(t,e,n){"use strict";var r=n(31),a=n(35);e.a=function(t,e,n){return e=null==e?Number.MIN_VALUE:+e,null==n&&(n=a.a),function(a,i){return n(Object(r.b)(t,{type:"Polygon",arcs:[a]}).geometry.coordinates[0],i)>=e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a});var r=Math.PI/180,a=180/Math.PI},function(t,e,n){"use strict";function r(t){return function(e){var n,r,i=e.length,o=new Array(i),c=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Object(a.f)(e[n]),o[n]=r.r||0,c[n]=r.g||0,u[n]=r.b||0;return o=t(o),c=t(c),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=c(t),r.b=u(t),r+""}}}n.d(e,"b",function(){return u});var a=n(10),i=n(39),o=n(77),c=n(15);e.a=function t(e){function n(t,e){var n=r((t=Object(a.f)(t)).r,(e=Object(a.f)(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),u=Object(c.a)(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=u(e),t+""}}var r=Object(c.b)(e);return n.gamma=t,n}(1);var u=r(i.b);r(o.a)},function(t,e,n){"use strict";var r=n(39);e.a=function(t){var e=t.length;return function(n){var a=Math.floor(((n%=1)<0?++n:n)*e),i=t[(a+e-1)%e],o=t[a%e],c=t[(a+1)%e],u=t[(a+2)%e];return Object(r.a)((n-a/e)*e,i,o,c,u)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var r=n(36);e.a=function(t,e){var n,a=e?e.length:0,i=t?Math.min(a,t.length):0,o=new Array(i),c=new Array(a);for(n=0;n<i;++n)o[n]=Object(r.a)(t[n],e[n]);for(;n<a;++n)c[n]=e[n];return function(t){for(n=0;n<i;++n)c[n]=o[n](t);return c}}},function(t,e,n){"use strict";e.a=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}},function(t,e,n){"use strict";var r=n(36);e.a=function(t,e){var n,a={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?a[n]=Object(r.a)(t[n],e[n]):i[n]=e[n];return function(t){for(n in a)i[n]=a[n](t);return i}}},function(t,e,n){"use strict";function r(t){return function(){return t}}function a(t){return function(e){return t(e)+""}}var i=n(19),o=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,c=new RegExp(o.source,"g");e.a=function(t,e){var n,u,f,s=o.lastIndex=c.lastIndex=0,l=-1,d=[],b=[];for(t+="",e+="";(n=o.exec(t))&&(u=c.exec(e));)(f=u.index)>s&&(f=e.slice(s,f),d[l]?d[l]+=f:d[++l]=f),(n=n[0])===(u=u[0])?d[l]?d[l]+=u:d[++l]=u:(d[++l]=null,b.push({i:l,x:Object(i.a)(n,u)})),s=c.lastIndex;return s<e.length&&(f=e.slice(s),d[l]?d[l]+=f:d[++l]=f),d.length<2?b[0]?a(b[0].x):r(e):(e=b.length,function(t){for(var n,r=0;r<e;++r)d[(n=b[r]).i]=n.x(t);return d.join("")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.Indicator=function(){return r.createElement("div",{className:"indicator inline-block"})}},function(t,e,n){"use strict";function r(t){if(t[0]&&t[0].values&&t[0].values.length>0){var e=t[0].columns;if("chart"!==e[0]||"bin"!==e[1]||"count"!==e[2])throw new Error("Section do not match");var n=t[0].values,r=null;"itxId"===e[3]&&(r=n[0][3]);var a={hour:[],delay:[],distance:[]};return n.forEach(function(t){var e=t[0];a[e].push({x:t[1],y:t[2]})}),{data:a,itxId:r}}return{data:null,itxId:null}}function a(){["tables","views","dataFetchTriggers","renderTriggers"].map(function(t){u.executeFile("XFilter",t)}),u.db.create_function("queryWorker",o),u.db.create_function("checkAtomic",function(t){if(!t)return 0;var n=e.XFILTERCHARTS.reduce(function(e,n){return e&&t.indexOf(n)>-1},!0);return console.log("Xfilter atomic",n),n?1:0})}function i(){var t;return t||(t={insertBrushItx:u.db.prepare("INSERT INTO xBrushItx (ts, low, high, chart) VALUES (?, ?, ?, ?)")}),t}function o(t){console.log("worker doing job",t);var e="xFilterRequest",n=u.db.exec("\n    SELECT sql\n    FROM sqlite_master\n    WHERE\n      type = 'table'\n      AND name = 'xFilterRequest';\n  ")[0].values[0];if(!n)throw new Error(e+" not defined in client db");var r=u.db.exec("SELECT * FROM xFilterRequest WHERE requestId = "+t)[0];if(!r||!r.values)throw new Error("This should not have happened, xFilterRequest should have been defined with "+t);var a="\n    DROP TABLE IF EXISTS xFilterRequest;\n    "+n+";\n    INSERT INTO "+e+" VALUES "+r.values.map(function(t){return"("+t.map(function(t){return t||"null"}).join(", ")+")"})+";\n  ";console.log("sharesql",a),f.xFilterWorker().then(function(e){e.postMessage({id:"insertThenShare:"+t,action:"exec",sql:a})})}function c(){u.db.run("\n  ")}Object.defineProperty(e,"__esModule",{value:!0});var u=n(5),f=n(220);e.XFILTERCHARTS=["hour","delay","distance"],e.parseChartData=r,e.setupXFilterDB=a,e.getXFilterStmts=i,e.queryWorker=o,e.updateComponents=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=n(86),i=n(87);a.render(r.createElement(i.PageContainer,null),document.getElementById("wrapper"))},function(t,e){t.exports=ReactDOM},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=n(88),i=n(217);e.PageContainer=function(){return r.createElement(r.Fragment,null,r.createElement("h1",null,"Programming Asynchronous Interactions: History of Intentions"),r.createElement("h3",{style:{textAlign:"right",lineHeight:"70%"}},"Let's Make (UI) History!"),r.createElement("p",null,"Interactive visualizations is a great tool for working with data with lower cognitive overhead.  However creating a custom interactive visualization for datasets that cannot fit on a browser is very complicated, where heavily customized code seems the only option. Take ",r.createElement("a",{href:" https://github.com/mapd/mapd-crossfilter/blob/master/src/mapd-crossfilter.js "},"MapD's asynchronous crossfilter that talks to their relational backend")," as an example---it's complex.  While recently there has been much work on how to make static visualization (",r.createElement("a",{href:"http://ggplot2.org/"},"ggplot2"),", ",r.createElement("a",{href:"https://www.highcharts.com/"},"Highcharts"),", ",r.createElement("a",{href:"https://seaborn.pydata.org/"},"Seaborn"),"), and interactive visualizations (the amazing ",r.createElement("a",null,"d3"),") easier to program, there are few that enables custom implementation for interactions that talks to backends.  ",r.createElement("a",{href:"https://www.tableau.com/"},"Tableau")," is an amazing interactive tool that talks to backends, but it is a fixed authoring environment. Beyond the complexity of expressing the query, doing it in time/space efficient manners, that deal with asynchrony is even harder.   Asynchrony is increasingly an realitym, startups like MapD and Graphistry enable extensive analyitics that talks constatnly with the backeneds.  In addition, as we incorporate more complex processing mechanisms, such as ",r.createElement("a",{href:"https://codepen.io/btholt/pen/JMwQYg"},'using a "cognitive service" API to process speech as input to the UI '),".  This post is about ",r.createElement("b",null,"taming the complexity of creating data-processing interactions frontend applications"),"."),r.createElement("h2",null),r.createElement("p",null),r.createElement("p",null,"We will walk through two main examples to illustrate how the framework is applied. The first example focues on asynchrony, and the second example focuses on the expressiveness and simplicity of using SQL to drive interactions.f"),r.createElement(a.default,null),r.createElement(i.default,null),r.createElement("p",null,"Of course, using sql.js is a lot of Javascript (a whopping 2.7 MB!), and initiating the first query takes over a second, furthermore, since SQLite does not offer materialized views, many of the queries need to be recomputed and may be inefficient, at least compared to custom implementations.  However none of these are fundamental limiations.  In fact, there are a lot of techniques we could borrow from database research, such as materialized views, to make things faster, and PL techniques to potentially compile the operators down to a small set of code and prune out the unessary code and related logic (e.g. get rid of index managing code if we are not going to be using indices, as an example)."),r.createElement("p",null,"To sum, our primary insight is that often, interactions can be mapped to queries over the original and derived data tables in the sequence of user itneractions.  Using relational algebra, we can declratively reason about the underlying data and the user interaction history to better express the interaction itself, manage caching, get fairly efficient implementations with low overhead, and deal with asynchrony,"))}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(89),o=n(134),c=n(20),u=n(30),f=function(t){function e(e){var n=t.call(this,e)||this;return n.makeLogical=n.makeLogical.bind(n),n.state={delay:2e3,showScent:!1,streaming:!1,isLogical:!1},n}return r(e,t),e.prototype.makeLogical=function(){this.setState({isLogical:!0})},e.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement("h2",null,"Map Navigation and Brushing Interaction Example"),a.createElement("p",null,"Here, we have a scenario where in real time, a user is browsing login actvities of users, and they can select the dots to get some aggreated dataabout what the set of users selected."),a.createElement("div",{style:{position:"sticky",top:0,backgroundColor:"white"}},a.createElement(o.default,{logical:this.state.isLogical})),a.createElement("p",null,"What is the framework we used to make that happen? First, there are two user-initiated interactions: (1) panning the map and (2) brushing to select the pins. To capture these two interactions, we have some javascript hooks which computes the specified region of the map via the upper left and lower right corner of the bounding box, so the two tables that store the interactions will look like the following. Ignore the ",a.createElement("code",null,"undoe")," for now."),a.createElement(i.default,{key:"defineMapItx",hideQuery:!0,query:"SELECT sql\n          FROM sqlite_master\n          WHERE\n            type = 'table'\n            AND name = 'mapItx'"}),a.createElement(i.default,{execute:!1,key:"inspectMapItx",query:"SELECT * FROM mapItx ORDER BY ts DESC LIMIT 10;",explainTxt:"You can see your past panning and zooming interaction specifications by running the following code"}),a.createElement("p",null,"The code for the brush is slightly different, as the brush is dynamically updated as the brush moves, so we introduce a basic one level hierarchy where the with the first mouse down, we create an entry in ",a.createElement("code",null,"brushItx")," and then we create entries in ",a.createElement("code",null,"brushItxItems"),".v"),a.createElement(i.default,{key:"defineBrushItx",hideQuery:!0,query:"SELECT name, sql\n          FROM sqlite_master\n          WHERE\n            type = 'table'\n            AND (name = 'brushItx' OR name = 'brushItxItems')"}),a.createElement(i.default,{key:"inspectBrushItx",query:"\n        SELECT *\n        FROM brushItx\n          JOIN brushItxItems ON brushItx.itxId = brushItxItems.itxId\n        ORDER BY ts DESC LIMIT 15;",explainTxt:"You can see your past brush specifications by running the following code"}),a.createElement("p",null,"Notice how you can still interact with the map when the pin results are being loaded. Can't see it? Press the button to make the pins load slower."),a.createElement("button",{className:"btn",onClick:function(){var t=c.mapZoomLatency("pin");c.mapZoomLatency("pin",t.min+2e3,t.max+2e3)}},"Make pin loading slower"),a.createElement("p",null,"What we did here is that we are allowing the state of the map to be defined by the most recent interaction regardless of whether its data sdepencicies have loaded as below."),a.createElement(i.default,{key:"definemapOnlyStateNoneBlocking",hideQuery:!0,execute:!0,query:"SELECT name, sql\n          FROM sqlite_master\n          WHERE\n            type = 'view'\n            AND name = 'mapOnlyStateNoneBlocking'"}),a.createElement("p",null,"Let's say somehow you want the panning interation to block, that is, do not render the map until the pins have loaded, and also disable brushing, then you can do the following."),a.createElement(i.default,{hideQuery:!0,execute:!0,query:"SELECT name, sql\n        FROM sqlite_master\n        WHERE\n          type = 'view'\n          AND name = 'mapOnlyStateBlocking'",explainTxt:'The following code fines mapOnlyStateBlocking, which is a view that "blocks" state from being updated until the pins have loaded locally, it decides what interaction defines the current state by selecting the most recently loaded pin.',key:"seeMapOnlyStateBlocking"}),a.createElement("p",null,"You can switch back and forth between the following options to test it out."),a.createElement(i.default,{query:u.switchToBlocking,hideQuery:!0,key:"changeToBlocking",buttonTxt:"change to blocking map navigation"}),a.createElement(i.default,{query:u.switchToNoneBlocking,hideQuery:!0,key:"changeToNoneBlocking",buttonTxt:"change to none blocking map navigation"}),a.createElement("p",null,"At this point perhaps a lot of the pins are already cached, so again you cannot see the effects of latency, well, we can clear the cache by simply running the following queries."),a.createElement(i.default,{query:u.removeCacheSQL}),a.createElement("p",null,'These queries highlights the aspects of "blocking" that is focused on the rendering, what about the interaction input?  Let\'s first take a look at how one implements interactions.  For the map, a React component carries the current state of the map, and since the map is blocked from moving until the pins are loaded, pressing the zoom in/out or pan will all be the same interactions, resulting in the same result.  However, if the map navigation is nonblocking, then the React state is up to date with the interaction, so if the "left" button is pressed three times, it will move three times left.  Lastly, there is a third option to allow for new interactions while the rendering is blocked, we call this ',a.createElement("i",null,"logical interaction"),', the idea is that the client maintains another separate piece of state, just for map navigation, where it can update independently of the database state, unmanaged. Then even if the loading is blocked, the interactions precede in the background, so once again, when the "left" button is pressed three times, then regardless of whether the rendering is blocked, the map will eventually move 3 to the left, instead of just one.'),a.createElement("button",{className:"btn",onClick:this.makeLogical},"Separate interaction intention (logical interaction)"),a.createElement("p",null,"As you can see, data dependent controls are pretty hard to reason about both for the developer and the users in the face of high latency and asynchrony, even with our framework, because the application logic is more complex.  We encourage designing with data ",a.createElement("i",null,"independent")," controls."),a.createElement("p",null,"To enable streaming, we can simply insert into the ",a.createElement("code",null,"pinData")," table.  We implemented an (emulated) pulling function from the server to update the pins, click the Start Streaming button under the visualization to see the effect on the visualization.  Notice how if you already have a brush there, if a new pin falls into the selected region, then the chart data is automatically updated."),a.createElement("p",null,"The relational model of interaction also makes manipulating the state of the visualization very simple.  Check out the functionalities of the buttons below the visualization to see their effect.  You can download the session and open it with my SQL client that is compatible with SQLite (e.g. ",a.createElement("a",{href:"https://sqlite.org/cli.html"},"sqlite3 command line"),", or via ",a.createElement("a",{href:"http://pandas.pydata.org/pandas-docs/stable/io.html#reading-tables"},"pandas on Python notebook"),")."),a.createElement("p",null,"You can also use these queries to construct animations --- often, a finding comes from a process and not the final visualization, this makes possible richer ways to create illustrations to communicate.  Instead of having a set of static charts, now you can savean interaction session and playing it step by step to communicate the finding, without any additional work!"))},e}(a.Component);e.default=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(5),o=function(t){function e(e){var n=t.call(this,e)||this;n.handleChange=n.handleChange.bind(n),n.executeQuery=n.executeQuery.bind(n);var r=null;if(console.log("DEBUG, [QueryDb]",e.query),e.execute){if(!n.props.query)throw new Error("Automatically executing QueryDB should have predefined query");console.log("executed querydb at constructor time"),r=i.db.exec(n.props.query)[0]}return n.state={query:e.query,result:r,queried:!!e.execute},n}return r(e,t),e.prototype.handleChange=function(t){this.setState({query:t.target.value})},e.prototype.executeQuery=function(){var t=i.db.exec(this.state.query)[0];this.setState({result:t,queried:!0})},e.prototype.render=function(){var t,e,n=this.props,r=n.explainTxt,i=n.buttonTxt,o=n.hideQuery,c=this.state,u=c.result,f=c.query,s=c.queried;u?t=a.createElement("table",{style:{fontFamily:"courier"}},a.createElement("thead",null,u.columns.map(function(t){return a.createElement("th",null,t)})),a.createElement("tbody",null,u.values.map(function(t){return a.createElement("tr",null,t.map(function(t,e){var n="ts"===u.columns[e]?new Date(t).getHours()+":"+new Date(t).getMinutes()+":"+new Date(t).getSeconds():t;return n=u.columns[e].toLowerCase().indexOf("lat")>-1||u.columns[e].toLowerCase().indexOf("long")>-1?Math.round(100*n)/100:n,a.createElement("td",null,n)}))}))):s&&(t=a.createElement("p",{style:{fontFamily:"courier",color:"red"}},"No result")),r&&(e=a.createElement("p",{style:{color:"blue"}},r));var l=a.createElement(a.Fragment,null,a.createElement("div",{style:{float:"left"}},a.createElement("textarea",{value:f,onChange:this.handleChange,rows:f.split("\n").length+1,cols:80,style:{fontFamily:"courier"}})),a.createElement("div",{style:{float:"left",paddingLeft:10}},a.createElement("button",{className:"btn",onClick:this.executeQuery},i)),a.createElement("div",{style:{clear:"both"}}));return a.createElement(a.Fragment,null,e,o?null:l,t)},e.defaultProps={hideQuery:!1,execute:!1,buttonTxt:"run",queried:!1},e}(a.Component);e.default=o},function(t,e){t.exports=SQL},function(t,e,n){"use strict";function r(t,e){j.push(w=[b=t,p=t]),e<h&&(h=e),e>g&&(g=e)}function a(t,e){var n=Object(S.a)([t*M.r,e*M.r]);if(O){var r=Object(S.c)(O,n),a=[r[1],-r[0],0],i=Object(S.c)(a,r);Object(S.e)(i),i=Object(S.g)(i);var o,c=t-m,u=c>0?1:-1,f=i[0]*M.h*u,l=Object(M.a)(c)>180;l^(u*m<f&&f<u*t)?(o=i[1]*M.h)>g&&(g=o):(f=(f+360)%360-180,l^(u*m<f&&f<u*t)?(o=-i[1]*M.h)<h&&(h=o):(e<h&&(h=e),e>g&&(g=e))),l?t<m?s(b,t)>s(b,p)&&(p=t):s(t,p)>s(b,p)&&(b=t):p>=b?(t<b&&(b=t),t>p&&(p=t)):t>m?s(b,t)>s(b,p)&&(p=t):s(t,p)>s(b,p)&&(b=t)}else j.push(w=[b=t,p=t]);e<h&&(h=e),e>g&&(g=e),O=n,m=t}function i(){I.point=a}function o(){w[0]=b,w[1]=p,I.point=r,O=null}function c(t,e){if(O){var n=t-m;k.add(Object(M.a)(n)>180?n+(n>0?360:-360):n)}else v=t,y=e;x.b.point(t,e),a(t,e)}function u(){x.b.lineStart()}function f(){c(v,y),x.b.lineEnd(),Object(M.a)(k)>M.i&&(b=-(p=180)),w[0]=b,w[1]=p,O=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function d(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var b,h,p,g,m,v,y,O,j,w,E=n(8),x=n(40),S=n(12),M=n(0),N=n(7),k=Object(E.a)(),I={point:r,lineStart:i,lineEnd:o,polygonStart:function(){I.point=c,I.lineStart=u,I.lineEnd=f,k.reset(),x.b.polygonStart()},polygonEnd:function(){x.b.polygonEnd(),I.point=r,I.lineStart=i,I.lineEnd=o,x.a<0?(b=-(p=180),h=-(g=90)):k>M.i?g=90:k<-M.i&&(h=-90),w[0]=b,w[1]=p}};e.a=function(t){var e,n,r,a,i,o,c;if(g=p=-(b=h=1/0),j=[],Object(N.a)(t,I),n=j.length){for(j.sort(l),e=1,r=j[0],i=[r];e<n;++e)a=j[e],d(r,a[0])||d(r,a[1])?(s(r[0],a[1])>s(r[0],r[1])&&(r[1]=a[1]),s(a[0],r[1])>s(r[0],r[1])&&(r[0]=a[0])):i.push(r=a);for(o=-1/0,n=i.length-1,e=0,r=i[n];e<=n;r=a,++e)a=i[e],(c=s(r[1],a[0]))>o&&(o=c,b=a[0],p=r[1])}return j=w=null,b===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[b,h],[p,g]]}},function(t,e,n){"use strict";function r(t,e){t*=I.r,e*=I.r;var n=Object(I.g)(e);a(n*Object(I.g)(t),n*Object(I.t)(t),Object(I.t)(e))}function a(t,e,n){++b,p+=(t-p)/b,g+=(e-g)/b,m+=(n-m)/b}function i(){T.point=o}function o(t,e){t*=I.r,e*=I.r;var n=Object(I.g)(e);M=n*Object(I.g)(t),N=n*Object(I.t)(t),k=Object(I.t)(e),T.point=c,a(M,N,k)}function c(t,e){t*=I.r,e*=I.r;var n=Object(I.g)(e),r=n*Object(I.g)(t),i=n*Object(I.t)(t),o=Object(I.t)(e),c=Object(I.e)(Object(I.u)((c=N*o-k*i)*c+(c=k*r-M*o)*c+(c=M*i-N*r)*c),M*r+N*i+k*o);h+=c,v+=c*(M+(M=r)),y+=c*(N+(N=i)),O+=c*(k+(k=o)),a(M,N,k)}function u(){T.point=r}function f(){T.point=l}function s(){d(x,S),T.point=r}function l(t,e){x=t,S=e,t*=I.r,e*=I.r,T.point=d;var n=Object(I.g)(e);M=n*Object(I.g)(t),N=n*Object(I.t)(t),k=Object(I.t)(e),a(M,N,k)}function d(t,e){t*=I.r,e*=I.r;var n=Object(I.g)(e),r=n*Object(I.g)(t),i=n*Object(I.t)(t),o=Object(I.t)(e),c=N*o-k*i,u=k*r-M*o,f=M*i-N*r,s=Object(I.u)(c*c+u*u+f*f),l=Object(I.c)(s),d=s&&-l/s;j+=d*c,w+=d*u,E+=d*f,h+=l,v+=l*(M+(M=r)),y+=l*(N+(N=i)),O+=l*(k+(k=o)),a(M,N,k)}var b,h,p,g,m,v,y,O,j,w,E,x,S,M,N,k,I=n(0),P=n(6),R=n(7),T={sphere:P.a,point:r,lineStart:i,lineEnd:u,polygonStart:function(){T.lineStart=f,T.lineEnd=s},polygonEnd:function(){T.lineStart=i,T.lineEnd=u}};e.a=function(t){b=h=p=g=m=v=y=O=j=w=E=0,Object(R.a)(t,T);var e=j,n=w,r=E,a=e*e+n*n+r*r;return a<I.j&&(e=v,n=y,r=O,h<I.i&&(e=p,n=g,r=m),(a=e*e+n*n+r*r)<I.j)?[NaN,NaN]:[Object(I.e)(n,e)*I.h,Object(I.c)(r/Object(I.u)(a))*I.h]}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";n(51)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(55),n(49),n(97),n(54),n(98),n(56),n(57),n(58)},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";n(55),n(9),n(13),n(23)},function(t,e,n){"use strict";n(52)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(13)},function(t,e,n){"use strict";n(9),n(13),n(23)},function(t,e,n){"use strict";e.a=function(t){for(var e,n,r,a=t.length,i=-1,o=0;++i<a;)o+=t[i].length;for(n=new Array(o);--a>=0;)for(r=t[a],e=r.length;--e>=0;)n[--o]=r[e];return n}},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(9)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(60)},function(t,e,n){"use strict";var r=n(17);e.a=function(){var t,e,n,a=0,i=0,o=960,c=500;return n={stream:function(n){return t&&e===n?t:t=Object(r.a)(a,i,o,c)(e=n)},extent:function(r){return arguments.length?(a=+r[0][0],i=+r[0][1],o=+r[1][0],c=+r[1][1],t=e=null,n):[[a,i],[o,c]]}}}},function(t,e,n){"use strict";e.a=function(t,e,n,r,a,i){var o,c=t[0],u=t[1],f=e[0],s=e[1],l=0,d=1,b=f-c,h=s-u;if(o=n-c,b||!(o>0)){if(o/=b,b<0){if(o<l)return;o<d&&(d=o)}else if(b>0){if(o>d)return;o>l&&(l=o)}if(o=a-c,b||!(o<0)){if(o/=b,b<0){if(o>d)return;o>l&&(l=o)}else if(b>0){if(o<l)return;o<d&&(d=o)}if(o=r-u,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>l&&(l=o)}if(o=i-u,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<d&&(d=o)}return l>0&&(t[0]=c+l*b,t[1]=u+l*h),d<1&&(e[0]=c+d*b,e[1]=u+d*h),!0}}}}}},function(t,e,n){"use strict";function r(t,e){return!(!t||!b.hasOwnProperty(t.type))&&b[t.type](t,e)}function a(t,e){return 0===Object(s.a)(t,e)}function i(t,e){var n=Object(s.a)(t[0],t[1]);return Object(s.a)(t[0],e)+Object(s.a)(e,t[1])<=n+l.i}function o(t,e){return!!Object(f.a)(t.map(c),u(e))}function c(t){return t=t.map(u),t.pop(),t}function u(t){return[t[0]*l.r,t[1]*l.r]}var f=n(48),s=n(62),l=n(0),d={Feature:function(t,e){return r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,a=-1,i=n.length;++a<i;)if(r(n[a].geometry,e))return!0;return!1}},b={Sphere:function(){return!0},Point:function(t,e){return a(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(a(n[r],e))return!0;return!1},LineString:function(t,e){return i(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)if(i(n[r],e))return!0;return!1},Polygon:function(t,e){return o(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)if(o(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,a=-1,i=n.length;++a<i;)if(r(n[a],e))return!0;return!1}};e.a=function(t,e){return(t&&d.hasOwnProperty(t.type)?d[t.type]:r)(t,e)}},function(t,e,n){"use strict";function r(t,e,n){var r=Object(c.b)(t,e-u.i,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function a(t,e,n){var r=Object(c.b)(t,e-u.i,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function i(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Object(c.b)(Object(u.f)(f/O)*O,o,O).map(g).concat(Object(c.b)(Object(u.f)(b/j)*j,d,j).map(m)).concat(Object(c.b)(Object(u.f)(i/v)*v,n,v).filter(function(t){return Object(u.a)(t%O)>u.i}).map(h)).concat(Object(c.b)(Object(u.f)(l/y)*y,s,y).filter(function(t){return Object(u.a)(t%j)>u.i}).map(p))}var n,i,o,f,s,l,d,b,h,p,g,m,v=10,y=v,O=90,j=360,w=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[g(f).concat(m(d).slice(1),g(o).reverse().slice(1),m(b).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(f=+e[0][0],o=+e[1][0],b=+e[0][1],d=+e[1][1],f>o&&(e=f,f=o,o=e),b>d&&(e=b,b=d,d=e),t.precision(w)):[[f,b],[o,d]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],l=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),l>s&&(e=l,l=s,s=e),t.precision(w)):[[i,l],[n,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(O=+e[0],j=+e[1],t):[O,j]},t.stepMinor=function(e){return arguments.length?(v=+e[0],y=+e[1],t):[v,y]},t.precision=function(e){return arguments.length?(w=+e,h=r(l,s,90),p=a(i,n,w),g=r(b,d,90),m=a(f,o,w),t):w},t.extentMajor([[-180,-90+u.i],[180,90-u.i]]).extentMinor([[-180,-80-u.i],[180,80+u.i]])}function o(){return i()()}e.a=i,e.b=o;var c=n(22),u=n(0)},function(t,e,n){"use strict";var r=n(0);e.a=function(t,e){var n=t[0]*r.r,a=t[1]*r.r,i=e[0]*r.r,o=e[1]*r.r,c=Object(r.g)(a),u=Object(r.t)(a),f=Object(r.g)(o),s=Object(r.t)(o),l=c*Object(r.g)(n),d=c*Object(r.t)(n),b=f*Object(r.g)(i),h=f*Object(r.t)(i),p=2*Object(r.c)(Object(r.u)(Object(r.m)(o-a)+c*f*Object(r.m)(i-n))),g=Object(r.t)(p),m=p?function(t){var e=Object(r.t)(t*=p)/g,n=Object(r.t)(p-t)/g,a=n*l+e*b,i=n*d+e*h,o=n*u+e*s;return[Object(r.e)(i,a)*r.h,Object(r.e)(o,Object(r.u)(a*a+i*i))*r.h]}:function(){return[n*r.h,a*r.h]};return m.distance=p,m}},function(t,e,n){"use strict";var r=n(24),a=n(7),i=n(116),o=n(64),c=n(117),u=n(118),f=n(119),s=n(120);e.a=function(t,e){function n(t){return t&&("function"==typeof b&&d.pointRadius(+b.apply(this,arguments)),Object(a.a)(t,l(d))),d.result()}var l,d,b=4.5;return n.area=function(t){return Object(a.a)(t,l(i.a)),i.a.result()},n.measure=function(t){return Object(a.a)(t,l(f.a)),f.a.result()},n.bounds=function(t){return Object(a.a)(t,l(o.a)),o.a.result()},n.centroid=function(t){return Object(a.a)(t,l(c.a)),c.a.result()},n.projection=function(e){return arguments.length?(l=null==e?(t=null,r.a):(t=e).stream,n):t},n.context=function(t){return arguments.length?(d=null==t?(e=null,new s.a):new u.a(e=t),"function"!=typeof b&&d.pointRadius(b),n):e},n.pointRadius=function(t){return arguments.length?(b="function"==typeof t?t:(d.pointRadius(+t),+t),n):b},n.projection(t).context(e)}},function(t,e,n){"use strict";function r(){g.point=a}function a(t,e){g.point=i,c=f=t,u=s=e}function i(t,e){p.add(s*t-f*e),f=t,s=e}function o(){i(c,u)}var c,u,f,s,l=n(8),d=n(0),b=n(6),h=Object(l.a)(),p=Object(l.a)(),g={point:b.a,lineStart:b.a,lineEnd:b.a,polygonStart:function(){g.lineStart=r,g.lineEnd=o},polygonEnd:function(){g.lineStart=g.lineEnd=g.point=b.a,h.add(Object(d.a)(p)),p.reset()},result:function(){var t=h/2;return h.reset(),t}};e.a=g},function(t,e,n){"use strict";function r(t,e){m+=t,v+=e,++y}function a(){M.point=i}function i(t,e){M.point=o,r(h=t,p=e)}function o(t,e){var n=t-h,a=e-p,i=Object(g.u)(n*n+a*a);O+=i*(h+t)/2,j+=i*(p+e)/2,w+=i,r(h=t,p=e)}function c(){M.point=r}function u(){M.point=s}function f(){l(d,b)}function s(t,e){M.point=l,r(d=h=t,b=p=e)}function l(t,e){var n=t-h,a=e-p,i=Object(g.u)(n*n+a*a);O+=i*(h+t)/2,j+=i*(p+e)/2,w+=i,i=p*t-h*e,E+=i*(h+t),x+=i*(p+e),S+=3*i,r(h=t,p=e)}var d,b,h,p,g=n(0),m=0,v=0,y=0,O=0,j=0,w=0,E=0,x=0,S=0,M={point:r,lineStart:a,lineEnd:c,polygonStart:function(){M.lineStart=u,M.lineEnd=f},polygonEnd:function(){M.point=r,M.lineStart=a,M.lineEnd=c},result:function(){var t=S?[E/S,x/S]:w?[O/w,j/w]:y?[m/y,v/y]:[NaN,NaN];return m=v=y=O=j=w=E=x=S=0,t}};e.a=M},function(t,e,n){"use strict";function r(t){this._context=t}e.a=r;var a=n(0),i=n(6);r.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,a.w)}},result:i.a}},function(t,e,n){"use strict";function r(t,e){h.point=a,o=u=t,c=f=e}function a(t,e){u-=t,f-=e,b.add(Object(l.u)(u*u+f*f)),u=t,f=e}var i,o,c,u,f,s=n(8),l=n(0),d=n(6),b=Object(s.a)(),h={point:d.a,lineStart:function(){h.point=r},lineEnd:function(){i&&a(o,c),h.point=d.a},polygonStart:function(){i=!0},polygonEnd:function(){i=null},result:function(){var t=+b;return b.reset(),t}};e.a=h},function(t,e,n){"use strict";function r(){this._string=[]}function a(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}e.a=r,r.prototype={_radius:4.5,_circle:a(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=a(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}}},function(t,e,n){"use strict";function r(t){return Object(c.b)({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function a(t,e){function n(r,a,i,c,u,s,l,d,b,h,p,g,m,v){var y=l-r,O=d-a,j=y*y+O*O;if(j>4*e&&m--){var w=c+h,E=u+p,x=s+g,S=Object(o.u)(w*w+E*E+x*x),M=Object(o.c)(x/=S),N=Object(o.a)(Object(o.a)(x)-1)<o.i||Object(o.a)(i-b)<o.i?(i+b)/2:Object(o.e)(E,w),k=t(N,M),I=k[0],P=k[1],R=I-r,T=P-a,A=O*R-y*T;(A*A/j>e||Object(o.a)((y*R+O*T)/j-.5)>.3||c*h+u*p+s*g<f)&&(n(r,a,i,c,u,s,I,P,N,w/=S,E/=S,x,m,v),v.point(I,P),n(I,P,N,w,E,x,l,d,b,h,p,g,m,v))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function a(){y=NaN,x.point=o,e.lineStart()}function o(r,a){var o=Object(i.a)([r,a]),c=t(r,a);n(y,O,v,j,w,E,y=c[0],O=c[1],v=r,j=o[0],w=o[1],E=o[2],u,e),e.point(y,O)}function c(){x.point=r,e.lineEnd()}function f(){a(),x.point=s,x.lineEnd=l}function s(t,e){o(d=t,e),b=y,h=O,p=j,g=w,m=E,x.point=o}function l(){n(y,O,v,j,w,E,b,h,d,p,g,m,u,e),x.lineEnd=c,c()}var d,b,h,p,g,m,v,y,O,j,w,E,x={point:r,lineStart:a,lineEnd:c,polygonStart:function(){e.polygonStart(),x.lineStart=f},polygonEnd:function(){e.polygonEnd(),x.lineStart=a}};return x}}var i=n(12),o=n(0),c=n(18),u=16,f=Object(o.g)(30*o.r);e.a=function(t,e){return+e?a(t,e):r(t)}},function(t,e,n){"use strict";function r(t){function e(t,e){return[t*n,Object(a.t)(e)/n]}var n=Object(a.g)(t);return e.invert=function(t,e){return[t/n,Object(a.c)(e*n)]},e}e.a=r;var a=n(0)},function(t,e,n){"use strict";function r(t){var e=t.length;return{point:function(n,r){for(var a=-1;++a<e;)t[a].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}var a=n(0),i=n(65),o=n(25),c=n(27);e.a=function(){function t(t){var e=t[0],n=t[1];return d=null,f.point(e,n),d||(s.point(e,n),d)||(l.point(e,n),d)}function e(){return n=u=null,t}var n,u,f,s,l,d,b=Object(i.a)(),h=Object(o.b)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p=Object(o.b)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(t,e){d=[t,e]}};return t.invert=function(t){var e=b.scale(),n=b.translate(),r=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?h:a>=.166&&a<.234&&r>=-.214&&r<-.115?p:b).invert(t)},t.stream=function(t){return n&&u===t?n:n=r([b.stream(u=t),h.stream(t),p.stream(t)])},t.precision=function(t){return arguments.length?(b.precision(t),h.precision(t),p.precision(t),e()):b.precision()},t.scale=function(e){return arguments.length?(b.scale(e),h.scale(.35*e),p.scale(e),t.translate(b.translate())):b.scale()},t.translate=function(t){if(!arguments.length)return b.translate();var n=b.scale(),r=+t[0],i=+t[1];return f=b.translate(t).clipExtent([[r-.455*n,i-.238*n],[r+.455*n,i+.238*n]]).stream(g),s=h.translate([r-.307*n,i+.201*n]).clipExtent([[r-.425*n+a.i,i+.12*n+a.i],[r-.214*n-a.i,i+.234*n-a.i]]).stream(g),l=p.translate([r-.205*n,i+.212*n]).clipExtent([[r-.214*n+a.i,i+.166*n+a.i],[r-.115*n-a.i,i+.234*n-a.i]]).stream(g),e()},t.fitExtent=function(e,n){return Object(c.a)(t,e,n)},t.fitSize=function(e,n){return Object(c.c)(t,e,n)},t.fitWidth=function(e,n){return Object(c.d)(t,e,n)},t.fitHeight=function(e,n){return Object(c.b)(t,e,n)},t.scale(1070)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),a=n(14),i=n(4),o=Object(a.b)(function(t){return Object(r.u)(2/(1+t))});o.invert=Object(a.a)(function(t){return 2*Object(r.c)(t/2)}),e.b=function(){return Object(i.a)(o).scale(124.75).clipAngle(179.999)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),a=n(14),i=n(4),o=Object(a.b)(function(t){return(t=Object(r.b)(t))&&t/Object(r.t)(t)});o.invert=Object(a.a)(function(t){return t}),e.b=function(){return Object(i.a)(o).scale(79.4188).clipAngle(179.999)}},function(t,e,n){"use strict";function r(t){return Object(i.v)((i.l+t)/2)}function a(t,e){function n(t,e){u>0?e<-i.l+i.i&&(e=-i.l+i.i):e>i.l-i.i&&(e=i.l-i.i);var n=u/Object(i.p)(r(e),o);return[n*Object(i.t)(o*t),u-n*Object(i.g)(o*t)]}var a=Object(i.g)(t),o=t===e?Object(i.t)(t):Object(i.n)(a/Object(i.g)(e))/Object(i.n)(r(e)/r(t)),u=a*Object(i.p)(r(t),o)/o;return o?(n.invert=function(t,e){var n=u-e,r=Object(i.s)(o)*Object(i.u)(t*t+n*n);return[Object(i.e)(t,Object(i.a)(n))/o*Object(i.s)(n),2*Object(i.d)(Object(i.p)(u/r,1/o))-i.l]},n):c.c}e.a=a;var i=n(0),o=n(26),c=n(28);e.b=function(){return Object(o.a)(a).scale(109.5).parallels([30,30])}},function(t,e,n){"use strict";function r(t,e){function n(t,e){var n=c-e,r=i*t;return[n*Object(a.t)(r),c-n*Object(a.g)(r)]}var r=Object(a.g)(t),i=t===e?Object(a.t)(t):(r-Object(a.g)(e))/(e-t),c=r/i+t;return Object(a.a)(i)<a.i?o.b:(n.invert=function(t,e){var n=c-e;return[Object(a.e)(t,Object(a.a)(n))/i*Object(a.s)(n),c-Object(a.s)(i)*Object(a.u)(t*t+n*n)]},n)}e.a=r;var a=n(0),i=n(26),o=n(66);e.b=function(){return Object(i.a)(r).scale(131.154).center([0,13.9389])}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.g)(e),r=Object(a.g)(t)*n;return[n*Object(a.t)(t)/r,Object(a.t)(e)/r]}e.b=r;var a=n(0),i=n(14),o=n(4);r.invert=Object(i.a)(a.d),e.a=function(){return Object(o.a)(r).scale(144.049).clipAngle(60)}},function(t,e,n){"use strict";function r(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?i.a:Object(o.b)({point:function(a,i){this.stream.point(a*t+n,i*e+r)}})}var a=n(17),i=n(24),o=n(18),c=n(27);e.a=function(){function t(){return u=f=null,s}var e,n,o,u,f,s,l=1,d=0,b=0,h=1,p=1,g=i.a,m=null,v=i.a;return s={stream:function(t){return u&&f===t?u:u=g(v(f=t))},postclip:function(r){return arguments.length?(v=r,m=e=n=o=null,t()):v},clipExtent:function(r){return arguments.length?(v=null==r?(m=e=n=o=null,i.a):Object(a.a)(m=+r[0][0],e=+r[0][1],n=+r[1][0],o=+r[1][1]),t()):null==m?null:[[m,e],[n,o]]},scale:function(e){return arguments.length?(g=r((l=+e)*h,l*p,d,b),t()):l},translate:function(e){return arguments.length?(g=r(l*h,l*p,d=+e[0],b=+e[1]),t()):[d,b]},reflectX:function(e){return arguments.length?(g=r(l*(h=e?-1:1),l*p,d,b),t()):h<0},reflectY:function(e){return arguments.length?(g=r(l*h,l*(p=e?-1:1),d,b),t()):p<0},fitExtent:function(t,e){return Object(c.a)(s,t,e)},fitSize:function(t,e){return Object(c.c)(s,t,e)},fitWidth:function(t,e){return Object(c.d)(s,t,e)},fitHeight:function(t,e){return Object(c.b)(s,t,e)}}}},function(t,e,n){"use strict";function r(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}e.b=r;var a=n(4),i=n(0);r.invert=function(t,e){var n,r=e,a=25;do{var o=r*r,c=o*o;r-=n=(r*(1.007226+o*(.015085+c*(.028874*o-.044475-.005916*c)))-e)/(1.007226+o*(.045255+c*(.259866*o-.311325-.005916*11*c)))}while(Object(i.a)(n)>i.i&&--a>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},e.a=function(){return Object(a.a)(r).scale(175.295)}},function(t,e,n){"use strict";function r(t,e){return[Object(a.g)(e)*Object(a.t)(t),Object(a.t)(e)]}e.b=r;var a=n(0),i=n(14),o=n(4);r.invert=Object(i.a)(a.c),e.a=function(){return Object(o.a)(r).scale(249.5).clipAngle(90+a.i)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.g)(e),r=1+Object(a.g)(t)*n;return[n*Object(a.t)(t)/r,Object(a.t)(e)/r]}e.b=r;var a=n(0),i=n(14),o=n(4);r.invert=Object(i.a)(function(t){return 2*Object(a.d)(t)}),e.a=function(){return Object(o.a)(r).scale(250).clipAngle(142)}},function(t,e,n){"use strict";function r(t,e){return[Object(a.n)(Object(a.v)((a.l+e)/2)),-t]}e.b=r;var a=n(0),i=n(28);r.invert=function(t,e){return[-e,2*Object(a.d)(Object(a.k)(t))-a.l]},e.a=function(){var t=Object(i.b)(r),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(135),o=n(11),c=n(30),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.componentDidMount=function(){c.setupMapDB(),c.getMapZoomStatements().insertNavItx.run([+new Date].concat(o.NWStart,o.SEStart))},e.prototype.render=function(){return a.createElement("div",{style:{width:800,height:500}},a.createElement(i.default,{width:800,height:400,logical:this.props.logical}))},e}(a.Component);e.default=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(29),o=n(11),c=n(5),u=n(30),f=n(20),s=n(214),l=n(215),d=function(t){function e(e){var n=t.call(this,e)||this;return n.setMapPending=n.setMapPending.bind(n),n.setMapBounds=n.setMapBounds.bind(n),n.interact=n.interact.bind(n),n.replay=n.replay.bind(n),n.handleStreaming=n.handleStreaming.bind(n),n.setReplayIntervalNull=n.setReplayIntervalNull.bind(n),n.state={replayIntervalId:null,shiftDown:!1,navSelection:null,streaming:!1,intendedNavSelection:null,controlsDisabled:{in:!1,out:!1,left:!1,right:!1,up:!1,down:!1,brush:!1},pending:!1},n}return r(e,t),e.prototype.setMapPending=function(t){this.setState({pending:!(t>0)})},e.prototype.setMapBounds=function(t,e,n,r){var a={nw:[n,e],se:[r,t]};this.state.intendedNavSelection?this.setState({navSelection:a}):this.setState({navSelection:a,intendedNavSelection:a})},e.prototype.handleKeyDown=function(t){var e=u.getMapZoomStatements();t.metaKey&&90===t.keyCode&&e.undoQuery.run()},e.prototype.componentDidMount=function(){var t=this.refs.canvas,e=t.getContext("2d"),n=this.props,r=n.width,a=n.height,i=n.scale;u.setupCanvasDependentUDFs(e,i,r,a),c.db.create_function("setMapPending",this.setMapPending),c.db.create_function("setMapBounds",this.setMapBounds),window.addEventListener("keydown",this.handleKeyDown)},e.prototype.handleStreaming=function(){this.setState(function(t){return{streaming:!t.streaming}}),s.toggleStreaming()},e.prototype.interact=function(t,e){var n=this;return function(){var r=n.props.logical?n.state.intendedNavSelection:n.state.navSelection,a=o.interactionHelper(r,t),c=a.nw,f=a.se,s=u.getMapZoomStatements(),l=Object.assign({},n.state.controlsDisabled),d=o.checkBounds(l,c,f);r||Object.keys(d).forEach(function(t){d[t]=!0}),JSON.stringify(d)!==JSON.stringify(n.state.controlsDisabled)&&n.setState({controlsDisabled:d}),n.setState({intendedNavSelection:{nw:c,se:f}}),s.insertNavItx.run([+new Date].concat(c,f)),i.select(".brush").call(e.move,null)}},e.prototype.onFileChange=function(t){c.loadDb(t.target.files[0])},e.prototype.replay=function(){if(this.state.replayIntervalId)window.clearInterval(this.state.replayIntervalId),this.setState({replayIntervalId:null});else{var t=u.replayBackwardsSession(1e3,this.setReplayIntervalNull);this.setState({replayIntervalId:t})}},e.prototype.setReplayIntervalNull=function(){this.setState({replayIntervalId:null})},e.prototype.render=function(){var t,e,n=this,r=this.props,s=r.width,d=r.height,b=r.scale,h=this.state,p=h.controlsDisabled,g=h.pending;if(this.state.navSelection){var m=f.mapBoundsToTransform(this.state.navSelection,b,s,d),v=o.getTranslatedMapping(m,b,s,d);e=i.brush().extent([[0,0],[innerWidth,innerHeight]]).on("start",function(){u.getMapZoomStatements().insertBrushItx.run([+new Date])}).on("end",function(){var t=u.getMapZoomStatements(),n=i.brushSelection(this);if(null!==n){var r=v.invert(n[0]),a=v.invert(n[1]);t.insertBrushItxItems.run([+new Date].concat(r,a)),i.select(".brush").call(e.move,null)}}),t=a.createElement("g",{ref:function(t){return i.select(t).call(e)},className:"brush"})}var y=["in","out","left","right","up","down"].map(function(t){return a.createElement("button",{className:"btn",style:{color:"purple"},onClick:n.interact(t,e),disabled:p[t]},t)}),O=g?"indicatorLine":"";return a.createElement("div",{style:{overflow:"auto"}},y,a.createElement("div",{style:{position:"relative",height:d,width:s}},a.createElement("div",{className:O,style:{height:5}}),a.createElement("canvas",{style:{position:"absolute"},ref:"canvas",width:s,height:d}),a.createElement("svg",{style:{position:"absolute"},width:s,height:d},t,a.createElement(l.default,{width:.2*s,height:.2*s,series:["Q1","Q2","Q3","Q4"]}))),a.createElement("button",{className:"btn",onClick:u.showPastMapBrushes},"Past Brushes"),a.createElement("button",{className:"btn",onClick:this.replay},"Animate Past"),a.createElement("button",{className:"btn",onClick:this.handleStreaming},this.state.streaming?"Pause":"Start"," Streaming"),a.createElement("br",null),a.createElement("button",{className:"btn",onClick:function(){return c.downloadQueryResultAsCSV("SELECT * FROM userData")}},"Export Brush Data"),a.createElement("button",{className:"btn",onClick:function(){c.db.exec(u.removeCacheSQL)}},"Clear Cache"),a.createElement("button",{className:"btn",onClick:c.downloadDB},"Download Session"),a.createElement("label",null,"Upload Session",a.createElement("input",{type:"file",onChange:this.onFileChange})))},e.defaultProps={debuging:!0,width:720,height:450,scale:64,maxLatency:4e3,minLatency:1e3},e}(a.Component);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31);n.d(e,"bbox",function(){return r.a}),n.d(e,"feature",function(){return r.b}),n.d(e,"mesh",function(){return r.e}),n.d(e,"meshArcs",function(){return r.f}),n.d(e,"merge",function(){return r.c}),n.d(e,"mergeArcs",function(){return r.d}),n.d(e,"neighbors",function(){return r.g}),n.d(e,"quantize",function(){return r.h}),n.d(e,"transform",function(){return r.i}),n.d(e,"untransform",function(){return r.j});var a=n(143);n.d(e,"topology",function(){return a.a});var i=n(154);n.d(e,"filter",function(){return i.a}),n.d(e,"filterAttached",function(){return i.b}),n.d(e,"filterAttachedWeight",function(){return i.c}),n.d(e,"filterWeight",function(){return i.d}),n.d(e,"planarRingArea",function(){return i.e}),n.d(e,"planarTriangleArea",function(){return i.f}),n.d(e,"presimplify",function(){return i.g}),n.d(e,"quantile",function(){return i.h}),n.d(e,"simplify",function(){return i.i}),n.d(e,"sphericalRingArea",function(){return i.j}),n.d(e,"sphericalTriangleArea",function(){return i.k})},function(t,e,n){"use strict";e.a=function(t,e){for(var n,r=t.length,a=r-e;a<--r;)n=t[a],t[a++]=t[r],t[r]=n}},function(t,e,n){"use strict";function r(t,e,n){var r,i,c;if(arguments.length>1)r=a(t,e,n);else for(i=0,r=new Array(c=t.arcs.length);i<c;++i)r[i]=i;return{type:"MultiLineString",arcs:Object(o.a)(t,r)}}function a(t,e,n){function r(t){var e=t<0?~t:t;(s[e]||(s[e]=[])).push({i:t,g:u})}function a(t){t.forEach(r)}function i(t){t.forEach(a)}function o(t){t.forEach(i)}function c(t){switch(u=t,t.type){case"GeometryCollection":t.geometries.forEach(c);break;case"LineString":a(t.arcs);break;case"MultiLineString":case"Polygon":i(t.arcs);break;case"MultiPolygon":o(t.arcs)}}var u,f=[],s=[];return c(e),s.forEach(null==n?function(t){f.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&f.push(t[0].i)}),f}e.b=r;var i=n(33),o=n(69);e.a=function(t){return Object(i.b)(t,r.apply(this,arguments))}},function(t,e,n){"use strict";function r(t){for(var e,n=-1,r=t.length,a=t[r-1],i=0;++n<r;)e=a,a=t[n],i+=e[0]*a[1]-e[1]*a[0];return Math.abs(i)}function a(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}}function a(t){t.forEach(function(e){e.forEach(function(e){(u[e=e<0?~e:e]||(u[e]=[])).push(t)})}),f.push(t)}function c(e){return r(Object(i.b)(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var u={},f=[],s=[];return e.forEach(n),f.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){u[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),f.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var n,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){u[t<0?~t:t].length<2&&r.push(t)})})}),r=Object(o.a)(t,r),(n=r.length)>1)for(var a,i,f=1,s=c(r[0]);f<n;++f)(a=c(r[f]))>s&&(i=r[0],r[0]=r[f],r[f]=i,s=a);return r})}}e.b=a;var i=n(33),o=n(69);e.a=function(t){return Object(i.b)(t,a.apply(this,arguments))}},function(t,e,n){"use strict";var r=n(141);e.a=function(t){function e(t,e){t.forEach(function(t){t<0&&(t=~t);var n=i[t];n?n.push(e):i[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}function a(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){a(t,e)}):t.type in c&&c[t.type](t.arcs,e)}var i={},o=t.map(function(){return[]}),c={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};t.forEach(a);for(var u in i)for(var f=i[u],s=f.length,l=0;l<s;++l)for(var d=l+1;d<s;++d){var b,h=f[l],p=f[d];(b=o[h])[u=Object(r.a)(b,p)]!==p&&b.splice(u,0,p),(b=o[p])[u=Object(r.a)(b,h)]!==h&&b.splice(u,0,h)}return o}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0,r=t.length;n<r;){var a=n+r>>>1;t[a]<e?n=a+1:r=a}return n}},function(t,e,n){"use strict";var r=n(67),a=n(70);e.a=function(t,e){function n(t){return h(t)}function i(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(i)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(n)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function o(t){var e,n=0,r=1,a=t.length,i=new Array(a);for(i[0]=h(t[0],0);++n<a;)((e=h(t[n],n))[0]||e[1])&&(i[r++]=e);return 1===r&&(i[r++]=[0,0]),i.length=r,i}if(t.transform)throw new Error("already quantized");if(e&&e.scale)d=t.bbox;else{if(!((c=Math.floor(e))>=2))throw new Error("n must be 2");d=t.bbox||Object(r.a)(t);var c,u=d[0],f=d[1],s=d[2],l=d[3];e={scale:[s-u?(s-u)/(c-1):1,l-f?(l-f)/(c-1):1],translate:[u,f]}}var d,b,h=Object(a.a)(e),p=t.objects,g={};for(b in p)g[b]=i(p[b]);return{type:"Topology",bbox:d,transform:e,objects:g,arcs:t.arcs.map(o)}}},function(t,e,n){"use strict";var r=n(144);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function a(t,e){var n,r=t[0],a=t[1],i=e[0],o=e[1];return a<r&&(n=r,r=a,a=n),o<i&&(n=i,i=o,o=n),r===i&&a===o}var i=n(145),o=n(146),c=n(149),u=n(150),f=n(151),s=n(152),l=n(34),d=n(153);e.a=function(t,e){function n(t){t&&O.hasOwnProperty(t.type)&&O[t.type](t)}function b(t){var e=[];do{var n=y.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function h(t){return t.map(b)}var p=Object(i.a)(t=Object(s.a)(t)),g=e>0&&p&&Object(d.a)(t,p,e),m=Object(c.a)(Object(o.a)(Object(f.a)(t))),v=m.coordinates,y=Object(l.a)(1.4*m.arcs.length,r,a);t=m.objects,m.bbox=p,m.arcs=m.arcs.map(function(t,e){return y.set(t,e),v.slice(t[0],t[1]+1)}),delete m.coordinates,v=null;var O={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=b(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(b)},Polygon:function(t){t.arcs=t.arcs.map(b)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}};for(var j in t)n(t[j]);return g&&(m.transform=g,m.arcs=Object(u.a)(m.arcs)),m}},function(t,e,n){"use strict";e.a=function(t){function e(t){null!=t&&f.hasOwnProperty(t.type)&&f[t.type](t)}function n(t){var e=t[0],n=t[1];e<i&&(i=e),e>c&&(c=e),n<o&&(o=n),n>u&&(u=n)}function r(t){t.forEach(n)}function a(t){t.forEach(r)}var i=1/0,o=1/0,c=-1/0,u=-1/0,f={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(a)}};for(var s in t)e(t[s]);return c>=i&&u>=o?[i,o,c,u]:void 0}},function(t,e,n){"use strict";function r(t,e,n,r){a(t,e,n),a(t,e,e+r),a(t,e+r,n)}function a(t,e,n){for(var r,a=e+(n---e>>1);e<a;++e,--n)r=t[e],t[e]=t[n],t[n]=r}var i=n(147);e.a=function(t){var e,n,a,o=Object(i.a)(t),c=t.coordinates,u=t.lines,f=t.rings;for(n=0,a=u.length;n<a;++n)for(var s=u[n],l=s[0],d=s[1];++l<d;)o.has(c[l])&&(e={0:l,1:s[1]},s[1]=l,s=s.next=e);for(n=0,a=f.length;n<a;++n)for(var b=f[n],h=b[0],p=h,g=b[1],m=o.has(c[h]);++p<g;)o.has(c[p])&&(m?(e={0:p,1:b[1]},b[1]=p,b=b.next=e):(r(c,h,g,g-p),c[g]=c[h],m=!0,p=h));return t}},function(t,e,n){"use strict";var r=n(148),a=n(34),i=n(71),o=n(72);e.a=function(t){function e(t,e,n,r){if(m[n]!==t){m[n]=t;var a=v[n];if(a>=0){var i=y[n];a===e&&i===r||a===r&&i===e||(++j,O[n]=1)}else v[n]=e,y[n]=r}}function n(t){return Object(o.a)(b[t])}function c(t,e){return Object(i.a)(b[t],b[e])}var u,f,s,l,d,b=t.coordinates,h=t.lines,p=t.rings,g=function(){for(var t=Object(a.a)(1.4*b.length,n,c,Int32Array,-1,Int32Array),e=new Int32Array(b.length),r=0,i=b.length;r<i;++r)e[r]=t.maybeSet(r,r);return e}(),m=new Int32Array(b.length),v=new Int32Array(b.length),y=new Int32Array(b.length),O=new Int8Array(b.length),j=0;for(u=0,f=b.length;u<f;++u)m[u]=v[u]=y[u]=-1;for(u=0,f=h.length;u<f;++u){var w=h[u],E=w[0],x=w[1];for(l=g[E],d=g[++E],++j,O[l]=1;++E<=x;)e(u,s=l,l=d,d=g[E]);++j,O[d]=1}for(u=0,f=b.length;u<f;++u)m[u]=-1;for(u=0,f=p.length;u<f;++u){var S=p[u],M=S[0]+1,N=S[1];for(s=g[N-1],l=g[M-1],d=g[M],e(u,s,l,d);++M<=N;)e(u,s=l,l=d,d=g[M])}m=v=y=null;var k,I=Object(r.a)(1.4*j,o.a,i.a);for(u=0,f=b.length;u<f;++u)O[k=g[u]]&&I.add(b[k]);return I}},function(t,e,n){"use strict";e.a=function(t,e,n,r,a){function i(r){for(var i=e(r)&f,o=u[i],c=0;o!=a;){if(n(o,r))return!0;if(++c>=t)throw new Error("full hashset");o=u[i=i+1&f]}return u[i]=r,!0}function o(r){for(var i=e(r)&f,o=u[i],c=0;o!=a;){if(n(o,r))return!0;if(++c>=t)break;o=u[i=i+1&f]}return!1}function c(){for(var t=[],e=0,n=u.length;e<n;++e){var r=u[e];r!=a&&t.push(r)}return t}3===arguments.length&&(r=Array,a=null);for(var u=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),f=t-1,s=0;s<t;++s)u[s]=a;return{add:i,has:o,values:c}}},function(t,e,n){"use strict";var r=n(34),a=n(71),i=n(72);e.a=function(t){function e(t){var e,r,a,i,c,u,f,s;if(a=v.get(e=h[t[0]]))for(f=0,s=a.length;f<s;++f)if(i=a[f],n(i,t))return t[0]=i[0],void(t[1]=i[1]);if(c=v.get(r=h[t[1]]))for(f=0,s=c.length;f<s;++f)if(u=c[f],o(u,t))return t[1]=u[0],void(t[0]=u[1]);a?a.push(t):v.set(e,[t]),c?c.push(t):v.set(r,[t]),y.push(t)}function n(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Object(a.a)(h[n],h[r]))return!1;return!0}function o(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!Object(a.a)(h[n],h[o]))return!1;return!0}function c(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],c=i-n;if(c!==o-r)return!1;for(var u=f(t),s=f(e),l=0;l<c;++l)if(!Object(a.a)(h[n+(l+u)%c],h[r+(l+s)%c]))return!1;return!0}function u(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],c=i-n;if(c!==o-r)return!1;for(var u=f(t),s=c-f(e),l=0;l<c;++l)if(!Object(a.a)(h[n+(l+u)%c],h[o-(l+s)%c]))return!1;return!0}function f(t){for(var e=t[0],n=t[1],r=e,a=r,i=h[r];++r<n;){var o=h[r];(o[0]<i[0]||o[0]===i[0]&&o[1]<i[1])&&(a=r,i=o)}return a-e}var s,l,d,b,h=t.coordinates,p=t.lines,g=t.rings,m=p.length+g.length;for(delete t.lines,delete t.rings,d=0,b=p.length;d<b;++d)for(s=p[d];s=s.next;)++m;for(d=0,b=g.length;d<b;++d)for(l=g[d];l=l.next;)++m;var v=Object(r.a)(2*m*1.4,i.a,a.a),y=t.arcs=[];for(d=0,b=p.length;d<b;++d){s=p[d];do{e(s)}while(s=s.next)}for(d=0,b=g.length;d<b;++d)if(l=g[d],l.next)do{e(l)}while(l=l.next);else!function(t){var e,n,r,a,i;if(n=v.get(e=h[t[0]]))for(a=0,i=n.length;a<i;++a){if(r=n[a],c(r,t))return t[0]=r[0],void(t[1]=r[1]);if(u(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=v.get(e=h[t[0]+f(t)]))for(a=0,i=n.length;a<i;++a){if(r=n[a],c(r,t))return t[0]=r[0],void(t[1]=r[1]);if(u(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):v.set(e,[t]),y.push(t)}(l);return t}},function(t,e,n){"use strict";e.a=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,a,i=t[e],o=0,c=1,u=i.length,f=i[0],s=f[0],l=f[1];++o<u;)f=i[o],r=f[0],a=f[1],r===s&&a===l||(i[c++]=[r-s,a-l],s=r,l=a);1===c&&(i[c++]=[0,0]),i.length=c}return t}},function(t,e,n){"use strict";e.a=function(t){function e(t){t&&f.hasOwnProperty(t.type)&&f[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++i]=t[e];var r={0:i-n+1,1:i};return o.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++i]=t[e];var r={0:i-n+1,1:i};return c.push(r),r}function a(t){return t.map(r)}var i=-1,o=[],c=[],u=[],f={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var s in t)e(t[s]);return{type:"Topology",coordinates:u,lines:o,rings:c,objects:t}}},function(t,e,n){"use strict";function r(t){return null==t?{type:null}:("FeatureCollection"===t.type?a:"Feature"===t.type?i:o)(t)}function a(t){var e={type:"GeometryCollection",geometries:t.features.map(i)};return null!=t.bbox&&(e.bbox=t.bbox),e}function i(t){var e,n=o(t.geometry);null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox);for(e in t.properties){n.properties=t.properties;break}return n}function o(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(o)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}e.a=function(t){var e,n={};for(e in t)n[e]=r(t[e]);return n}},function(t,e,n){"use strict";e.a=function(t,e,n){function r(t){return[Math.round((t[0]-f)*b),Math.round((t[1]-s)*h)]}function a(t,e){for(var n,r,a,i,o,c=-1,u=0,l=t.length,d=new Array(l);++c<l;)n=t[c],i=Math.round((n[0]-f)*b),o=Math.round((n[1]-s)*h),i===r&&o===a||(d[u++]=[r=i,a=o]);for(d.length=u;u<e;)u=d.push([d[0][0],d[0][1]]);return d}function i(t){return a(t,2)}function o(t){return a(t,4)}function c(t){return t.map(o)}function u(t){null!=t&&p.hasOwnProperty(t.type)&&p[t.type](t)}var f=e[0],s=e[1],l=e[2],d=e[3],b=l-f?(n-1)/(l-f):1,h=d-s?(n-1)/(d-s):1,p={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=i(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(i)},Polygon:function(t){t.arcs=c(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};for(var g in t)u(t[g]);return{scale:[1/b,1/h],translate:[f,s]}}},function(t,e,n){"use strict";var r=n(155);n.d(e,"a",function(){return r.a});var a=n(73);n.d(e,"b",function(){return a.a});var i=n(157);n.d(e,"c",function(){return i.a});var o=n(74);n.d(e,"d",function(){return o.a});var c=n(35);n.d(e,"e",function(){return c.a}),n.d(e,"f",function(){return c.b});var u=n(158);n.d(e,"g",function(){return u.a});var f=n(160);n.d(e,"h",function(){return f.a});var s=n(161);n.d(e,"i",function(){return s.a});var l=n(162);n.d(e,"j",function(){return l.a}),n.d(e,"k",function(){return l.b})},function(t,e,n){"use strict";function r(){return!0}function a(t){return t}function i(t){return null!=t.type}var o=n(156);e.a=function(t,e){function n(t){var e,r;switch(t.type){case"Polygon":r=c(t.arcs),e=r?{type:"Polygon",arcs:r}:{type:null};break;case"MultiPolygon":r=t.arcs.map(c).filter(a),e=r.length?{type:"MultiPolygon",arcs:r}:{type:null};break;case"GeometryCollection":r=t.geometries.map(n).filter(i),e=r.length?{type:"GeometryCollection",geometries:r}:{type:null};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function c(t){return t.length&&u(t[0])?[t[0]].concat(t.slice(1).filter(f)):null}function u(t){return e(t,!1)}function f(t){return e(t,!0)}var s,l=t.objects,d={};null==e&&(e=r);for(s in l)d[s]=n(l[s]);return Object(o.a)({type:"Topology",bbox:t.bbox,transform:t.transform,objects:d,arcs:t.arcs})}},function(t,e,n){"use strict";e.a=function(t){function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":r(t.arcs);break;case"MultiLineString":case"Polygon":t.arcs.forEach(r);break;case"MultiPolygon":t.arcs.forEach(a)}}function n(t){t<0&&(t=~t),g[t]||(g[t]=1,++m)}function r(t){t.forEach(n)}function a(t){t.forEach(r)}function i(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(i)};break;case"LineString":e={type:"LineString",arcs:c(t.arcs)};break;case"MultiLineString":e={type:"MultiLineString",arcs:t.arcs.map(c)};break;case"Polygon":e={type:"Polygon",arcs:t.arcs.map(c)};break;case"MultiPolygon":e={type:"MultiPolygon",arcs:t.arcs.map(u)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function o(t){return t<0?~g[~t]:g[t]}function c(t){return t.map(o)}function u(t){return t.map(c)}var f,s,l=t.objects,d={},b=t.arcs,h=b.length,p=-1,g=new Array(h),m=0,v=-1;for(s in l)e(l[s]);for(f=new Array(m);++p<h;)g[p]&&(g[p]=++v,f[v]=b[p]);for(s in l)d[s]=i(l[s]);return{type:"Topology",bbox:t.bbox,transform:t.transform,objects:d,arcs:f}}},function(t,e,n){"use strict";var r=n(73),a=n(74);e.a=function(t,e,n){var i=Object(r.a)(t),o=Object(a.a)(t,e,n);return function(t,e){return i(t,e)||o(t,e)}}},function(t,e,n){"use strict";function r(t){return[t[0],t[1],0]}var a=n(31),i=n(159),o=n(35);e.a=function(t,e){function n(t){u.remove(t),t[1][2]=e(t),u.push(t)}var c=t.transform?Object(a.i)(t.transform):r,u=Object(i.a)();null==e&&(e=o.b);var f=t.arcs.map(function(t){var r,a,i,o=[],f=0;for(t=t.map(c),a=1,i=t.length-1;a<i;++a)r=[t[a-1],t[a],t[a+1]],r[1][2]=e(r),o.push(r),u.push(r);for(t[0][2]=t[i][2]=1/0,a=0,i=o.length;a<i;++a)r=o[a],r.previous=o[a-1],r.next=o[a+1];for(;r=u.pop();){var s=r.previous,l=r.next;r[1][2]<f?r[1][2]=f:f=r[1][2],s&&(s.next=l,s[2]=r[2],n(s)),l&&(l.previous=s,l[0]=r[0],n(l))}return t});return{type:"Topology",bbox:t.bbox,objects:t.objects,arcs:f}}},function(t,e,n){"use strict";function r(t,e){return t[1][2]-e[1][2]}e.a=function(){function t(t,e){for(;e>0;){var n=(e+1>>1)-1,i=a[n];if(r(t,i)>=0)break;a[i._=e]=i,a[t._=e=n]=t}}function e(t,e){for(;;){var n=e+1<<1,o=n-1,c=e,u=a[c];if(o<i&&r(a[o],u)<0&&(u=a[c=o]),n<i&&r(a[n],u)<0&&(u=a[c=n]),c===e)break;a[u._=e]=u,a[t._=e=c]=t}}var n={},a=[],i=0;return n.push=function(e){return t(a[e._=i]=e,i++),i},n.pop=function(){if(!(i<=0)){var t,n=a[0];return--i>0&&(t=a[i],e(a[t._=0]=t,0)),n}},n.remove=function(n){var o,c=n._;if(a[c]===n)return c!==--i&&(o=a[i],(r(o,n)<0?t:e)(a[o._=c]=o,c)),c},n}},function(t,e,n){"use strict";function r(t,e){if(n=t.length){if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];var n,r=(n-1)*e,a=Math.floor(r),i=t[a];return i+(t[a+1]-i)*(r-a)}}function a(t,e){return e-t}e.a=function(t,e){var n=[];return t.arcs.forEach(function(t){t.forEach(function(t){isFinite(t[2])&&n.push(t[2])})}),n.length&&r(n.sort(a),e)}},function(t,e,n){"use strict";e.a=function(t,e){e=null==e?Number.MIN_VALUE:+e;var n=t.arcs.map(function(t){for(var n,r=-1,a=0,i=t.length,o=new Array(i);++r<i;)(n=t[r])[2]>=e&&(o[a++]=[n[0],n[1]]);return o.length=a,o});return{type:"Topology",transform:t.transform,bbox:t.bbox,objects:t.objects,arcs:n}}},function(t,e,n){"use strict";function r(t,e){for(var n,r,a,i=0,o=t.length,c=0,s=t[e?i++:o-1],h=s[0]*f,p=s[1]*f/2+u,g=d(p),m=b(p);i<o;++i){s=t[i],n=h,h=s[0]*f,p=s[1]*f/2+u,r=g,g=d(p),a=m,m=b(p);var v=h-n,y=v>=0?1:-1,O=y*v,j=a*m,w=r*g+j*d(O),E=j*y*b(O);c+=l(E,w)}return c}function a(t,e){var n=r(t,!0);return e&&(n*=-1),2*(n<0?c+n:n)}function i(t){return 2*s(r(t,!1))}e.a=a,e.b=i;var o=Math.PI,c=2*o,u=o/4,f=o/180,s=Math.abs,l=Math.atan2,d=Math.cos,b=Math.sin},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(164);n.d(e,"schemeAccent",function(){return r.a});var a=n(165);n.d(e,"schemeDark2",function(){return a.a});var i=n(166);n.d(e,"schemePaired",function(){return i.a});var o=n(167);n.d(e,"schemePastel1",function(){return o.a});var c=n(168);n.d(e,"schemePastel2",function(){return c.a});var u=n(169);n.d(e,"schemeSet1",function(){return u.a});var f=n(170);n.d(e,"schemeSet2",function(){return f.a});var s=n(171);n.d(e,"schemeSet3",function(){return s.a});var l=n(172);n.d(e,"interpolateBrBG",function(){return l.a}),n.d(e,"schemeBrBG",function(){return l.b});var d=n(186);n.d(e,"interpolatePRGn",function(){return d.a}),n.d(e,"schemePRGn",function(){return d.b});var b=n(187);n.d(e,"interpolatePiYG",function(){return b.a}),n.d(e,"schemePiYG",function(){return b.b});var h=n(188);n.d(e,"interpolatePuOr",function(){return h.a}),n.d(e,"schemePuOr",function(){return h.b});var p=n(189);n.d(e,"interpolateRdBu",function(){return p.a}),n.d(e,"schemeRdBu",function(){return p.b});var g=n(190);n.d(e,"interpolateRdGy",function(){return g.a}),n.d(e,"schemeRdGy",function(){return g.b});var m=n(191);n.d(e,"interpolateRdYlBu",function(){return m.a}),n.d(e,"schemeRdYlBu",function(){return m.b});var v=n(192);n.d(e,"interpolateRdYlGn",function(){return v.a}),n.d(e,"schemeRdYlGn",function(){return v.b});var y=n(193);n.d(e,"interpolateSpectral",function(){return y.a}),n.d(e,"schemeSpectral",function(){return y.b});var O=n(194);n.d(e,"interpolateBuGn",function(){return O.a}),n.d(e,"schemeBuGn",function(){return O.b});var j=n(195);n.d(e,"interpolateBuPu",function(){return j.a}),n.d(e,"schemeBuPu",function(){return j.b});var w=n(196);n.d(e,"interpolateGnBu",function(){return w.a}),n.d(e,"schemeGnBu",function(){return w.b});var E=n(197);n.d(e,"interpolateOrRd",function(){return E.a}),n.d(e,"schemeOrRd",function(){return E.b});var x=n(198);n.d(e,"interpolatePuBuGn",function(){return x.a}),n.d(e,"schemePuBuGn",function(){return x.b});var S=n(199);n.d(e,"interpolatePuBu",function(){return S.a}),n.d(e,"schemePuBu",function(){return S.b});var M=n(200);n.d(e,"interpolatePuRd",function(){return M.a}),n.d(e,"schemePuRd",function(){return M.b});var N=n(201);n.d(e,"interpolateRdPu",function(){return N.a}),n.d(e,"schemeRdPu",function(){return N.b});var k=n(202);n.d(e,"interpolateYlGnBu",function(){return k.a}),n.d(e,"schemeYlGnBu",function(){return k.b});var I=n(203);n.d(e,"interpolateYlGn",function(){return I.a}),n.d(e,"schemeYlGn",function(){return I.b});var P=n(204);n.d(e,"interpolateYlOrBr",function(){return P.a}),n.d(e,"schemeYlOrBr",function(){return P.b});var R=n(205);n.d(e,"interpolateYlOrRd",function(){return R.a}),n.d(e,"schemeYlOrRd",function(){return R.b});var T=n(206);n.d(e,"interpolateBlues",function(){return T.a}),n.d(e,"schemeBlues",function(){return T.b});var A=n(207);n.d(e,"interpolateGreens",function(){return A.a}),n.d(e,"schemeGreens",function(){return A.b});var C=n(208);n.d(e,"interpolateGreys",function(){return C.a}),n.d(e,"schemeGreys",function(){return C.b});var L=n(209);n.d(e,"interpolatePurples",function(){return L.a}),n.d(e,"schemePurples",function(){return L.b});var _=n(210);n.d(e,"interpolateReds",function(){return _.a}),n.d(e,"schemeReds",function(){return _.b});var D=n(211);n.d(e,"interpolateOranges",function(){return D.a}),n.d(e,"schemeOranges",function(){return D.b})},function(t,e,n){"use strict";var r=n(1);e.a=Object(r.a)("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")},function(t,e,n){"use strict";var r=n(1);e.a=Object(r.a)("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")},function(t,e,n){"use strict";var r=n(1);e.a=Object(r.a)("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")},function(t,e,n){"use strict";var r=n(1);e.a=Object(r.a)("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")},function(t,e,n){"use strict";var r=n(1);e.a=Object(r.a)("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")},function(t,e,n){"use strict";var r=n(1);e.a=Object(r.a)("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")},function(t,e,n){"use strict";var r=n(1);e.a=Object(r.a)("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")},function(t,e,n){"use strict";var r=n(1);e.a=Object(r.a)("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";var r=(n(36),n(79),n(39),n(77),n(80),n(19),n(81),n(176),n(82),n(177),n(180),n(76));n.d(e,"a",function(){return r.b});n(181),n(182),n(183),n(184),n(185)},function(t,e,n){"use strict";function r(t){if(t instanceof i)return new i(t.l,t.a,t.b,t.opacity);if(t instanceof d){var e=t.h*p.a;return new i(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof h.b||(t=Object(h.h)(t));var n=f(t.r),r=f(t.g),a=f(t.b),c=o((.4124564*n+.3575761*r+.1804375*a)/g),u=o((.2126729*n+.7151522*r+.072175*a)/m);return new i(116*u-16,500*(c-u),200*(u-o((.0193339*n+.119192*r+.9503041*a)/v)),t.opacity)}function a(t,e,n,a){return 1===arguments.length?r(t):new i(t,e,n,null==a?1:a)}function i(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function o(t){return t>w?Math.pow(t,1/3):t/j+y}function c(t){return t>O?t*t*t:j*(t-y)}function u(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function f(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){if(t instanceof d)return new d(t.h,t.c,t.l,t.opacity);t instanceof i||(t=r(t));var e=Math.atan2(t.b,t.a)*p.b;return new d(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function l(t,e,n,r){return 1===arguments.length?s(t):new d(t,e,n,null==r?1:r)}function d(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}e.a=a,e.b=l;var b=n(38),h=n(37),p=n(75),g=.95047,m=1,v=1.08883,y=4/29,O=6/29,j=3*O*O,w=O*O*O;Object(b.a)(i,a,Object(b.b)(h.a,{brighter:function(t){return new i(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new i(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=m*c(t),e=g*c(e),n=v*c(n),new h.b(u(3.2404542*e-1.5371385*t-.4985314*n),u(-.969266*e+1.8760108*t+.041556*n),u(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Object(b.a)(d,l,Object(b.b)(h.a,{brighter:function(t){return new d(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new d(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return r(this).rgb()}}))},function(t,e,n){"use strict";function r(t){if(t instanceof i)return new i(t.h,t.s,t.l,t.opacity);t instanceof c.b||(t=Object(c.h)(t));var e=t.r/255,n=t.g/255,r=t.b/255,a=(g*r+h*e-p*n)/(g+h-p),o=r-a,f=(b*(n-a)-l*o)/d,s=Math.sqrt(f*f+o*o)/(b*a*(1-a)),m=s?Math.atan2(f,o)*u.b-120:NaN;return new i(m<0?m+360:m,s,a,t.opacity)}function a(t,e,n,a){return 1===arguments.length?r(t):new i(t,e,n,null==a?1:a)}function i(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}e.a=a;var o=n(38),c=n(37),u=n(75),f=-.14861,s=1.78277,l=-.29227,d=-.90649,b=1.97294,h=b*d,p=b*s,g=s*l-d*f;Object(o.a)(i,a,Object(o.b)(c.a,{brighter:function(t){return t=null==t?c.c:Math.pow(c.c,t),new i(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?c.d:Math.pow(c.d,t),new i(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*u.a,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),a=Math.sin(t);return new c.b(255*(e+n*(f*r+s*a)),255*(e+n*(l*r+d*a)),255*(e+n*(b*r)),this.opacity)}}))},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,c,u){if(t!==i||r!==o){var f=c.push("translate(",null,e,null,n);u.push({i:f-4,x:Object(a.a)(t,i)},{i:f-2,x:Object(a.a)(r,o)})}else(i||o)&&c.push("translate("+i+e+o+n)}function c(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Object(a.a)(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function u(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Object(a.a)(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function f(t,e,n,r,o,c){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");c.push({i:u-4,x:Object(a.a)(t,n)},{i:u-2,x:Object(a.a)(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],a=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,a),c(e.rotate,n.rotate,r,a),u(e.skewX,n.skewX,r,a),f(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,a),e=n=null,function(t){for(var e,n=-1,i=a.length;++n<i;)r[(e=a[n]).i]=e.x(t);return r.join("")}}}var a=n(19),i=n(178);r(i.a,"px, ","px)","deg)"),r(i.b,", ",")",")")},function(t,e,n){"use strict";function r(t){return"none"===t?f.b:(i||(i=document.createElement("DIV"),o=document.documentElement,c=document.defaultView),i.style.transform=t,t=c.getComputedStyle(o.appendChild(i),null).getPropertyValue("transform"),o.removeChild(i),t=t.slice(7,-1).split(","),Object(f.a)(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function a(t){return null==t?f.b:(u||(u=document.createElementNS("http://www.w3.org/2000/svg","g")),u.setAttribute("transform",t),(t=u.transform.baseVal.consolidate())?(t=t.matrix,Object(f.a)(t.a,t.b,t.c,t.d,t.e,t.f)):f.b)}e.a=r,e.b=a;var i,o,c,u,f=n(179)},function(t,e,n){"use strict";n.d(e,"b",function(){return a});var r=180/Math.PI,a={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};e.a=function(t,e,n,a,i,o){var c,u,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*a)&&(n-=t*f,a-=e*f),(u=Math.sqrt(n*n+a*a))&&(n/=u,a/=u,f/=u),t*a<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*r,skewX:Math.atan(f)*r,scaleX:c,scaleY:u}}},function(t,e,n){"use strict";Math.SQRT2},function(t,e,n){"use strict";function r(t){return function(e,n){var r=t((e=Object(a.d)(e)).h,(n=Object(a.d)(n)).h),o=Object(i.a)(e.s,n.s),c=Object(i.a)(e.l,n.l),u=Object(i.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=c(t),e.opacity=u(t),e+""}}}var a=n(10),i=n(15);r(i.c),r(i.a)},function(t,e,n){"use strict";n(10),n(15)},function(t,e,n){"use strict";function r(t){return function(e,n){var r=t((e=Object(a.c)(e)).h,(n=Object(a.c)(n)).h),o=Object(i.a)(e.c,n.c),c=Object(i.a)(e.l,n.l),u=Object(i.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=o(t),e.l=c(t),e.opacity=u(t),e+""}}}var a=n(10),i=n(15);r(i.c),r(i.a)},function(t,e,n){"use strict";function r(t){return function e(n){function r(e,r){var o=t((e=Object(a.b)(e)).h,(r=Object(a.b)(r)).h),c=Object(i.a)(e.s,r.s),u=Object(i.a)(e.l,r.l),f=Object(i.a)(e.opacity,r.opacity);return function(t){return e.h=o(t),e.s=c(t),e.l=u(Math.pow(t,n)),e.opacity=f(t),e+""}}return n=+n,r.gamma=e,r}(1)}var a=n(10),i=n(15);r(i.c),r(i.a)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=n(1),a=n(2),i=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r.a);e.a=Object(a.a)(i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PINS=[[113.5090180484896,22.3240953422836,"tb3trnCbF2"],[113.0905952680643,23.0039731962642,"phgKOeyVTa"],[114.0322802616405,23.146765410668,"DzFwDY8cbA"],[121.975568961291,31.632971372206,"a0OqtxmVT8"],[108.054333986441,34.712168971786,"fUosfZwxdw"],[121.5042246946219,31.5138429441593,"IJEBcxAv9A"],[113.2290306372931,23.7903978120093,"0yqOaqdpXe"],[123.3173124766177,41.613811780139,"mBN7RV35A8"],[118.3377639394463,35.196207917404,"1ucEGKVGWw"],[121.7097750063621,29.8496264817217,"xcgopWrdvN"],[113.7103495604196,36.2740279184186,"S9764IuGtP"],[117.80454724112,39.660011093077,"0EuU956PD0"],[126.7322822742995,43.935093708012,"hVPdBZtspX"],[106.7172294514021,26.0217544662045,"eEXvVsYFfi"],[116.2207325824256,40.4462983165335,"4DoupM9A37"],[120.9190756795443,27.390027554186,"uSv5Jh6jdt"],[116.5259350396578,34.8352982393274,"EmENSVhAcA"],[102.6547968484516,25.317089995367,"PsLr2sPgoI"],[117.6170824564708,39.131825376342,"XAkkUBSCHM"],[111.296058952102,23.6518300538946,"Mx865Ufd3f"],[109.1127538229035,34.377721574021,"0TAn65ZyjJ"],[113.7678120243745,34.2613233075696,"fWIlrQMehr"],[108.2339999833574,22.2517349336435,"YZ6oNqLm6V"],[133.4142994403732,47.0653426318696,"MvAVfVOp6a"],[118.7068682212222,24.3476599462014,"bDUxwEVha9"],[117.6930295652002,32.4365086868674,"c5U7rcDouK"],[110.5698000320806,27.1578371814503,"XHOTltvPFC"],[113.625651167269,24.025225175371,"U6uJbc10tF"],[115.6630779966473,30.7319960233108,"ZqBtpddAbg"],[112.682034209477,34.4771447154945,"pw2XbulWaS"],[104.6134475003306,30.6530947302345,"Vqxk5t6RRf"],[113.0834596529839,27.269556354862,"0Jhnk36yi0"],[113.3822272916422,22.0169022867137,"A6G7HWZQYX"],[114.8081726586368,22.1469478633466,"mk26pqfrVY"],[110.9193550670216,35.999334026453,"5pvvq24c2s"],[113.753969689758,34.626295772821,"Nz5slxbQpo"],[126.7491351728296,42.657004053005,"DCl3rLi3ot"],[104.0711062426021,30.5907349359063,"cpIxjwn44q"],[121.5479976236001,32.2202346432394,"67KbGfbJsZ"],[122.2191515865591,31.782366664379,"b2TboLvj5f"],[-161.207778,55.999722,"2lu5IN8"],[-161.199325,60.890632,"MHASQeW"],[-164.60228,62.746967,"gncNcRP"],[-152.712155,66.543197,"9Zx6XAv"],[-156.455652,67.46951,"wR3qnqY"],[-149.1718,64.300693,"1xXHnhY"],[-134.371052,57.569832,"rETB5F1"],[-160.130441,62.830913,"t9EPMXA"],[-145.423115,68.077395,"Ex60Uh4"],[-174.213333,52.199167,"D2y59KY"],[-134.6597,58.3833,"ppMmZGc"],[-156.817409,71.234637,"PlH76mr"],[-161.824053,60.832389,"9uvo89N"],[-151.062414,67.100495,"btULdae"],[-149.4401,61.5842,"KSkUuJC"],[-161.131676,65.981052,"s8h8912"],[-148.89735,63.395458,"hiM0HYD"],[-143.638121,66.719,"i7DKGKW"],[-164.210294,60.153746,"jBPaTes"],[-164.776457,61.583982,"j311XBS"],[-141.933333,64.075,"rKT6fEs"],[-158.415696,56.301639,"e4R7jE1"],[-158.673528,56.251277,"Avr5XD9"],[-158.7625,56.255556,"RWesT71"],[-144.436667,61.516667,"JsoysCw"],[-149.453736,61.409802,"ENL5RIJ"],[-144.08262,65.824542,"sypIOnR"],[-151.422628,60.201603,"cv238fn"],[-131.646111,55.342222,"w8rrbG2"],[-161.942941,55.610952,"wNOxLG3"],[-144.97793,61.91581,"GwUlhc7"],[-147.943316,60.102558,"51RfYQy"],[-133.117081,55.47317,"DfEXgUN"],[-158.002483,61.818072,"MIbDbbQ"],[-145.613611,64.005426,"emfj6jE"],[-149.539532,63.516075,"QoeiXcq"],[-134.395041,58.275597,"PldGClA"],[-167.510656,53.362757,"7hhCCcx"],[-141.2,64.783333,"wqoQ7Zs"],[-162.032341,60.215058,"v6J0Qlx"],[-157.342202,58.206174,"ka19wPj"],[-147.08051,64.67352,"a8yuFhU"],[-136.358333,58.195,"mVmMPXJ"],[-162.260371,64.621662,"427JRcp"],[-149.812667,61.251531,"asAMQug"],[-164.131298,62.827404,"jn6w3G7"],[-148.016667,64.846667,"mz3Vro6"],[-147.710431,64.840238,"nmjXgAN"],[-163.436845,54.841028,"eWrgrTg"],[-145.733333,64.036667,"6BeIf0g"],[-149.675454,61.275256,"0IhKjRk"],[-147.655673,64.828303,"uIb9dm0"],[-145.306439,66.520744,"tIBJYrU"],[-143.568393,62.654744,"M7VuiGH"],[-149.166389,60.9425,"vtV2PEw"],[-145.661684,62.103895,"FRIxNTK"],[-159.404907,63.372013,"CZ1erCI"],[-135.761542,58.42835,"usSgief"],[-149.011128,63.917123,"7nurI9C"],[-151.462644,59.665495,"rG3ChRF"],[-135.558435,58.032237,"cLZ9Tkd"],[-165.891045,61.537157,"T9xfZBE"],[-149.841111,61.633611,"JwRXP5j"],[-154.26443,66.038246,"P2a1hbW"],[-156.291976,65.689918,"ZHFFSlr"],[-132.633175,55.137406,"fIVVv0z"],[-155.462556,59.564836,"PnKyyT3"],[-149.4917,60.9804,"UiMR8Vt"],[-134.529429,58.362767,"yMkSt41"],[-133.947222,56.975833,"3Ls9yta"],[-160.3261,61.541006,"XbokiLE"],[-154.458333,57.57,"jO9oFfn"],[-162.520556,60.895556,"qPxmSSb"],[-151.28958,60.316365,"4umQgVZ"],[-151.254556,60.614467,"KiqXsTp"],[-131.683175,55.372028,"DIqWURk"],[-158.152204,67.18026,"fkA3Pb1"],[-162.305561,55.062848,"F44xgLo"],[-156.641603,58.724264,"mgxTXPW"],[-133.055503,55.552611,"AuDOsht"],[-157.066864,66.912253,"CSPIdgb"],[-152.500169,57.781967,"zhuRnRy"],[-163.554153,63.029471,"Kc5sGMC"],[-162.126493,66.846459,"TUNhilL"],[-161.149957,64.931668,"xdvZukN"],[-153.98,57.538333,"CpLlalR"],[-154.976815,59.371395,"SeyFXWr"],[-160.359966,61.51377,"ovl2tli"],[-150.573267,65.02058,"0hgWFX2"],[-158.989699,59.009559,"OCnT67D"],[-166.283583,60.365679,"IKpTuTG"],[-131.579001,55.121491,"0NUD7eR"],[-132.253333,55.741667,"yTNmxIp"],[-149.691186,65.058399,"N6QZsmI"],[-161.738144,60.663758,"nmIXBVF"],[-149.086744,64.557656,"AR49QJS"],[-157.297205,59.593533,"xG7Ujtd"],[-154.381247,63.001603,"SVzNfd4"],[-151.639604,60.010833,"TE1p0Ce"],[-160.509453,66.97553,"C5FX1PV"],[-165.310667,64.505775,"3paYeHR"],[-154.731675,60.030837,"3a00g65"],[-161.044132,66.836353,"zOb8Ow2"],[-147.369353,64.78049,"8AB2JCI"],[-141.908611,62.964167,"G0x28og"],[-157.991353,64.778024,"thArPSf"],[-164.453333,62.509167,"eJgvbdA"],[-162.459444,60.896944,"GjN3lQF"],[-149.065323,61.613814,"WhqES5X"],[-136.2275,57.960833,"vjlnJkm"],[-159.259333,55.945289,"wubNtSA"],[-133.160683,56.827134,"y144Kdy"],[-162.043201,58.63364,"kodBjqe"],[-166.72618,68.312058,"S0uIrWe"],[-162.906148,69.705626,"GrxJPo8"],[-135.333333,57.05,"CxqtfXU"],[-154.433803,60.636416,"3trFm2A"],[-158.566367,56.964333,"9UkNOno"],[-148.559636,70.070057,"oRPnsSM"],[-150.011201,65.383627,"tMtnepE"],[-157.195969,61.735389,"CI6OOJ2"],[-161.558413,61.591302,"6j57W6Z"],[-169.547257,56.60324,"hUyyG2T"],[-163.205263,62.054106,"pe1yUIK"],[-162.109141,63.47759,"iYfPN9C"],[-170.293408,57.178697,"SZF4Ekm"],[-146.952974,64.50905,"VXnmoK5"],[-170.470908,63.679737,"qSSGrjL"],[-165.581945,61.845019,"jkRPs5u"],[-151.708333,59.436667,"6On7Kjq"],[-161.174589,64.375498,"fiqFD4h"],[-166.137276,66.230562,"682kHVF"],[-157.613496,66.958141,"I25Da1M"],[-135.316569,57.051436,"ZxKS99k"],[-135.301794,59.468471,"ib8FCqq"],[-151.181667,61.958333,"2rztEex"],[-157.118284,61.634555,"2XnG6Ha"],[-151.13582,60.481778,"re78jMS"],[-162.227355,63.478468,"XOPCXjX"],[-149.118286,65.995894,"aXR0PBC"],[-148.462778,61.796667,"Zte3xwZ"],[-150.110097,62.260516,"sJB0Jfx"],[-152.103747,65.156483,"0SRG3J3"],[-146.678611,60.864722,"U1hIhxv"],[-166.3833,65.240164,"AtosO3s"],[-135.216667,57.78,"7JO3s7l"],[-132.513815,55.66086,"JMxKnsI"],[-160.4,59.066667,"RoLOqLY"],[-142.983333,63.333333,"ppqRS4i"],[-165.097,60.537,"f7excCf"],[-150.284455,61.441361,"RMoFJZ0"],[-161.6372,60.8438,"gLMsxFK"],[-165.097464,60.539322,"K1JhZq3"],[-146.195628,60.895044,"DC2ynVF"],[-146.413723,67.010446,"wJ8hzWq"],[-160.012532,70.620064,"E3vFGOr"],[-131.725,55.408333,"Dze3474"],[-149.4394,61.5814,"zEp7WlC"],[-148.683333,60.775,"D8e4cVV"],[-132.352918,56.433524,"CLNK6tv"],[-86.812861,33.236868,"cNS6Vup"],[-86.208934,33.331165,"MH6MciX"],[-86.6375,33.579167,"0qoAuqe"],[-86.490468,31.297142,"YnoE6cF"],[-86.489638,34.328339,"LGKkRSU"],[-86.834612,34.980447,"UcGuGIh"],[-86.255167,33.837366,"uAuhDOK"],[-86.970733,34.803604,"qERapig"],[-86.096717,34.029597,"DF9Mogq"],[-86.077728,31.41373,"dGvvXta"],[-86.910452,34.915241,"HXphctK"],[-86.316134,32.545378,"0kFa7H2"],[-86.105064,32.813908,"KwtdeaF"],[-86.171571,34.913017,"BlMiRGi"],[-86.704427,34.347778,"WsI9Wbb"],[-86.918262,33.473494,"0GPgw1M"],[-86.913086,34.347653,"bNWFQEy"],[-86.576142,31.995979,"MfWMzgR"],[-86.813614,33.611283,"LQ8h9bs"],[-86.966944,32.006667,"BMPtH7s"],[-86.419836,31.416909,"cKDIhOV"],[-86.746944,34.014444,"O3e7poF"],[-86.822481,33.71891,"TQ9eRS4"],[-86.733965,31.628662,"FFFATPx"],[-86.040393,34.343864,"g6ml9Zy"],[-86.078149,33.074642,"yYVqkBI"],[-86.259041,34.495902,"6LxaviP"],[-86.948221,33.63356,"GQ2NAsw"],[-86.305463,34.32193,"8Z23hBq"],[-86.394028,34.713964,"817MyN8"],[-86.784844,34.051569,"EuUcaZ1"],[-86.429441,33.36746,"fE1u8fm"],[-86.144444,33.1175,"28NqhrL"],[-86.233627,34.798979,"m4MGShL"],[-86.393189,32.224256,"q7sG8PI"],[-86.317318,34.190033,"9AMVkGu"],[-86.718052,32.980539,"FKeGisx"],[-86.551939,34.283739,"rnXiEeC"],[-86.048397,32.979068,"UkudUHI"],[-86.808417,33.768355,"YOMdjjf"],[-86.069532,31.262118,"wMf79hG"],[-86.574824,33.528333,"b3hno0g"],[-86.111152,33.605913,"ehdVHDT"],[-86.349722,31.010278,"kuRDdfP"],[-86.615278,33.9075,"dVsk4rz"],[-86.256601,31.70739,"gafHXS5"],[-86.8056,34.6578,"Gpx2A7Q"],[-86.7486,34.7837,"SbAmHEX"],[-86.510138,32.639373,"NDtKs8R"],[-86.475,33.686111,"5GDguwr"],[-86.735615,31.54495,"81QOsRR"],[-86.862228,33.124765,"bci39T7"],[-86.3118,32.3743,"4rQaQn6"],[-86.408952,33.675611,"fuZ2o0A"],[-86.257105,31.279861,"KyX0kiL"],[-86.332562,34.667122,"CEj0wpI"],[-86.646111,33.738611,"QeTbplb"],[-86.806176,33.31046,"iVm75x8"],[-86.207778,31.848611,"UTWJj79"],[-86.09589,32.335705,"82jUy3C"],[-86.059722,32.067778,"qwd2cLu"],[-86.656542,33.708131,"yr9OgqA"],[-86.947531,32.617608,"j9ZdyFN"],[-86.42997,32.478695,"25OngDY"],[-86.250068,34.840217,"pFFNelB"],[-86.1619,33.736677,"JRVEOGc"],[-86.246329,32.067745,"kTKPrUx"],[-86.61209,31.439931,"k1OJbr4"],[-86.641662,33.846204,"SsXiHin"],[-86.539167,31.352778,"BJMZzBl"],[-86.348464,31.755867,"4ua0GZt"],[-86.480833,34.769722,"ckJwZTD"],[-86.791944,33.216111,"SEi1Lue"],[-86.067416,31.104918,"x3Sm12t"],[-86.991959,32.284358,"kpnklyS"],[-86.974444,33.712222,"0YYHqEE"],[-86.051336,34.67227,"y3gPmG6"],[-86.553606,33.078483,"SBjiJG0"],[-86.816389,33.244167,"Idb7EhH"],[-86.800931,34.499548,"CCXoFyR"],[-86.439407,33.738647,"Mj9piDP"],[-86.491732,33.446103,"rdpAunV"],[-86.2025,33.251111,"yr6J33p"],[-86.271257,33.171675,"Eu5BLIP"],[-86.113352,33.435445,"sNh14ZQ"],[-86.989152,34.713037,"hT14aWf"],[-86.239334,32.690019,"95ZCwry"],[-86.699951,34.911644,"JX7feZS"],[-86.743414,33.819038,"2PRHDtW"],[-86.598068,33.633932,"VLSwvoS"],[-86.462793,34.409345,"KXe8QPs"],[-86.678,34.538145,"hmofwbh"],[-86.501278,33.480704,"44ozqGy"],[-86.543753,32.759565,"06rHcGj"],[-86.399425,33.401049,"1aiTPAY"],[-86.912512,34.262121,"Wt8luwO"],[-86.306389,34.065556,"aLZKSCZ"],[-86.279722,33.681389,"z5O3LSu"],[-86.304203,33.02381,"GA8jLJO"],[-86.535833,33.349444,"5vrMXFq"],[-91.081003,35.942327,"e5qKCX4"],[-93.726416,35.430767,"oLO1F4R"],[-94.260278,33.77,"nE538dm"],[-94.207337,35.500043,"4R7PJ5Y"],[-91.828916,34.306168,"bCiNqnW"],[-91.079636,35.561559,"WAtDf30"],[-93.420551,34.259362,"rMqIGrq"],[-93.437169,34.028296,"NPD5DYY"],[-93.068989,34.11525,"b60p9a2"],[-91.232529,33.614328,"Ur1oVGn"],[-89.758118,35.942843,"Tdbcz9O"],[-91.610746,36.219732,"n9xBXHU"],[-90.911331,34.702727,"9gYH8DI"],[-91.959398,35.028369,"ac5sv8Q"],[-94.070556,36.401944,"6CoDQOp"],[-91.550197,35.311331,"Yhzlx0R"],[-94.308226,35.332963,"WsiQRse"],[-90.768056,34.5475,"NKtGgIQ"],[-91.63519,35.782614,"57Onkav"],[-90.550658,35.74559,"2HSKzyH"],[-91.907449,35.093743,"9XKk6Xt"],[-90.618084,36.183172,"ehb3UiG"],[-91.106371,35.420267,"ThalJDi"],[-94.251969,36.465086,"MFj2sUH"],[-93.451817,35.103762,"N3bwaAw"],[-94.118333,33.835278,"hyhNlft"],[-94.22242,36.357703,"gy5Owl9"],[-93.0075,36.316111,"Fg9Tu9o"],[-90.784467,36.342978,"xbbRmZU"],[-91.490028,34.833706,"sjXFGPq"],[-93.716797,35.130386,"ke7GS10"],[-93.186811,33.698191,"lIVxAdH"],[-93.591946,34.901635,"OcAJWGu"],[-94.095278,34.537778,"MbRWdoE"],[-94.062864,34.765363,"ljdCPTu"],[-93.319415,34.349751,"Nw5b8IT"],[-91.518973,35.427655,"ScYfBGt"],[-93.627496,33.106963,"isj1HtO"],[-93.94537,35.297055,"gGa53nX"],[-93.515748,34.916065,"T5B8iAL"],[-91.951308,36.135755,"BKQVnsF"],[-90.576228,35.91647,"Uu2Jo6t"],[-93.446998,33.375323,"T2ylolU"],[-89.942312,35.814769,"hnttlOW"],[-93.586376,34.397579,"xTgFgEg"],[-90.816667,35.074444,"a3aVPDs"],[-93.26497,33.616403,"2ki9NtY"],[-91.726166,36.402531,"55L3kv1"],[-90.335797,35.758951,"JiVK6Nm"],[-93.047005,35.032168,"vbhh6EY"],[-90.941007,35.830145,"aBqnIUu"],[-91.324798,34.473625,"GZxCJvh"],[-91.544432,35.951684,"3RQYqDO"],[-94.207836,36.266771,"XL5angW"],[-93.942932,35.434176,"MLqVhnd"],[-94.344618,35.590231,"gsyv8Jo"],[-94.30891,36.366993,"6PiVZfM"],[-93.168611,35.112778,"HIFZpyT"],[-94.03368,35.311502,"bDjUkGC"],[-91.396217,35.833393,"4G4pTsV"],[-91.515833,36.297778,"B03DCs6"],[-90.761329,35.399122,"W5POLNP"],[-94.202026,35.689776,"NJXjEBc"],[-91.256426,34.660138,"8NKN7MQ"],[-90.236111,35.309167,"HmJHn8x"],[-93.491056,35.490763,"0WcVZGU"],[-93.67203,35.437117,"V6MVTBW"],[-93.825218,35.848297,"nfk1QAH"],[-93.309903,36.097941,"9UCNsnw"],[-91.833339,35.641355,"yHSRDZK"],[-91.229043,35.017827,"Tztz5mp"],[-91.959152,33.152369,"YIKxZRo"],[-90.949535,34.216167,"8fvlkIz"],[-93.105556,33.997778,"ZBLqkCB"],[-91.776455,35.869663,"nTMG1jD"],[-91.498218,34.744704,"dML2l1a"],[-94.453411,36.334749,"L46VsKt"],[-94.015243,34.13232,"DqHvY23"],[-93.954307,33.105448,"6TPKpRS"],[-93.135526,35.407356,"YVt1KLq"],[-91.939818,35.661606,"mCiwExH"],[-89.960526,35.559714,"1g3DGfj"]]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MAXPOP=1330141295,e.POP={China:1330141295,India:1173108018,"United States":310232863,Indonesia:242968342,Brazil:201103330,Pakistan:177276594,Bangladesh:158065841,Nigeria:152217341,Russia:139390205,Japan:126804433,Mexico:112468855,Philippines:99900177,"Viet Nam":89571130,Ethiopia:88013491,Germany:82282988,Egypt:80471869,Turkey:77804122,"Congo, Democratic Republic of the":70916439,Iran:67037517,Thailand:66404688,France:64057792,"United Kingdom":61284806,Italy:58090681,Burma:53414374,"South Africa":49109107,"Korea, South":48636068,Ukraine:45415596,Colombia:44205293,Sudan:41980182,Tanzania:41892895,Argentina:41343201,Spain:40548753,Kenya:40046566,Poland:38463689,Algeria:34586184,Canada:33759742,Uganda:33398682,Morocco:31627428,Peru:29907003,Iraq:29671605,"Saudi Arabia":29207277,Afghanistan:29121286,Nepal:28951852,Uzbekistan:27865738,Venezuela:27223228,Malaysia:26160256,Ghana:24339838,Yemen:23495361,Taiwan:23024956,"Korea, Democratic People's Republic of":22757275,Syria:22198110,Romania:22181287,Mozambique:22061451,Australia:21515754,"Sri Lanka":21513990,Madagascar:21281844,"Cte d'Ivoire":21058798,Cameroon:19294149,Netherlands:16783092,Chile:16746491,"Burkina Faso":16241811,Niger:15878271,Kazakhstan:15460484,Malawi:15447500,Ecuador:14790608,Cambodia:14753320,Senegal:14086103,Mali:13796354,Guatemala:13550440,Angola:13068161,Zambia:12056923,Zimbabwe:11651858,Cuba:11477459,Rwanda:11055976,Greece:10749943,Portugal:10735765,Tunisia:10589025,Chad:10543464,Belgium:10423493,Guinea:10324025,"Czech Republic":10201707,Somalia:10112453,Bolivia:9947418,Hungary:9880059,Burundi:9863117,"Dominican Republic":9794487,Belarus:9612632,Haiti:9203083,Sweden:9074055,Benin:9056010,Azerbaijan:8303512,Austria:8214160,Honduras:7989415,Switzerland:7623438,Tajikistan:7487489,Israel:7353985,Serbia:7344847,Bulgaria:7148785,"Hong Kong":7089705,Laos:6993767,Libya:6461454,Jordan:6407085,Paraguay:6375830,Togo:6199841,"Papua New Guinea":6064515,"El Salvador":6052064,Nicaragua:5995928,Eritrea:5792984,Denmark:5515575,Kyrgyzstan:5508626,Slovakia:5470306,Finland:5255068,"Sierra Leone":5245695,"United Arab Emirates":4975593,Turkmenistan:4940916,"Central African Republic":4844927,Norway:4676305,"Bosnia and Herzegovina":4621598,Georgia:4600825,"Costa Rica":4516220,Croatia:4486881,"Moldova, Republic of":4317483,"New Zealand":4252277,Ireland:4250163,"Congo, Republic of the":4125916,Lebanon:4125247,"Puerto Rico":3977663,Liberia:3685076,Albania:3659616,Lithuania:3545319,Uruguay:3510386,Panama:3410676,Mauritania:3205060,Mongolia:3086918,Oman:2967717,Armenia:2966802,Jamaica:2847232,Kuwait:2789132,"West Bank":2514845,Latvia:2217969,Namibia:2128471,Botswana:2029307,Slovenia:2003136,Lesotho:1919552,Gambia:1824158,Kosovo:1815048,"Guinea-Bissau":1565126,Gabon:1545255,Swaziland:1354051,Estonia:1291170,"Trinidad and Tobago":1228691,"Timor-Leste":1154625,Cyprus:1102677,Fiji:957780,Qatar:840926,Guyana:748486,Djibouti:740528,Bhutan:699847,Montenegro:666730,"Equatorial Guinea":650702,"Solomon Islands":609794,Luxembourg:497538,"Western Sahara":491519,Suriname:486618,Brunei:395027,Belize:314522,Bahamas:310426,Iceland:308910,"New Caledonia":229993,Vanuatu:221552,Dominica:72813,Greenland:57637,"Falkland Islands":3140,Antarctica:0,"South Sudan":1215232,Somaliland:35e3}},function(t,e,n){"use strict";function r(){c?(console.log("Stopping streaming"),c=!1,window.clearInterval(a)):(c=!0,console.log("Startin streaming"),a=window.setInterval(function(){var t=i.db.exec("\n      SELECT\n        m.latMin,\n        m.latMax,\n        m.longMin,\n        m.longMax\n      FROM\n        newMapAndBrushState AS s\n        INNER JOIN mapItx AS m ON s.mapItxId = m.itxId;");if(t&&t[0]&&t[0].values){var e=t[0].values[0];e.map(function(t){if(isNaN(t))throw new Error("[MapZoomStream] Should be a number!")});var n=Array.from({length:5},function(){return{userId:(Math.random()+1).toString(36).substring(7),lat:o.getRandomInt(10*e[0],10*e[1])/10,long:o.getRandomInt(10*e[2],10*e[3])/10}}),r=n.map(function(t){return"('"+t.userId+"', "+t.long+", "+t.lat+")"}).join(",");console.log("inserting pins",r),i.db.exec("\n          INSERT INTO pinData VALUES "+r+";\n          INSERT INTO pinStreamingInstance SELECT timeNow();\n        ")}},2e3))}Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(5),o=n(20),c=!1;e.toggleStreaming=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(29),o=n(5),c=n(216),u=function(t){function e(e){var n=t.call(this,e)||this;return n.setChartDataState=n.setChartDataState.bind(n),n.setChartPending=n.setChartPending.bind(n),n.state={data:null,pending:!1},n}return r(e,t),e.prototype.componentDidMount=function(){o.db.create_function("setChartPending",this.setChartPending),o.db.create_function("setChartDataState",this.setChartDataState)},e.prototype.setChartPending=function(t){this.setState({pending:t})},e.prototype.setChartDataState=function(t,e,n,r){null!==t&&null!==e&&null!==n&&null!==r?this.setState({data:[t,e,n,r]}):this.setState({data:null})},e.prototype.render=function(){var t=this.props,e=t.width,n=t.height,r=t.series,o=t.marginLeft,u=t.marginRight,f=t.marginTop,s=t.marginBottom,l=t.spinnerRadius,d=this.state,b=d.data,h=d.pending,p=null,g=null;if(h&&(p=a.createElement(c.SvgSpinner,{color:"#FFEA19",cx:e/2,radius:l,cy:l})),b){var m=e-o-u,v=n-f-s,y=i.scaleBand().rangeRound([0,m]).padding(.2).domain(r),O=i.scaleLinear().rangeRound([v,0]).domain([0,i.max(b)]),j=b.map(function(t,e){return a.createElement("rect",{x:y(r[e]),y:O(t),width:y.bandwidth(),height:v-O(t),fill:"rgb(255, 192, 203, 0.5)"})});g=a.createElement("g",null,j,a.createElement("g",{ref:function(t){return i.select(t).call(i.axisLeft(O).ticks(5,"d"))}}),a.createElement("g",{ref:function(t){return i.select(t).call(i.axisBottom(y).ticks(4))},transform:"translate(0,"+v+")"}),p)}else g=p;return a.createElement("svg",{width:e,height:n+3*l},g)},e.defaultProps={colorOverride:!1,height:200,spinnerRadius:20,marginBottom:40,marginLeft:45,marginRight:20,marginTop:20,width:300,showLabel:!1,showAxesLabels:!0},e}(a.Component);e.default=u},function(t,e,n){"use strict";function r(t,e,n,r){return a.createElement("circle",{cx:e,cy:n,r:"1"},a.createElement("animate",{attributeName:"r",begin:t,dur:"1.8s",values:"1; "+r,calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),a.createElement("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}))}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3);e.SvgSpinner=function(t){return a.createElement("g",{fill:"none",stroke:t.color,"fill-rule":"evenodd","stroke-width":"2"},r("0s",t.cx,t.cy,t.radius),r("-0.9s",t.cx,t.cy,t.radius))}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(218),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement("h2",null,"Crossfilter Example"),a.createElement("p",null,"This is one implementation of a cross-filter visualization. Crossfilers may have originated from a paper called ",a.createElement("a",{href:"http://ieeexplore.ieee.org/abstract/document/5204083/"},"Cross-Filtered Views for Multidimensional Visual Analysis")," by Chris Weaver. The more popular, modern implementation is with Square ",a.createElement("a",{href:"http://square.github.io/crossfilter/"},"here"),". This visualization is meant to help with identifying patterns in multi-dimensional data.  The design we have is slightly different from the Square one and closer to the original Weaver designs.  As you can see, the original distributions are fixed, and the filtered values are plotted on top.  While this gives context to the filtered versus original data, it can be difficult to read when the values differ too much.  So we added the zoom in option via scrolling on the chart. The Square implementation destructively updates the other views, denormalizing the scales based on the filtered data."),a.createElement("p",null,"While the map example is focused on demonstrating how the relational model of interactions help with managing state in the face of concurrency, the crossfilter example is to show case the power of using queries to express interactions. Below is a figure from the paper mentioned earlier, 0"),a.createElement("img",{src:"media/weaver_xfilter.png",style:{maxWidth:"100%"}}),a.createElement(i.default,null),a.createElement("p",null,"This simple visualization you see here actually has a lot of rather complicated implementations. Take the original ",a.createElement("a",{href:"https://github.com/square/crossfilter"},"crossfilter.js"),", which has great engineering, and all the data operators are custom-built, running at around 1400 lines of code.  While we do not have a library, the way that crossfilter is offered as, we implicitly use a relational algebra engine (in this case, ",a.createElement("a",{href:"https://github.com/kripken/sql.js/"},"sql.js"),"), and we want to show that this general purpose data processing engine is enough for most of our needs. Our implementation is about 250 lines (though based on a database implementation that's many many lines more, so definitely not a fair direct comparison to the two crossfilter libraries, but just giving a sense of proportions)!"),a.createElement("p",null,"We actually have the asynchronous version that talks to a SQL backend (or worker, both can be considered  remotes so far as asynchrony is concerned), and compared with ",a.createElement("a",{href:"https://github.com/mapd/mapd-crossfilter"},"the source code of MapD's asynchronous crossfilter"),", (we think) ours offer a much simpler way to model the interaction and associated processes. Now let's take a look at how it's implemented."),a.createElement("p",null,"Through experience, we found that handing none data-centric transformations, such as layout and imperative manipulation, are not intuitive or simple with vanilla relational algebra.  However, the relational engine could work with imperative functions as well. Take the example of the zoom implementation --- since the transformation does not really require any new data and is just changing the scale.e"))},e}(a.Component);e.default=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(83),o=n(219),c=n(5),u=n(84),f=function(t){function e(e){var n=t.call(this,e)||this;n.refreshXFilterData=n.refreshXFilterData.bind(n),n.setPending=n.setPending.bind(n),u.setupXFilterDB(),c.db.create_function("refreshXFilter",n.refreshXFilterData),c.db.create_function("setXFilterPending",n.setPending);var r=+new Date;return c.db.exec("\n      INSERT INTO xBrushItx (ts, chart) VALUES "+u.XFILTERCHARTS.map(function(t){return"("+r+", '"+t+"')"}).join(", ")+";\n    "),n.state={baseData:null,data:{},pending:!0},n}return r(e,t),e.prototype.refreshXFilterData=function(){if(console.log("[Component] refreshXFilterData called","background: 'yellow'"),!this.state.baseData){var t=c.db.exec("\n        SELECT\n          d.chart, d.bin, d.count\n        FROM\n          chartData d\n          JOIN xFilterRequest r ON d.requestId = r.requestId\n        WHERE\n          r.hourLow IS NULL AND r.hourHigh IS NULL\n          AND r.delayLow IS NULL AND r.delayHigh IS NULL\n          AND r.distanceLow IS NULL AND r.distanceHigh IS NULL;\n      "),e=u.parseChartData(t);console.log("response",t,e),e.data&&this.setState({baseData:e.data})}var n=c.db.exec("\n      SELECT\n        d.chart,\n        d.bin,\n        d.count,\n        req.itxId\n      FROM\n        xFilterResponse res\n        JOIN xFilterRequest req ON res.requestId = req.requestId\n        JOIN chartData d ON d.requestId = res.dataId\n      WHERE req.itxId = (SELECT MAX(itxId) FROM currentItx);\n    "),r=u.parseChartData(n);if(r.data){c.db.exec("INSERT INTO xFilterRender (itxId, ts) VALUES ("+r.itxId+", "+ +new Date+")"),this.setState(function(t){return{data:r.data,pending:!1}})}},e.prototype.setPending=function(t){console.log("setting pending to",t);var e=!1;t&&(e=!0),this.setState({pending:e})},e.prototype.render=function(){var t,e,n=this.state,r=n.baseData,c=n.data,u=n.pending;return r?(e=Object.keys(r).map(function(t){return a.createElement(o.default,{baseData:r[t],xFilterData:c[t],chart:t,key:t,pending:!1})}),u&&(t=a.createElement(a.Fragment,null,a.createElement(i.Indicator,null),"Processing Request"))):t=a.createElement(a.Fragment,null,a.createElement(i.Indicator,null),"Loading Initial Data..."),a.createElement(a.Fragment,null,e,t)},e}(a.Component);e.default=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=n(29),o=n(83),c=n(84),u=function(t){function e(e){var n=t.call(this,e)||this;return n.zoomed=n.zoomed.bind(n),n.state={scale:1},n}return r(e,t),e.prototype.zoomed=function(){this.setState({scale:i.event.transform.k})},e.prototype.render=function(){var t=this.props,e=t.chart,n=t.width,r=t.height,u=t.baseFill,f=t.marginLeft,s=t.marginRight,l=t.marginTop,d=t.marginBottom,b=t.baseData,h=t.xFilterData,p=t.pending,g=t.selectFill,m=t.maxZoomScale,v=this.state.scale,y=c.getXFilterStmts(),O=null,j=null;p&&(O=a.createElement(o.Indicator,null));var w=n-f-s,E=r-l-d,x=.8*w/b.length,S=i.scaleLinear().rangeRound([0,w]).domain([i.min(b,function(t){return t.x}),i.max(b,function(t){return t.x})]);if(v>1){var M=i.max(b,function(t){return t.x});b=b.filter(function(t){return t.x<M/m*(m-v+1)})}var N=i.scaleLinear().rangeRound([E,0-E*(v-1)]).domain([0,i.max(b,function(t){return t.y})]),k=i.axisLeft(N).ticks(5,"d"),I=i.axisBottom(S).ticks(4),P=b.map(function(t,e){return a.createElement("rect",{x:S(t.x),y:N(t.y),width:x,height:E-N(t.y),fill:u})}),R=(h||[]).map(function(t,e){return a.createElement("rect",{x:S(t.x),y:N(t.y),width:x,height:E-N(t.y),fill:g})}),T=i.brushX().extent([[0,0],[w,E]]).on("start",function(){console.log("brush started")}).on("end",function(){var t=i.brushSelection(this);if(null!==t){var n=S.invert(t[0]),r=S.invert(t[1]);y.insertBrushItx.run([+new Date,Math.min(n,r),Math.max(n,r),e])}}),A=a.createElement("g",{ref:function(t){return i.select(t).call(T)}});j=a.createElement("svg",{width:n,height:r,ref:function(t){i.select(t).call(C)}},a.createElement("g",{transform:"translate("+f+", "+l+")"},P,R,a.createElement("g",{ref:function(t){i.select(t).call(k)}}),a.createElement("g",{ref:function(t){i.select(t).call(I)},transform:"translate(0,"+E+")"}),A,O));var C=i.zoom().scaleExtent([1,10]).translateExtent([[0,-100],[n,r]]).on("zoom",this.zoomed);return a.createElement("div",null,j)},e.defaultProps={colorOverride:!1,baseFill:"rgb(255, 192, 203, 0.5)",selectFill:"rgb(176, 224, 230, 0.8)",height:100,marginBottom:40,marginLeft:45,marginRight:20,marginTop:20,width:200,showLabel:!1,showAxesLabels:!0,maxZoomScale:20},e}(a.Component);e.default=u},function(t,e,n){"use strict";function r(){return new Promise(function(t,e){o?t(o):(o=new Worker("/dist/worker.sql.js"),fetch("/data/flight_small.db").then(function(t){return 200!==t.status?void console.log("There was a problem: "+t.status):t.arrayBuffer()}).then(function(t){console.log("Setting up db in the worker",t),o.postMessage({id:"open",action:"open",buffer:t})}),o.onmessage=function(e){console.log("[Worker] "+e.data.id,e);var n=e.data.id.split(":");n[0];switch(n[0]){case"open":if(console.log("[Worker] Database opened",e),c)throw new Error("Should not open worker DB twice");c=!0;var r=a.readFileSync("/src/records/XFilter/workerViews.sql");o.postMessage({id:"setup",action:"exec",sql:r});break;case"setup":if(u)throw new Error("Should not setup worker DB twice");u=!0,t(o);break;case"insertThenShare":if(!c||!u)throw new Error("Need to setup worker DB before using");var f=n[1];["hour","delay","distance"].map(function(t){var e="\n                SELECT * FROM "+t+"ChartDataView;\n              ";console.log("[Worker] querying db to share data"),o.postMessage({id:"share:"+f+":"+t,action:"exec",sql:e})});break;case"share":var s=n[1],l=n[2];if(e.data.results[0]&&e.data.results[0].values.length>0){var d=e.data.results[0].values,b="\n                INSERT INTO chartData VALUES "+d.map(function(t){return"("+s+", "+t[0]+", "+t[1]+", '"+l+"')"})+";\n                INSERT INTO chartDataAtomic VALUES ("+s+", '"+l+"');\n              ";i.db.exec(b)}else console.log("No result for",l,s)}},o.onerror=function(t){console.log("Worker error: ",t)})})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),i=n(5),o=null,c=!1,u=!1;window.worker=o,e.xFilterWorker=r}]);
//# sourceMappingURL=bundle.js.map