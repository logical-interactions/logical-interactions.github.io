!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist",t(t.s=3)}([function(e,t){e.exports=React},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);t.analyzer=new r.Analyzer,window.analyzer=t.analyzer},function(e,t){e.exports=d3},function(e,t,n){"use strict";function r(){a.render(o.createElement(i.default,null),document.getElementById("wrapper"))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(6),i=n(7);t.loadPage=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["tables","analysisTables","analysisViews","program","newProgram","input","triggers","output"].map(function(e){return[e,"./src/sql/"+e+".sql"]});t.sqlFilePaths=new Map(r),t.jsonFiles=["./data/realv3.json"],t.analysisVersion="V1",t.skipWIds=["A11ECAX3S2P9FA"],t.DEBUG=!1;t.dbFiles=new Map(["raw","processed","final"].map(function(e){return[e,"./data/"+(t.DEBUG?"yifan_new_":"")+e+".db"]})),t.Duplicates=["taskTimes","memoryTask","answers","taskInfo"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),a={visWidth:700,visHeight:40,shapeSize:10};t.ItxTrace=function(e){for(var t=e.tsRange,n=e.brushItxData,a=e.chroniclesItxData,i=e.visWidth,s=e.visHeight,l=e.shapeSize,u=o.scaleLinear().rangeRound([1,i]).domain([t.startTime,t.endTime]),c={brush:s/6,delta:s/6*3,navigate:s/6*5},f={brush:"steelblue",delta:"orange",navigate:"red"},h=a.map(function(e){if(e.ts<t.startTime||e.ts>t.endTime)throw new Error("Data is incorrect,\n          interaction time out of bounds by "+Math.round((e.ts-t.endTime)/1e3)+"\n          or "+Math.round((e.ts-t.startTime)/1e3));return r.createElement("circle",{cx:u(e.ts),cy:c[e.itxType],r:l/2,fillOpacity:.4,fill:f[e.itxType]})}),d=n.map(function(e,t){var n=Math.max(l/2,u(e.itxEnd)-u(e.itxStart));return r.createElement("rect",{x:u(e.itxStart),y:c.brush+t%2*6,width:n,height:l,fillOpacity:.4,fill:f.brush})}),p=[],m=t.startTime;m<t.endTime;m+=5e3)p.push(r.createElement("line",{x1:u(m),y1:"0",x2:u(m),y2:s,stroke:"lightgray"}));return p.push(r.createElement("line",{x1:u(t.endTime),y1:"0",x2:u(t.endTime),y2:s,stroke:"gray"})),r.createElement(r.Fragment,null,r.createElement("p",null,Math.round((t.endTime-t.startTime)/1e3)," sec: ",t.wId," ",t.qId),r.createElement("svg",{width:i+50,height:s},p,h,d))},t.ItxTrace.defaultProps=a},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(0),i=n(8),s=n(15),l=n(18),u=n(20),c=n(21);!function(e){e[e.Worker=0]="Worker",e[e.Task=1]="Task",e[e.Trace=2]="Trace",e[e.FlowSurvey=3]="FlowSurvey",e[e.ToolSurvey=4]="ToolSurvey"}(o||(o={}));var f=new Map;f.set(o.Worker,!1),f.set(o.Task,!1),f.set(o.ToolSurvey,!1),f.set(o.FlowSurvey,!1);var h=function(e){function t(t){var n=e.call(this,t)||this;return n.setView=n.setView.bind(n),n.state={content:o.Task},n}return r(t,e),t.prototype.setView=function(e){var t=this;return function(){t.setState({content:e})}},t.prototype.render=function(){var e,t=this.state.content;return t===o.Trace&&(e=a.createElement(c.AllItxTraces,null)),t===o.Task&&(e=a.createElement(a.Fragment,null,a.createElement(s.default,null),a.createElement(u.InteractionVis,null))),t===o.Worker&&(e=a.createElement(i.default,null)),t===o.FlowSurvey&&(e=a.createElement(l.UnitSurveySummary,{survey:"FlowSurvey"})),t===o.ToolSurvey&&(e=a.createElement(l.UnitSurveySummary,{survey:"ToolSurvey"})),a.createElement("div",{className:"container"},a.createElement("div",{className:"summary"},a.createElement("div",{className:"controls"},a.createElement("button",{onClick:this.setView(o.Task)},"toggle task"),a.createElement("button",{onClick:this.setView(o.Worker)},"toggle worker"),a.createElement("button",{onClick:this.setView(o.FlowSurvey)},"toggle flow"),a.createElement("button",{onClick:this.setView(o.ToolSurvey)},"toggle tool"),a.createElement("button",{onClick:this.setView(o.Trace)},"toggle trace")),a.createElement("div",{className:"portal"},e)))},t}(a.Component);t.default=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(0),i=n(2),s=n(1);!function(e){e[e.TrainingPerf=0]="TrainingPerf",e[e.TaskPerf=1]="TaskPerf"}(o||(o={}));var l=function(e){function t(t){var n=e.call(this,t)||this;return n.clickShape=n.clickShape.bind(n),n.state={shapeInfo:new Map},n}return r(t,e),t.prototype.clickShape=function(e,t){this.setState(function(n){return n.shapeInfo.set(e,t),n})},t.prototype.test=function(){},t.prototype.render=function(){var e=this,t=s.analyzer.getANumber("select count (distinct wId) from workerTasks"),n=s.analyzer.getANumber("select count () from completedAll"),r=s.analyzer.getANumber("select count(distinct wId) from CancelSurvey"),l=s.analyzer.getANumber("select count() from successCountPerWorker where isTraining = 1 and countCorrect < 1"),u=s.analyzer.getANumber("\n      select count(distinct wId) from (select wId from deltaItx union select wId from navigateItx)"),c=s.analyzer.GetStaticView("successCountPerWorker"),f=i.scaleLinear().rangeRound([1,300]).domain([0,10]),h=a.createElement("svg",{width:350,height:30},c.filter(function(e){return!e.isTraining}).map(function(t){return a.createElement("circle",{cx:f(t.countCorrect),cy:30*Math.random(),r:3,fillOpacity:.5,fill:"steelblue",onClick:function(){return e.clickShape(o.TaskPerf,(t.isTraining?"training":"task")+" "+t.countCorrect)}})}),a.createElement("text",{x:f(10),y:15},10)),d=i.scaleLinear().rangeRound([1,300]).domain([0,4]),p=a.createElement("svg",{width:350,height:30},c.filter(function(e){return!e.isTraining}).map(function(t){return a.createElement("circle",{cx:d(t.countCorrect),cy:30*Math.random(),r:3,fillOpacity:.5,fill:"steelblue",onClick:function(){return e.clickShape(o.TrainingPerf,(t.isTraining?"training":"task")+" "+t.countCorrect)}})}),a.createElement("text",{x:f(10),y:15},4));return a.createElement(a.Fragment,null,a.createElement("table",null,a.createElement("tr",null,a.createElement("th",null,"Total"),a.createElement("th",null,"Complete"),a.createElement("th",null,"Cancelled"),a.createElement("th",null,"Failed"),a.createElement("th",null,"No Chronicle")),a.createElement("tr",null,a.createElement("td",null,t),a.createElement("td",null,n),a.createElement("td",null,r),a.createElement("td",null,l),a.createElement("td",null,t-u))),a.createElement("br",null),a.createElement("table",{style:{width:500}},a.createElement("tr",null,a.createElement("td",{style:{width:100}},"Task Success"),a.createElement("td",{style:{width:350}},h),a.createElement("td",{style:{width:100}},this.state.shapeInfo.get(o.TaskPerf))),a.createElement("tr",null,a.createElement("td",{style:{width:100}},"Training Success"),a.createElement("td",{style:{width:350}},p),a.createElement("td",{style:{width:100}},this.state.shapeInfo.get(o.TrainingPerf)))))},t}(a.Component);t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(i=l.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),s=n(3),l=n(4),u=n(13),c=["workerTasks"],f=function(e){function t(){var t=e.call(this,"analsysis")||this;return t.setup(),t}return r(t,e),t.prototype.setup=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.LoadDb(l.dbFiles.get("final"))];case 1:return e.sent(),[4,this.setupOutputStmts()];case 2:return e.sent(),this.setupInputStmts(),s.loadPage(),[2]}})})},t.prototype.setupInputStmts=function(){return o(this,void 0,void 0,function(){var e,t,n=this;return a(this,function(r){switch(r.label){case 0:return[4,fetch(l.sqlFilePaths.get("input"))];case 1:return[4,r.sent().text()];case 2:return e=r.sent(),t=u.getPrepareQueries(e),t.forEach(function(e){console.log("\nPrepare Stmt\n"+e.query+"\n"),n.input.set(e.name,n.db.prepare(e.query))}),[2]}})})},t.prototype.setupOutputStmts=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o,i=this;return a(this,function(a){switch(a.label){case 0:return e=c.slice(),[4,fetch(l.sqlFilePaths.get("program"))];case 1:return[4,a.sent().text()];case 2:return t=a.sent(),[4,fetch(l.sqlFilePaths.get("newProgram"))];case 3:return[4,a.sent().text()];case 4:return n=a.sent(),(t+n).match(/create table \w+/gi).map(function(t){var n=t.slice(13);e.push(n)}),[4,fetch(l.sqlFilePaths.get("analysisViews"))];case 5:return[4,a.sent().text()];case 6:return r=a.sent(),[4,fetch(l.sqlFilePaths.get("output"))];case 7:return[4,a.sent().text()];case 8:return o=a.sent(),(r+o).match(/create view \w+/gi).map(function(t){var n=t.slice(12);e.push(n)}),e.map(function(e){try{i.output.set(e,i.db.prepare("select * from "+e))}catch(t){console.log("%c Failed to output "+e,"color: red")}}),[2]}})})},t.prototype.getANumber=function(e){try{var t=this.db.exec(e);return t&&t[0]&&t[0].values&&t[0].values.length>0?t[0].values[0][0]:(console.log("%c SQL "+e+" did not return any results","color: #FF2400"),NaN)}catch(t){return console.log("%c Query did not execute\n"+e+" because "+t,"color: #FF2400"),NaN}},t}(i.default);t.Analyzer=f},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(i=l.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),i=n(12),s={notNull:!1},l=function(){function e(e){this.runOutput=this.runOutput.bind(this),this.tick=this.tick.bind(this),this.exec=this.exec.bind(this),this.BindOutput=this.BindOutput.bind(this),this.dbName=e,this.boundFns=[],this.input=new Map,this.output=new Map,this.staticInput=new Map,this.staticOutput=new Map}return e.prototype.LoadDb=function(e){return r(this,void 0,void 0,function(){var t,n,r;return o(this,function(o){switch(o.label){case 0:return this.db&&this.db.close(),[4,fetch(e)];case 1:return t=o.sent(),[4,t.arrayBuffer()];case 2:return n=o.sent(),r=new Uint8Array(n),this.db=new a.Database(r),this.db.create_function("log",i.log),this.db.create_function("tick",this.tick()),[2]}})})},e.prototype.NewInput=function(e,t){var n=Object.assign({$ts:i.timeNow()},t);this.input.get(e).run(n)},e.prototype.GetStaticView=function(e,t){void 0===t&&(t={}),console.log("get view",e);var n=this.output.get(e);return n||console.log("%c Error "+e+" does not exist","color: red"),this.readStmt(n,e,t)},e.prototype.readStmt=function(e,t,n){e.bind({});for(var r=[];e.step();)r.push(e.getAsObject());if(n.notNull&&0===r.length)throw new Error(t+" should not be null");return r.length>0?r:(console.log("%cError "+t+" did not return a value","color: red"),null)},e.prototype.BindOutput=function(e,t,n){if(void 0===n&&(n={}),!this.output.has(e))throw new Error("output not defined "+e+" "+Array.from(this.output.keys()).join(", "));var r=Object.assign({},s,n);this.boundFns.push({view:e,s:this.output.get(e),f:t,c:r})},e.prototype.runOutput=function(e){var t=e.s,n=e.f,r=e.c,o=e.view,a=this.readStmt(t,o,r);a&&n(a)},e.prototype.tick=function(){var e=this.boundFns,t=this.runOutput;return function(){e.map(function(e){t(e)})}},e.prototype.downloadDB=function(){var e=this.db.export(),t=new Blob([e]);i.downloadHelper(t,"session")},e.prototype.exec=function(e){try{var t=this.db.exec(e);return t&&t[0]&&t[0].values&&t[0].values.length>0||console.log("%c SQL "+e+" did not return any results","color: #FF2400"),t}catch(t){console.log("%c Query did not execute\n"+e+" because "+t,"color: #FF2400")}return null},e}();t.default=l},function(e,t){e.exports=SQL},function(e,t,n){"use strict";function r(e,t){if(!e||!e.values)throw new Error("Query "+t+" has NO result")}function o(e,t){var n=e.exec(t);n.length>0?(n[0].values.map(function(e){e.map(function(e,t){"ts"===n[0].columns[t]&&(e=new Date(e).toDateString())})}),console.log(n[0].columns.join("\t")),console.log(JSON.stringify(n[0].values).replace(/\],\[/g,"\n").replace("[[","").replace("]]","").replace(/,/g,"\t"))):console.log("NO RESULT")}function a(e,t){return console.log("["+t+"] "+e),1}function i(){return+new Date}function s(e,t){for(var n=e.split("-"),r=t.split("-"),o=0;o<n.length;o++){var a=function(e){var t=n[e],o=t.split(":")[0],a=r.filter(function(e){return e.split(":")[0]===o});return 1!==a.length?(console.log("didn't find",o,r),{value:0}):a[0]!==t?{value:0}:void 0}(o);if("object"==typeof a)return a.value}return 1}function l(){return(new Date).toTimeString().substr(0,8)}function u(e,t,n){void 0===n&&(n="db");var r=document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=t+"_"+l()+"."+n,r.onclick=function(){setTimeout(function(){window.URL.revokeObjectURL(r.href)},1500)},r.click()}function c(e,t){var n="",r=e.exec(t);if(r.length&&r[0].values){n+=r[0].columns.join(",")+"\r\n",r[0].values.forEach(function(e){var t=e.join(",");n+=t+"\r\n"});u(new Blob([n],{type:"text/plain;charset=UTF-8"}),"userData.csv"),console.log("should have downloaded",n)}else console.log("NO RESULT")}Object.defineProperty(t,"__esModule",{value:!0}),t.assertQueryHasResult=r,t.d=o,window.d=o,t.log=a,t.timeNow=i,t.hashCompare=s,t.prettyTimeNow=l,t.downloadHelper=u,t.downloadQueryResultAsCSV=c},function(e,t,n){"use strict";function r(e){return e.split(");").filter(function(e){return e&&e.length>0&&"\n"!==e}).map(function(e){return{tableName:e.match(/create table \w+/gi)[0].slice(13),colNames:e.match(/(\w+) (integer|text)/gi).map(function(e){return e.split(" ")[0]})}})}function o(e){return r(e).map(function(e){return{name:e.tableName,query:"insert into "+e.tableName+" ("+e.colNames.join(", ")+")\n            values ("+e.colNames.map(function(e){return"$"+e}).join(", ")+");"}})}function a(e){return r(e).filter(function(e){return s.Duplicates.indexOf(e.tableName)>-1}).map(function(e){var t=e.colNames.filter(function(e){return"taskId"!==e}).join(", ");return{name:e.tableName,query:"create table temp as\n        select distinct "+t+"\n        from "+e.tableName+";\n      delete from "+e.tableName+";\n      insert into "+e.tableName+" ("+e.colNames.join(", ")+")\n        select "+e.colNames.join(", ")+" from temp;\n      drop table temp;"}})}function i(e,t){void 0===t&&(t=!1);for(var n=e.split("\n\n"),r=[],o=0,a=n;o<a.length;o++){var i=a[o];i=i.replace(/^ *--.*$\n/gim,""),i=i.replace(/^drop.*$\n/gim,""),i=i.replace(/PRIMARY KEY/i,"not null"),i=i.replace(/,\n^.*UNIQUE.*$\n\);/gim,"\n);"),i=i.replace(/^.*UNIQUE.*$\n/gim,"");var u=i.split("(\n");if(2===u.length)if(u[0].includes("insert into")||u[0].includes("ChartInitData")||u[0].includes("ChartData"))t&&console.log("[Not ran]\n"+i+"\n","color: red");else{var c=u[0].match(/create table \w+/gi)[0].slice(13);-1!==l.LoggedTablesForAnalysis.indexOf(c)?(i=u[0]+"(\n  wId integer not null,"+(s.Duplicates.indexOf(c)>-1?"":"\n  taskId integer not null,")+"\n"+u[1],t&&console.log("[executing script]\n"+i+"\n"),r.push(i)):t&&console.log("[Not ran, not logged]\n"+i+"\n","color: red")}else t&&console.log("[Not ran]\n"+i+"\n","color: red")}return r}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),l=n(14);t.getPrepareQueries=o,t.getDedupeQueries=a,t.simpleParse=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggedTablesForAnalysis=["eventLog","navigateItx","deltaItx","deleteItx","xBrushItx","itxId_SP","brushState_SP","eqChart_SP","chartDataAtomic","brushDep_SP","taskTimes","memoryTask","answers","taskInfo"]},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(2),i=n(1),s=n(16),l=n(17),u=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e=i.analyzer.GetStaticView("taskCompletionTimes"),t=e.map(function(e){return{qId:e.qId,qRank:e.qRank,question:e.question,correctTimes:l.processTimes(e.correctTimes),incorrectTimes:l.processTimes(e.incorrectTimes)}}),n=t.sort(function(e,t){return e.qRank>t.qRank?1:0}).map(function(e){for(var t=[0,1.05*a.max(e.correctTimes.concat(e.incorrectTimes),function(e){return e.time})],n=a.scaleLinear().rangeRound([1,700]).domain(t),r=[],l=0;l<t[1];l+=5e3)r.push(o.createElement("line",{x1:n(l),y1:"0",x2:n(l),y2:30,stroke:"lightgray"}));var u=function(t,r){return o.createElement("circle",{cx:n(t.time),cy:s.gaussianRandom(0,30),r:5,fillOpacity:.5,fill:r?"steelblue":"red",className:"clickable",onClick:function(){console.log("inserting into taskSelectionInput",t.wId,e.qId),i.analyzer.NewInput("taskSelectionInput",{$wId:t.wId,$qId:e.qId})}})},c=e.correctTimes.map(function(e){return u(e,!0)}).concat(e.incorrectTimes.map(function(e){return u(e,!1)}));return o.createElement(o.Fragment,null,o.createElement("tr",{style:{width:800}},o.createElement("td",{colSpan:2,dangerouslySetInnerHTML:{__html:e.question}})),o.createElement("tr",null,o.createElement("td",{style:{width:700}},o.createElement("svg",{width:700,height:30},r,c)),o.createElement("td",null,Math.round(t[1]/1e3)," seconds")))});return o.createElement(o.Fragment,null,o.createElement("table",{style:{width:800}},n))},t}(o.Component);t.default=u},function(e,t,n){"use strict";function r(e,t){for(var n=0,r=0;r<6;r+=1)n+=Math.random();return n/=6,Math.floor(e+n*(t-e+1))}Object.defineProperty(t,"__esModule",{value:!0}),t.gaussianRandom=r},function(e,t,n){"use strict";function r(e,t){t.split("\n\n").forEach(function(t){console.log("Executing sql \n"+t),e.run(t)})}function o(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}function a(e){return e?e.split(",").map(function(e){var t=e.split("-");return{time:parseInt(t[0],10),wId:t[1]}}):[]}Object.defineProperty(t,"__esModule",{value:!0}),t.simpleExec=r,t.hashCode=o,t.processTimes=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),a=n(1),i=n(19);t.UnitSurveySummary=function(e){var t="FlowSurvey"===e.survey?{commentsView:"flowComments",view:"flowResults",surveySequence:i.FlowSurveySequenceShared,surveyQuestions:i.FlowSurveyQuestionsShared}:{commentsView:"toolComments",view:"toolResults",surveySequence:i.getUsabilitySurveySequence(!0),surveyQuestions:i.UsabilitySurveyQuestionsShared},n=t.commentsView,s=t.view,l=t.surveySequence,u=t.surveyQuestions,c=a.analyzer.GetStaticView(n).map(function(e){return e.answer}),f=a.analyzer.GetStaticView(s).map(function(e){return{qId:e.qId,answers:e.answers?e.answers.split(",").map(function(e){return parseInt(e,10)}):null}}),h=o.scaleLinear().rangeRound([1,300]).domain([1,6]),d=l.map(function(e,t){var n=u.get(e),o=f.filter(function(t){return t.qId===e})[0].answers;return r.createElement("tr",null,r.createElement("td",{style:{width:500}},t+1,". ",n),r.createElement("td",null,r.createElement("svg",{width:300,height:30},o.map(function(e){return r.createElement("circle",{cx:h(e),cy:30*Math.random(),r:3,fillOpacity:.5,fill:"steelblue"})}))))});return r.createElement(r.Fragment,null,r.createElement("table",{style:{width:800,borderBottom:"solid"}},r.createElement("tr",null,r.createElement("th",{style:{width:500}},"Question"),r.createElement("th",{style:{align:"left",width:100}},"Not at all"),r.createElement("th",{style:{align:"left",width:100}},"Partly"),r.createElement("th",{style:{align:"left",width:100}},"Very much"))),r.createElement("table",{style:{width:800}},d),c.map(function(e){return r.createElement("p",null,e)}))}},function(e,t,n){"use strict";function r(e){return["tool","delayFrustration","delayDifficulty"].concat(e?["chronicles"]:[])}Object.defineProperty(t,"__esModule",{value:!0}),t.FlowSurveyQuestionsShared=new Map,t.FlowSurveyQuestionsShared.set("flowChallenge","I feel just the right amount of challenge"),t.FlowSurveyQuestionsShared.set("flowSmooth","My thoughts/activities run fluidly and smoothly"),t.FlowSurveyQuestionsShared.set("flowTime","I do not notice time passing"),t.FlowSurveyQuestionsShared.set("flowConcentrate","I have no difficulty concentrating"),t.FlowSurveyQuestionsShared.set("flowClear","My mind is completely clear"),t.FlowSurveyQuestionsShared.set("flowAbsorbed","I am totally absorbed in what I am doing"),t.FlowSurveyQuestionsShared.set("flowAccord","The right thoughts/movements occur of their own accord"),t.FlowSurveyQuestionsShared.set("flowKnow","I know what I have to do each step of the way"),t.FlowSurveyQuestionsShared.set("flowControl","I feel that I have everything under control"),t.FlowSurveyQuestionsShared.set("flowLost","I am completely lost in thought"),t.FlowSurveyQuestionsShared.set("flowStake","Something important to me is at stake here"),t.FlowSurveyQuestionsShared.set("flowMistake","I must not make any mistakes here"),t.FlowSurveyQuestionsShared.set("flowWorried","I am worried about failing"),t.FlowSurveyQuestionsShared.set("flowCompare","Compared to all other activities which I partake easy in, this one is difficult"),t.FlowSurveyQuestionsShared.set("flowCompetence","I think that my competence in this area is high"),t.FlowSurveyQuestionsShared.set("flowDemand","For me personally, the current demands are too high"),t.FlowSurveySequenceShared=["flowChallenge","flowSmooth","flowTime","flowConcentrate","flowClear","flowAbsorbed","flowAccord","flowKnow","flowControl","flowLost","flowStake","flowMistake","flowWorried","flowCompare","flowCompetence","flowDemand"],t.UsabilitySurveyQuestionsShared=new Map,t.UsabilitySurveyQuestionsShared.set("tool","Do you feel like the tool supported your performing the task?"),t.UsabilitySurveyQuestionsShared.set("chronicles","Did you find the ability to navigate between histories helpful?"),t.UsabilitySurveyQuestionsShared.set("delayFrustration","Were the delays frustrating?"),t.UsabilitySurveyQuestionsShared.set("delayDifficulty","Did the delays make thing difficult?"),t.getUsabilitySurveySequence=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),i=n(5),s=function(e){function t(t){var n=e.call(this,t)||this;return n.setBrushItxData=n.setBrushItxData.bind(n),n.setTsRange=n.setTsRange.bind(n),n.setChorniclesItxData=n.setChorniclesItxData.bind(n),n.hide=n.hide.bind(n),n.state={wId:null,qId:null,tsRange:null,brushItxData:[],chroniclesItxData:[],hide:!1},a.analyzer.BindOutput("brushItxInTaskSelection",n.setBrushItxData),a.analyzer.BindOutput("chroniclesItxInTaskSelection",n.setChorniclesItxData),a.analyzer.BindOutput("currentTaskSelectionInput",n.setTsRange,{notNull:!0}),n}return r(t,e),t.prototype.setBrushItxData=function(e){var t=e.map(function(e){return{itxStart:parseInt(e.itxStart,10),itxEnd:parseInt(e.itxEnd,10)}});console.log("brushItxData",t),this.setState({brushItxData:t,hide:!1})},t.prototype.setChorniclesItxData=function(e){var t=e.map(function(e){if("delta"!==e.itxType&&"navigate"!==e.itxType)throw new Error("itxType of chroniclesItxData should be delta or navigate");return{ts:parseInt(e.ts,10),itxType:e.itxType}});console.log("chroniclesItxData",t),this.setState({chroniclesItxData:t})},t.prototype.setTsRange=function(e){var t=e[0];console.log("tsRange",t),this.setState({tsRange:t})},t.prototype.hide=function(){this.setState({hide:!0})},t.prototype.render=function(){var e=this.state,t=e.tsRange,n=e.chroniclesItxData,r=e.brushItxData,a=e.hide;return t&&r.length>0&&!a?o.createElement("div",{className:"floatingWidget"},o.createElement(i.ItxTrace,{tsRange:t,brushItxData:r,chroniclesItxData:n}),o.createElement("button",{onClick:this.hide},"close")):null},t}(o.Component);t.InteractionVis=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),a=n(5);t.AllItxTraces=function(){var e=o.analyzer.GetStaticView("allCorrectNonMemTasks"),t=o.analyzer.GetStaticView("correctNonMemBrushTraces"),n=o.analyzer.GetStaticView("correctNonMemChroniclesTraces"),i=e.map(function(e){return r.createElement(a.ItxTrace,{tsRange:e,brushItxData:t.filter(function(t){return t.wId===e.wId&&t.qId===e.qId}),chroniclesItxData:n.filter(function(t){return t.wId===e.wId&&t.qId===e.qId})})});return r.createElement(r.Fragment,null,i)}}]);
//# sourceMappingURL=bundle.js.map