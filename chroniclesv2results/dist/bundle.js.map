{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap ba60e635a6ebb0e330e6","webpack:///external \"React\"","webpack:///./src/setup.ts","webpack:///external \"d3\"","webpack:///./src/index.tsx","webpack:///./src/lib/config.ts","webpack:///./src/components/snippet/ItxTrace.tsx","webpack:///external \"ReactDOM\"","webpack:///./src/components/AnalysisContainer.tsx","webpack:///./src/components/WorkerSummary.tsx","webpack:///./src/lib/Analyzer.ts","webpack:///../shared/IDiel.ts","webpack:///external \"SQL\"","webpack:///../shared/dbHelper.ts","webpack:///./src/lib/codegen.ts","webpack:///../shared/logHelper.ts","webpack:///./src/components/TaskSummary.tsx","webpack:///./src/lib/stats.ts","webpack:///./src/lib/helper.ts","webpack:///./src/components/UnitSurveySummary.tsx","webpack:///../shared/surveyContent.ts","webpack:///./src/components/InteractionVis.tsx","webpack:///./src/components/AllItxTraces.tsx"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","React","value","Analyzer_1","analyzer","Analyzer","window","d3","loadPage","ReactDOM","render","createElement","AnalysisContainer_1","default","document","getElementById","map","t","sqlFilePaths","Map","jsonFiles","analysisVersion","skipWIds","DEBUG","dbFiles","Duplicates","defaultProps","visWidth","visHeight","shapeSize","ItxTrace","tsRange","brushItxData","chroniclesItxData","timeScale","scaleLinear","rangeRound","domain","startTime","endTime","itxScale","brush","delta","navigate","itxColorScale","chroniclesShapes","b","ts","Error","Math","round","cx","cy","itxType","r","fillOpacity","fill","brushItxShapes","rectWidth","max","itxEnd","itxStart","x","y","width","height","grid","push","x1","y1","x2","y2","stroke","Fragment","wId","qId","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","__","constructor","create","Summaries","WorkerSummary_1","TaskSummary_1","UnitSurveySummary_1","InteractionVis_1","AllItxTraces_1","togglesFalse","set","Worker","Task","ToolSurvey","FlowSurvey","AnalysisContainer","_super","_this","setView","bind","state","content","setState","contentDiv","Trace","AllItxTraces","InteractionVis","UnitSurveySummary","survey","className","onClick","Component","Shape","setup_1","WorkerSummary","clickShape","shapeInfo","shape","test","count","getANumber","countCompleted","countCancelled","countFailed","countChronicle","allSuccessCountsByWorker","GetStaticView","xTaskCount","taskSuccessVis","filter","v","countCorrect","random","TaskPerf","isTraining","xTrainingCount","trainingSuccessVis","TrainingPerf","style","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","op","f","TypeError","_","label","ops","pop","trys","length","g","sent","throw","return","Symbol","iterator","IDiel_1","index_1","config_1","codegen_1","OutputTables","setup","_a","LoadDb","setupOutputStmts","setupInputStmts","inputSQL","preps","fetch","text","getPrepareQueries","forEach","q","console","log","query","input","db","prepare","names","analysisProgramSQL","newAnalysisProgramSQL","analysisViewSQL","outputProgramSQL","slice","match","vName","output","sql","exec","values","NaN","sql_js_1","dbHelper_1","defaultOuptConfig","notNull","IDiel","dbName","runOutput","tick","BindOutput","boundFns","staticInput","staticOutput","file","response","bufferRaw","buffer","close","arrayBuffer","Uint8Array","Database","create_function","NewInput","tsI","assign","$ts","timeNow","run","cIn","readStmt","view","getAsObject","reactFn","has","from","keys","join","downloadDB","dRaw","export","blob","Blob","downloadHelper","error","SQL","assertQueryHasResult","columns","Date","toDateString","JSON","stringify","replace","msg","source","hashCompare","a","aVals","split","bVals","state_1","av","table","bR","bv","prettyTimeNow","toTimeString","substr","extension","href","URL","createObjectURL","download","onclick","setTimeout","revokeObjectURL","click","downloadQueryResultAsCSV","csvContent","rowArray","row","type","getColumns","tableSQL","tableName","colNames","getDedupeQueries","indexOf","cols","simpleParse","print","scripts","newScripts","_i","scripts_1","tmp","includes","name_1","logHelper_1","LoggedTablesForAnalysis","stats_1","helper_1","TaskSummary","rRaw","data","qRank","question","correctTimes","processTimes","incorrectTimes","visDiv","sort","range","concat","time","genCircle","gaussianRandom","$wId","$qId","circles","colSpan","dangerouslySetInnerHTML","__html","start","end","rand","floor","simpleExec","hashCode","str","hash","charCodeAt","parseInt","surveyContent_1","commentsView","surveySequence","FlowSurveySequenceShared","surveyQuestions","FlowSurveyQuestionsShared","getUsabilitySurveySequence","UsabilitySurveyQuestionsShared","comments","answer","answers","xScale","answersDiv","answerData","borderBottom","align","IsChronicles","ItxTrace_1","setBrushItxData","setTsRange","setChorniclesItxData","hide","tsRangeRaw","tsRanges","divs"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = React;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Analyzer_1 = __webpack_require__(9);\r\nexports.analyzer = new Analyzer_1.Analyzer();\r\n// show summary\r\nwindow.analyzer = exports.analyzer;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = d3;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar ReactDOM = __webpack_require__(6);\r\nvar AnalysisContainer_1 = __webpack_require__(7);\r\n// this is the place where DIEL should be loaded with the\r\n// generated .db file\r\nfunction loadPage() {\r\n    ReactDOM.render(React.createElement(AnalysisContainer_1.default, null), document.getElementById(\"wrapper\"));\r\n}\r\nexports.loadPage = loadPage;\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar m = [\"tables\", \"analysisTables\", \"analysisViews\",\r\n    \"program\", \"newProgram\", \"input\", \"triggers\", \"output\"].map(function (t) { return [t, \"./src/sql/\" + t + \".sql\"]; });\r\nexports.sqlFilePaths = new Map(m);\r\nexports.jsonFiles = [\"./data/realv3.json\"];\r\nexports.analysisVersion = \"V1\";\r\nexports.skipWIds = [\"A11ECAX3S2P9FA\"];\r\n// export const jsonFiles = [\"./data/yifan_new.json\"];\r\nexports.DEBUG = false;\r\nvar debugPrefix = \"yifan_new_\";\r\nexports.dbFiles = new Map([\r\n    \"raw\", \"processed\", \"final\"\r\n].map(function (t) { return [t, \"./data/\" + (exports.DEBUG ? debugPrefix : \"\") + t + \".db\"]; }));\r\nexports.Duplicates = [\"taskTimes\", \"memoryTask\", \"answers\", \"taskInfo\"];\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar d3 = __webpack_require__(2);\r\nvar defaultProps = {\r\n    visWidth: 700,\r\n    visHeight: 40,\r\n    shapeSize: 10\r\n};\r\nexports.ItxTrace = function (p) {\r\n    var tsRange = p.tsRange, brushItxData = p.brushItxData, chroniclesItxData = p.chroniclesItxData, visWidth = p.visWidth, visHeight = p.visHeight, shapeSize = p.shapeSize;\r\n    var timeScale = d3.scaleLinear()\r\n        .rangeRound([1, visWidth])\r\n        .domain([tsRange.startTime, tsRange.endTime]);\r\n    var itxScale = {\r\n        \"brush\": visHeight / 6,\r\n        \"delta\": visHeight / 6 * 3,\r\n        \"navigate\": visHeight / 6 * 5\r\n    };\r\n    var itxColorScale = {\r\n        \"brush\": \"steelblue\",\r\n        \"delta\": \"orange\",\r\n        \"navigate\": \"red\"\r\n    };\r\n    var chroniclesShapes = chroniclesItxData.map(function (b) {\r\n        if (b.ts < tsRange.startTime || b.ts > tsRange.endTime) {\r\n            throw new Error(\"Data is incorrect,\\n          interaction time out of bounds by \" + Math.round((b.ts - tsRange.endTime) / 1000) + \"\\n          or \" + Math.round((b.ts - tsRange.startTime) / 1000));\r\n        }\r\n        return React.createElement(\"circle\", { cx: timeScale(b.ts), cy: itxScale[b.itxType], r: shapeSize / 2, fillOpacity: 0.4, fill: itxColorScale[b.itxType] });\r\n    });\r\n    var brushItxShapes = brushItxData.map(function (b, i) {\r\n        var rectWidth = Math.max(shapeSize / 2, timeScale(b.itxEnd) - timeScale(b.itxStart));\r\n        // console.log(\"rectWidth\", rectWidth, b.itxEnd, b.itxStart, timeScale(b.itxEnd) - timeScale(b.itxStart));\r\n        return React.createElement(\"rect\", { x: timeScale(b.itxStart), y: itxScale.brush + i % 2 * 6, width: rectWidth, height: shapeSize, fillOpacity: 0.4, fill: itxColorScale.brush });\r\n    });\r\n    // draw one every 10 seconds\r\n    var grid = [];\r\n    var skipTime = 5000;\r\n    // const skipTime = (tsRange.endTime - tsRange.startTime) > 30000 ? 10000 : 5000;\r\n    for (var i = tsRange.startTime; i < tsRange.endTime; i += skipTime) {\r\n        grid.push(React.createElement(\"line\", { x1: timeScale(i), y1: \"0\", x2: timeScale(i), y2: visHeight, stroke: \"lightgray\" }));\r\n    }\r\n    grid.push(React.createElement(\"line\", { x1: timeScale(tsRange.endTime), y1: \"0\", x2: timeScale(tsRange.endTime), y2: visHeight, stroke: \"gray\" }));\r\n    return React.createElement(React.Fragment, null,\r\n        React.createElement(\"p\", null,\r\n            Math.round((tsRange.endTime - tsRange.startTime) / 1000),\r\n            \" sec: \",\r\n            tsRange.wId,\r\n            \" \",\r\n            tsRange.qId),\r\n        React.createElement(\"svg\", { width: visWidth + 50, height: visHeight },\r\n            grid,\r\n            chroniclesShapes,\r\n            brushItxShapes));\r\n};\r\nexports.ItxTrace.defaultProps = defaultProps;\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nmodule.exports = ReactDOM;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar WorkerSummary_1 = __webpack_require__(8);\r\nvar TaskSummary_1 = __webpack_require__(15);\r\nvar UnitSurveySummary_1 = __webpack_require__(18);\r\nvar InteractionVis_1 = __webpack_require__(20);\r\nvar AllItxTraces_1 = __webpack_require__(21);\r\nvar Summaries;\r\n(function (Summaries) {\r\n    Summaries[Summaries[\"Worker\"] = 0] = \"Worker\";\r\n    Summaries[Summaries[\"Task\"] = 1] = \"Task\";\r\n    Summaries[Summaries[\"Trace\"] = 2] = \"Trace\";\r\n    Summaries[Summaries[\"FlowSurvey\"] = 3] = \"FlowSurvey\";\r\n    Summaries[Summaries[\"ToolSurvey\"] = 4] = \"ToolSurvey\";\r\n})(Summaries || (Summaries = {}));\r\nvar togglesFalse = new Map();\r\ntogglesFalse.set(Summaries.Worker, false);\r\ntogglesFalse.set(Summaries.Task, false);\r\ntogglesFalse.set(Summaries.ToolSurvey, false);\r\ntogglesFalse.set(Summaries.FlowSurvey, false);\r\nvar AnalysisContainer = /** @class */ (function (_super) {\r\n    __extends(AnalysisContainer, _super);\r\n    function AnalysisContainer(p) {\r\n        var _this = _super.call(this, p) || this;\r\n        _this.setView = _this.setView.bind(_this);\r\n        _this.state = {\r\n            content: Summaries.Task\r\n        };\r\n        return _this;\r\n    }\r\n    AnalysisContainer.prototype.setView = function (content) {\r\n        var _this = this;\r\n        return function () {\r\n            _this.setState({ content: content });\r\n        };\r\n    };\r\n    AnalysisContainer.prototype.render = function () {\r\n        var content = this.state.content;\r\n        var contentDiv;\r\n        if (content === Summaries.Trace) {\r\n            contentDiv = React.createElement(AllItxTraces_1.AllItxTraces, null);\r\n        }\r\n        if (content === Summaries.Task) {\r\n            contentDiv = React.createElement(React.Fragment, null,\r\n                React.createElement(TaskSummary_1.default, null),\r\n                React.createElement(InteractionVis_1.InteractionVis, null));\r\n        }\r\n        if (content === Summaries.Worker) {\r\n            contentDiv = React.createElement(WorkerSummary_1.default, null);\r\n        }\r\n        if (content === Summaries.FlowSurvey) {\r\n            contentDiv = React.createElement(UnitSurveySummary_1.UnitSurveySummary, { survey: \"FlowSurvey\" });\r\n        }\r\n        if (content === Summaries.ToolSurvey) {\r\n            contentDiv = React.createElement(UnitSurveySummary_1.UnitSurveySummary, { survey: \"ToolSurvey\" });\r\n        }\r\n        return React.createElement(\"div\", { className: \"container\" },\r\n            React.createElement(\"div\", { className: \"summary\" },\r\n                React.createElement(\"div\", { className: \"controls\" },\r\n                    React.createElement(\"button\", { onClick: this.setView(Summaries.Task) }, \"toggle task\"),\r\n                    React.createElement(\"button\", { onClick: this.setView(Summaries.Worker) }, \"toggle worker\"),\r\n                    React.createElement(\"button\", { onClick: this.setView(Summaries.FlowSurvey) }, \"toggle flow\"),\r\n                    React.createElement(\"button\", { onClick: this.setView(Summaries.ToolSurvey) }, \"toggle tool\"),\r\n                    React.createElement(\"button\", { onClick: this.setView(Summaries.Trace) }, \"toggle trace\")),\r\n                React.createElement(\"div\", { className: \"portal\" }, contentDiv)));\r\n    };\r\n    return AnalysisContainer;\r\n}(React.Component));\r\nexports.default = AnalysisContainer;\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar d3 = __webpack_require__(2);\r\nvar setup_1 = __webpack_require__(1);\r\nvar visWidth = 300;\r\nvar visHeight = 30;\r\nvar maxTasks = 10;\r\nvar maxTraining = 4;\r\nvar Shape;\r\n(function (Shape) {\r\n    Shape[Shape[\"TrainingPerf\"] = 0] = \"TrainingPerf\";\r\n    Shape[Shape[\"TaskPerf\"] = 1] = \"TaskPerf\";\r\n})(Shape || (Shape = {}));\r\nvar WorkerSummary = /** @class */ (function (_super) {\r\n    __extends(WorkerSummary, _super);\r\n    function WorkerSummary(p) {\r\n        var _this = _super.call(this, p) || this;\r\n        _this.clickShape = _this.clickShape.bind(_this);\r\n        _this.state = {\r\n            shapeInfo: new Map(),\r\n        };\r\n        return _this;\r\n    }\r\n    WorkerSummary.prototype.clickShape = function (shape, shapeInfo) {\r\n        this.setState(function (p) {\r\n            p.shapeInfo.set(shape, shapeInfo);\r\n            return p;\r\n        });\r\n    };\r\n    WorkerSummary.prototype.test = function () {\r\n        var v = {};\r\n        v[\"isTraining\"];\r\n    };\r\n    WorkerSummary.prototype.render = function () {\r\n        var _this = this;\r\n        var count = setup_1.analyzer.getANumber(\"select count (distinct wId) from workerTasks\");\r\n        // a bit complex so got view\r\n        var countCompleted = setup_1.analyzer.getANumber(\"select count () from completedAll\");\r\n        var countCancelled = setup_1.analyzer.getANumber(\"select count(distinct wId) from CancelSurvey\");\r\n        // failed should just work with the survey but logging was wrong... so countig instead.\r\n        var countFailed = setup_1.analyzer.getANumber(\"select count() from successCountPerWorker where isTraining = 1 and countCorrect < 1\");\r\n        var countChronicle = setup_1.analyzer.getANumber(\"\\n      select count(distinct wId) from (select wId from deltaItx union select wId from navigateItx)\");\r\n        var allSuccessCountsByWorker = setup_1.analyzer.GetStaticView(\"successCountPerWorker\");\r\n        var xTaskCount = d3.scaleLinear().rangeRound([1, visWidth]).domain([0, maxTasks]);\r\n        var taskSuccessVis = React.createElement(\"svg\", { width: visWidth + 50, height: visHeight },\r\n            allSuccessCountsByWorker.filter(function (v) { return !v[\"isTraining\"]; }).map(function (v) { return (React.createElement(\"circle\", { cx: xTaskCount(v.countCorrect), cy: visHeight * Math.random(), r: 3, fillOpacity: 0.5, fill: \"steelblue\", onClick: function () { return _this.clickShape(Shape.TaskPerf, (v.isTraining ? \"training\" : \"task\") + \" \" + v.countCorrect); } })); }),\r\n            React.createElement(\"text\", { x: xTaskCount(maxTasks), y: visHeight / 2 }, maxTasks));\r\n        var xTrainingCount = d3.scaleLinear().rangeRound([1, visWidth]).domain([0, maxTraining]);\r\n        var trainingSuccessVis = React.createElement(\"svg\", { width: visWidth + 50, height: visHeight },\r\n            allSuccessCountsByWorker.filter(function (v) { return !v.isTraining; }).map(function (v) { return (React.createElement(\"circle\", { cx: xTrainingCount(v.countCorrect), cy: visHeight * Math.random(), r: 3, fillOpacity: 0.5, fill: \"steelblue\", onClick: function () { return _this.clickShape(Shape.TrainingPerf, (v.isTraining ? \"training\" : \"task\") + \" \" + v.countCorrect); } })); }),\r\n            React.createElement(\"text\", { x: xTaskCount(maxTasks), y: visHeight / 2 }, maxTraining));\r\n        return React.createElement(React.Fragment, null,\r\n            React.createElement(\"table\", null,\r\n                React.createElement(\"tr\", null,\r\n                    React.createElement(\"th\", null, \"Total\"),\r\n                    React.createElement(\"th\", null, \"Complete\"),\r\n                    React.createElement(\"th\", null, \"Cancelled\"),\r\n                    React.createElement(\"th\", null, \"Failed\"),\r\n                    React.createElement(\"th\", null, \"No Chronicle\")),\r\n                React.createElement(\"tr\", null,\r\n                    React.createElement(\"td\", null, count),\r\n                    React.createElement(\"td\", null, countCompleted),\r\n                    React.createElement(\"td\", null, countCancelled),\r\n                    React.createElement(\"td\", null, countFailed),\r\n                    React.createElement(\"td\", null, count - countChronicle))),\r\n            React.createElement(\"br\", null),\r\n            React.createElement(\"table\", { style: { width: 500 } },\r\n                React.createElement(\"tr\", null,\r\n                    React.createElement(\"td\", { style: { width: 100 } }, \"Task Success\"),\r\n                    React.createElement(\"td\", { style: { width: visWidth + 50 } }, taskSuccessVis),\r\n                    React.createElement(\"td\", { style: { width: 100 } }, this.state.shapeInfo.get(Shape.TaskPerf))),\r\n                React.createElement(\"tr\", null,\r\n                    React.createElement(\"td\", { style: { width: 100 } }, \"Training Success\"),\r\n                    React.createElement(\"td\", { style: { width: visWidth + 50 } }, trainingSuccessVis),\r\n                    React.createElement(\"td\", { style: { width: 100 } }, this.state.shapeInfo.get(Shape.TrainingPerf)))));\r\n    };\r\n    return WorkerSummary;\r\n}(React.Component));\r\nexports.default = WorkerSummary;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar IDiel_1 = __webpack_require__(10);\r\nvar index_1 = __webpack_require__(3);\r\nvar config_1 = __webpack_require__(4);\r\nvar codegen_1 = __webpack_require__(13);\r\nvar OutputTables = [\"workerTasks\"];\r\nvar Analyzer = /** @class */ (function (_super) {\r\n    __extends(Analyzer, _super);\r\n    function Analyzer() {\r\n        var _this = _super.call(this, \"analsysis\") || this;\r\n        _this.setup();\r\n        return _this;\r\n    }\r\n    Analyzer.prototype.setup = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.LoadDb(config_1.dbFiles.get(\"final\"))];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.setupOutputStmts()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.setupInputStmts();\r\n                        index_1.loadPage();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Analyzer.prototype.setupInputStmts = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var inputSQL, preps;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, fetch(config_1.sqlFilePaths.get(\"input\"))];\r\n                    case 1: return [4 /*yield*/, (_a.sent()).text()];\r\n                    case 2:\r\n                        inputSQL = _a.sent();\r\n                        preps = codegen_1.getPrepareQueries(inputSQL);\r\n                        preps.forEach(function (q) {\r\n                            console.log(\"\\nPrepare Stmt\\n\" + q.query + \"\\n\");\r\n                            _this.input.set(q.name, _this.db.prepare(q.query));\r\n                        });\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Analyzer.prototype.setupOutputStmts = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var names, analysisProgramSQL, newAnalysisProgramSQL, analysisViewSQL, outputProgramSQL;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        names = OutputTables.slice();\r\n                        return [4 /*yield*/, fetch(config_1.sqlFilePaths.get(\"program\"))];\r\n                    case 1: return [4 /*yield*/, (_a.sent()).text()];\r\n                    case 2:\r\n                        analysisProgramSQL = _a.sent();\r\n                        return [4 /*yield*/, fetch(config_1.sqlFilePaths.get(\"newProgram\"))];\r\n                    case 3: return [4 /*yield*/, (_a.sent()).text()];\r\n                    case 4:\r\n                        newAnalysisProgramSQL = _a.sent();\r\n                        (analysisProgramSQL + newAnalysisProgramSQL).match(/create table \\w+/ig).map(function (m) {\r\n                            var vName = m.slice(13);\r\n                            names.push(vName);\r\n                        });\r\n                        return [4 /*yield*/, fetch(config_1.sqlFilePaths.get(\"analysisViews\"))];\r\n                    case 5: return [4 /*yield*/, (_a.sent()).text()];\r\n                    case 6:\r\n                        analysisViewSQL = _a.sent();\r\n                        return [4 /*yield*/, fetch(config_1.sqlFilePaths.get(\"output\"))];\r\n                    case 7: return [4 /*yield*/, (_a.sent()).text()];\r\n                    case 8:\r\n                        outputProgramSQL = _a.sent();\r\n                        (analysisViewSQL + outputProgramSQL).match(/create view \\w+/ig).map(function (m) {\r\n                            var vName = m.slice(12);\r\n                            names.push(vName);\r\n                        });\r\n                        names.map(function (o) {\r\n                            try {\r\n                                _this.output.set(o, _this.db.prepare(\"select * from \" + o));\r\n                            }\r\n                            catch (e) {\r\n                                console.log(\"%c Failed to output \" + o, \"color: red\");\r\n                                // throw new Error(e);\r\n                            }\r\n                        });\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Analyzer.prototype.getANumber = function (sql) {\r\n        try {\r\n            var r = this.db.exec(sql);\r\n            if (r && r[0] && r[0].values && r[0].values.length > 0) {\r\n                return r[0].values[0][0];\r\n            }\r\n            else {\r\n                console.log(\"%c SQL \" + sql + \" did not return any results\", \"color: #FF2400\");\r\n                return NaN;\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.log(\"%c Query did not execute\\n\" + sql + \" because \" + e, \"color: #FF2400\");\r\n            return NaN;\r\n        }\r\n    };\r\n    return Analyzer;\r\n}(IDiel_1.default));\r\nexports.Analyzer = Analyzer;\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar sql_js_1 = __webpack_require__(11);\r\nvar dbHelper_1 = __webpack_require__(12);\r\nvar defaultOuptConfig = {\r\n    notNull: false,\r\n};\r\nvar IDiel = /** @class */ (function () {\r\n    function IDiel(dbName) {\r\n        this.runOutput = this.runOutput.bind(this);\r\n        this.tick = this.tick.bind(this);\r\n        this.exec = this.exec.bind(this);\r\n        this.BindOutput = this.BindOutput.bind(this);\r\n        this.dbName = dbName;\r\n        // initialize\r\n        this.boundFns = [];\r\n        this.input = new Map();\r\n        this.output = new Map();\r\n        this.staticInput = new Map();\r\n        this.staticOutput = new Map();\r\n    }\r\n    IDiel.prototype.LoadDb = function (file) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response, bufferRaw, buffer;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.db) {\r\n                            this.db.close();\r\n                        }\r\n                        return [4 /*yield*/, fetch(file)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        return [4 /*yield*/, response.arrayBuffer()];\r\n                    case 2:\r\n                        bufferRaw = _a.sent();\r\n                        buffer = new Uint8Array(bufferRaw);\r\n                        this.db = new sql_js_1.Database(buffer);\r\n                        this.db.create_function(\"log\", dbHelper_1.log);\r\n                        this.db.create_function(\"tick\", this.tick());\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    IDiel.prototype.NewInput = function (i, o) {\r\n        var tsI = Object.assign({ $ts: dbHelper_1.timeNow() }, o);\r\n        this.input.get(i).run(tsI);\r\n    };\r\n    IDiel.prototype.GetStaticView = function (v, cIn) {\r\n        if (cIn === void 0) { cIn = {}; }\r\n        console.log(\"get view\", v);\r\n        var s = this.output.get(v);\r\n        if (!s) {\r\n            console.log(\"%c Error \" + v + \" does not exist\", \"color: red\");\r\n        }\r\n        return this.readStmt(s, v, cIn);\r\n    };\r\n    IDiel.prototype.readStmt = function (s, view, c) {\r\n        s.bind({});\r\n        var r = [];\r\n        while (s.step()) {\r\n            r.push(s.getAsObject());\r\n        }\r\n        if (c.notNull && r.length === 0) {\r\n            throw new Error(view + \" should not be null\");\r\n        }\r\n        if (r.length > 0) {\r\n            return r;\r\n        }\r\n        console.log(\"%cError \" + view + \" did not return a value\", \"color: red\");\r\n        return null;\r\n    };\r\n    IDiel.prototype.BindOutput = function (view, reactFn, cIn) {\r\n        if (cIn === void 0) { cIn = {}; }\r\n        if (!this.output.has(view)) {\r\n            throw new Error(\"output not defined \" + view + \" \" + Array.from(this.output.keys()).join(\", \"));\r\n        }\r\n        // immtable\r\n        var c = Object.assign({}, defaultOuptConfig, cIn);\r\n        // console.log(\"final config\", c);\r\n        this.boundFns.push({ view: view, s: this.output.get(view), f: reactFn, c: c });\r\n    };\r\n    IDiel.prototype.runOutput = function (b) {\r\n        var s = b.s, f = b.f, c = b.c, view = b.view;\r\n        var r = this.readStmt(s, view, c);\r\n        if (r) {\r\n            f(r);\r\n        }\r\n        return;\r\n    };\r\n    IDiel.prototype.tick = function () {\r\n        var boundFns = this.boundFns;\r\n        var runOutput = this.runOutput;\r\n        return function () {\r\n            // console.log(\"ticked!\", boundFns);\r\n            boundFns.map(function (b) {\r\n                runOutput(b);\r\n            });\r\n        };\r\n    };\r\n    IDiel.prototype.downloadDB = function () {\r\n        var dRaw = this.db.export();\r\n        var blob = new Blob([dRaw]);\r\n        dbHelper_1.downloadHelper(blob, \"session\");\r\n    };\r\n    IDiel.prototype.exec = function (sql) {\r\n        try {\r\n            var r = this.db.exec(sql);\r\n            if (!(r && r[0] && r[0].values && r[0].values.length > 0)) {\r\n                console.log(\"%c SQL \" + sql + \" did not return any results\", \"color: #FF2400\");\r\n            }\r\n            return r;\r\n        }\r\n        catch (error) {\r\n            console.log(\"%c Query did not execute\\n\" + sql + \" because \" + error, \"color: #FF2400\");\r\n        }\r\n        return null;\r\n    };\r\n    return IDiel;\r\n}());\r\nexports.default = IDiel;\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\nmodule.exports = SQL;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction assertQueryHasResult(r, query) {\r\n    if ((!r) || (!r.values)) {\r\n        throw new Error(\"Query \" + query + \" has NO result\");\r\n    }\r\n}\r\nexports.assertQueryHasResult = assertQueryHasResult;\r\n// for console debugging\r\nfunction d(db, sql) {\r\n    var r = db.exec(sql);\r\n    if (r.length > 0) {\r\n        r[0].values.map(function (v) {\r\n            v.map(function (c, i) {\r\n                if (r[0].columns[i] === \"ts\") {\r\n                    c = new Date(c).toDateString();\r\n                }\r\n            });\r\n        });\r\n        console.log(r[0].columns.join(\"\\t\"));\r\n        console.log(JSON.stringify(r[0].values).replace(/\\],\\[/g, \"\\n\").replace(\"[[\", \"\").replace(\"]]\", \"\").replace(/,/g, \"\\t\"));\r\n    }\r\n    else {\r\n        console.log(\"NO RESULT\");\r\n    }\r\n}\r\nexports.d = d;\r\nwindow.d = d;\r\nfunction log(msg, source) {\r\n    console.log(\"[\" + source + \"] \" + msg);\r\n    return 1;\r\n}\r\nexports.log = log;\r\nfunction timeNow() {\r\n    return +new Date();\r\n}\r\nexports.timeNow = timeNow;\r\n// this is needed because the groupby has non deterministic orderings\r\n// and I wasn't able to write a custom reducer\r\n// I suspect this is faster anyways\r\nfunction hashCompare(a, b) {\r\n    // split by -\r\n    var aVals = a.split(\"-\");\r\n    var bVals = b.split(\"-\");\r\n    var _loop_1 = function (i) {\r\n        var av = aVals[i];\r\n        var table = av.split(\":\")[0];\r\n        var bR = bVals.filter(function (bv) { return bv.split(\":\")[0] === table; });\r\n        if (bR.length !== 1) {\r\n            console.log(\"didn't find\", table, bVals);\r\n            return { value: 0 };\r\n        }\r\n        if (bR[0] !== av) {\r\n            return { value: 0 };\r\n        }\r\n    };\r\n    for (var i = 0; i < aVals.length; i++) {\r\n        var state_1 = _loop_1(i);\r\n        if (typeof state_1 === \"object\")\r\n            return state_1.value;\r\n    }\r\n    return 1;\r\n}\r\nexports.hashCompare = hashCompare;\r\nfunction prettyTimeNow() {\r\n    return new Date().toTimeString().substr(0, 8);\r\n}\r\nexports.prettyTimeNow = prettyTimeNow;\r\n/**********************\r\n * Debugging support\r\n *********************/\r\nfunction downloadHelper(blob, name, extension) {\r\n    if (extension === void 0) { extension = \"db\"; }\r\n    var a = document.createElement(\"a\");\r\n    a.href = window.URL.createObjectURL(blob);\r\n    a.download = name + \"_\" + prettyTimeNow() + \".\" + extension;\r\n    a.onclick = function () {\r\n        setTimeout(function () {\r\n            window.URL.revokeObjectURL(a.href);\r\n        }, 1500);\r\n    };\r\n    a.click();\r\n}\r\nexports.downloadHelper = downloadHelper;\r\nfunction downloadQueryResultAsCSV(db, query) {\r\n    var csvContent = \"\";\r\n    var r = db.exec(query);\r\n    if (r.length && r[0].values) {\r\n        csvContent += r[0].columns.join(\",\") + \"\\r\\n\";\r\n        r[0].values.forEach(function (rowArray) {\r\n            var row = rowArray.join(\",\");\r\n            csvContent += row + \"\\r\\n\";\r\n        });\r\n        var b = new Blob([csvContent], { type: \"text/plain;charset=UTF-8\" });\r\n        downloadHelper(b, \"userData.csv\");\r\n        console.log(\"should have downloaded\", csvContent);\r\n    }\r\n    else {\r\n        console.log(\"NO RESULT\");\r\n    }\r\n}\r\nexports.downloadQueryResultAsCSV = downloadQueryResultAsCSV;\r\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = __webpack_require__(4);\r\nvar logHelper_1 = __webpack_require__(14);\r\n// this takes a .sql file and generates the corresponding into a ts file\r\n/* e.g., from\r\n\nCREATE TABLE eventLog (\r\n  ts INTEGER NOT NULL,\r\n  eventName TEXT NOT NULL,\r\n  parameter TEXT\r\n);\r\n\nto\r\n\neventLog: db.prepare(`\r\n    insert into eventLog (ts, eventName, parameter)\r\n    values ($ts, $eventName, $parameter);\r\n  `),\r\n*/\r\nfunction getColumns(tableSQL) {\r\n    var queries = tableSQL.split(\");\");\r\n    var r = queries.filter(function (q) { return q && q.length > 0 && (q !== \"\\n\"); }).map(function (q) {\r\n        var tableName = q.match(/create table \\w+/ig)[0].slice(13);\r\n        var colNames = q.match(/(\\w+) (integer|text)/ig).map(function (v) { return v.split(\" \")[0]; });\r\n        return { tableName: tableName, colNames: colNames };\r\n    });\r\n    return r;\r\n}\r\n/**\r\n * This generates the prepared statement that skipps duplicates\r\n *   - could not use https://stackoverflow.com/questions/19337029/insert-if-not-exists-statement-in-sqlite\r\n *     since it conflates differnet kinds of failing constraints, e.g., not null\r\n *   - also must not include taskId when checking for duplicates since it's generated on the gpaas side\r\n *     and for the same values would have different taskIds.\r\n * @param tableSQL sql strings\r\n */\r\nfunction getPrepareQueries(tableSQL) {\r\n    var i = getColumns(tableSQL);\r\n    return i.map(function (s) { return ({\r\n        name: s.tableName,\r\n        query: \"insert into \" + s.tableName + \" (\" + s.colNames.join(\", \") + \")\\n            values (\" + s.colNames.map(function (v) { return \"$\" + v; }).join(\", \") + \");\"\r\n    }); });\r\n}\r\nexports.getPrepareQueries = getPrepareQueries;\r\nfunction getDedupeQueries(tableSQL) {\r\n    var i = getColumns(tableSQL);\r\n    return i.filter(function (s) { return config_1.Duplicates.indexOf(s.tableName) > -1; }).map(function (s) {\r\n        var cols = s.colNames.filter(function (v) { return v !== \"taskId\"; }).join(\", \");\r\n        return ({\r\n            name: s.tableName,\r\n            query: \"create table temp as\\n        select distinct \" + cols + \"\\n        from \" + s.tableName + \";\\n      delete from \" + s.tableName + \";\\n      insert into \" + s.tableName + \" (\" + s.colNames.join(\", \") + \")\\n        select \" + s.colNames.join(\", \") + \" from temp;\\n      drop table temp;\"\r\n        });\r\n    });\r\n}\r\nexports.getDedupeQueries = getDedupeQueries;\r\n/**\r\n * This method is very brittle and we should fix\r\n * @param tableSQL input SQL\r\n * @param print whether to show the results\r\n */\r\nfunction simpleParse(tableSQL, print) {\r\n    if (print === void 0) { print = false; }\r\n    var scripts = tableSQL.split(\"\\n\\n\");\r\n    var newScripts = [];\r\n    for (var _i = 0, scripts_1 = scripts; _i < scripts_1.length; _i++) {\r\n        var s = scripts_1[_i];\r\n        s = s.replace(/^ *--.*$\\n/img, \"\");\r\n        s = s.replace(/^drop.*$\\n/img, \"\");\r\n        // also get rid of primary key requirements\r\n        s = s.replace(/PRIMARY KEY/i, \"not null\");\r\n        // need to delete unique, also if it's the last one, need to remove the comma\r\n        s = s.replace(/,\\n^.*UNIQUE.*$\\n\\);/img, \"\\n);\");\r\n        // then remove the none last items\r\n        s = s.replace(/^.*UNIQUE.*$\\n/img, \"\");\r\n        // then before the \");\", need to insert the wId and taskID, at the top after the first ( with new line\r\n        var tmp = s.split(\"(\\n\");\r\n        // assert that there are only 2\r\n        if (tmp.length !== 2) {\r\n            if (print)\r\n                console.log(\"[Not ran]\\n\" + s + \"\\n\", \"color: red\");\r\n            continue;\r\n        }\r\n        if (tmp[0].includes(\"insert into\")\r\n            || tmp[0].includes(\"ChartInitData\")\r\n            || tmp[0].includes(\"ChartData\")) {\r\n            if (print)\r\n                console.log(\"[Not ran]\\n\" + s + \"\\n\", \"color: red\");\r\n            continue;\r\n        }\r\n        var name_1 = tmp[0].match(/create table \\w+/ig)[0].slice(13);\r\n        if (logHelper_1.LoggedTablesForAnalysis.indexOf(name_1) === -1) {\r\n            if (print)\r\n                console.log(\"[Not ran, not logged]\\n\" + s + \"\\n\", \"color: red\");\r\n            continue;\r\n        }\r\n        // and then stitch together after\r\n        s = tmp[0]\r\n            + (\"(\\n  wId integer not null,\" + (config_1.Duplicates.indexOf(name_1) > -1 ? \"\" : \"\\n  taskId integer not null,\") + \"\\n\")\r\n            + tmp[1];\r\n        if (print)\r\n            console.log(\"[executing script]\\n\" + s + \"\\n\");\r\n        newScripts.push(s);\r\n    }\r\n    return newScripts;\r\n}\r\nexports.simpleParse = simpleParse;\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LoggedTablesForAnalysis = [\r\n    // raw events\r\n    \"eventLog\",\r\n    \"navigateItx\",\r\n    \"deltaItx\",\r\n    \"deleteItx\",\r\n    \"xBrushItx\",\r\n    // SP\r\n    \"itxId_SP\",\r\n    \"brushState_SP\",\r\n    // this is important for recognizing cached results\r\n    \"eqChart_SP\",\r\n    \"chartDataAtomic\",\r\n    // this can tell us how many of the interactions\r\n    // was with a different view than the one immediately before\r\n    \"brushDep_SP\",\r\n    // task related\r\n    \"taskTimes\",\r\n    \"memoryTask\",\r\n    \"answers\",\r\n    \"taskInfo\"\r\n];\r\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar d3 = __webpack_require__(2);\r\nvar setup_1 = __webpack_require__(1);\r\nvar stats_1 = __webpack_require__(16);\r\nvar helper_1 = __webpack_require__(17);\r\nvar TaskSummary = /** @class */ (function (_super) {\r\n    __extends(TaskSummary, _super);\r\n    function TaskSummary(p) {\r\n        return _super.call(this, p) || this;\r\n    }\r\n    TaskSummary.prototype.render = function () {\r\n        var overAllWidth = 800;\r\n        var visWidth = 700;\r\n        var visHeight = 30;\r\n        var skipTime = 5000;\r\n        var shapeSize = 10;\r\n        // get the task info --- general distribution of how long something takes?\r\n        // get a violin plot of the completion time by the task\r\n        var rRaw = setup_1.analyzer.GetStaticView(\"taskCompletionTimes\");\r\n        // this ugliness is because we do not have reudce for sql.js....\r\n        var data = rRaw.map(function (v) { return ({\r\n            qId: v.qId,\r\n            qRank: v.qRank,\r\n            question: v.question,\r\n            correctTimes: helper_1.processTimes(v.correctTimes),\r\n            incorrectTimes: helper_1.processTimes(v.incorrectTimes),\r\n        }); });\r\n        var visDiv = data.sort(function (a, b) { return (a.qRank > b.qRank) ? 1 : 0; })\r\n            .map(function (r) {\r\n            // some buffer range\r\n            var range = [0, d3.max(r.correctTimes.concat(r.incorrectTimes), function (t) { return t.time; }) * 1.05];\r\n            var x = d3.scaleLinear().rangeRound([1, visWidth]).domain(range);\r\n            var grid = [];\r\n            for (var i = 0; i < range[1]; i += skipTime) {\r\n                grid.push(React.createElement(\"line\", { x1: x(i), y1: \"0\", x2: x(i), y2: visHeight, stroke: \"lightgray\" }));\r\n            }\r\n            var genCircle = function (t, c) { return React.createElement(\"circle\", { cx: x(t.time), cy: stats_1.gaussianRandom(0, visHeight), r: shapeSize / 2, fillOpacity: 0.5, fill: c ? \"steelblue\" : \"red\", className: \"clickable\", onClick: function () {\r\n                    console.log(\"inserting into taskSelectionInput\", t.wId, r.qId);\r\n                    setup_1.analyzer.NewInput(\"taskSelectionInput\", {\r\n                        $wId: t.wId,\r\n                        $qId: r.qId,\r\n                    });\r\n                } }); };\r\n            var circles = r.correctTimes.map(function (t) { return genCircle(t, true); })\r\n                .concat(r.incorrectTimes.map(function (t) { return genCircle(t, false); }));\r\n            return React.createElement(React.Fragment, null,\r\n                React.createElement(\"tr\", { style: { width: overAllWidth } },\r\n                    React.createElement(\"td\", { colSpan: 2, dangerouslySetInnerHTML: { __html: r.question } })),\r\n                React.createElement(\"tr\", null,\r\n                    React.createElement(\"td\", { style: { width: visWidth } },\r\n                        React.createElement(\"svg\", { width: visWidth, height: visHeight },\r\n                            grid,\r\n                            circles)),\r\n                    React.createElement(\"td\", null,\r\n                        Math.round(range[1] / 1000),\r\n                        \" seconds\")));\r\n        });\r\n        return React.createElement(React.Fragment, null,\r\n            React.createElement(\"table\", { style: { width: overAllWidth } }, visDiv));\r\n    };\r\n    return TaskSummary;\r\n}(React.Component));\r\nexports.default = TaskSummary;\r\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// https://stackoverflow.com/questions/25582882/javascript-math-random-normal-distribution-gaussian-bell-curve\r\n// apparently an approxuimationm validated by the central limit theorem\r\nfunction gaussianRandom(start, end) {\r\n    var rand = 0;\r\n    for (var i = 0; i < 6; i += 1) {\r\n        rand += Math.random();\r\n    }\r\n    rand = rand / 6;\r\n    return Math.floor(start + rand * (end - start + 1));\r\n}\r\nexports.gaussianRandom = gaussianRandom;\r\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction simpleExec(db, sql) {\r\n    var scripts = sql.split(\"\\n\\n\");\r\n    scripts.forEach(function (s) {\r\n        console.log(\"Executing sql \\n\" + s);\r\n        db.run(s);\r\n    });\r\n}\r\nexports.simpleExec = simpleExec;\r\nfunction hashCode(str) {\r\n    var hash = 0;\r\n    if (str.length === 0) {\r\n        return hash;\r\n    }\r\n    for (var i = 0; i < str.length; i++) {\r\n        var char = str.charCodeAt(i);\r\n        hash = ((hash << 5) - hash) + char;\r\n        hash = hash & hash; // Convert to 32bit integer\r\n    }\r\n    return hash;\r\n}\r\nexports.hashCode = hashCode;\r\n/**\r\n * This is for the view taskCompletionTimes\r\n *   so annoying\r\n * @param correctTimes\r\n */\r\nfunction processTimes(correctTimes) {\r\n    return correctTimes\r\n        ? correctTimes.split(\",\").map(function (n) {\r\n            var v = n.split(\"-\");\r\n            return {\r\n                time: parseInt(v[0], 10),\r\n                wId: v[1]\r\n            };\r\n        })\r\n        : [];\r\n}\r\nexports.processTimes = processTimes;\r\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar d3 = __webpack_require__(2);\r\nvar setup_1 = __webpack_require__(1);\r\nvar surveyContent_1 = __webpack_require__(19);\r\nvar visHeight = 30;\r\nexports.UnitSurveySummary = function (p) {\r\n    var _a = p.survey === \"FlowSurvey\"\r\n        ? {\r\n            commentsView: \"flowComments\",\r\n            view: \"flowResults\",\r\n            surveySequence: surveyContent_1.FlowSurveySequenceShared,\r\n            surveyQuestions: surveyContent_1.FlowSurveyQuestionsShared\r\n        }\r\n        : {\r\n            commentsView: \"toolComments\",\r\n            view: \"toolResults\",\r\n            surveySequence: surveyContent_1.getUsabilitySurveySequence(true),\r\n            surveyQuestions: surveyContent_1.UsabilitySurveyQuestionsShared\r\n        }, commentsView = _a.commentsView, view = _a.view, surveySequence = _a.surveySequence, surveyQuestions = _a.surveyQuestions;\r\n    // answers, freeforms\r\n    // : {qId: string, choices: number[]}[]\r\n    var comments = setup_1.analyzer.GetStaticView(commentsView).map(function (v) { return v.answer; });\r\n    var answers = setup_1.analyzer.GetStaticView(view).map(function (r) { return ({\r\n        qId: r.qId,\r\n        answers: r.answers ? r.answers.split(\",\").map(function (n) { return parseInt(n, 10); }) : null,\r\n    }); });\r\n    // note that the domain is pretty hardcoded\r\n    var xScale = d3.scaleLinear().rangeRound([1, 300]).domain([1, 6]);\r\n    var answersDiv = surveySequence.map(function (q, i) {\r\n        var question = surveyQuestions.get(q);\r\n        var answerData = answers.filter(function (a) { return a.qId === q; })[0].answers;\r\n        return React.createElement(\"tr\", null,\r\n            React.createElement(\"td\", { style: { width: 500 } },\r\n                i + 1,\r\n                \". \",\r\n                question),\r\n            React.createElement(\"td\", null,\r\n                React.createElement(\"svg\", { width: 300, height: visHeight }, answerData.map(function (a) { return React.createElement(\"circle\", { cx: xScale(a), cy: visHeight * Math.random(), r: 3, fillOpacity: 0.5, fill: \"steelblue\" }); }))));\r\n    });\r\n    return React.createElement(React.Fragment, null,\r\n        React.createElement(\"table\", { style: { width: 800, borderBottom: \"solid\" } },\r\n            React.createElement(\"tr\", null,\r\n                React.createElement(\"th\", { style: { width: 500 } }, \"Question\"),\r\n                React.createElement(\"th\", { style: { align: \"left\", width: 100 } }, \"Not at all\"),\r\n                React.createElement(\"th\", { style: { align: \"left\", width: 100 } }, \"Partly\"),\r\n                React.createElement(\"th\", { style: { align: \"left\", width: 100 } }, \"Very much\"))),\r\n        React.createElement(\"table\", { style: { width: 800 } }, answersDiv),\r\n        comments.map(function (f) { return React.createElement(\"p\", null, f); }));\r\n};\r\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FlowSurveyQuestionsShared = new Map();\r\n// creating hashes as a sanity check\r\nexports.FlowSurveyQuestionsShared.set(\"flowChallenge\", \"I feel just the right amount of challenge\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowSmooth\", \"My thoughts/activities run fluidly and smoothly\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowTime\", \"I do not notice time passing\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowConcentrate\", \"I have no difficulty concentrating\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowClear\", \"My mind is completely clear\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowAbsorbed\", \"I am totally absorbed in what I am doing\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowAccord\", \"The right thoughts/movements occur of their own accord\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowKnow\", \"I know what I have to do each step of the way\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowControl\", \"I feel that I have everything under control\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowLost\", \"I am completely lost in thought\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowStake\", \"Something important to me is at stake here\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowMistake\", \"I must not make any mistakes here\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowWorried\", \"I am worried about failing\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowCompare\", \"Compared to all other activities which I partake easy in, this one is difficult\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowCompetence\", \"I think that my competence in this area is high\");\r\nexports.FlowSurveyQuestionsShared.set(\"flowDemand\", \"For me personally, the current demands are too high\");\r\nexports.FlowSurveySequenceShared = [\"flowChallenge\", \"flowSmooth\", \"flowTime\",\r\n    \"flowConcentrate\", \"flowClear\", \"flowAbsorbed\", \"flowAccord\",\r\n    \"flowKnow\", \"flowControl\", \"flowLost\", \"flowStake\", \"flowMistake\",\r\n    \"flowWorried\", \"flowCompare\", \"flowCompetence\", \"flowDemand\"];\r\nexports.UsabilitySurveyQuestionsShared = new Map();\r\nexports.UsabilitySurveyQuestionsShared.set(\"tool\", \"Do you feel like the tool supported your performing the task?\");\r\nexports.UsabilitySurveyQuestionsShared.set(\"chronicles\", \"Did you find the ability to navigate between histories helpful?\");\r\nexports.UsabilitySurveyQuestionsShared.set(\"delayFrustration\", \"Were the delays frustrating?\");\r\nexports.UsabilitySurveyQuestionsShared.set(\"delayDifficulty\", \"Did the delays make thing difficult?\");\r\nfunction getUsabilitySurveySequence(IsChronicles) {\r\n    return [\r\n        \"tool\",\r\n        \"delayFrustration\",\r\n        \"delayDifficulty\"\r\n    ].concat((IsChronicles ? [\"chronicles\"] : []));\r\n}\r\nexports.getUsabilitySurveySequence = getUsabilitySurveySequence;\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar setup_1 = __webpack_require__(1);\r\nvar ItxTrace_1 = __webpack_require__(5);\r\nvar InteractionVis = /** @class */ (function (_super) {\r\n    __extends(InteractionVis, _super);\r\n    function InteractionVis(p) {\r\n        var _this = _super.call(this, p) || this;\r\n        _this.setBrushItxData = _this.setBrushItxData.bind(_this);\r\n        _this.setTsRange = _this.setTsRange.bind(_this);\r\n        _this.setChorniclesItxData = _this.setChorniclesItxData.bind(_this);\r\n        _this.hide = _this.hide.bind(_this);\r\n        _this.state = {\r\n            wId: null,\r\n            qId: null,\r\n            tsRange: null,\r\n            brushItxData: [],\r\n            chroniclesItxData: [],\r\n            hide: false,\r\n        };\r\n        setup_1.analyzer.BindOutput(\"brushItxInTaskSelection\", _this.setBrushItxData);\r\n        setup_1.analyzer.BindOutput(\"chroniclesItxInTaskSelection\", _this.setChorniclesItxData);\r\n        setup_1.analyzer.BindOutput(\"currentTaskSelectionInput\", _this.setTsRange, { notNull: true });\r\n        return _this;\r\n    }\r\n    InteractionVis.prototype.setBrushItxData = function (data) {\r\n        var brushItxData = data.map(function (d) { return ({\r\n            itxStart: parseInt(d.itxStart, 10),\r\n            itxEnd: parseInt(d.itxEnd, 10)\r\n        }); });\r\n        console.log(\"brushItxData\", brushItxData);\r\n        this.setState({\r\n            brushItxData: brushItxData,\r\n            hide: false\r\n        });\r\n    };\r\n    InteractionVis.prototype.setChorniclesItxData = function (data) {\r\n        var chroniclesItxData = data.map(function (d) {\r\n            if (!(d.itxType === \"delta\" || d.itxType === \"navigate\")) {\r\n                throw new Error(\"itxType of chroniclesItxData should be delta or navigate\");\r\n            }\r\n            return {\r\n                ts: parseInt(d.ts, 10),\r\n                itxType: d.itxType\r\n            };\r\n        });\r\n        console.log(\"chroniclesItxData\", chroniclesItxData);\r\n        this.setState({ chroniclesItxData: chroniclesItxData });\r\n    };\r\n    InteractionVis.prototype.setTsRange = function (tsRangeRaw) {\r\n        var tsRange = tsRangeRaw[0];\r\n        console.log(\"tsRange\", tsRange);\r\n        this.setState({ tsRange: tsRange });\r\n    };\r\n    InteractionVis.prototype.hide = function () {\r\n        this.setState({ hide: true });\r\n    };\r\n    InteractionVis.prototype.render = function () {\r\n        var _a = this.state, tsRange = _a.tsRange, chroniclesItxData = _a.chroniclesItxData, brushItxData = _a.brushItxData, hide = _a.hide;\r\n        if (tsRange && brushItxData.length > 0 && !hide) {\r\n            return React.createElement(\"div\", { className: \"floatingWidget\" },\r\n                React.createElement(ItxTrace_1.ItxTrace, { tsRange: tsRange, brushItxData: brushItxData, chroniclesItxData: chroniclesItxData }),\r\n                React.createElement(\"button\", { onClick: this.hide }, \"close\"));\r\n        }\r\n        return null;\r\n    };\r\n    return InteractionVis;\r\n}(React.Component));\r\nexports.InteractionVis = InteractionVis;\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar setup_1 = __webpack_require__(1);\r\nvar ItxTrace_1 = __webpack_require__(5);\r\nexports.AllItxTraces = function () {\r\n    // get the values\r\n    var tsRanges = setup_1.analyzer.GetStaticView(\"allCorrectNonMemTasks\");\r\n    var brushItxData = setup_1.analyzer.GetStaticView(\"correctNonMemBrushTraces\");\r\n    var chroniclesItxData = setup_1.analyzer.GetStaticView(\"correctNonMemChroniclesTraces\");\r\n    var divs = tsRanges.map(function (d) {\r\n        return React.createElement(ItxTrace_1.ItxTrace, { tsRange: d, brushItxData: brushItxData.filter(function (b) { return (b.wId === d.wId) && (b.qId === d.qId); }), chroniclesItxData: chroniclesItxData.filter(function (b) { return (b.wId === d.wId) && (b.qId === d.qId); }) });\r\n    });\r\n    return React.createElement(React.Fragment, null, divs);\r\n};\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ba60e635a6ebb0e330e6","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0","\nimport { Analyzer } from \"./lib/Analyzer\";\nexport const analyzer = new Analyzer();\n// show summary\n(window as any).analyzer = analyzer;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/setup.ts","module.exports = d3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 2\n// module chunks = 0","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nimport AnalysisContainer from \"./components/AnalysisContainer\";\n\n// this is the place where DIEL should be loaded with the\n// generated .db file\nexport function loadPage() {\n  ReactDOM.render(\n    <AnalysisContainer/>,\n    document.getElementById(\"wrapper\")\n  );\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/index.tsx","const m = [\"tables\", \"analysisTables\", \"analysisViews\",\n\"program\", \"newProgram\", \"input\", \"triggers\", \"output\"].map(t => [t, `./src/sql/${t}.sql`]) as [string, string][];\nexport let sqlFilePaths: Map<string, string> = new Map(m);\n\nexport const jsonFiles = [\"./data/realv3.json\"];\n\nexport const analysisVersion = \"V1\";\n\nexport const skipWIds = [\"A11ECAX3S2P9FA\"];\n// export const jsonFiles = [\"./data/yifan_new.json\"];\n\nexport const DEBUG = false;\n\nconst debugPrefix = \"yifan_new_\";\nexport const dbFiles: Map<string, string> = new Map([\n  \"raw\", \"processed\", \"final\"].map(t => [t, `./data/${DEBUG ? debugPrefix : \"\"}${t}.db`]) as [string, string][]);\n\nexport const Duplicates = [\"taskTimes\", \"memoryTask\", \"answers\", \"taskInfo\"];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/config.ts","import * as React from \"react\";\nimport * as d3 from \"d3\";\nimport { currentTaskSelectionInput } from \"../../lib/helper\";\n\ninterface ItxTraceProps {\n  tsRange: currentTaskSelectionInput;\n  brushItxData: {itxStart: number, itxEnd: number}[];\n  chroniclesItxData: {ts: number, itxType: string}[];\n  visWidth?: number;\n  visHeight?: number;\n  shapeSize?: number;\n}\n\nconst defaultProps = {\n  visWidth: 700,\n  visHeight: 40,\n  shapeSize: 10\n};\nexport const ItxTrace: React.StatelessComponent<ItxTraceProps> = (p) => {\n  const {tsRange, brushItxData, chroniclesItxData, visWidth, visHeight, shapeSize} = p;\n  const timeScale = d3.scaleLinear()\n                .rangeRound([1, visWidth])\n                .domain([tsRange.startTime, tsRange.endTime]);\n      const itxScale: {[index: string]: number} = {\n        \"brush\": visHeight / 6,\n        \"delta\": visHeight / 6 * 3,\n        \"navigate\": visHeight / 6 * 5\n      };\n      const itxColorScale: {[index: string]: string} = {\n        \"brush\": \"steelblue\",\n        \"delta\": \"orange\",\n        \"navigate\": \"red\"\n      };\n      const chroniclesShapes = chroniclesItxData.map(b => {\n        if (b.ts < tsRange.startTime || b.ts > tsRange.endTime) {\n          throw new Error(`Data is incorrect,\n          interaction time out of bounds by ${Math.round((b.ts - tsRange.endTime) / 1000)}\n          or ${Math.round((b.ts - tsRange.startTime) / 1000)}`);\n        }\n        return <circle\n          cx={timeScale(b.ts)}\n          cy={itxScale[b.itxType]}\n          r={shapeSize / 2}\n          fillOpacity={0.4}\n          fill={itxColorScale[b.itxType]}\n        ></circle>;\n        }\n      );\n      const brushItxShapes = brushItxData.map((b, i) => {\n        const rectWidth = Math.max(shapeSize / 2, timeScale(b.itxEnd) - timeScale(b.itxStart));\n        // console.log(\"rectWidth\", rectWidth, b.itxEnd, b.itxStart, timeScale(b.itxEnd) - timeScale(b.itxStart));\n        return <rect\n          x={timeScale(b.itxStart)}\n          y={itxScale.brush + i % 2 * 6}\n          width={rectWidth}\n          height={shapeSize}\n          fillOpacity={0.4}\n          fill={itxColorScale.brush}\n        ></rect>;\n      });\n      // draw one every 10 seconds\n      let grid: JSX.Element[] = [];\n      const skipTime = 5000;\n      // const skipTime = (tsRange.endTime - tsRange.startTime) > 30000 ? 10000 : 5000;\n      for (let i = tsRange.startTime; i < tsRange.endTime; i += skipTime) {\n          grid.push(<line x1={timeScale(i)} y1=\"0\"\n                          x2={timeScale(i)} y2={visHeight}\n                          stroke=\"lightgray\" />);\n      }\n      grid.push(<line x1={timeScale(tsRange.endTime)} y1=\"0\"\n                      x2={timeScale(tsRange.endTime)} y2={visHeight}\n                      stroke=\"gray\" />);\n  return <>\n    <p>{Math.round((tsRange.endTime - tsRange.startTime) / 1000)} sec: {tsRange.wId} {tsRange.qId}</p>\n    <svg width={visWidth + 50} height={visHeight}>\n      {grid}\n      {chroniclesShapes}\n      {brushItxShapes}\n    </svg>\n  </>;\n};\n\nItxTrace.defaultProps = defaultProps;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/snippet/ItxTrace.tsx","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 6\n// module chunks = 0","\nimport * as React from \"react\";\nimport WorkerSummary from \"./WorkerSummary\";\nimport TaskSummary from \"./TaskSummary\";\nimport { UnitSurveySummary } from \"./UnitSurveySummary\";\nimport { InteractionVis } from \"./InteractionVis\";\nimport { AllItxTraces } from \"./AllItxTraces\";\n\ninterface AnalysisContainerState {\n  content: Summaries;\n  // toggles: Map<Summaries, boolean>;\n}\n\nenum Summaries {\n  Worker,\n  Task,\n  Trace,\n  FlowSurvey,\n  ToolSurvey\n}\n\nconst togglesFalse = new Map();\ntogglesFalse.set(Summaries.Worker, false);\ntogglesFalse.set(Summaries.Task, false);\ntogglesFalse.set(Summaries.ToolSurvey, false);\ntogglesFalse.set(Summaries.FlowSurvey, false);\n\nexport default class AnalysisContainer extends React.Component<{}, AnalysisContainerState> {\n  constructor(p: undefined) {\n    super(p);\n    this.setView = this.setView.bind(this);\n    this.state = {\n      content: Summaries.Task\n    };\n  }\n\n  setView(content: Summaries) {\n    return () => {\n      this.setState({content});\n    };\n  }\n\n  render() {\n    const { content } = this.state;\n    let contentDiv: JSX.Element;\n    if (content === Summaries.Trace) {\n      contentDiv = <AllItxTraces />;\n    }\n    if (content === Summaries.Task) {\n      contentDiv = <><TaskSummary /><InteractionVis /></>;\n    }\n    if (content === Summaries.Worker) {\n      contentDiv = <WorkerSummary />;\n    }\n    if (content === Summaries.FlowSurvey) {\n      contentDiv = <UnitSurveySummary survey=\"FlowSurvey\" />;\n    }\n    if (content === Summaries.ToolSurvey) {\n      contentDiv = <UnitSurveySummary survey=\"ToolSurvey\" />;\n    }\n    return <div className=\"container\">\n    <div className=\"summary\">\n      <div className=\"controls\">\n        <button onClick={this.setView(Summaries.Task)}>toggle task</button>\n        <button onClick={this.setView(Summaries.Worker)}>toggle worker</button>\n        <button onClick={this.setView(Summaries.FlowSurvey)}>toggle flow</button>\n        <button onClick={this.setView(Summaries.ToolSurvey)}>toggle tool</button>\n        <button onClick={this.setView(Summaries.Trace)}>toggle trace</button>\n      </div>\n      <div className=\"portal\">\n        {contentDiv}\n      </div>\n    </div>\n  </div>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/AnalysisContainer.tsx","import * as React from \"react\";\nimport * as d3 from \"d3\";\nimport { analyzer } from \"../setup\";\n\nconst visWidth = 300;\nconst visHeight = 30;\nconst maxTasks = 10;\nconst maxTraining = 4;\n\nenum Shape {\n  TrainingPerf,\n  TaskPerf,\n}\n\ninterface WorkerSummaryState {\n  shapeInfo: Map<Shape, string>;\n}\n\nexport default class WorkerSummary extends React.Component<{}, WorkerSummaryState> {\n  constructor(p: undefined) {\n    super(p);\n    this.clickShape = this.clickShape.bind(this);\n    this.state = {\n      shapeInfo: new Map(),\n    };\n  }\n\n  clickShape(shape: Shape, shapeInfo: string) {\n    this.setState(p => {\n      p.shapeInfo.set(shape, shapeInfo);\n      return p;\n    });\n  }\n  test() {\n    const v: {[index: string]: string} = {};\n    v[\"isTraining\"];\n  }\n\n  render() {\n    const count = analyzer.getANumber(\"select count (distinct wId) from workerTasks\");\n    // a bit complex so got view\n    const countCompleted = analyzer.getANumber(\"select count () from completedAll\");\n    const countCancelled = analyzer.getANumber(\"select count(distinct wId) from CancelSurvey\");\n    // failed should just work with the survey but logging was wrong... so countig instead.\n    const countFailed = analyzer.getANumber(`select count() from successCountPerWorker where isTraining = 1 and countCorrect < 1`);\n    const countChronicle = analyzer.getANumber(`\n      select count(distinct wId) from (select wId from deltaItx union select wId from navigateItx)`);\n    const allSuccessCountsByWorker = analyzer.GetStaticView(\"successCountPerWorker\");\n    const xTaskCount = d3.scaleLinear().rangeRound([1, visWidth]).domain([0, maxTasks]);\n    const taskSuccessVis = <svg width={visWidth + 50} height={visHeight}>\n        {allSuccessCountsByWorker.filter(v => !v[\"isTraining\"]).map(v => (\n          <circle\n          cx={xTaskCount(v.countCorrect as number)}\n          cy={visHeight * Math.random()}\n          r={3}\n          fillOpacity={0.5}\n          fill={\"steelblue\"}\n          onClick={() => this.clickShape(Shape.TaskPerf, `${v.isTraining ? \"training\" : \"task\"} ${v.countCorrect}`)}\n          ></circle>)\n        )}\n        <text x={xTaskCount(maxTasks)} y={visHeight / 2}>{maxTasks}</text>\n      </svg>;\n      const xTrainingCount = d3.scaleLinear().rangeRound([1, visWidth]).domain([0, maxTraining]);\n      const trainingSuccessVis = <svg width={visWidth + 50} height={visHeight}>\n          {allSuccessCountsByWorker.filter(v => !v.isTraining).map(v => (\n            <circle\n            cx={xTrainingCount(v.countCorrect as number)}\n            cy={visHeight * Math.random()}\n            r={3}\n            fillOpacity={0.5}\n            fill={\"steelblue\"}\n            onClick={() => this.clickShape(Shape.TrainingPerf, `${v.isTraining ? \"training\" : \"task\"} ${v.countCorrect}`)}\n            ></circle>)\n          )}\n          <text x={xTaskCount(maxTasks)} y={visHeight / 2}>{maxTraining}</text>\n        </svg>;\n    return <>\n      <table>\n        <tr>\n          <th>Total</th>\n          <th>Complete</th>\n          <th>Cancelled</th>\n          <th>Failed</th>\n          <th>No Chronicle</th>\n        </tr>\n        <tr>\n          <td>{count}</td>\n          <td>{countCompleted}</td>\n          <td>{countCancelled}</td>\n          <td>{countFailed}</td>\n          <td>{count - countChronicle}</td>\n        </tr>\n      </table>\n      <br/>\n      <table style={{width: 500}}>\n        <tr>\n          <td style={{width: 100}}>Task Success</td>\n          <td style={{width: visWidth + 50}}>{taskSuccessVis}</td>\n          <td style={{width: 100}}>{this.state.shapeInfo.get(Shape.TaskPerf)}</td>\n        </tr>\n        <tr>\n          <td style={{width: 100}}>Training Success</td>\n          <td style={{width: visWidth + 50}}>{trainingSuccessVis}</td>\n          <td style={{width: 100}}>{this.state.shapeInfo.get(Shape.TrainingPerf)}</td>\n        </tr>\n      </table>\n    </>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/WorkerSummary.tsx","import IDiel from \"../../../shared/IDiel\";\nimport { loadPage } from \"../index\";\nimport { dbFiles, sqlFilePaths } from \"./config\";\nimport { getPrepareQueries } from \"./codegen\";\n\nconst OutputTables = [\"workerTasks\"];\n\nexport class Analyzer extends IDiel {\n\n  constructor() {\n    super(\"analsysis\");\n    this.setup();\n  }\n\n  async setup() {\n    await this.LoadDb(dbFiles.get(\"final\"));\n    await this.setupOutputStmts();\n    this.setupInputStmts();\n    loadPage();\n  }\n\n  async setupInputStmts() {\n    const inputSQL = await (await fetch(sqlFilePaths.get(\"input\"))).text();\n    const preps = getPrepareQueries(inputSQL);\n    preps.forEach(q => {\n      console.log(`\\nPrepare Stmt\\n${q.query}\\n`);\n      this.input.set(q.name, this.db.prepare(q.query));\n    });\n  }\n  async setupOutputStmts() {\n    let names = OutputTables.slice();\n    const analysisProgramSQL = await (await fetch(sqlFilePaths.get(\"program\"))).text();\n    const newAnalysisProgramSQL = await (await fetch(sqlFilePaths.get(\"newProgram\"))).text();\n    (analysisProgramSQL + newAnalysisProgramSQL).match(/create table \\w+/ig).map(m => {\n      const vName = m.slice(13);\n      names.push(vName);\n    });\n    const analysisViewSQL = await (await fetch(sqlFilePaths.get(\"analysisViews\"))).text();\n    const outputProgramSQL = await (await fetch(sqlFilePaths.get(\"output\"))).text();\n    (analysisViewSQL + outputProgramSQL).match(/create view \\w+/ig).map(m => {\n      const vName = m.slice(12);\n      names.push(vName);\n    });\n    names.map(o => {\n      try {\n        this.output.set(o, this.db.prepare(`select * from ${o}`));\n      } catch (e) {\n        console.log(`%c Failed to output ${o}`, \"color: red\");\n        // throw new Error(e);\n      }\n    });\n  }\n\n  getANumber(sql: string) {\n    try {\n      const r = this.db.exec(sql);\n      if (r && r[0] && r[0].values && r[0].values.length > 0) {\n        return r[0].values[0][0] as number;\n      } else {\n        console.log(`%c SQL ${sql} did not return any results`, \"color: #FF2400\");\n        return NaN;\n      }\n    } catch (e) {\n      console.log(`%c Query did not execute\\n${sql} because ${e}`, \"color: #FF2400\");\n      return NaN;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/Analyzer.ts","import { Database, Statement } from \"sql.js\";\nimport { timeNow, downloadHelper, log } from \"./dbHelper\";\n\n// this is an interface class that shares all of DIEL's common abstractions\n\ntype ReactFunc = (v: any) => void;\ntype OutputConfig = {\n  notNull?: boolean,\n};\nconst defaultOuptConfig = {\n  notNull: false,\n};\n\ntype TickBind = {view: string, s: Statement, f: ReactFunc, c: OutputConfig};\n\nexport default class IDiel {\n  protected db: Database;\n  // reactive glues\n  protected output: Map<string, Statement>;\n  protected input: Map<string, Statement>;\n  // non reactive glues\n  protected staticInput: Map<string, Statement>;\n  protected staticOutput: Map<string, Statement>;\n  protected boundFns: TickBind[];\n  protected dbName: string;\n\n  constructor(dbName: string) {\n    this.runOutput = this.runOutput.bind(this);\n    this.tick = this.tick.bind(this);\n    this.exec = this.exec.bind(this);\n    this.BindOutput = this.BindOutput.bind(this);\n    this.dbName = dbName;\n    // initialize\n    this.boundFns = [];\n    this.input = new Map();\n    this.output = new Map();\n    this.staticInput = new Map();\n    this.staticOutput = new Map();\n  }\n\n  public async LoadDb(file: string) {\n    if (this.db) {\n      this.db.close();\n    }\n    const response = await fetch(file);\n    const bufferRaw = await response.arrayBuffer();\n    const buffer = new Uint8Array(bufferRaw);\n    this.db = new Database(buffer);\n    this.db.create_function(\"log\", log);\n    this.db.create_function(\"tick\", this.tick());\n  }\n\n  NewInput(i: string, o: any) {\n    let tsI = Object.assign({$ts: timeNow()}, o);\n    this.input.get(i).run(tsI);\n  }\n\n  GetStaticView(v: string, cIn = {} as OutputConfig) {\n    console.log(\"get view\", v);\n    const s = this.output.get(v);\n    if (!s) {\n      console.log(`%c Error ${v} does not exist`, \"color: red\");\n    }\n    return this.readStmt(s, v, cIn);\n  }\n\n  readStmt(s: Statement, view: string, c: OutputConfig) {\n    s.bind({});\n    let r = [];\n    while (s.step()) {\n      r.push(s.getAsObject());\n    }\n    if (c.notNull && r.length === 0) {\n      throw new Error(`${view} should not be null`);\n    }\n    if (r.length > 0) {\n      return r;\n    }\n    console.log(`%cError ${view} did not return a value`, \"color: red\");\n    return null;\n  }\n\n  public BindOutput(view: string, reactFn: ReactFunc, cIn = {} as OutputConfig) {\n    if (!this.output.has(view)) {\n      throw new Error(`output not defined ${view} ${Array.from(this.output.keys()).join(\", \")}`);\n    }\n    // immtable\n    const c = Object.assign({}, defaultOuptConfig, cIn);\n    // console.log(\"final config\", c);\n    this.boundFns.push({view, s: this.output.get(view), f: reactFn, c });\n  }\n\n  runOutput(b: TickBind) {\n    let { s, f, c, view } = b;\n    const r = this.readStmt(s, view, c);\n    if (r) {\n      f(r);\n    }\n    return;\n  }\n\n  tick() {\n    const boundFns = this.boundFns;\n    const runOutput = this.runOutput;\n    return () => {\n      // console.log(\"ticked!\", boundFns);\n      boundFns.map(b => {\n        runOutput(b);\n      });\n    };\n  }\n\n  downloadDB() {\n    let dRaw = this.db.export();\n    let blob = new Blob([dRaw]);\n    downloadHelper(blob,  \"session\");\n  }\n\n  exec(sql: string) {\n    try {\n      const r = this.db.exec(sql);\n      if (!(r && r[0] && r[0].values && r[0].values.length > 0)) {\n        console.log(`%c SQL ${sql} did not return any results`, \"color: #FF2400\");\n      }\n      return r;\n    } catch (error) {\n      console.log(`%c Query did not execute\\n${sql} because ${error}`, \"color: #FF2400\");\n    }\n    return null;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!../shared/IDiel.ts","module.exports = SQL;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"SQL\"\n// module id = 11\n// module chunks = 0","import { QueryResults, Database } from \"sql.js\";\n\nexport function assertQueryHasResult(r: QueryResults, query?: string) {\n  if ((!r) || (!r.values)) {\n    throw new Error(`Query ${query} has NO result`);\n  }\n}\n\n// for console debugging\nexport function d(db: Database, sql: string) {\n  let r = db.exec(sql);\n  if (r.length > 0) {\n    r[0].values.map((v) => {\n      v.map((c, i) => {\n        if (r[0].columns[i] === \"ts\") {\n          c = new Date(c as number).toDateString();\n        }\n      });\n    });\n    console.log(r[0].columns.join(\"\\t\"));\n    console.log(JSON.stringify(r[0].values).replace(/\\],\\[/g, \"\\n\").replace(\"[[\", \"\").replace(\"]]\", \"\").replace(/,/g, \"\\t\"));\n  } else {\n    console.log(\"NO RESULT\");\n  }\n}\n(<any>window).d = d;\n\n\nexport function log(msg: string, source: string) {\n  console.log(`[${source}] ${msg}`);\n  return 1;\n}\n\nexport function timeNow() {\n  return +new Date();\n}\n\n// this is needed because the groupby has non deterministic orderings\n// and I wasn't able to write a custom reducer\n// I suspect this is faster anyways\nexport function hashCompare(a: string, b: string): number {\n  // split by -\n  const aVals = a.split(\"-\");\n  const bVals = b.split(\"-\");\n  for (let i = 0; i < aVals.length; i++) {\n    const av = aVals[i];\n    const table = av.split(\":\")[0];\n    const bR = bVals.filter(bv => bv.split(\":\")[0] === table);\n    if (bR.length !== 1) {\n      console.log(\"didn't find\", table, bVals);\n      return 0;\n    }\n    if (bR[0] !== av) {\n      return 0;\n    }\n  }\n  return 1;\n}\n\nexport function prettyTimeNow() {\n  return new Date().toTimeString().substr(0, 8);\n}\n\n/**********************\n * Debugging support\n *********************/\n\nexport function downloadHelper(blob: Blob, name: string, extension = \"db\") {\n  let a = document.createElement(\"a\");\n  a.href = window.URL.createObjectURL(blob);\n  a.download = `${name}_${prettyTimeNow()}.${extension}`;\n  a.onclick = function() {\n    setTimeout(function() {\n      window.URL.revokeObjectURL(a.href);\n    }, 1500);\n  };\n  a.click();\n}\n\n\nexport function downloadQueryResultAsCSV(db: Database, query: string) {\n  let csvContent = \"\";\n  let r = db.exec(query);\n  if (r.length && r[0].values) {\n    csvContent += r[0].columns.join(\",\") + \"\\r\\n\";\n    r[0].values.forEach((rowArray) => {\n      let row = rowArray.join(\",\");\n      csvContent += row + \"\\r\\n\";\n    });\n    let b = new Blob([csvContent], {type: \"text/plain;charset=UTF-8\"});\n    downloadHelper(b, \"userData.csv\");\n    console.log(\"should have downloaded\", csvContent);\n  } else {\n    console.log(\"NO RESULT\");\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!../shared/dbHelper.ts","import { Duplicates } from \"./config\";\nimport { LoggedTablesForAnalysis } from \"../../../shared/logHelper\";\n// this takes a .sql file and generates the corresponding into a ts file\n\n/* e.g., from\n\nCREATE TABLE eventLog (\n  ts INTEGER NOT NULL,\n  eventName TEXT NOT NULL,\n  parameter TEXT\n);\n\nto\n\neventLog: db.prepare(`\n    insert into eventLog (ts, eventName, parameter)\n    values ($ts, $eventName, $parameter);\n  `),\n*/\n\nfunction getColumns(tableSQL: string) {\n  const queries = tableSQL.split(\");\");\n  const r = queries.filter(q => q && q.length > 0 && (q !== \"\\n\")).map(q => {\n    const tableName = q.match(/create table \\w+/ig)[0].slice(13);\n    const colNames = q.match(/(\\w+) (integer|text)/ig).map(v => v.split(\" \")[0]);\n    return {tableName, colNames};\n  });\n  return r;\n}\n/**\n * This generates the prepared statement that skipps duplicates\n *   - could not use https://stackoverflow.com/questions/19337029/insert-if-not-exists-statement-in-sqlite\n *     since it conflates differnet kinds of failing constraints, e.g., not null\n *   - also must not include taskId when checking for duplicates since it's generated on the gpaas side\n *     and for the same values would have different taskIds.\n * @param tableSQL sql strings\n */\nexport function getPrepareQueries(tableSQL: string) {\n  const i = getColumns(tableSQL);\n  return i.map(s => ({\n    name: s.tableName,\n    query: `insert into ${s.tableName} (${s.colNames.join(\", \")})\n            values (${s.colNames.map(v => `$${v}`).join(\", \")});`\n  }));\n}\n\nexport function getDedupeQueries(tableSQL: string) {\n  const i = getColumns(tableSQL);\n  return i.filter(s => Duplicates.indexOf(s.tableName) > -1).map(s => {\n    const cols = s.colNames.filter(v => v !== \"taskId\").join(\", \");\n    return ({\n      name: s.tableName,\n      query: `create table temp as\n        select distinct ${cols}\n        from ${s.tableName};\n      delete from ${s.tableName};\n      insert into ${s.tableName} (${s.colNames.join(\", \")})\n        select ${s.colNames.join(\", \")} from temp;\n      drop table temp;`\n    });\n  });\n}\n\n/**\n * This method is very brittle and we should fix\n * @param tableSQL input SQL\n * @param print whether to show the results\n */\nexport function simpleParse(tableSQL: string, print = false) {\n  let scripts = tableSQL.split(\"\\n\\n\");\n  let newScripts: string[] = [];\n  for (let s of scripts) {\n    s = s.replace(/^ *--.*$\\n/img, \"\");\n    s = s.replace(/^drop.*$\\n/img, \"\");\n    // also get rid of primary key requirements\n    s = s.replace(/PRIMARY KEY/i, \"not null\");\n    // need to delete unique, also if it's the last one, need to remove the comma\n    s = s.replace(/,\\n^.*UNIQUE.*$\\n\\);/img, \"\\n);\");\n    // then remove the none last items\n    s = s.replace(/^.*UNIQUE.*$\\n/img, \"\");\n    // then before the \");\", need to insert the wId and taskID, at the top after the first ( with new line\n    const tmp = s.split(`(\\n`);\n    // assert that there are only 2\n    if (tmp.length !== 2) {\n      if (print) console.log(`[Not ran]\\n${s}\\n`, \"color: red\");\n      continue;\n    }\n    if (tmp[0].includes(\"insert into\")\n          || tmp[0].includes(\"ChartInitData\")\n          || tmp[0].includes(\"ChartData\")\n        ) {\n      if (print) console.log(`[Not ran]\\n${s}\\n`, \"color: red\");\n      continue;\n    }\n    const name = tmp[0].match(/create table \\w+/ig)[0].slice(13);\n    if (LoggedTablesForAnalysis.indexOf(name) === -1) {\n      if (print) console.log(`[Not ran, not logged]\\n${s}\\n`, \"color: red\");\n      continue;\n    }\n    // and then stitch together after\n    s = tmp[0]\n        + `(\\n  wId integer not null,${Duplicates.indexOf(name) > -1 ? \"\" : \"\\n  taskId integer not null,\"}\\n`\n        + tmp[1];\n    if (print) console.log(`[executing script]\\n${s}\\n`);\n    newScripts.push(s);\n  }\n  return newScripts;\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/codegen.ts","export const LoggedTablesForAnalysis = [\n  // raw events\n  \"eventLog\",\n  \"navigateItx\",\n  \"deltaItx\",\n  \"deleteItx\",\n  \"xBrushItx\",\n  // SP\n  \"itxId_SP\",\n  \"brushState_SP\",\n  // this is important for recognizing cached results\n  \"eqChart_SP\",\n  \"chartDataAtomic\",\n  // this can tell us how many of the interactions\n  // was with a different view than the one immediately before\n  \"brushDep_SP\",\n  // task related\n  \"taskTimes\",\n  \"memoryTask\",\n  \"answers\",\n  \"taskInfo\"\n];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!../shared/logHelper.ts","import * as React from \"react\";\nimport * as d3 from \"d3\";\nimport { analyzer } from \"../setup\";\nimport { gaussianRandom } from \"../lib/stats\";\nimport { processTimes } from \"../lib/helper\";\n\nexport default class TaskSummary extends React.Component<{}, undefined> {\n  constructor(p: undefined) {\n    super(p);\n  }\n  render() {\n    const overAllWidth = 800;\n    const visWidth = 700;\n    const visHeight = 30;\n    const skipTime = 5000;\n    const shapeSize = 10;\n    // get the task info --- general distribution of how long something takes?\n    // get a violin plot of the completion time by the task\n    const rRaw = analyzer.GetStaticView(\"taskCompletionTimes\");\n    // this ugliness is because we do not have reudce for sql.js....\n    const data = rRaw.map(v => ({\n      qId: v.qId as string,\n      qRank: v.qRank as number,\n      question: v.question as string,\n      correctTimes: processTimes(v.correctTimes as string),\n      incorrectTimes: processTimes(v.incorrectTimes as string),\n    }));\n    const visDiv = data.sort((a, b) => (a.qRank > b.qRank) ? 1 : 0)\n                       .map(r => {\n      // some buffer range\n      const range = [0, d3.max(r.correctTimes.concat(r.incorrectTimes), t => t.time) * 1.05];\n      const x = d3.scaleLinear().rangeRound([1, visWidth]).domain(range);\n      let grid: JSX.Element[] = [];\n      for (let i = 0; i < range[1]; i += skipTime) {\n        grid.push(<line x1={x(i)} y1=\"0\"\n                        x2={x(i)} y2={visHeight}\n                        stroke=\"lightgray\" />);\n      }\n      const genCircle = (t: {time: number, wId: string}, c: boolean) => <circle\n        cx={x(t.time)}\n        cy={gaussianRandom(0, visHeight)}\n        r={shapeSize / 2}\n        fillOpacity={0.5}\n        fill={c ? \"steelblue\" : \"red\"}\n        className=\"clickable\"\n        onClick={() => {\n          console.log(\"inserting into taskSelectionInput\", t.wId, r.qId);\n          analyzer.NewInput(\"taskSelectionInput\", {\n              $wId: t.wId,\n              $qId: r.qId,\n            });\n        }}\n        ></circle>;\n      const circles = r.correctTimes.map(t => genCircle(t, true))\n                        .concat(r.incorrectTimes.map(t => genCircle(t, false)));\n      return <>\n        <tr style={{width: overAllWidth}}>\n          <td colSpan={2}  dangerouslySetInnerHTML={{ __html: r.question }}>\n          </td>\n        </tr>\n        <tr>\n          <td style={{width: visWidth}}><svg width={visWidth} height={visHeight}>{grid}{circles}</svg></td>\n          <td>{Math.round(range[1] / 1000)} seconds</td>\n        </tr>\n      </>;\n    });\n    return <>\n      <table style={{width: overAllWidth}}>\n        {visDiv}\n      </table>\n    </>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/TaskSummary.tsx","// https://stackoverflow.com/questions/25582882/javascript-math-random-normal-distribution-gaussian-bell-curve\n// apparently an approxuimationm validated by the central limit theorem\nexport function gaussianRandom(start: number, end: number) {\n  let rand = 0;\n  for (let i = 0; i < 6; i += 1) {\n    rand += Math.random();\n  }\n  rand = rand / 6;\n  return Math.floor(start + rand * (end - start + 1));\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/stats.ts","import { Database } from \"sql.js\";\n\n\nexport type currentTaskSelectionInput = { startTime: number, endTime: number, wId: string, qId: string };\n\nexport type JSONObject = {[index: string]: string};\n\nexport type LogDataFormat = {\n  type: string;\n  name: string;\n  values: JSONObject[];\n};\n\n\nexport function simpleExec(db: Database, sql: string) {\n  const scripts = sql.split(\"\\n\\n\");\n  scripts.forEach(s => {\n    console.log(`Executing sql \\n${s}`);\n    db.run(s);\n  });\n}\n\nexport function hashCode(str: string) {\n  let hash = 0;\n  if (str.length === 0) {\n      return hash;\n  }\n  for (let i = 0; i < str.length; i++) {\n      let char = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32bit integer\n  }\n  return hash;\n}\n\n/**\n * This is for the view taskCompletionTimes\n *   so annoying\n * @param correctTimes\n */\nexport function processTimes(correctTimes: string) {\n  return correctTimes\n    ? (correctTimes as string).split(\",\").map(n => {\n      const v = n.split(\"-\");\n      return {\n        time: parseInt(v[0], 10),\n        wId: v[1]\n      };\n    })\n    : [];\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/helper.ts","import * as React from \"react\";\nimport * as d3 from \"d3\";\nimport { analyzer } from \"../setup\";\nimport { getUsabilitySurveySequence, UsabilitySurveyQuestionsShared,\n  FlowSurveyQuestionsShared, FlowSurveySequenceShared } from \"../../../shared/surveyContent\";\n\n\ninterface UnitSurveySummaryProps {\n  survey: \"FlowSurvey\" | \"ToolSurvey\";\n}\n\nconst visHeight = 30;\n\nexport const UnitSurveySummary: React.StatelessComponent<UnitSurveySummaryProps> = (p) => {\n  const { commentsView, view, surveySequence, surveyQuestions} = p.survey === \"FlowSurvey\"\n    ? {\n      commentsView: \"flowComments\",\n      view: \"flowResults\",\n      surveySequence: FlowSurveySequenceShared,\n      surveyQuestions: FlowSurveyQuestionsShared\n    }\n    : {\n      commentsView: \"toolComments\",\n      view: \"toolResults\",\n      surveySequence: getUsabilitySurveySequence(true),\n      surveyQuestions: UsabilitySurveyQuestionsShared\n    };\n  // answers, freeforms\n  // : {qId: string, choices: number[]}[]\n  const comments = analyzer.GetStaticView(commentsView).map(v => v.answer as string);\n  const answers = analyzer.GetStaticView(view).map(r => ({\n    qId: r.qId,\n    answers: r.answers ? (r.answers as string).split(\",\").map(n => parseInt(n, 10)) : null,\n  }));\n  // note that the domain is pretty hardcoded\n  const xScale = d3.scaleLinear().rangeRound([1, 300]).domain([1, 6]);\n\n  const answersDiv = surveySequence.map((q, i) => {\n    const question = surveyQuestions.get(q);\n    const answerData = answers.filter(a => a.qId === q)[0].answers;\n    return <tr>\n      <td style={{width: 500}}>{i + 1}. {question}</td>\n      <td><svg width={300} height={visHeight}>{answerData.map(a => <circle\n        cx={xScale(a)}\n        cy={visHeight * Math.random()}\n        r={3}\n        fillOpacity={0.5}\n        fill={\"steelblue\"}\n      ></circle>)}</svg></td>\n    </tr>;\n  });\n\n  return <>\n    <table style={{width: 800, borderBottom: \"solid\"}}>\n      <tr>\n        <th style={{width: 500}}>Question</th>\n        <th style={{align: \"left\", width: 100}}>Not at all</th>\n        <th style={{align: \"left\", width: 100}}>Partly</th>\n        <th style={{align: \"left\", width: 100}}>Very much</th>\n      </tr>\n    </table>\n    <table style={{width: 800}}>\n      {answersDiv}\n    </table>\n    {comments.map(f => <p>{f}</p>)}\n  </>;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/UnitSurveySummary.tsx","export const FlowSurveyQuestionsShared = new Map<string, string>();\n// creating hashes as a sanity check\nFlowSurveyQuestionsShared.set(\"flowChallenge\", \"I feel just the right amount of challenge\");\nFlowSurveyQuestionsShared.set(\"flowSmooth\", \"My thoughts/activities run fluidly and smoothly\");\nFlowSurveyQuestionsShared.set(\"flowTime\", \"I do not notice time passing\");\nFlowSurveyQuestionsShared.set(\"flowConcentrate\", \"I have no difficulty concentrating\");\nFlowSurveyQuestionsShared.set(\"flowClear\", \"My mind is completely clear\");\nFlowSurveyQuestionsShared.set(\"flowAbsorbed\", \"I am totally absorbed in what I am doing\");\nFlowSurveyQuestionsShared.set(\"flowAccord\", \"The right thoughts/movements occur of their own accord\");\nFlowSurveyQuestionsShared.set(\"flowKnow\", \"I know what I have to do each step of the way\");\nFlowSurveyQuestionsShared.set(\"flowControl\", \"I feel that I have everything under control\");\nFlowSurveyQuestionsShared.set(\"flowLost\", \"I am completely lost in thought\");\nFlowSurveyQuestionsShared.set(\"flowStake\", \"Something important to me is at stake here\");\nFlowSurveyQuestionsShared.set(\"flowMistake\", \"I must not make any mistakes here\");\nFlowSurveyQuestionsShared.set(\"flowWorried\", \"I am worried about failing\");\nFlowSurveyQuestionsShared.set(\"flowCompare\", \"Compared to all other activities which I partake easy in, this one is difficult\");\nFlowSurveyQuestionsShared.set(\"flowCompetence\", \"I think that my competence in this area is high\");\nFlowSurveyQuestionsShared.set(\"flowDemand\", \"For me personally, the current demands are too high\");\n\nexport const FlowSurveySequenceShared = [\"flowChallenge\", \"flowSmooth\", \"flowTime\",\n\"flowConcentrate\", \"flowClear\", \"flowAbsorbed\", \"flowAccord\",\n\"flowKnow\", \"flowControl\", \"flowLost\", \"flowStake\", \"flowMistake\",\n\"flowWorried\", \"flowCompare\", \"flowCompetence\", \"flowDemand\"];\n\nexport const UsabilitySurveyQuestionsShared = new Map<string, string>();\n\nUsabilitySurveyQuestionsShared.set(\"tool\", \"Do you feel like the tool supported your performing the task?\");\nUsabilitySurveyQuestionsShared.set(\"chronicles\" , \"Did you find the ability to navigate between histories helpful?\");\nUsabilitySurveyQuestionsShared.set(\"delayFrustration\" , \"Were the delays frustrating?\");\nUsabilitySurveyQuestionsShared.set(\"delayDifficulty\" , \"Did the delays make thing difficult?\");\n\nexport function getUsabilitySurveySequence (IsChronicles: boolean) {\n  return [\n    \"tool\",\n    \"delayFrustration\",\n    \"delayDifficulty\",\n    ...(IsChronicles ? [\"chronicles\"] : [])\n  ];\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!../shared/surveyContent.ts","import * as React from \"react\";\nimport { analyzer } from \"../setup\";\nimport { JSONObject, currentTaskSelectionInput } from \"../lib/helper\";\nimport { ItxTrace } from \"./snippet/ItxTrace\";\n// the goal here is to get a sense for each turker, what they did at a coarse granularity (brush, navigate, arrow)\n// this takes a wId\n\ninterface InteractionVisState {\n  wId: string;\n  qId: string;\n  tsRange: currentTaskSelectionInput;\n  brushItxData: {itxStart: number, itxEnd: number}[];\n  chroniclesItxData: {ts: number, itxType: string}[];\n  hide: boolean;\n}\n\nexport class InteractionVis extends React.Component<{}, InteractionVisState> {\n  constructor(p: {}) {\n    super(p);\n    this.setBrushItxData = this.setBrushItxData.bind(this);\n    this.setTsRange = this.setTsRange.bind(this);\n    this.setChorniclesItxData = this.setChorniclesItxData.bind(this);\n    this.hide = this.hide.bind(this);\n    this.state = {\n      wId: null,\n      qId: null,\n      tsRange: null,\n      brushItxData: [],\n      chroniclesItxData: [],\n      hide: false,\n    };\n\n    analyzer.BindOutput(\"brushItxInTaskSelection\", this.setBrushItxData);\n    analyzer.BindOutput(\"chroniclesItxInTaskSelection\", this.setChorniclesItxData);\n    analyzer.BindOutput(\"currentTaskSelectionInput\", this.setTsRange, {notNull: true});\n  }\n\n  setBrushItxData(data: JSONObject[]) {\n    const brushItxData = data.map(d => ({\n      itxStart: parseInt(d.itxStart, 10),\n      itxEnd: parseInt(d.itxEnd, 10)\n    }));\n    console.log(\"brushItxData\", brushItxData);\n    this.setState({\n      brushItxData,\n      hide: false\n    });\n  }\n\n  setChorniclesItxData(data: JSONObject[]) {\n    const chroniclesItxData = data.map(d => {\n      if (!(d.itxType === \"delta\" || d.itxType === \"navigate\")) {\n        throw new Error(`itxType of chroniclesItxData should be delta or navigate`);\n      }\n      return {\n        ts: parseInt(d.ts, 10),\n        itxType: d.itxType\n      };\n    });\n    console.log(\"chroniclesItxData\", chroniclesItxData);\n    this.setState({chroniclesItxData});\n  }\n\n  setTsRange(tsRangeRaw: currentTaskSelectionInput[]) {\n    const tsRange = tsRangeRaw[0];\n    console.log(\"tsRange\", tsRange);\n    this.setState({tsRange});\n  }\n\n  hide() {\n    this.setState({hide: true});\n  }\n\n  render() {\n    const { tsRange, chroniclesItxData, brushItxData, hide } = this.state;\n    if (tsRange && brushItxData.length > 0 && !hide) {\n      return <div className=\"floatingWidget\">\n      <ItxTrace\n        tsRange={tsRange}\n        brushItxData={brushItxData}\n        chroniclesItxData={chroniclesItxData}\n      />\n      <button onClick={this.hide}>close</button>\n      </div>;\n    }\n    return null;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/InteractionVis.tsx","import * as React from \"react\";\nimport { analyzer } from \"../setup\";\nimport { ItxTrace } from \"./snippet/ItxTrace\";\nimport { currentTaskSelectionInput } from \"../lib/helper\";\n\nexport const AllItxTraces: React.StatelessComponent<{}> = () => {\n  // get the values\n  const tsRanges = analyzer.GetStaticView(\"allCorrectNonMemTasks\") as currentTaskSelectionInput[];\n  const brushItxData = analyzer.GetStaticView(\"correctNonMemBrushTraces\") as  {wId: string, qId: string, itxStart: number, itxEnd: number}[];\n  const chroniclesItxData = analyzer.GetStaticView(\"correctNonMemChroniclesTraces\") as {wId: string, qId: string, ts: number, itxType: string}[];\n  const divs = tsRanges.map(d =>\n    <ItxTrace\n      tsRange={d}\n      brushItxData={brushItxData.filter(b => (b.wId === d.wId) && (b.qId === d.qId))}\n      chroniclesItxData={chroniclesItxData.filter(b => (b.wId === d.wId) && (b.qId === d.qId))}\n    />);\n  return <>\n    {divs}\n  </>;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/AllItxTraces.tsx"],"sourceRoot":""}