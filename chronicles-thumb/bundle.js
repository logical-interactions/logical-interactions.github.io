!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist",t(t.s=10)}([function(e,t){e.exports=React},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),r=n(2);t.diel=new a.default,window.diel=t.diel,r.DEBUG||(console.log=function(){})},function(e,t,n){"use strict";function a(){return screen.width<1080||screen.height<800}function r(){return window.innerWidth<1e3||window.innerHeight<450}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.Researcher="chroniclesv2",t.ExperimentName="chroniclesv2draft",t.ExpVersion="V2",t.IsProd=!0,t.FilePathPrefix=t.IsProd?"https://logical-interactions.github.io/chroniclesv2/dist/":"./dist/",t.DEBUG=!t.IsProd,t.IsChronicles=!0,t.ExperimentLatencyOption=o.LatencyOption.High,t.BonusReward=3,t.ExtraBonusReward=3,t.TaskReward=.2,t.judgeScreenSize=a,t.judgeWindowSize=r},function(e,t,n){"use strict";function a(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),200===t.status?t.responseText:""}function r(e){return new Promise(function(t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.onload=function(){return t(a.responseText)},a.onerror=function(){return n(a.statusText)},a.send()})}function o(e){return e===s.None?0:e===s.Low?500+500*Math.random():3e3+2e3*Math.random()}function i(e){if(!e)return!0;for(var n=0;n<t.AllCharts.length;n++)if(e.indexOf(t.AllCharts[n])<0)return!0;return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.ScatterChartsBrushs=["arrDelay","depDelay"],t.AllCharts=["carrier","day","state","delays"];!function(e){e[e.Browser=0]="Browser",e[e.ExpVersion=1]="ExpVersion",e[e.IsMobile=2]="IsMobile",e[e.ScreenWidth=3]="ScreenWidth",e[e.ScreenHeight=4]="ScreenHeight",e[e.WindowWidth=5]="WindowWidth",e[e.WindowHeight=6]="WindowHeight",e[e.IsChronicles=7]="IsChronicles",e[e.HappyOrNot=8]="HappyOrNot",e[e.Clip=9]="Clip",e[e.Focus=10]="Focus",e[e.Blur=11]="Blur"}(t.EventType||(t.EventType={}));!function(e){e[e.Fixed=0]="Fixed",e[e.Variable=1]="Variable"}(t.ScaleOption||(t.ScaleOption={}));var s;!function(e){e[e.None=0]="None",e[e.Low=1]="Low",e[e.High=2]="High"}(s=t.LatencyOption||(t.LatencyOption={}));!function(e){e[e.SmallMultiples=0]="SmallMultiples",e[e.Scrubber=1]="Scrubber",e[e.FilmStrip=2]="FilmStrip"}(t.HistoryDisplayOption||(t.HistoryDisplayOption={})),t.readFileSync=a,t.readFileAsync=r,t.getLatency=o,t.isLoading=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2);t.IntroSpec=new Map,t.IntroSpec.set("sum","This is the visualization dashboard of flights data and we will walk you through\n  each piece of the dashboard. Don't worry if there is something that you don't understand---the tutorial\nwill cover all the components."),t.IntroSpec.set("clickState","For instance, this chart shows the count of flights to Hawaii by state.\n  You can click on a bar to filter other charts.\n  Go ahead and click on CA (first bar), then click next to continue the tutorial.\n  "),t.IntroSpec.set("dayBar"," After some delay, the charts will update with data filtered by your selection.\n  During the delay, you will see a <b>yellow bar flashing</b> below the chart.\n  This chart shows the number of flights per day in the first half of December.\n  The gray bars in the background shows the results without any filters and the blue\n  are the results filtered by your selections.\n  Go ahead and click-and-drag <i>between</i> the bars to select multiple at once (you will see your\n    mouse turn into a cross). Then click continue"),t.IntroSpec.set("heatmap1","This is a heatmap that compares arrival and departure delays, filtered by the\n  selections you have made so far."),t.IntroSpec.set("delayLegend","This is a legend for how to read the heatmap---the darker the color, the higher the density"),t.IntroSpec.set("heatmap2","You will notice that the left-bottom most region has a very high count\n   and the light regions to have just one\n   Click on a region of the heat map for the exact count"),t.IntroSpec.set("delayDistribution","This vertical bar provides a <b>faster way to read the delay</b>---flights with either arrival or departure\n  delay of higher than 20 minutes will count as delayed, shown as red, otherwise white."),t.IntroSpec.set("carrierBar","This chart shows the total count of flight by carriers.\n   Also, note that some interactions that you have performed in the past may respond without delay"),t.IntroSpec.set("resetBtn","Click the reset button to remove the existing filter on the chart.  The button will only show when there is a filter."),t.IntroSpec.set("chronicles",'Browse your previous interactions by clicking directly on any of the blocks (or arrow keys),\n  each of which represents a past interaction.\n  Blocks to the left are older, and blocks to the right are newer.\n  <b>"N"</b> means the most recent block representing your interaction.\n  <b>Orange</b> means the active interaction you are currently looking at.\n  <b>Flashing</b> means that the data is loading for the block.\n  Note that currently the keys are used for navigating the tutorial and will work after\n  the tutorial session is done.'),t.IntroSpec.set("historyButton","This button removes past interactions you have created. You may find this useful to declutter the interface."),t.IntroSpec.set("unclipButton","This button zooms the charts in, showing only the filtered results (the gray background data gone). It achieves a\n  zooming effect, which is useful when the filtered data is small and the values difficult to read."),t.IntroSpec.set("feedback","If at any time you feel happy, frustrated, or confused about the task,\n  feel free to click the corresponding emoji to let us know."),t.IntroSpec.set("tutorial","Click to walk through the tutorial again.\n  After you start training tasks, you will not be able to see the tutorial."),t.IntroSpec.set("videos","Click here for some videos demonstraiting the techniques.\n   After you are done viewing all the techniques,\n   you will be taken to the tasks page."),t.IntroSteps=["sum","clickState","dayBar","resetBtn","carrierBar","heatmap1","delayLegend","heatmap2","delayDistribution","unclipButton"].concat(a.IsChronicles?["chronicles","historyButton"]:[],["feedback","tutorial","videos"]),t.videoTutorials=(a.IsChronicles?[{title:"Selection Without Waiting",videoLink:a.FilePathPrefix+"concurrent_interaction.mov",texts:["The visualization tool allows you to perform multiple interactions at the same time.","You can specify multiple filters across charts---there is\n        no need to wait for individual ones."]},{title:"Navigate Results By Clicking on History Blocks",videoLink:a.FilePathPrefix+"navigate.mov",texts:["You can revisit these past results by clicking on the blocks or using arrow keys;\n         this way, you don't have to wait for every single result before you proceed.","Know that you also have the option of using up/left or down/right\n         keys for navigating in history in addition to clicking on the blocks.\n         The keys may be faster."]}]:[]).slice()},function(e,t){e.exports=d3},function(e,t,n){"use strict";function a(e,t,n){return!!e&&(t<e.high&&t>e.low&&n<e.high2&&n>e.low2)}function r(e){return e&&e.low&&e.high&&e.low2&&e.high2?e.low.toString()+e.high.toString()+e.low2.toString()+e.high2.toString():""}function o(e){return"x1"in e&&"x2"in e}function i(e){return!!e&&("string"==typeof e?e.length>0:o(e)?!!(e.low&&e.high&&e.low2&&e.high2):!(!e.low||!e.high))}Object.defineProperty(t,"__esModule",{value:!0}),t.lightBlue="rgba(76, 120, 168, 0.5)",t.selectedColor="orange",t.scatterDark="darkblue",t.scatterLight="LemonChiffon",t.scatterBaseDark="lightgray",t.scatterBaseLight="darkgray",t.lightGray="rgba(0, 0, 0, 0.07)",t.selectedBackgroundColor="rgba(255, 165, 0, 0.4)",t.brushColor="rgba(128,128,128, 0.3)",t.LayoutInfo={timeLine:{width:750,height:80,marginBottom:40,marginLeft:40,marginRight:50,marginTop:25},delays:{width:250,height:300,marginTop:20,marginBottom:40,marginLeft:40,marginRight:10},carrier:{width:300,height:150,marginLeft:1,marginTop:10,marginBottom:60,marginRight:50,verticalOrientation:!1},state:{width:300,height:150,marginLeft:1,marginTop:10,marginBottom:40,marginRight:50,verticalOrientation:!1},day:{width:300,height:150,marginLeft:1,marginTop:10,marginBottom:40,marginRight:50,verticalOrientation:!1}},t.DefaultChartProps={baseFill:t.lightBlue,showIntro:!1,selectFill:t.selectedColor,annotations:!0,verticalOrientation:!0,debug:!1},t.rectContains=a,t.rectToString=r,t.hasBrushSelection=i},function(e,t,n){"use strict";function a(e,t){if(!e||!e.values)throw new Error("Query "+t+" has NO result")}function r(e,t){var n=e.exec(t);n.length>0?(n[0].values.map(function(e){e.map(function(e,t){"ts"===n[0].columns[t]&&(e=new Date(e).toDateString())})}),console.log(n[0].columns.join("\t")),console.log(JSON.stringify(n[0].values).replace(/\],\[/g,"\n").replace("[[","").replace("]]","").replace(/,/g,"\t"))):console.log("NO RESULT")}function o(e,t){return console.log("["+t+"] "+e),1}function i(){return+new Date}function s(e,t){for(var n=e.split("-"),a=t.split("-"),r=0;r<n.length;r++){var o=function(e){var t=n[e],r=t.split(":")[0],o=a.filter(function(e){return e.split(":")[0]===r});return 1!==o.length?(console.log("didn't find",r,a),{value:0}):o[0]!==t?{value:0}:void 0}(r);if("object"==typeof o)return o.value}return 1}function l(){return(new Date).toTimeString().substr(0,8)}function c(e,t,n){void 0===n&&(n="db");var a=document.createElement("a");a.href=window.URL.createObjectURL(e),a.download=t+"_"+l()+"."+n,a.onclick=function(){setTimeout(function(){window.URL.revokeObjectURL(a.href)},1500)},a.click()}function u(e,t){var n="",a=e.exec(t);if(a.length&&a[0].values){n+=a[0].columns.join(",")+"\r\n",a[0].values.forEach(function(e){var t=e.join(",");n+=t+"\r\n"});c(new Blob([n],{type:"text/plain;charset=UTF-8"}),"userData.csv"),console.log("should have downloaded",n)}else console.log("NO RESULT")}Object.defineProperty(t,"__esModule",{value:!0}),t.assertQueryHasResult=a,t.d=r,window.d=r,t.log=o,t.timeNow=i,t.hashCompare=s,t.prettyTimeNow=l,t.downloadHelper=c,t.downloadQueryResultAsCSV=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Happy=0]="Happy",e[e.Angry=1]="Angry",e[e.Confused=2]="Confused"}(t.FeedbackType||(t.FeedbackType={}));!function(e){e[e.Description=0]="Description",e[e.Answering=1]="Answering",e[e.Submitted=2]="Submitted"}(t.TaskStep||(t.TaskStep={}));!function(e){e[e.ReadValue=0]="ReadValue",e[e.SimpleCompareValue=1]="SimpleCompareValue",e[e.ComplexCompareValue=2]="ComplexCompareValue",e[e.PatternSearch=3]="PatternSearch",e[e.Trend=4]="Trend",e[e.Recall=5]="Recall"}(t.TaskTypes||(t.TaskTypes={}));!function(e){e[e.NotAtAll=0]="NotAtAll",e[e.Somewhat=1]="Somewhat",e[e.Very=2]="Very"}(t.TaskConfidence||(t.TaskConfidence={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(13);if(a.DEBUG){var o=r.trainingQA.concat(r.taskQA).map(function(e){return e.qId}),i=new Set(o);if(o.length-i.size>0)throw console.log(o,i),new Error("There are duplicate qIds!")}t.SurveyCount=3,t.holidayCount=r.taskQA.length,t.TrainingCount=r.trainingQA.length,t.TotalAnalysisCount=r.trainingQA.length+r.taskQA.length,t.TotalTaskCount=t.TotalAnalysisCount+t.SurveyCount},function(e,t,n){"use strict";function a(){o.render(r.createElement(i.PageContainer,null),document.getElementById("wrapper"))}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(15),i=n(16);t.loadPage=a},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(21),i=n(22),s=n(29),l=n(30),c=n(31),u=n(2),h=n(1),p=n(3),d=n(4),m=function(e){function t(t){var n=e.call(this,t)||this;return n.handleKeyDown=n.handleKeyDown.bind(n),n.toggleClip=n.toggleClip.bind(n),n.setControl=n.setControl.bind(n),n.state={control:!0,clipped:!0},h.diel.BindFreeze(n.setControl),console.log("what is domtoimg",o),n}return a(t,e),t.prototype.setControl=function(e){this.setState({control:e})},t.prototype.componentWillMount=function(){u.IsChronicles&&document.addEventListener("keydown",this.handleKeyDown)},t.prototype.componentWillUnmount=function(){u.IsChronicles&&document.removeEventListener("keydown",this.handleKeyDown)},t.prototype.componentDidMount=function(){console.log("React all setup, calling tick"),h.diel.tick()()},t.prototype.handleKeyDown=function(e){38===e.keyCode||37===e.keyCode?h.diel.Input.deltaItx({$val:-1}):40!==e.keyCode&&39!==e.keyCode||h.diel.Input.deltaItx({$val:1})},t.prototype.toggleClip=function(){this.setState(function(e){var t=!e.clipped;return h.diel.LogData.eventLog({$eventName:p.EventType[p.EventType.Clip],$parameter:t}),{clipped:t}})},t.prototype.render=function(){var e=this,t=this.props.showIntro,n=this.state,a=n.clipped,o=n.control,p=r.createElement(s.default,{ref:function(t){return e.delaysChart=t},clipped:a,showIntro:t,chart:"delays",xLabel:"arrival delay",yLabel:"departure delay",key:"delays"}),m=r.createElement(i.default,{ref:function(t){return e.stateChart=t},clipped:a,xLabel:"state",yLabel:"count",chart:"state",isCategorical:!0}),f=r.createElement(i.default,{ref:function(t){return e.carrierChart=t},clipped:a,xLabel:"carrier",yLabel:"count",chart:"carrier",isCategorical:!0}),y=r.createElement(i.default,{ref:function(t){return e.dayChart=t},clipped:a,xLabel:"day",yLabel:"count",chart:"day",isCategorical:!1,showIntro:t}),g=u.IsChronicles?r.createElement(c.default,null):null;return r.createElement("div",{className:"vis-portal "+(o?"":"dimmed")},r.createElement("div",{style:{float:"left"}},r.createElement("button",{className:"general-btn vis-btn ",style:{width:75},onClick:this.toggleClip,"data-step":t?d.IntroSteps.indexOf("unclipButton")+1:null,"data-intro":t?d.IntroSpec.get("unclipButton"):null},this.state.clipped?"":"un","zoom"),u.IsChronicles?r.createElement("button",{className:"general-btn vis-btn",onClick:h.diel.Input.deleteItx,"data-step":t?d.IntroSteps.indexOf("historyButton")+1:null,"data-intro":t?d.IntroSpec.get("historyButton"):null},"clear history"):null),r.createElement("div",{style:{float:"left"},"data-step":t?d.IntroSteps.indexOf("feedback")+1:null,"data-intro":t?d.IntroSpec.get("feedback"):null},r.createElement(l.default,null)),r.createElement("br",{style:{clear:"both"}}),r.createElement("div",{id:"all-carts","data-step":t?d.IntroSteps.indexOf("sum")+1:null,"data-intro":t?d.IntroSpec.get("sum"):null},r.createElement("div",{className:"chart-layout-wrapper","data-step":t?d.IntroSteps.indexOf("clickState")+1:null,"data-intro":t?d.IntroSpec.get("clickState"):null},m),r.createElement("div",{className:"chart-layout-wrapper","data-step":t?d.IntroSteps.indexOf("dayBar")+1:null,"data-intro":t?d.IntroSpec.get("dayBar"):null},y),r.createElement("div",{className:"chart-layout-wrapper","data-step":t?d.IntroSteps.indexOf("carrierBar")+1:null,"data-intro":t?d.IntroSpec.get("carrierBar"):null},f),r.createElement("div",{className:"chart-layout-wrapper","data-step":t?d.IntroSteps.indexOf("heatmap1")+1:null,"data-intro":t?d.IntroSpec.get("heatmap1"):null},r.createElement("div",{style:{overflow:"auto"}},p)),r.createElement("div",{style:{clear:"both"}})),r.createElement("div",{"data-step":t&&u.IsChronicles?d.IntroSteps.indexOf("chronicles")+1:null,"data-intro":t&&u.IsChronicles?d.IntroSpec.get("chronicles"):null},g))},t.defaultProps={width:800,height:100,isTraining:!1},t}(r.Component);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(1);t.ResetButton=function(e){return e.selection&&e.selection.length>0?a.createElement("div",{style:{height:30,width:e.width,overflow:"hidden"}},a.createElement("button",{style:{marginBottom:10},onClick:function(){return r.diel.Input.xBrushItx({$chart:e.chart})}},"reset")):a.createElement("div",{style:{height:30,width:e.width}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),r=["United","Alaska","Hawaiian","Delta","American","Virgin"],o=r.map(function(e){return{text:e,value:"United"===e?1:0}}),i=new Array(7).fill(0).map(function(e,t){return{text:t+5+"th",value:t+5===9?1:0}});t.trainingQA=[{qId:"popAirline_training",question:"Which airline do people from CA fly the most?",type:a.TaskTypes.ComplexCompareValue,choices:o},{qId:"delaySearch_training",question:"We found that on the day of the 4th, a Monday, delays were almost twice the average.\n      Could you identify another day in that week that also has higher delays?",type:a.TaskTypes.PatternSearch,choices:i},{qId:"delaySearch_mem_training",question:"Did you notice any days that had very low delays?",type:a.TaskTypes.Recall,linkedQId:"delaySearch_training",note:'The task you just completed is a "memory tasks"---we are curious if you remember any of the\n          intermediate results you see on the page',choices:[{text:"None",value:0},{text:"5th or 6th",value:0},{text:"7th or 8th",value:1},{text:"9th or 10th",value:0}]},{qId:"singleAirline_training",question:"For the states with more flights (i.e., before TT in the chart of flights by state on the left), are there any states whose flights are with a single carrier? Select one that applies.",type:a.TaskTypes.PatternSearch,choices:[{text:"CA",value:0},{text:"WA",value:0},{text:"OR",value:0},{text:"AZ",value:0},{text:"TX",value:0},{text:"NV",value:1},{text:"AK",value:1},{text:"CO",value:1}]}];var s=["Hawaiian","Delta"],l=r.map(function(e){return{text:e,value:s.indexOf(e)>-1?1:0}}),c=["Alaska","Virgin"],u=r.map(function(e){return{text:e,value:c.indexOf(e)>-1?1:0}});u.push({text:"None",value:0});var h=["CA","WA","AZ","TX","OR","CO","NV","AK","IL","NY","UT","TT","GA","NJ","MN","VA"],p=["CO","IL","NY","UT"],d=h.map(function(e){return{text:e,value:p.indexOf(e)>-1?1:0}}),m=["TX","GA","NJ"],f=h.map(function(e){return{text:e,value:m.indexOf(e)>-1?1:0}}),y=h.map(function(e){return{text:e,value:"AZ"===e?1:"TX"===e?.5:"CA"===e?.1:0}});t.taskQA=[{qId:"popularStateAmerican_task",question:"What is the <b>second</b> most popular state that flies with the carrier, <i>American</i>?",type:a.TaskTypes.SimpleCompareValue,choices:y},{qId:"readNV24_task",question:"What is the range of <b>arrival delay</b> for NV on the 24th?",type:a.TaskTypes.ReadValue,choices:[{text:"less than 60",value:0},{text:"60 to 100",value:1},{text:"more than 100",value:0}]},{qId:"readORCO_task",question:"Are there more flights from TX on the 16th with American than flights from CO on the 20th with United?",type:a.TaskTypes.ComplexCompareValue,choices:[{text:"TX on the 16th with American has more",value:1},{text:"Less",value:0}]},{qId:"readORCO_mem_task",question:"Are there more flights from TX on the 16th with United than than those from CO on the 20th with United? (If none, count as zero.)",type:a.TaskTypes.Recall,linkedQId:"readORCO_task",choices:[{text:"TX on 16th with United has more",value:0},{text:"Less or none",value:1}]},{qId:"holidayStrat_task",question:"There are a few states with noticeable increase of fights for the holiday times (from around the 21st), find one (there maybe be more than one, but one is enough)",type:a.TaskTypes.PatternSearch,choices:d},{qId:"holidayStrat_mem_task",question:"Do you remember seeing any states whose flight counts does not change at all through this period (second half of December)?",type:a.TaskTypes.Recall,linkedQId:"holidayStrat_task",choices:f},{qId:"delayTrendHoliday_task",question:"Is the delay longer or shorter around Christmas (23rd, 24th, 25th)?",type:a.TaskTypes.ComplexCompareValue,choices:[{text:"All days are normal",value:0},{text:"All days have longer delays",value:0},{text:"All days have shorter delays",value:0},{text:"Some days have shorter delays, others normal",value:0},{text:"Some days have longer delays, others normal",value:1}]},{qId:"delayTrendHoliday_mem_task",question:"Do you remember what the longest <b>arrival</b> delay acorss these three days was, roughly?",type:a.TaskTypes.Recall,linkedQId:"delayTrendHoliday_task",choices:[{text:"less than 300",value:0},{text:"between 300 and 400",value:0},{text:"betwee 400 and 500",value:1},{text:"more than 500",value:0}]},{qId:"carrierSearch_task",question:"Was there a carrier that did worse around Christmas compared to that carrier's average delays? (24th or 25th)?",type:a.TaskTypes.PatternSearch,choices:l},{qId:"carrierSearch_mem_task",question:"Did you notice any carriers that have consistently low (always below an hour) delays?",type:a.TaskTypes.Recall,linkedQId:"carrierSearch_task",choices:u}]},function(e,t,n){"use strict";function a(e){var t,n,a=decodeURIComponent(window.location.search.substring(1)),r=a.split("&");for(n=0;n<r.length;n++)if(t=r[n].split("="),t[0]===e)return void 0===t[1]?null:t[1];return null}function r(e){return console.log("setting up experiment for",e),function(){function t(){}function n(e){var t=a("turkSubmitTo");o.DEBUG||"sandbox"===t?alert("finished all tasks"):e.submit()}function r(){}return{name:o.ExperimentName,task:o.ExperimentName,researcher:o.Researcher,numTasks:e,params:{params:[{name:"p",type:"UniformChoice",options:[0]}]},clearTask:t,finish:n,trainingTasks:[],viewTask:r}}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);!function(e){e[e.Introduction=0]="Introduction",e[e.Demographics=1]="Demographics",e[e.TrainingIntro=2]="TrainingIntro",e[e.Tutorial=3]="Tutorial",e[e.Training=4]="Training",e[e.TasksIntro=5]="TasksIntro",e[e.Tasks=6]="Tasks",e[e.SurveyIntro=7]="SurveyIntro",e[e.FlowSurvey=8]="FlowSurvey",e[e.ToolSurvey=9]="ToolSurvey",e[e.FailedTraining=10]="FailedTraining",e[e.End=11]="End",e[e.CancelSurvey=12]="CancelSurvey"}(t.ExperimentStep||(t.ExperimentStep={}));!function(e){e[e.TasksTooHard=0]="TasksTooHard",e[e.DelaysFrustrating=1]="DelaysFrustrating",e[e.PayTooLow=2]="PayTooLow",e[e.Other=3]="Other"}(t.CancelReason||(t.CancelReason={})),t.getUrlParameter=a,t.setupExperimentForGpaas=r},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(17);t.PageContainer=function(){return a.createElement(a.Fragment,null,a.createElement(r.default,null))}},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(18),i=n(19),s=n(20),l=n(34),c=n(35),u=n(36),h=n(37),p=n(14),d=n(40),m=n(1),f=n(9),y=n(3),g=n(2),v=n(42),w=function(e){function t(t){var n=e.call(this,t)||this;n.start=n.start.bind(n),n.submitDemographic=n.submitDemographic.bind(n),n.startTutorial=n.startTutorial.bind(n),n.startTraining=n.startTraining.bind(n),n.finishTraining=n.finishTraining.bind(n),n.startTasks=n.startTasks.bind(n),n.finishTasks=n.finishTasks.bind(n),n.finishFlowSurvey=n.finishFlowSurvey.bind(n),n.finishToolSurvey=n.finishToolSurvey.bind(n),n.actuallyCancel=n.actuallyCancel.bind(n),n.cancelTasks=n.cancelTasks.bind(n),n.startSurvey=n.startSurvey.bind(n);var a=p.getUrlParameter("assignmentId");return n.state={step:p.ExperimentStep.Introduction,assignmentId:a,focusWarning:!1,focusWarningShown:null},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this;window.addEventListener("focus",function(){e.setState({focusWarning:!1}),m.diel.LogData.eventLog({$eventName:y.EventType[y.EventType.Focus]})}),window.addEventListener("blur",function(){var t=m.diel.IsDuringTask();t.firstTime&&(null===e.state.focusWarningShown||e.state.focusWarningShown<Date.now()-1e4)?(e.setState({focusWarningShown:Date.now()}),alert("Please try not to leave during your next task!")):t.duringTask&&e.setState({focusWarning:!0}),m.diel.LogData.eventLog({$eventName:y.EventType[y.EventType.Blur]})})},t.prototype._logStep=function(e){m.diel.LogData.eventLog({$eventName:"step",$parameter:p.ExperimentStep[e]})},t.prototype.start=function(){gpaas.startExperiment(p.setupExperimentForGpaas(f.TotalTaskCount)).setupSuccessful?(console.log("experiment started successfully for "+f.TotalTaskCount+" tasks"),m.diel.LogData.eventLog({$eventName:y.EventType[y.EventType.IsChronicles],$parameter:g.IsChronicles?"true":"false"}),m.diel.LogData.eventLog({$eventName:y.EventType[y.EventType.ExpVersion],$parameter:g.ExpVersion}),this._logStep(p.ExperimentStep.TrainingIntro),this.setState({step:p.ExperimentStep.TrainingIntro})):console.log("failed to start experiment")},t.prototype.startTutorial=function(){this._logStep(p.ExperimentStep.Tutorial),this.setState({step:p.ExperimentStep.Tutorial})},t.prototype.startTraining=function(){this._logStep(p.ExperimentStep.Training),m.diel.ClearHistory(),this.setState({step:p.ExperimentStep.Training})},t.prototype.finishTraining=function(){m.diel.TrainingZeroCount()===f.TrainingCount?(gpaas.cancelTasks(),this._logStep(p.ExperimentStep.FailedTraining),this.setState({step:p.ExperimentStep.FailedTraining})):(this._logStep(p.ExperimentStep.TasksIntro),m.diel.ChangeToTask(),this.setState({step:p.ExperimentStep.TasksIntro}))},t.prototype.startTasks=function(){this._logStep(p.ExperimentStep.Tasks),this.setState({step:p.ExperimentStep.Tasks})},t.prototype.finishTasks=function(){this._logStep(p.ExperimentStep.SurveyIntro),this.setState({step:p.ExperimentStep.SurveyIntro})},t.prototype.startSurvey=function(){this._logStep(p.ExperimentStep.FlowSurvey),this.setState({step:p.ExperimentStep.FlowSurvey})},t.prototype._logSurvey=function(e,t){var n=Object.keys(e).filter(function(e){return"warn"!==e}).map(function(t){return{qId:t,answer:e[t]}});gpaas.logData({type:"table",name:p.ExperimentStep[t],values:n})},t.prototype.finishFlowSurvey=function(e){this._logStep(p.ExperimentStep.FlowSurvey),this._logSurvey(e,p.ExperimentStep.FlowSurvey),gpaas.nextTask(),this.setState({step:p.ExperimentStep.ToolSurvey})},t.prototype.finishToolSurvey=function(e){this._logStep(p.ExperimentStep.ToolSurvey),this._logSurvey(e,p.ExperimentStep.ToolSurvey),gpaas.nextTask(),this.setState({step:p.ExperimentStep.Demographics})},t.prototype.submitDemographic=function(e){this._logStep(p.ExperimentStep.Demographics),this._logSurvey(e,p.ExperimentStep.Demographics),gpaas.logData({type:"table",name:"eventLog",values:m.diel.GetLogs("eventLog")}),gpaas.nextTask(),this.setState({step:p.ExperimentStep.End})},t.prototype.cancelTasks=function(){this._logStep(p.ExperimentStep.CancelSurvey),this.setState({step:p.ExperimentStep.CancelSurvey})},t.prototype.actuallyCancel=function(e){this._logSurvey(e,p.ExperimentStep.CancelSurvey),gpaas.nextTask(),gpaas.cancelTasks(),this.setState({step:p.ExperimentStep.End}),console.log("experiment cancelled")},t.prototype.render=function(){var e,t=this.state,n=t.step,a=t.assignmentId;if(n===p.ExperimentStep.Introduction)e=r.createElement(u.default,{onClick:this.start,disabled:"ASSIGNMENT_ID_NOT_AVAILABLE"===a});else if(n===p.ExperimentStep.Demographics)e=r.createElement(i.default,{onClick:this.submitDemographic});else if(n===p.ExperimentStep.TrainingIntro)e=r.createElement(l.TrainingIntro,{onClick:this.startTutorial});else if(n===p.ExperimentStep.Tutorial)e=r.createElement(h.default,{onClick:this.startTraining});else if(n===p.ExperimentStep.Training)e=r.createElement(s.default,{isTraining:!0,cancel:this.cancelTasks,finish:this.finishTraining});else if(n===p.ExperimentStep.TasksIntro)e=r.createElement(c.TaskIntro,{onClick:this.startTasks});else if(n===p.ExperimentStep.Tasks)e=r.createElement(s.default,{isTraining:!1,cancel:this.cancelTasks,finish:this.finishTasks});else if(n===p.ExperimentStep.SurveyIntro)e=r.createElement("div",null,r.createElement("h3",null,"You are almost done!"),r.createElement("p",null,"We just need you to fill out three more quick surveys (each should take less than a minute). Don't worry if you are confused about exactly what the question means---try your best to provide an answer. If you are still worried, let us know in the comment section."),r.createElement("button",{className:"general-btn exp-nav-btn",onClick:this.startSurvey},"Start Surveys"));else if(n===p.ExperimentStep.FlowSurvey)e=r.createElement(o.default,{onClick:this.finishFlowSurvey,surveyQuestions:d.FlowSurveyQuestions,surveySequence:d.FlowSurveySequence,freeformPrompt:"Feel free to comment on your experience completing the tasks here."});else if(n===p.ExperimentStep.ToolSurvey)e=r.createElement(o.default,{onClick:this.finishToolSurvey,surveyQuestions:d.UsabilitySurveyQuestions,surveySequence:d.UsabilitySurveySequence,freeformPrompt:"Feel free to comment on the tools or the effect of latency here. You can also share your ideas on how to improve, if you like."});else if(n===p.ExperimentStep.CancelSurvey)e=r.createElement(v.default,{nextStep:this.actuallyCancel});else if(n===p.ExperimentStep.End)e=r.createElement(r.Fragment,null,r.createElement("h2",null,"Thank you! All complete. You may close and leave the page now."),r.createElement("p",null,"We will be sure to pay you within 2 weeks time!"));else if(n===p.ExperimentStep.FailedTraining)e=r.createElement(r.Fragment,null,r.createElement("h2",null,"Failed to qualify for complete HIT"),r.createElement("p",null,"Thank you for attempting our HIT --- unfortunately you got all three training questions wrong and are as a result not eligible to participate. You will be paid out for the tasks you have completed."));else if(g.DEBUG)throw new Error("step not handled: "+p.ExperimentStep[n]);return r.createElement(r.Fragment,null,this.state.focusWarning?r.createElement("p",{className:"warning"},"Please stay on the page during your task"):null,e)},t}(r.Component);t.default=w},function(e,t,n){"use strict";function a(e,t,n,a,r){var i=e.get(n),s=a[n],l=new Array(5).fill(0).map(function(e,t){return o.createElement("td",{style:{align:"right"}},o.createElement("input",{required:0===t,type:"radio",style:{align:"left"},name:n,value:t+1,checked:s===""+(t+1),onChange:r}))});return o.createElement(o.Fragment,null,o.createElement("tr",null,o.createElement("td",{style:{width:500}},t+1,". ",i),l))}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=n.onChange.bind(n),n.onClick=n.onClick.bind(n),n.state={warn:"false"},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.surveyQuestions!==this.props.surveyQuestions&&this.setState({comments:""})},t.prototype.onChange=function(e){var t;this.setState((t={},t[e.target.name]=e.target.value,t))},t.prototype.onClick=function(){Object.keys(this.state).filter(function(e){return"comments"!==e}).length<this.props.surveyQuestions.size?this.setState({warn:"true"}):(this.setState({warn:"false"}),this.props.onClick(this.state))},t.prototype.render=function(){var e=this,t=this.props,n=t.surveyQuestions,r=t.surveySequence,i=t.freeformPrompt,s=r.map(function(t,r){return a(n,r,t,e.state,e.onChange)});return o.createElement("div",null,o.createElement("table",{style:{width:800,borderBottom:"solid"}},o.createElement("tr",null,o.createElement("th",{style:{width:500}},"Question"),o.createElement("th",{style:{align:"left",width:100}},"Not at all"),o.createElement("th",{style:{align:"left",width:100}},"Partly"),o.createElement("th",{style:{align:"left",width:100}},"Very much"))),o.createElement("table",{style:{width:800}},s),o.createElement("br",null),o.createElement("div",{className:"question-wrapper",style:{width:800}},o.createElement("label",{htmlFor:"comments"},"Optional feedback: ",i),o.createElement("br",null),o.createElement("textarea",{rows:5,cols:50,id:"comments",name:"comments",onChange:this.onChange})),"true"===this.state.warn?o.createElement("p",{className:"warning"},"Please answer all of the multiple choice questions."):null,o.createElement("button",{className:"general-btn exp-nav-btn",onClick:this.onClick},"Submit Survey and Continue"))},t}(o.Component);t.default=i},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=n.onChange.bind(n),n.onClick=n.onClick.bind(n),n.state={age:"",computer:void 0,education:"N",gender:"N",occupation:"",viz:void 0,warn:"false"},n}return a(t,e),t.prototype.onChange=function(e){var t;this.setState((t={},t[e.target.name]=e.target.value,t))},t.prototype.onClick=function(){var e=this.state,t=e.age,n=e.computer,a=e.occupation,r=e.viz;0===t.length||void 0===n||0===a.length||void 0===r?this.setState({warn:"true"}):this.props.onClick(this.state)},t.prototype.render=function(){var e=this.state,t=e.age,n=e.computer,a=e.education,o=e.gender,i=e.occupation,s=e.viz;return r.createElement("div",null,r.createElement("h3",null,"Demographic Survey"),r.createElement("p",null,"Please fill out this brief survey to help us better understand the background of our participants. Your individual response to this survey will not be reported, but rather anonymized and aggregated together with the rest of the participant population."),r.createElement("div",{className:"question-wrapper"},r.createElement("label",{htmlFor:"age"},r.createElement("strong",null,"1.")," Your Age:"),r.createElement("input",{type:"text",id:"age",name:"age",value:t,onChange:this.onChange,required:!0})),r.createElement("div",{className:"question-wrapper"},r.createElement("label",{htmlFor:"gender"},r.createElement("strong",null,"2.")," Your Gender:"),r.createElement("select",{id:"gender",name:"gender",value:o,onChange:this.onChange,required:!0},r.createElement("option",{value:"N"},"Decline to state"),r.createElement("option",{value:"M"},"Male"),r.createElement("option",{value:"F"},"Female"),r.createElement("option",{value:"O"},"Other"))),r.createElement("div",{className:"question-wrapper"},r.createElement("label",{htmlFor:"education"},r.createElement("strong",null,"3.")," What is the highest educational degree you have earned?:"),r.createElement("select",{id:"education",name:"education",value:a,onChange:this.onChange,required:!0},r.createElement("option",{value:"N"},"Decline to state"),r.createElement("option",{value:"Middle"},"Middle School Diploma"),r.createElement("option",{value:"High"},"High School Diploma"),r.createElement("option",{value:"Bachelors"},"Bachelor's Degree"),r.createElement("option",{value:"Masters"},"Master's Degree"),r.createElement("option",{value:"Doctorate"},"Doctorate Degree"))),r.createElement("div",{className:"question-wrapper"},r.createElement("label",{htmlFor:"occupation"},r.createElement("strong",null,"4.")," Your Occupation:"),r.createElement("input",{type:"text",id:"occupation",name:"occupation",value:i,onChange:this.onChange,required:!0})),r.createElement("div",{className:"question-wrapper"},r.createElement("label",{htmlFor:"computer"},r.createElement("strong",null,"5.")," How often do you use a computer on a typical week?:"),r.createElement("div",{className:"radio-button-wrapper"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"computer",value:"1",checked:"1"===n,onChange:this.onChange,required:!0})," Never"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"computer",value:"2",checked:"2"===n,onChange:this.onChange})," Rarely"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"computer",value:"3",checked:"3"===n,onChange:this.onChange})," Sometimes"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"computer",value:"4",checked:"4"===n,onChange:this.onChange})," Often"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"computer",value:"5",checked:"5"===n,onChange:this.onChange})," Always"))),r.createElement("div",{className:"question-wrapper"},r.createElement("label",{htmlFor:"viz"},r.createElement("strong",null,"6.")," How often do you interact with data visualizations on a typical week? (e.g. tables, charts, graphs):"),r.createElement("div",{className:"radio-button-wrapper"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"viz",value:"1",checked:"1"===s,onChange:this.onChange,required:!0})," Never"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"viz",value:"2",checked:"2"===s,onChange:this.onChange})," Rarely"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"viz",value:"3",checked:"3"===s,onChange:this.onChange})," Sometimes"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"viz",value:"4",checked:"4"===s,onChange:this.onChange})," Often"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"viz",value:"5",checked:"5"===s,onChange:this.onChange})," Always"))),"true"===this.state.warn?r.createElement("p",{className:"warning"},"Please answer all of the questions."):null,r.createElement("button",{className:"general-btn exp-nav-btn",onClick:this.onClick},"Complete HIT"))},t}(r.Component);t.default=o},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(11),i=n(32),s=n(13),l=n(1),c=n(2),u=n(33),h=function(e){function t(t){var n=e.call(this,t)||this;return n.setControl=n.setControl.bind(n),n.nextTask=n.nextTask.bind(n),n.state={moneyEarned:t.isTraining?0:c.TaskReward*s.trainingQA.length,step:0,control:!0},l.diel.BindFreeze(n.setControl),n}return a(t,e),t.prototype.setControl=function(e){this.setState({control:e})},t.prototype.nextTask=function(){u.LoggedTablesForAnalysis.map(function(e){gpaas.logData({type:"table",name:e,values:l.diel.GetLogs(e)})});var e=this.props.isTraining?s.trainingQA.length:s.taskQA.length,t=this.state.step===e-1;if(gpaas.nextTask(),l.diel.ClearHistory(),t)return void this.props.finish();this.setState(function(e){return{step:e.step+1,moneyEarned:e.moneyEarned+c.TaskReward}})},t.prototype.render=function(){var e=this,t=this.props.isTraining,n=this.state,a=n.step,l=n.moneyEarned,c=r.createElement(o.default,{showIntro:t}),u=r.createElement(i.default,{isTraining:t,question:this.props.isTraining?s.trainingQA[a]:s.taskQA[a],nextTask:this.nextTask});return r.createElement(r.Fragment,null,c,r.createElement("div",{className:"task-container"},r.createElement("div",{style:{textAlign:"center"}},r.createElement("button",{className:"general-btn exit-btn",onClick:function(){!0===confirm("Are you sure you want to leave?")&&e.props.cancel()}},"Finish and claim current reward of $",l.toFixed(2))),u))},t}(r.Component);t.default=h},function(e,t){e.exports=domtoimage},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(5),i=n(12),s=n(1),l=n(6),c=n(27),u=n(28),h=n(4),p=function(e){function t(t){var n=e.call(this,t)||this;return n.refreshSelection=n.refreshSelection.bind(n),n.refreshData=n.refreshData.bind(n),n.refreshIsLoading=n.refreshIsLoading.bind(n),n.state={baseData:s.diel.GetStaticView(t.chart+"ChartInitData"),isLoading:{status:1}},n}return a(t,e),t.prototype.refreshSelection=function(e){this.setState({selection:e})},t.prototype.refreshData=function(e){this.setState({data:e})},t.prototype.refreshIsLoading=function(e){this.setState({isLoading:e})},t.prototype.componentDidMount=function(){var e=this.props.chart;s.diel.BindOutput(e+"ChartDataView",this.refreshData),s.diel.BindOutput(e+"ChartSelection",this.refreshSelection,{singleRow:!0}),s.diel.BindOutput(e+"ChartIsLoading",this.refreshIsLoading,{singleRow:!0})},t.prototype.render=function(){var e=this.props,t=e.chart,n=e.xLabel,a=e.isCategorical,s=e.clipped;if(!this.state||!this.state.baseData||0===this.state.baseData.length)throw new Error("Data for chart "+t+" should be here already");var p,d,m=l.LayoutInfo[t],f=m.marginTop,y=m.marginRight,g=m.marginLeft,v=m.marginBottom,w=l.LayoutInfo[t],b=w.width,k=w.height,S=w.verticalOrientation,x=this.state,E=x.baseData,T=x.selection,C=x.data,I=x.isLoading,_=b-g-y,O=k-f-v;d=a?u.CategoricalChartHelper({baseData:E,data:C,selection:T,chart:t,chartWidth:_,chartHeight:O,clipped:s}):c.linearChartHelper({baseData:E,data:C,selection:T,chart:t,chartWidth:_,chartHeight:O,clipped:s});var D,N=o.brushX().extent([[0,0],[_,O]]).on("start",function(){}).on("end",function(){if(o.event.sourceEvent&&o.event.selection){var e=o.brushSelection(this);null!==e&&d.brushFn(Math.min(e[0],e[1]),Math.max(e[0],e[1])),o.select(this).call(N.move,null)}}),L=r.createElement("g",{ref:function(e){return o.select(e).call(N)}}),P=this.props.clipped?5:this.state.data?Math.min(Math.max.apply(Math,this.state.data.map(function(e){return e.y})),5):5,F=E.length,A=o.axisBottom(d.x).ticks(F),q=o.axisLeft(d.y).ticks(P,"d").tickSizeOuter(0),B=S?"":"rotate90x",R=S?"":"rotate90y",$=r.createElement(r.Fragment,null,r.createElement("g",{ref:function(e){o.select(e).call(q)},transform:S?"":"translate("+_+", 0)",className:B}),r.createElement("g",{ref:function(e){o.select(e).call(A)},transform:"translate(0,"+O+")",className:R})),M=r.createElement("g",null,r.createElement("text",{className:"chart-label",x:S?_/2+g:10,y:S?k-5:b/2,transform:S?"":"rotate(-90, 10, "+b/2+")",textAnchor:"middle"}," ",n)),j=d.rectsSpec.map(function(e){return r.createElement("rect",{className:e.className?e.className:"select-bars",x:e.x,y:e.y,width:e.barWidth,height:O-e.y,fill:e.color,onClick:e.onClick})}),W=b,z=k,H=r.createElement("g",{transform:"translate("+g+", "+f+")"},$,L,j);S?D=H:(W=k,z=b,D=r.createElement("g",{transform:"translate("+W+", 0) rotate(90)"},H)),p=r.createElement("svg",{width:W,height:z,className:"chart-svg"},D,M);var Q,V=1===I.status?"indicatorLine":"";if(a)Q=this.state.selection?this.state.selection.selection:null,Q=Q?Q.length>10?Q.slice(0,10)+"...":Q:null;else if(this.state.selection){var U=this.state.selection.low,G=this.state.selection.high;U&&(Q=U===G?""+U:U+" to "+G)}return r.createElement("div",{className:"chart-container bar-chart"},r.createElement("div",{style:{height:20,overflow:"hidden"}},r.createElement("p",{className:"chart-filter"},Q?"selected "+Q:" ")),p,r.createElement("div",{style:{height:5},className:V}),r.createElement("div",{"data-step":"day"===t?h.IntroSteps.indexOf("resetBtn")+1:null,"data-intro":"day"===t?h.IntroSpec.get("resetBtn"):null},r.createElement(i.ResetButton,{width:W,disabled:!d.hasSelection,chart:t,selection:Q})))},t.defaultProps=l.DefaultChartProps,t}(r.Component);t.default=p},function(e,t,n){"use strict";var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}l((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){function n(e){return function(t){return a([e,t])}}function a(n){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(i=l.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,i,s,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),i=n(10),s=n(7),l=n(25),c=n(26),u=n(2),h=["day","carrier","delays","state"],p={training:{main:u.FilePathPrefix+"main_training.db",worker:u.FilePathPrefix+"worker_training.db"},task:{main:u.FilePathPrefix+"main_task.db",worker:u.FilePathPrefix+"worker_task.db"}},d={singleRow:!1,notNull:!1},m=function(){function e(){var e=this;this.LoadAll=function(t,n,o){return a(e,void 0,void 0,function(){var e=this;return r(this,function(a){switch(a.label){case 0:return console.log("diel Load",t,n),[4,this.loadMain(t)];case 1:return a.sent(),[4,this.loadWorker(n)];case 2:return a.sent(),c.setUpWorker(this.worker),this.setup(),this.boundFns.length>0&&this.boundFns.map(function(t){t.s=e.output.get(t.view)}),this.deadRequests=[],this.activeRequests=[],o&&i.loadPage(),[2]}})})},this.loadMain=function(t){return a(e,void 0,void 0,function(){var e,n;return r(this,function(a){switch(a.label){case 0:return this.db&&this.db.close(),[4,fetch(t)];case 1:return e=a.sent(),[4,e.arrayBuffer()];case 2:return n=a.sent(),this.buffer=new Uint8Array(n),this.db=new o.Database(this.buffer),[2]}})})},this.loadWorker=function(t){return a(e,void 0,void 0,function(){var e,n,a;return r(this,function(r){switch(r.label){case 0:return[4,fetch(t)];case 1:return e=r.sent(),[4,e.arrayBuffer()];case 2:return n=r.sent(),a=new Uint8Array(n),this.worker.postMessage({id:"opened",action:"open",buffer:a}),this.workerLoaded=!0,[2]}})})},console.log("Diel initializing for training"),this.LoadAll(p.training.main,p.training.worker,!0),this.worker=new Worker((u.IsProd?"./":"./dist/")+"worker.sql.js"),this.boundFns=[],this.workerLoaded=!1,this.activeRequests=[]}return e.prototype.BindOutput=function(e,t,n){if(void 0===n&&(n={}),!this.output.has(e))throw new Error("output not defined "+e+" "+Array.from(this.output.keys()).join(", "));var a=Object.assign({},d,n);this.boundFns.push({view:e,s:this.output.get(e),f:t,c:a})},e.prototype.GetLogs=function(e){var t=this.logs.get(e);if(!t)throw console.log(e+" not found in diel logs",this.logs),new Error(e+" not found in diel logs");t.bind({});for(var n=[];t.step();)n.push(t.getAsObject());return n},e.prototype.GetStaticView=function(e){var t=this.staticViews.get(e);t.bind({});for(var n=[];t.step();)n.push(t.getAsObject());if(0===n.length)throw new Error("Static view "+e+" should not be empty");return n},e.prototype.SetFreeze=function(e){this.frozen=e,this.frozenBind(!e)},e.prototype.BindFreeze=function(e){this.frozenBind=e},e.prototype.ClearHistory=function(){var e=this;this.deadRequests=this.deadRequests.concat(this.activeRequests).filter(function(e){return e.ts>Date.now()-1e4}),["eqChart_SP","eventLog","navigateItx","deltaItx","deleteItx"].map(function(t){return e.db.run("delete from "+t)}),["itxId_SP","brushState_SP","brushDep_SP","dataParamHashes_SP","stateChartData","dayChartData","carrierChartData","delaysChartData","chartDataAtomic","xBrushItx"].map(function(t){e.db.run("delete from "+t+" where itxId > 4")}),this.tick()()},e.prototype.processInput=function(e,t){if(!this.frozen){var n=Object.assign({$ts:s.timeNow()},t);e.run(n)}},e.prototype.setup=function(){var t=this,n=this.db;n.run("PRAGMA foreign_keys = ON;"),n.create_function("tick",this.tick()),n.create_function("workerGetChartDataView",this.workerGetChartDataView()),n.create_function("workerShareItx",this.workerShareItx()),n.create_function("timeNow",s.timeNow),n.create_function("log",s.log),n.create_function("hashCompare",s.hashCompare),this.input={xBrushItx:n.prepare("\n        insert into xBrushItx (ts, chart, low, high, low2, high2, selection)\n        values ($ts, $chart, $low, $high, $low2, $high2, $selection)"),navigateItx:n.prepare("\n        insert into navigateItx (ts, xFilterItxId)\n        values ($ts, $xFilterItxId)"),deltaItx:n.prepare("\n        insert into deltaItx (ts, val)\n        values ($ts, $val)"),deleteItx:n.prepare("\n        insert into deleteItx (ts)\n        values ($ts)")},this.Input={xBrushItx:function(e){if(e.$low&&(isNaN(e.$high)||isNaN(e.$low)))throw new Error("number has to be defined");t.processInput(t.input.xBrushItx,e)},navigateItx:function(e){t.processInput(t.input.navigateItx,e)},deltaItx:function(e){t.processInput(t.input.deltaItx,e)},deleteItx:function(){t.input.deleteItx.run({$ts:s.timeNow()})}},this.logData={thumbnail:n.prepare("\n        insert into thumbnail (ts, itxId, img)\n        values ($ts, $itxId, $img);\n      "),thumbnailRemove:n.prepare("\n        delete from thumbnail\n        where ts < $ts and itxId = $itxId;\n      "),eventLog:n.prepare("\n        insert into eventLog (ts, eventName, parameter)\n        values ($ts, $eventName, $parameter);\n      "),taskInfo:n.prepare("\n        insert into taskInfo (qId, taskType, isTraining)\n        values ($qId, $taskType, $isTraining);\n      "),taskTimes:n.prepare("\n        insert into taskTimes (ts, qId, eventType)\n        values ($ts, $qId, $eventType);\n      "),answers:n.prepare("\n        insert into answers (qId, answer, confidence, score, comment)\n        values ($qId, $answer, $confidence, $score, $comment);\n      "),memoryTask:n.prepare("\n        insert into memoryTask (qId, linkedQId)\n        values ($qId, $linkedQId);\n      ")},this.LogData={thumbnail:function(e){var n=Object.assign({$ts:s.timeNow()},e);t.logData.thumbnail.run(n),t.logData.thumbnailRemove.run({$ts:n.$ts,$itxId:e.$itxId})},eventLog:function(e){var n=Object.assign({$ts:s.timeNow()},e);t.logData.eventLog.run(n)},taskInfo:function(e){t.logData.taskInfo.run(e)},taskTimes:function(e){var n=Object.assign({$ts:s.timeNow()},e);t.logData.taskTimes.run(n)},answers:function(e){t.logData.answers.run(e)},memoryTask:function(e){t.logData.memoryTask.run(e)}},this.output=new Map,["ChartSelection","ChartIsLoading","ChartDataView"].map(function(e){h.map(function(a){var r=""+a+e;t.output.set(r,n.prepare("select * from "+r))})}),this.logs=new Map,e.ItxLogsViews.map(function(e){return t.logs.set(e,n.prepare("select * from "+e))}),e.TaskLogsViews.map(function(e){return t.logs.set(e,n.prepare("select * from "+e))}),["loadingSummary","focusItx"].map(function(e){return t.output.set(e,n.prepare("select * from "+e))}),this.output.set("thumbnail",n.prepare("select * from thumbnail order by itxId asc")),this.staticViews=new Map,h.map(function(e){var a=e+"ChartInitData";t.staticViews.set(a,n.prepare("select * from "+a))})},e.prototype.tick=function(){var e=this.boundFns,t=this.runOutput;return function(){e.map(function(e){t(e)})}},e.prototype.Sanity=function(){},e.prototype.IsDuringTask=function(){var e=this.db.exec("select count(*) from taskTimes");return{firstTime:1===e[0].values[0][0],duringTask:e[0].values[0][0]%2==1}},e.prototype.exec=function(e){return this.db.exec(e)},e.prototype.workerShareItx=function(){var e=this.worker;return function(){var t=l.generateSQLForTableCopy("currentItx","SELECT * FROM currentItx");e.postMessage({id:"updateCurrentItx",action:"exec",sql:t})}},e.prototype.workerGetChartDataView=function(){var e=this,t=this.worker;return function(n,a){var r=s.timeNow()+"-"+n+"="+a;e.activeRequests.push({id:r,ts:Date.now()}),t.postMessage({id:"share:"+n+":"+a+":"+r,action:"exec",sql:"SELECT * FROM "+a+"ChartDataView;"})}},e.prototype.runOutput=function(e){var t=e.s,n=e.f,a=e.c;t.bind({});for(var r=[];t.step();)r.push(t.getAsObject());if(a.notNull&&0===r.length)throw new Error(e.view+" should not be null");n(r.length>0&&a.singleRow?r[0]:r)},e.prototype.ChangeToTask=function(){this.LoadAll(p.task.main,p.task.worker,!1)},e.prototype.TrainingZeroCount=function(){return this.db.exec("select count(*) from answers where score = 0")[0].values[0][0]},e.prototype.downloadDB=function(){var e=this.db.export(),t=new Blob([e]);s.downloadHelper(t,"session")},e.prototype.downloadWorkerDB=function(){this.worker.postMessage({id:"download",action:"export"})},e.ItxLogsViews=["itxId_SP","brushState_SP","brushDep_SP","eqChart_SP","chartDataAtomic","eventLog","thumbnail","navigateItx","deltaItx","deleteItx","xBrushItx"],e.TaskLogsViews=["memoryTask","taskTimes","answers","taskInfo"],e}();t.default=m},function(e,t){e.exports=SQL},function(e,t,n){"use strict";function a(e,t){var n=o.diel.exec(t)[0];return i.assertQueryHasResult(n,"currentItx"),"\n    DELETE from "+e+";\n    INSERT INTO "+e+" VALUES "+n.values.map(function(e){return"("+e.map(function(e){return null===e?"null":"'"+e+"'"}).join(", ")+")"})+";"}function r(e){o.diel.worker.postMessage({id:"print",action:"exec",sql:e})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(7);t.generateSQLForTableCopy=a,t.dW=r,window.dW=r},function(e,t,n){"use strict";function a(e){e.onmessage=function(e){o.diel.exec("insert into workerCmds values ('"+e.data.id+"')");var t=e.data.id.split(":");switch(t[0]){case"download":var n=new Blob([e.data.buffer]);i.downloadHelper(n,"workerSession");break;case"share":var a=t[1],l=t[2],c=t[3],u="";if(e.data.results[0]&&e.data.results[0].values.length>0){var h=e.data.results[0].values,p=void 0;p="carrier"===l||"state"===l?function(e){return"("+a+", '"+e[0]+"', "+e[1]+")"}:"delays"===l?function(e){return"("+a+", "+e[0]+", "+e[1]+", "+e[2]+")"}:function(e){return"("+a+", "+e[0]+", "+e[1]+")"},u="INSERT INTO "+l+"ChartData VALUES "+h.map(p)+";"}else console.log("No result for",l,a);window.setTimeout(function(){if(o.diel.deadRequests.indexOf(c)>-1)return void console.log("expired",a,l);u+="\nINSERT INTO chartDataAtomic VALUES ("+i.timeNow()+", "+a+", '"+l+"');",o.diel.exec(u)},r.getLatency(s.ExperimentLatencyOption));break;case"print":var d=e.data.results;d&&d.length>0&&(d[0].values.map(function(e){e.map(function(e,t){"ts"===d[0].columns[t]&&(e=new Date(e).toDateString())})}),console.log("Printing results"),console.log(d[0].columns.join("\t")),console.log(JSON.stringify(d[0].values).replace(/\],\[/g,"\n").replace("[[","").replace("]]","").replace(/,/g,"\t")))}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1),i=n(7),s=n(2);t.setUpWorker=a},function(e,t,n){"use strict";function a(e){var t=e.baseData,n=e.selection,a=e.data,s=e.chart,l=e.chartWidth,c=e.chartHeight,u=e.clipped,h=!u&&a&&a.length>0,p=h?r.max(a,function(e){return e.y}):r.max(t,function(e){return e.y}),d=r.scaleLinear().rangeRound([c,0]).domain([0,p]),m=r.extent(t,function(e){return e.x}),f=m[1]-m[0]+1,y=[m[0],m[1]+(m[1]-m[0])/f],g=.6*l/f,v=r.scaleLinear().rangeRound([1,l]).domain(y),w=function(e,t){var n=Math.round(v.invert(e)),a=Math.floor(v.invert(t));console.log("brush data",n,a),o.diel.Input.xBrushItx({$low:n,$high:a,$chart:s})},b=function(e){return function(){return o.diel.Input.xBrushItx({$low:e,$high:e,$chart:s})}},k=[],S=!(!n||!n.low);return h||t.map(function(e){var t=n&&e.x<=n.high&&e.x>=n.low?i.selectedBackgroundColor:i.lightGray;k.push({x:v(e.x),y:d(e.y),color:t,onClick:b(e.x),barWidth:g})}),a&&a.filter(function(e){return e.y>0}).map(function(e){var t=n&&e.x<=n.high&&e.x>=n.low?i.selectedColor:i.lightBlue;k.push({x:v(e.x),y:d(e.y),color:t,onClick:b(e.x),barWidth:g})}),S&&k.push({className:"selector",x:Math.max(v(n.low)-5,0),y:0,barWidth:v(n.high)-v(n.low)+g+10,color:i.brushColor,onClick:null}),{brushFn:w,rectsSpec:k,x:v,y:d,hasSelection:S}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(1),i=n(6);t.linearChartHelper=a},function(e,t,n){"use strict";function a(e){var t=e.baseData,n=e.selection,a=e.data,s=e.chart,l=e.chartWidth,c=e.chartHeight,u=e.clipped,h=!u&&a&&a.length>0,p=h?r.max(a,function(e){return e.y}):r.max(t,function(e){return e.y}),d=r.scaleLinear().rangeRound([c,0]).domain([0,p]),m=t.map(function(e){return e.x}),f=r.scaleBand().rangeRound([0,l]).padding(.4).domain(m),y=function(e,t){var n=m.filter(function(n){return f(n)&&f(n)<t&&f(n)>e}).join(",");o.diel.Input.xBrushItx({$selection:n,$chart:s})},g=function(e){return function(){return o.diel.Input.xBrushItx({$selection:e,$chart:s})}},v=f.bandwidth(),w=[],b=[];n&&n.selection&&n.selection.split(",").map(function(e){return b.push(f(e))}),t.map(function(e){w.push({x:f(e.x),y:c/2,color:"rgba(0, 0, 0, 0)",onClick:g(e.x),barWidth:v})}),h||t.map(function(e){var t=i.lightGray;n&&n.selection&&n.selection.includes(e.x)&&(t=i.selectedBackgroundColor),w.push({x:f(e.x),y:d(e.y),color:t,onClick:g(e.x),barWidth:v})}),a&&a.filter(function(e){return e.y>0}).map(function(e){var t=i.lightBlue;n&&n.selection&&n.selection.includes(e.x)&&(t=i.selectedColor),w.push({x:f(e.x),y:d(e.y),color:t,onClick:g(e.x),barWidth:v})}),b.length>0&&w.push({className:"selector",x:Math.max(r.min(b)-5,0),y:0,color:i.brushColor,barWidth:r.max(b)-r.min(b)+v+10,onClick:null});var k=!(!n||!n.selection);return{brushFn:y,rectsSpec:w,x:f,y:d,hasSelection:k}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(1),i=n(6);t.CategoricalChartHelper=a},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(0),i=n(12),s=n(1),l=n(6),c=n(4),u=n(2),h=function(e){function t(t){var n=e.call(this,t)||this;return n.refreshSelection=n.refreshSelection.bind(n),n.refreshData=n.refreshData.bind(n),n.refreshIsLoading=n.refreshIsLoading.bind(n),n.clickRect=n.clickRect.bind(n),n.state={baseData:s.diel.GetStaticView(t.chart+"ChartInitData"),isLoading:{status:1},hoverInfo:null},n}return a(t,e),t.prototype.refreshSelection=function(e){this.setState({selection:e})},t.prototype.refreshData=function(e){this.setState({data:e,hoverInfo:null})},t.prototype.refreshIsLoading=function(e){this.setState({isLoading:e})},t.prototype.componentDidMount=function(){var e=this.props.chart;s.diel.BindOutput(e+"ChartDataView",this.refreshData),s.diel.BindOutput(e+"ChartSelection",this.refreshSelection,{singleRow:!0}),s.diel.BindOutput(e+"ChartIsLoading",this.refreshIsLoading,{singleRow:!0})},t.prototype.clickRect=function(e,t,n){var a=this;return function(){a.setState({hoverInfo:{value:e,xPos:t,yPos:n}})}},t.prototype.render=function(){var e=this,t=this.props,n=t.chart,a=t.xLabel,h=t.yLabel,p=t.clipped,d=t.showIntro;if(!this.state||!this.state.baseData||0===this.state.baseData.length)throw new Error("should be here already");var m,f,y=l.LayoutInfo[n],g=y.width,v=y.height,w=y.marginBottom,b=y.marginLeft,k=y.marginRight,S=y.marginTop,x=this.state,E=x.selection,T=x.data,C=x.isLoading,I=x.baseData,_=g-b-k,O=v-S-w,D=!p&&T&&T.length>0,N=null,L=this.props.xDomain?this.props.xDomain:[0,D?r.max(T.map(function(e){return e.x}))+40:r.max(I.map(function(e){return e.x}))+40],P=r.interpolateRgb(l.scatterLight,l.scatterDark),F=r.interpolateRgb(l.lightGray,l.selectedBackgroundColor),A=this.props.yDomain?this.props.yDomain:[0,D?r.max(T.map(function(e){return e.y}))+40:r.max(I.map(function(e){return e.y}))+40],q=[r.min(I.map(function(e){return e.v})),r.max(I.map(function(e){return e.v}))],B=r.scaleLinear().domain(L).rangeRound([0,_]),R=Math.abs(B(20)-B(0)),$=r.scaleLinear().domain(A).rangeRound([O,0]),M=Math.abs($(20)-$(0)),j=r.scaleLog().domain(q).range([0,1]);if(E&&E.low){if(u.DEBUG&&isNaN($(E.high2)))throw new Error("y scale must get valid result");m=o.createElement("rect",{className:"selector",x:B(E.low),y:$(E.high2),width:B(E.high)-B(E.low),height:Math.abs($(E.high2)-$(E.low2)),fill:"gray","fill-opacity":"0.3"})}var W=r.axisBottom(B).ticks(5,"d"),z=r.axisLeft($).ticks(10,"d");N=r.brush().extent([[0,0],[_,O]]).on("end",function(){if(r.event.sourceEvent&&r.event.selection){var e=r.brushSelection(this);if(null!==e){var t=Math.min(B.invert(e[0][0]),B.invert(e[1][0])),a=Math.max(B.invert(e[0][0]),B.invert(e[1][0])),o=Math.min($.invert(e[1][1]),$.invert(e[0][1])),i=Math.max($.invert(e[1][1]),$.invert(e[0][1]));s.diel.Input.xBrushItx({$low:t,$high:a,$low2:o,$high2:i,$chart:n})}r.select(this).call(N.move,null)}});var H,Q,V=o.createElement("g",{ref:function(e){return r.select(e).call(N)}}),U=D?[]:I.map(function(t){var n=B(t.x),a=$(t.y+20);if(u.DEBUG&&isNaN(a))throw new Error("y scale must get valid result");return o.createElement("rect",{key:t.x+"_"+t.y+"_base_heat",fill:F(j(t.v)),fillOpacity:.8,x:n,y:a,width:R,height:M,onClick:e.clickRect(t.v,n,a)})});if(T&&T.length>0){Q=T.map(function(t){var n=B(t.x),a=$(t.y+20);if(u.DEBUG&&isNaN(a))throw new Error("y scale must get valid result");return o.createElement("rect",{key:t.x+"_"+t.y+"_filter_heat",fill:P(j(t.v)),className:"hoverable",fillOpacity:.8,x:n,y:a,width:R,height:M,onClick:e.clickRect(t.v,n,a)})});var G=T.filter(function(e){return e.x>0}).reduce(function(e,t){return e+t.v},0),Y=T.reduce(function(e,t){return e+t.v},0),X=2*O/3;H=o.createElement("svg",{width:20,height:v},o.createElement("rect",{className:"delayDistributionRect",x:5,y:O/6,width:10,height:G/Y*X,fill:"red",stroke:"black",strokeWidth:1}),o.createElement("rect",{className:"delayDistributionRect",x:5,y:O/6+G/Y*X,width:10,height:(1-G/Y)*X,fill:"white",stroke:"black",strokeWidth:1}))}this.state.hoverInfo&&this.state.hoverInfo.xPos&&this.state.hoverInfo.yPos&&Q.push(o.createElement("rect",{key:"clicked_sactter",x:this.state.hoverInfo.xPos,y:this.state.hoverInfo.yPos,width:R,height:M,style:{fill:"none",stroke:"black",strokeWidth:2}}));var K=o.createElement(o.Fragment,null,o.createElement("g",{ref:function(e){return r.select(e).call(W)},transform:"translate(0, "+O+")"}),o.createElement("g",{ref:function(e){return r.select(e).call(z)}}));f=o.createElement("g",null,o.createElement("text",{className:"chart-label",y:v-5,x:_/2+b,textAnchor:"middle"}," ",a),o.createElement("text",{className:"chart-label",x:10,y:v/2,transform:"rotate(-90, 10, "+v/2+")",textAnchor:"middle"}," ",h));var J=o.createElement("svg",{width:g,height:v,"data-step":d?c.IntroSteps.indexOf("heatmap2")+1:null,"data-intro":d?c.IntroSpec.get("heatmap2"):null},o.createElement("g",{transform:"translate("+b+","+S+")"},K,V,U,Q,this.state.hoverInfo?o.createElement("text",{className:"tooltip",fontStyle:"bold",x:this.state.hoverInfo.xPos-3,y:this.state.hoverInfo.yPos-5},this.state.hoverInfo.value):null,m),f),Z=o.createElement("svg",{width:25,height:v,"data-step":d?c.IntroSteps.indexOf("delayLegend")+1:null,"data-intro":d?c.IntroSpec.get("delayLegend"):null},o.createElement("defs",null,o.createElement("linearGradient",{id:"linear",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},o.createElement("stop",{offset:"0%","stop-color":l.scatterLight}),o.createElement("stop",{offset:"100%","stop-color":l.scatterDark}))),o.createElement("rect",{x:5,y:20,width:5,height:v-60,fill:"url(#linear)"}),o.createElement("text",{x:5,y:10,fontSize:10},q[0]),o.createElement("text",{x:0,y:v-30,fontSize:10},q[1])),ee=C.status?"indicatorLine":"";return o.createElement("div",{className:"scatter-chart chart-container"},J,Z,o.createElement("div",{style:{overflow:"auto",display:"inline-block"},"data-step":d?c.IntroSteps.indexOf("delayDistribution")+1:null,"data-intro":d?c.IntroSpec.get("delayDistribution"):null},H),o.createElement("div",{style:{height:5},className:ee}),o.createElement(i.ResetButton,{width:g,disabled:!(E&&E.low),chart:n,selection:E&&E.low?"brush":""}))},t.defaultProps=l.DefaultChartProps,t}(o.Component);t.default=h},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(3),s=n(8),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={lastClick:null},n}return a(t,e),t.prototype.onClick=function(e){var t=this;return function(){t.setState({lastClick:Date.now()}),setTimeout(function(){t.state.lastClick<Date.now()-3e3&&t.setState({lastClick:null})},3001),o.diel.LogData.eventLog({$eventName:i.EventType[i.EventType.HappyOrNot],$parameter:s.FeedbackType[e]})}},t.prototype.render=function(){return r.createElement("div",null,r.createElement("button",{className:"happyOrNotBtn zoomOnHover",onClick:this.onClick(s.FeedbackType.Happy)},"😃"),r.createElement("button",{className:"happyOrNotBtn zoomOnHover",onClick:this.onClick(s.FeedbackType.Angry)},"😡"),r.createElement("button",{className:"happyOrNotBtn zoomOnHover",onClick:this.onClick(s.FeedbackType.Confused)},"😵"),this.state.lastClick?r.createElement("p",{style:{display:"inline"}},"Got your feedback!"):null)},t}(r.Component);t.default=l},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={focusItx:null,itxIdsInfo:null,images:null},n.loadingSummary=n.loadingSummary.bind(n),n.focusItx=n.focusItx.bind(n),n.setThumbnails=n.setThumbnails.bind(n),n}return a(t,e),t.prototype.componentDidUpdate=function(e,t,n){var a=this.state.focusItx;if(a!==t.focusItx){var r=document.getElementById("all-carts");domtoimage.toPng(r).then(function(e){o.diel.LogData.thumbnail({$itxId:a,$img:e})})}},t.prototype.componentDidMount=function(){o.diel.BindOutput("thumbnail",this.setThumbnails),o.diel.BindOutput("loadingSummary",this.loadingSummary),o.diel.BindOutput("focusItx",this.focusItx,{singleRow:!0})},t.prototype.focusItx=function(e){this.setState({focusItx:e.itxId})},t.prototype.loadingSummary=function(e){console.log("loading summary called with info",e),this.setState({itxIdsInfo:e})},t.prototype.setThumbnails=function(e){this.setState({images:e})},t.prototype.getOrderedImages=function(e,t,n,a,i){for(var s=this,l=0;l<t;l++){var c=function(l){var c=e*t+l,u=n[c];if(c===n.length)return{value:void 0};var h=l===t-1,p=a.find(function(e){return u.itxId===e.itxId}),d=p&&p.loaded?"":"flashImg",m=u.itxId===s.state.focusItx,f=m?"selectedChron":"";i.push(r.createElement(r.Fragment,null,r.createElement("img",{style:{paddingLeft:10},key:u.itxId,src:u.img,width:140,className:d+" "+f,onClick:function(){return o.diel.Input.navigateItx({$xFilterItxId:u.itxId})}}),h?r.createElement("br",null):null))}(l);if("object"==typeof c)return c.value}},t.prototype.render=function(){var e=this.state,t=e.itxIdsInfo,n=e.images;if(t&&t.length>0&&n&&n.length>0){for(var a=Math.floor(600/140),o=Math.floor(n.length/a),i=[],s=o;s>=0;s--)this.getOrderedImages(s,a,n,t,i);return r.createElement("div",{className:"thumbnails"},i)}return r.createElement("div",{style:{marginTop:50,width:600,height:10}})},t}(r.Component);t.default=i},function(e,t,n){"use strict";function a(e,t){i.diel.LogData.taskInfo({$qId:e.qId,$taskType:s.TaskTypes[e.type],$isTraining:t?1:0}),e.type===s.TaskTypes.Recall&&i.diel.LogData.memoryTask({$qId:e.qId,$linkedQId:e.linkedQId})}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(1),s=n(8),l=function(e){function t(t){var n=e.call(this,t)||this;return n.nextStep=n.nextStep.bind(n),n.onChangeAnswer=n.onChangeAnswer.bind(n),n.onCommentChange=n.onCommentChange.bind(n),n.setConfidence=n.setConfidence.bind(n),n.tick=n.tick.bind(n),n.state={step:s.TaskStep.Description,answer:null,confidence:null,answerValue:null,comment:null,timer:null,timeElapsed:0,warn:!1},i.diel.SetFreeze(!0),a(n.props.question,n.props.isTraining),n}return r(t,e),t.prototype.tick=function(){this.setState({timeElapsed:this.state.timeElapsed+1})},t.prototype.componentWillReceiveProps=function(e){e.question.qId!==this.props.question.qId&&(clearTimeout(this.state.timer),a(e.question,this.props.isTraining),this.setState({answer:null,confidence:null,timeElapsed:0,step:s.TaskStep.Description}))},t.prototype.onChangeAnswer=function(e){var t=e.target.value,n=e.target.getAttribute("data-score");console.log("data score",n),this.setState({warn:!1,answer:t,answerValue:n})},t.prototype.setConfidence=function(e){this.setState({warn:!1,confidence:e})},t.prototype.onCommentChange=function(e){this.setState({comment:e.target.value})},t.prototype.nextStep=function(e){var t=this.props.question.qId;return console.log("is this event called",e),e===s.TaskStep.Answering?(this.props.question.type!==s.TaskTypes.Recall&&i.diel.SetFreeze(!1),i.diel.LogData.taskTimes({$qId:t,$eventType:"start"}),console.log("logged start"),void this.setState({timer:window.setInterval(this.tick,1e3),step:e})):e===s.TaskStep.Submitted?null===this.state.answer||null===this.state.confidence?void this.setState({warn:!0}):(clearInterval(this.state.timer),i.diel.SetFreeze(!0),i.diel.LogData.taskTimes({$qId:t,$eventType:"end"}),console.log("logged end"),void this.setState({step:e})):void 0},t.prototype.render=function(){function e(e,t){return o.createElement("label",null,o.createElement("input",{required:!0,type:"radio",disabled:h!==s.TaskStep.Answering,value:s.TaskConfidence[e],checked:d===e,onChange:function(){return y(e)}}),t)}var t,n,a=this,r=this.props,l=r.question,c=r.nextTask,u=this.state,h=u.step,p=u.answer,d=u.confidence,m=o.createElement("p",{className:"question",dangerouslySetInnerHTML:{__html:l.question}}),f=l.choices.map(function(e){return o.createElement("label",null,o.createElement("input",{required:!0,type:"radio",disabled:h!==s.TaskStep.Answering,value:e.text,checked:!!p&&p.indexOf(e.text)>-1,"data-score":e.value,onChange:a.onChangeAnswer}),e.text)}),y=this.setConfidence,g=o.createElement(o.Fragment,null,o.createElement("p",{className:"question"},"How confident are you?"),o.createElement("div",{className:"radio-button-wrapper"},e(s.TaskConfidence.NotAtAll,"Not At All"),e(s.TaskConfidence.Somewhat,"Somewhat"),e(s.TaskConfidence.Very,"Very")));if(h===s.TaskStep.Description)n=o.createElement(o.Fragment,null,o.createElement("button",{className:"general-btn exp-nav-btn",onClick:function(){return a.nextStep(s.TaskStep.Answering)}},"Start Task"),o.createElement("span",{className:"footnote"},"click to activate"));else if(h===s.TaskStep.Answering)n=o.createElement("button",{className:"general-btn submit-btn",onClick:function(){return a.nextStep(s.TaskStep.Submitted)}},"Submit");else if(h===s.TaskStep.Submitted){n=o.createElement("button",{className:"general-btn exp-nav-btn",onClick:function(){i.diel.LogData.answers({$qId:a.props.question.qId,$answer:a.state.answer,$confidence:s.TaskConfidence[a.state.confidence],$score:a.state.answerValue,$comment:a.state.comment}),c()}},"Next Task");var v=void 0,w=l.choices.filter(function(e){return 1===e.value}),b=w.filter(function(e){return e.text===a.state.answer}).length>0;v=b?o.createElement("div",null,o.createElement("hr",null),o.createElement("p",{className:"correct"},"Correct!"),w.length>1?o.createElement("p",null,"Other possible correct answers: ",w.filter(function(e){return e.text!==a.state.answer}).map(function(e){return e.text+" "})):null):o.createElement("div",null,o.createElement("hr",null),o.createElement("p",{className:"warning"},"Wrong."),w.length>1?o.createElement("p",null,"Possible correct answers is any of the following: ",w.map(function(e){return e.text+" "})):o.createElement("p",null,"Correct answer: ",w[0].text)),t=o.createElement(o.Fragment,null,v,o.createElement("hr",null),o.createElement("p",{className:"footnote"},"💡 Feel free to take a break now before you start your next question! Otherwise, please try to complete the next task in one sitting."))}return o.createElement("div",null,this.props.question.type===s.TaskTypes.Recall?this.props.isTraining?o.createElement("p",null,'In this question we are testing your ability to recall some information you might have seen while doing the previous task ("memory question"). You cannot interact with the visualizations for these questions ---try your best to remember.'):o.createElement("p",null,"Memory Question"):null,m,this.state.warn?o.createElement("p",{className:"warning"},"Please answer both questions"):null,o.createElement("div",{className:"radio-button-wrapper"},f),g,t,o.createElement("div",{style:{height:5}}),h===s.TaskStep.Submitted?o.createElement(o.Fragment,null,o.createElement("label",{htmlFor:"comments"},o.createElement("i",null,"Optional")," note on how you approached the problem"),o.createElement("br",null),o.createElement("textarea",{rows:5,cols:39,id:"comments",name:"comments",onChange:this.onCommentChange})):null,n,h===s.TaskStep.Description?null:o.createElement("p",{style:{color:"gray"}},"Time ",h===s.TaskStep.Submitted?"Taken":"",": ",this.state.timeElapsed," s"),"    ")},t}(o.Component);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggedTablesForAnalysis=["eventLog","navigateItx","deltaItx","deleteItx","xBrushItx","itxId_SP","brushState_SP","eqChart_SP","chartDataAtomic","brushDep_SP","taskTimes","memoryTask","answers","taskInfo"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(2);t.TrainingIntro=function(e){return a.createElement(a.Fragment,null,a.createElement("div",{className:"introSection"},a.createElement("h2",null,"Analyze flights fun! ✈️"),a.createElement("p",null,"You will be viewing an interactive visualization dashboard of ",a.createElement("b",null,"flights to Hawaii from other US states, in December 2017"),". It visualizes the information about flights containing information about their departure state, the day of the month, flight carrier, and delay information."),a.createElement("p",null,"We have synthesized the data based on real data. Please ",a.createElement("strong",null,"do not")," use your existing knowledge to complete the tasks. Also please do not Google the results---it will not be needed and interferes with our results.")),a.createElement("p",null,a.createElement("b",null,"We will walk you through a tutorial and a set of tasks. If you answer all of the initial three tasks incorrectly, you will be disqualified from the HIT.")),a.createElement("p",null,"The training questions will be over the data from the first half of December, and the actual tasks will be over the second half of December. The visualization tool will stay the same, and the questions similar."),a.createElement("div",{className:"introSection"},a.createElement("h2",null,"Time!⏱️"),a.createElement("p",null,"You are encouraged to complete the tasks both accurately and efficiently. Please try not to take breaks ",a.createElement("strong",null,"during "),"a task (usually less than 1 minute to 3 minutes), but feel free to take breaks ",a.createElement("strong",null,"between")," tasks. If we detect that you left the window ",a.createElement("strong",null,"during")," a task, you might not be paid the bonus in full. We may send out up to $",r.ExtraBonusReward.toFixed(2)," of additional reward for those who performed effectively (in addition to the base $",r.BonusReward.toFixed(2),").")),a.createElement("button",{className:"general-btn exp-nav-btn",onClick:e.onClick},"next"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(9);t.TaskIntro=function(e){return a.createElement(a.Fragment,null,a.createElement("h2",null,"Analysis for the Holiday Season!🎄"),a.createElement("p",null,"You will now be viewing an interactive visualization over the same data but from the second half of the month. Again, we remind you to try to complete the tasks as quickly and as accurately as possible."),a.createElement("p",null,"There will be ",r.holidayCount," tasks total. Good luck!"),a.createElement("button",{className:"general-btn exp-nav-btn",onClick:e.onClick},"Start"))}},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(9),s=n(1),l=n(3),c=function(e){function t(t){var n=e.call(this,t)||this;n.resizeListener=n.resizeListener.bind(n);var a=window,r=/constructor/i.test(a.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!a.safari||void 0!==a.safari&&a.safari.pushNotification),o=!!window.chrome&&!!window.chrome.webstore,i=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||a.opera),s.diel.LogData.eventLog({$eventName:l.EventType[l.EventType.IsMobile],$parameter:i?"true":"false"}),s.diel.LogData.eventLog({$eventName:l.EventType[l.EventType.Browser],$parameter:r?"safari":o?"chrome":"other"}),n.state={isScreenSmall:null,isWindowSmall:null,isChrome:o,isSafari:r,isMobile:i},n.resizeListener(),n}return a(t,e),t.prototype.resizeListener=function(){this.setState({isScreenSmall:o.judgeScreenSize(),isWindowSmall:o.judgeWindowSize()}),s.diel.LogData.eventLog({$eventName:l.EventType[l.EventType.ScreenWidth],$parameter:screen.width}),s.diel.LogData.eventLog({$eventName:l.EventType[l.EventType.ScreenHeight],$parameter:screen.height}),s.diel.LogData.eventLog({$eventName:l.EventType[l.EventType.WindowWidth],$parameter:window.innerWidth}),s.diel.LogData.eventLog({$eventName:l.EventType[l.EventType.WindowHeight],$parameter:window.innerHeight})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.resizeListener)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.resizeListener)},t.prototype.render=function(){var e=this.props,t=e.onClick,n=e.disabled,a=this.state,s=a.isScreenSmall,l=a.isWindowSmall,c=a.isChrome,u=a.isSafari,h=a.isMobile;return r.createElement("div",null,r.createElement("h2",null,"Interactive Visualization User Study"),r.createElement("p",null,r.createElement("b",null,"This HIT consists of ",i.TotalAnalysisCount," visual analysis tasks and ",i.SurveyCount," which should take 1 to 3 minutes each. If completed, you will receive a total ranging from $",(o.TaskReward*i.TotalTaskCount+o.BonusReward).toFixed(2)," to $",(o.TaskReward*i.TotalTaskCount+o.BonusReward+o.ExtraBonusReward).toFixed(2),". We expect the overall HIT to take about 30 minutes of total time.")),r.createElement("p",null,"You will receive a $",o.TaskReward.toFixed(2)," reward for each task completed---which includes the tasks as well as the surveys. After completing all of the tasks, you will receive a $",o.BonusReward.toFixed(2),"-$",(o.BonusReward+o.ExtraBonusReward).toFixed(2)," completion bonus reward (depending on the acuracy and speed of your answer). You must complete ",r.createElement("b",null,"all")," the tasks in this HIT to receive the completion bonus. Most of the payment is in the bonus because we cannot make use of any of the results unless all tasks are completed. The payment is our estimation of the task time and the minimum wage of $11 per hour."),r.createElement("p",null,'If you do not wish to complete all the tasks, you can press the "Finish and claim current reward" button to exit this HIT and be paid your accumulated reward for tasks completed so far. You will only be paid once you complete all the tasks or click the finish button, given that the tasks are done with reasonable effort.'),r.createElement("p",null,"Your participation in this study is voluntary. In these tasks, you will be presented with an interactive visualization dashboard of some flight delay data. You will be asked to perform basic analysis of the data, which requires interacting with the data visualization."),r.createElement("p",null,"The results of these tasks will be used for a research study on novel user experience design for interactive visualizations. The purpose of the study is to inform the design of interfaces for visual analytics tasks when there are delays. You may view our ",r.createElement("a",{href:"./policy.html",target:"_blank"},"privacy policy")," for more information. Your anonymized data may be used for publication."),r.createElement("p",null,r.createElement("b",null,"Please ensure that you are using either Chrome or Safari browswer on a computer with screen size of at least 1080 by 800.")),c||u?null:r.createElement("p",{className:"warning"},"Please ensure that you are using the ",r.createElement("strong",null,"Chrome or Safari")," browswers (we have detected that you might be using an incompatible browswer), otherwise you will not be able to continue."),h?r.createElement("p",{className:"warning"},"We have detected that you might be using a mobile device. This may cause the tool for the tasks to mal function, and we not be able to compensate you for your tasks."):null,s?r.createElement("p",{className:"warning"},"We have detected that your current screen is smaller than 1080 by 800 Please find a device with a bigger screen instead. Otherwise, this will result in a lower payment since we cannot make use of your work."):null,!s&&l?r.createElement("p",{className:"warning"},"We have detected that your current window is smaller than 1080 by 800 Please resize the window to be larger. Otherwise, this will result in a lower payment since we cannot make use of your work."):null,r.createElement("p",null,"If you are ready to begin, please click the button below."),r.createElement("button",{className:"general-btn exp-nav-btn",onClick:t,disabled:n},"I understand, and consent to participate"))},t}(r.Component);t.default=c},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(11),i=n(38),s=n(39),l=n(4),c=n(4),u=function(e){function t(t){var n=e.call(this,t)||this;return n.startAgain=n.startAgain.bind(n),n.setStep=n.setStep.bind(n),n.state={step:-1,introTour:null,showPopup:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=introJs().setOptions({exitOnOverlayClick:!1});e.start(),this.setState({introTour:e})},t.prototype.setStep=function(e){this.setState({step:e})},t.prototype.startAgain=function(){this.state.introTour.start()},t.prototype.render=function(){var e,t=this.setStep,n=this.state.step;if(0===n)e=r.createElement("div",{className:"popup"},r.createElement("div",{className:"popup-inner"},r.createElement("div",{style:{margin:"auto",maxWidth:600}},r.createElement("p",null,"To help you make use of the tool better, complete the tasks faster, and a higher chance at extra bonus, we will show you ",c.videoTutorials.length+1," additional training modules (",r.createElement("b",null,"no")," audio required)."),r.createElement("p",null,"Each part should take about a minute or less. Also, some of the training may appear to repeat the previous instruction---we just want to make sure you get it!"),r.createElement("button",{className:"general-btn exp-nav-btn",onClick:function(){return t(1)}},"Start"))));else if(n>0&&n<c.videoTutorials.length+1){var a=c.videoTutorials[n-1];e=r.createElement(i.VideoPopup,{title:a.title+" ("+n+"/"+(c.videoTutorials.length+1)+")",videoLink:a.videoLink,texts:a.texts,prev:n>0?function(){return t(n-1)}:null,next:function(){return t(n+1)}})}else n===c.videoTutorials.length+1&&(e=r.createElement(s.ScatterCompareTutorial,{title:"How to Read and Compare Delay Heatmaps ("+n+"/"+(c.videoTutorials.length+1)+")",prev:function(){return t(n-1)},next:function(){return t(n+1)}}));return r.createElement(r.Fragment,null,r.createElement(o.default,{showIntro:!0}),r.createElement("div",{style:{float:"left",paddingLeft:20}},e,r.createElement("button",{className:"tour-btn general-btn",onClick:this.startAgain,"data-step":l.IntroSteps.indexOf("tutorial")+1,"data-intro":l.IntroSpec.get("tutorial")},"Show Tour Again"),r.createElement("hr",null),r.createElement("div",{"data-step":l.IntroSteps.indexOf("video")+1,"data-intro":l.IntroSpec.get("video")},n===c.videoTutorials.length+2?r.createElement("button",{className:"general-btn exp-nav-btn",onClick:this.props.onClick},"Start Tasks"):r.createElement("button",{className:"general-btn exp-nav-btn",onClick:function(){return t(0)}},"Start Techniques"))))},t}(r.Component);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.VideoPopup=function(e){var t=e.next,n=e.videoLink,r=e.texts,o=e.title,i=e.prev;return a.createElement("div",{className:"popup"},a.createElement("div",{className:"popup-inner"},a.createElement("div",{style:{margin:"auto"}},a.createElement("h3",{style:{textAlign:"center"}},o),a.createElement("div",{className:"description"},r.map(function(e){return a.createElement("p",null,e)})),a.createElement("video",{width:400,autoPlay:!0,src:n,controls:!0,loop:!0}),a.createElement("br",null),a.createElement("button",{className:"general-btn",onClick:i,disabled:null===i},"prev"),a.createElement("button",{className:"general-btn exp-nav-btn",onClick:t},"next"))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.ScatterCompareTutorial=function(e){var t=e.prev,n=e.next,r=e.title;return a.createElement("div",{className:"popup"},a.createElement("div",{className:"popup-inner"},a.createElement("div",{style:{padding:10}},a.createElement("h3",{style:{textAlign:"center"}},r),a.createElement("p",null,'The heatmap encodes a lot of information. We illustrate by reading two different views of the same filtered data. On the left, we have the "unzoomed" view of the data. The rightmost distribution of delayed flights count (red and white bars) shows that only a tiny portion of the flights are delayed. The heat map to the left shows more detail---how delayed are the delayed flights. However, it is somewhat difficult to read witht the gray in the background. This is when you can "zoom," which brings us to the image to the right.'),a.createElement("p",null,'For the image to the right, the gray background data is no longer plotted (hence "zoomed" in). While easy to read individually, it makes it difficult to compare across charts, since the scale is changing.'),a.createElement("img",{width:300,src:"https://logical-interactions.github.io/chroniclesv2/dist/heat_unzoomed.png"}),a.createElement("img",{width:300,src:"https://logical-interactions.github.io/chroniclesv2/dist/heat_zoomed.png"}),a.createElement("button",{className:"general-btn",onClick:t},"Prev"),a.createElement("button",{className:"general-btn exp-nav-btn",onClick:n},"Finish Techniques"))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(41);t.FlowSurveyQuestions=r.FlowSurveyQuestionsShared,t.FlowSurveySequence=r.FlowSurveySequenceShared,t.UsabilitySurveyQuestions=r.UsabilitySurveyQuestionsShared,t.UsabilitySurveySequence=r.getUsabilitySurveySequence(a.IsChronicles)},function(e,t,n){"use strict";function a(e){return["tool","delayFrustration","delayDifficulty"].concat(e?["chronicles"]:[])}Object.defineProperty(t,"__esModule",{value:!0}),t.FlowSurveyQuestionsShared=new Map,t.FlowSurveyQuestionsShared.set("flowChallenge","I feel just the right amount of challenge"),t.FlowSurveyQuestionsShared.set("flowSmooth","My thoughts/activities run fluidly and smoothly"),t.FlowSurveyQuestionsShared.set("flowTime","I do not notice time passing"),t.FlowSurveyQuestionsShared.set("flowConcentrate","I have no difficulty concentrating"),t.FlowSurveyQuestionsShared.set("flowClear","My mind is completely clear"),t.FlowSurveyQuestionsShared.set("flowAbsorbed","I am totally absorbed in what I am doing"),t.FlowSurveyQuestionsShared.set("flowAccord","The right thoughts/movements occur of their own accord"),t.FlowSurveyQuestionsShared.set("flowKnow","I know what I have to do each step of the way"),t.FlowSurveyQuestionsShared.set("flowControl","I feel that I have everything under control"),t.FlowSurveyQuestionsShared.set("flowLost","I am completely lost in thought"),t.FlowSurveyQuestionsShared.set("flowStake","Something important to me is at stake here"),t.FlowSurveyQuestionsShared.set("flowMistake","I must not make any mistakes here"),t.FlowSurveyQuestionsShared.set("flowWorried","I am worried about failing"),t.FlowSurveyQuestionsShared.set("flowCompare","Compared to all other activities which I partake easy in, this one is difficult"),t.FlowSurveyQuestionsShared.set("flowCompetence","I think that my competence in this area is high"),t.FlowSurveyQuestionsShared.set("flowDemand","For me personally, the current demands are too high"),t.FlowSurveySequenceShared=["flowChallenge","flowSmooth","flowTime","flowConcentrate","flowClear","flowAbsorbed","flowAccord","flowKnow","flowControl","flowLost","flowStake","flowMistake","flowWorried","flowCompare","flowCompetence","flowDemand"],t.UsabilitySurveyQuestionsShared=new Map,t.UsabilitySurveyQuestionsShared.set("tool","Do you feel like the tool supported your performing the task?"),t.UsabilitySurveyQuestionsShared.set("chronicles","Did you find the ability to navigate between histories helpful?"),t.UsabilitySurveyQuestionsShared.set("delayFrustration","Were the delays frustrating?"),t.UsabilitySurveyQuestionsShared.set("delayDifficulty","Did the delays make thing difficult?"),t.getUsabilitySurveySequence=a},function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(14),i=function(e){function t(t){var n=e.call(this,t)||this;return n.onCommentChange=n.onCommentChange.bind(n),n.nextStep=n.nextStep.bind(n),n.toggleChoices=n.toggleChoices.bind(n),n.state={choices:[],comment:"",warn:!1},n}return a(t,e),t.prototype.onCommentChange=function(e){this.setState({comment:e.target.value})},t.prototype.toggleChoices=function(e){this.setState(function(t){var n=t.choices.indexOf(e);return n>-1?t.choices.splice(n,1):t.choices.push(e),t})},t.prototype.nextStep=function(){0===this.state.choices.length?this.setState({warn:!0}):this.props.nextStep({choices:this.state.choices.join(", "),comment:this.state.comment})},t.prototype.render=function(){function e(e,t){return r.createElement("label",null,r.createElement("input",{required:!0,type:"checkbox",value:o.CancelReason[e],checked:n.indexOf(e)>-1,onChange:function(){return a(e)}}),t)}var t=this,n=this.state.choices,a=this.toggleChoices,i=r.createElement(r.Fragment,null,r.createElement("p",{className:"question"},"Why did you decide to cancel?"),r.createElement("div",{className:"radio-button-wrapper"},e(o.CancelReason.TasksTooHard,"Tasks are too hard"),e(o.CancelReason.DelaysFrustrating,"Delays are frustrating"),e(o.CancelReason.PayTooLow,"Pay is too low"),e(o.CancelReason.Other,"Other (please specify below)")));return r.createElement(r.Fragment,null,i,r.createElement("label",{htmlFor:"comments"},r.createElement("i",null,"(Optional)")," Any additional comments?"),r.createElement("br",null),r.createElement("textarea",{rows:5,cols:39,id:"comments",name:"comments",onChange:this.onCommentChange}),r.createElement("br",null),!0===this.state.warn?r.createElement("p",{className:"warning"},"Please select at least one choice."):null,r.createElement("button",{className:"general-btn exp-nav-btn",onClick:function(){return t.nextStep()}},"Submit and Exit"))},t}(r.Component);t.default=i}]);
//# sourceMappingURL=bundle.js.map