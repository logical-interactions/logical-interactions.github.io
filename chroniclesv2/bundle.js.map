{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 188f26450e92c1cc873d","webpack:///external \"React\"","webpack:///./src/diel/setup.ts","webpack:///./src/lib/experiment/config.ts","webpack:///./src/lib/helper.ts","webpack:///./src/lib/chart/chartHelper.ts","webpack:///./src/lib/experiment/tutorialMaterial.ts","webpack:///external \"d3\"","webpack:///./src/lib/experiment/experimentQAs.ts","webpack:///../shared/dbHelper.ts","webpack:///./src/lib/experiment/tasks.ts","webpack:///./src/index.tsx","webpack:///./src/components/ScrubberView.tsx","webpack:///./src/components/ResetButton.tsx","webpack:///./src/lib/experiment/experiment.ts","webpack:///external \"ReactDOM\"","webpack:///./src/components/PageContainer.tsx","webpack:///./src/components/Experiment/ExperimentContainer.tsx","webpack:///./src/components/Experiment/Survey.tsx","webpack:///./src/components/Experiment/Demographics.tsx","webpack:///./src/components/Experiment/TaskContainer.tsx","webpack:///./src/components/Charts/BarChart.tsx","webpack:///./src/diel/diel.ts","webpack:///external \"SQL\"","webpack:///./src/diel/dielHelper.ts","webpack:///./src/diel/workerSetup.ts","webpack:///./src/lib/chart/LinearChartHelper.ts","webpack:///./src/lib/chart/CategoricalChartHelper.ts","webpack:///./src/components/Charts/Scatterplot.tsx","webpack:///./src/components/HappyOrNot.tsx","webpack:///./src/components/ChronicleSlider.tsx","webpack:///./src/components/SvgSpinner.tsx","webpack:///./src/components/Experiment/TaskQuestion.tsx","webpack:///../shared/logHelper.ts","webpack:///./src/components/Experiment/TrainingIntro.tsx","webpack:///./src/components/Experiment/TaskIntro.tsx","webpack:///./src/components/Experiment/Instructions.tsx","webpack:///./src/components/Experiment/Tutorial.tsx","webpack:///./src/components/Experiment/VideoPopup.tsx","webpack:///./src/components/Experiment/ScatterCompareTutorial.tsx","webpack:///./src/lib/experiment/survey.ts","webpack:///./src/components/Experiment/CancelSurvey.tsx"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","React","value","diel_1","config_1","diel","default","window","DEBUG","console","log","judgeScreenSize","screen","width","height","judgeWindowSize","innerWidth","innerHeight","helper_1","Researcher","ExperimentName","ExpVersion","IsProd","FilePathPrefix","IsChronicles","ExperimentLatencyOption","LatencyOption","High","BonusReward","ExtraBonusReward","TaskReward","readFileSync","filename","request","XMLHttpRequest","open","send","status","responseText","readFileAsync","Promise","resolve","reject","xhr","onload","onerror","statusText","getLatency","latencyOption","None","Low","Math","random","isLoading","v","AllCharts","length","indexOf","ScatterChartsBrushs","EventType","ScaleOption","HistoryDisplayOption","rectContains","bounds","x","y","high","low","high2","low2","rectToString","selected","toString","isRect","hasBrushSelection","lightBlue","darkBlue","scatterDark","scatterLight","scatterBaseDark","scatterBaseLight","lightGray","darkGray","brushColor","LayoutInfo","timeLine","marginBottom","marginLeft","marginRight","marginTop","delays","carrier","verticalOrientation","state","day","DefaultChartProps","baseFill","showIntro","selectFill","annotations","debug","IntroSpec","Map","set","IntroSteps","concat","videoTutorials","title","videoLink","texts","slice","d3","tasks_1","Airlines","popAirlineOption","map","a","text","delaySearchOptions","Array","fill","_","trainingQA","qId","question","type","TaskTypes","ComplexCompareValue","choices","PatternSearch","Recall","linkedQId","note","carrierSearchAnswer","carrierSearchChoices","carrierSearchMemAnswer","carrierSearchMemChoices","push","TaskStates","holidayStratAnswers","holidayStratChoices","holidayStratMemAnswers","holidayStratMemChoices","popularStateAmericanChoices","taskQA","SimpleCompareValue","ReadValue","qIds","q","uniqueItems","Set","size","Error","SurveyCount","holidayCount","TotalAnalysisCount","TotalTaskCount","assertQueryHasResult","r","query","values","db","sql","exec","columns","Date","toDateString","join","JSON","stringify","replace","msg","source","timeNow","hashCompare","b","aVals","split","bVals","state_1","av","table","bR","filter","bv","prettyTimeNow","toTimeString","substr","downloadHelper","blob","document","createElement","href","URL","createObjectURL","download","onclick","setTimeout","revokeObjectURL","click","downloadQueryResultAsCSV","csvContent","forEach","rowArray","row","Blob","FeedbackType","TaskStep","TaskConfidence","loadPage","ReactDOM","render","PageContainer_1","PageContainer","getElementById","__extends","this","extendStatics","setPrototypeOf","__proto__","__","constructor","create","BarChart_1","Scatterplot_1","HappyOrNot_1","ChronicleSlider_1","setup_1","tutorialMaterial_1","ScrubberView","_super","props","_this","handleKeyDown","bind","toggleClip","loadingSummary","focusItx","setControl","control","stateKey","clipped","itxIdsInfo","BindFreeze","setState","itxId","componentWillMount","addEventListener","componentWillUnmount","removeEventListener","componentDidMount","BindOutput","singleRow","tick","e","keyCode","Input","deltaItx","$val","prev","LogData","eventLog","$eventName","Clip","$parameter","_a","ref","delaysChart","chart","xLabel","yLabel","key","stateChart","isCategorical","carrierChart","dayChart","slider","ChronicleSlider","className","style","float","onClick","data-step","data-intro","deleteItx","clear","overflow","defaultProps","isTraining","Component","ResetButton","selection","xBrushItx","$chart","getUrlParameter","sParam","sParameterName","sPageURL","decodeURIComponent","location","search","substring","sURLVariables","undefined","setupExperimentForGpaas","numTasks","clearTask","finish","opt","submitTo","alert","submit","viewTask","task","researcher","params","options","trainingTasks","ExperimentStep","CancelReason","ExperimentContainer_1","Fragment","Survey_1","Demographics_1","TaskContainer_1","TrainingIntro_1","TaskIntro_1","Instructions_1","Tutorial_1","experiment_1","survey_1","experimentQAs_1","CancelSurvey_1","ExperimentContainer","start","submitDemographic","startTutorial","startTraining","finishTraining","startTasks","finishTasks","finishFlowSurvey","finishToolSurvey","actuallyCancel","cancelTasks","startSurvey","assignmentId","step","Introduction","focusWarning","focusWarningShown","Focus","t","IsDuringTask","firstTime","now","duringTask","Blur","_logStep","gpaas","startExperiment","setupSuccessful","TrainingIntro","Tutorial","Training","ClearHistory","TrainingZeroCount","FailedTraining","TasksIntro","ChangeToTask","Tasks","SurveyIntro","FlowSurvey","_logSurvey","data","keys","k","answer","logData","nextTask","ToolSurvey","Demographics","End","CancelSurvey","content","disabled","cancel","TaskIntro","surveyQuestions","FlowSurveyQuestions","surveySequence","FlowSurveySequence","freeformPrompt","UsabilitySurveyQuestions","UsabilitySurveySequence","nextStep","radioHelper","onChange","stateVal","radio","align","required","checked","Survey","warn","event","target","questions","borderBottom","htmlFor","rows","cols","id","age","computer","education","gender","occupation","viz","ScrubberView_1","TaskQuestion_1","logHelper_1","TaskOrTrainingContainer","moneyEarned","LoggedTablesForAnalysis","GetLogs","isFinalStep","dashboard","qA","textAlign","confirm","toFixed","ResetButton_1","chartHelper_1","LinearChartHelper_1","CategoricalChartHelper_1","BarChart","refreshSelection","refreshData","refreshIsLoading","baseData","GetStaticView","_b","_c","_d","chartWidth","chartHeight","CategoricalChartHelper","linearChartHelper","wrap","brush","brushX","extent","on","sourceEvent","brushSelection","brushFn","min","max","select","move","brushDiv","g","maxYvalue","apply","xTicks","xAxis","axisBottom","ticks","yAxis","axisLeft","tickSizeOuter","tickXClassName","tickYClassName","transform","axesLabels","textAnchor","xFilterBars","rectsSpec","barWidth","color","transformedWidth","transformedHeight","innerContent","selectionText","loadingClass","hasSelection","__awaiter","thisArg","_arguments","P","generator","fulfilled","next","rejected","result","done","then","__generator","body","verb","op","f","TypeError","label","ops","pop","trys","sent","throw","return","Symbol","iterator","sql_js_1","__1","dbHelper_1","dielHelper_1","workerSetup_1","charts","DBFile","training","main","worker","defaultOuptConfig","notNull","Diel","LoadAll","mainFile","workerFile","shouldLoadPage","loadMain","loadWorker","setUpWorker","setup","boundFns","output","view","deadRequests","activeRequests","response","bufferRaw","close","fetch","arrayBuffer","buffer","Uint8Array","Database","file","postMessage","action","workerLoaded","Worker","reactFn","cIn","has","from","assign","logs","getAsObject","staticViews","SetFreeze","frozen","frozenBind","ts","run","processInput","tsI","$ts","create_function","workerGetChartDataView","workerShareItx","input","prepare","navigateItx","$low","isNaN","$high","taskInfo","taskTimes","answers","memoryTask","ItxLogsViews","TaskLogsViews","runOutput","Sanity","shareSql","generateSQLForTableCopy","hash","downloadDB","dRaw","export","downloadWorkerDB","SQL","sharedTable","shareQuery","tableRes","dW","onmessage","args","itxId_1","chart_1","hash_1","sql_1","results","fn","r_1","unclippable","yMax","scaleLinear","rangeRound","domain","numBars","xDomain","x1","x2","v1","round","invert","v2","floor","clickFn","scaleBand","padding","selectionOrdinal","$selection","bandwidth","brushBounds","includes","Scatterplot","clickRect","hoverInfo","xPos","yPos","iColor","interpolateRgb","iBaseColor","yDomain","vDomain","rectWidth","abs","rectHeight","scaleLog","range","fill-opacity","$low2","$high2","delayDistribution","rects","baseRects","fillOpacity","delayCount","reduce","totalCount","annotationHeight","stroke","strokeWidth","fontStyle","legend","y1","y2","offset","stop-color","fontSize","display","HappyOrNot","lastClick","paramter","Happy","Angry","Confused","SvgSpinner_1","maxRectCols","maxRectsRows","ceil","itx","$xFilterItxId","cursor","loaded","SvgSpinner","cx","cy","radius","font-size","pointerEvents","helper","begin","attributeName","dur","calcMode","keyTimes","keySplines","repeatCount","fill-rule","stroke-width","setUpHelper","$qId","$taskType","$isTraining","$linkedQId","Task","onChangeAnswer","onCommentChange","setConfidence","Description","confidence","answerValue","comment","timer","timeElapsed","componentWillReceiveProps","clearTimeout","getAttribute","Answering","$eventType","setInterval","Submitted","clearInterval","_genRadio","additional","button","questionDiv","dangerouslySetInnerHTML","__html","data-score","confidenceDiv","NotAtAll","Somewhat","Very","$answer","$confidence","$score","$comment","answerDiv","correctAnswers","correct","Instructions","resizeListener","w","isSafari","test","HTMLElement","safari","pushNotification","isChrome","chrome","webstore","isMobile","navigator","userAgent","vendor","opera","IsMobile","Browser","isScreenSmall","isWindowSmall","ScreenWidth","ScreenHeight","WindowWidth","WindowHeight","VideoPopup_1","ScatterCompareTutorial_1","tutorialMaterial_2","startAgain","setStep","introTour","showPopup","introJs","setOptions","exitOnOverlayClick","margin","maxWidth","tut","VideoPopup","ScatterCompareTutorial","paddingLeft","autoPlay","src","controls","loop","toggleChoices","idx","splice","choicesDiv","TasksTooHard","DelaysFrustrating","PayTooLow","Other"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 10);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = React;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diel_1 = __webpack_require__(21);\r\nvar config_1 = __webpack_require__(2);\r\nexports.diel = new diel_1.default();\r\nwindow.diel = exports.diel;\r\nif (!config_1.DEBUG) {\r\n    console.log = function () { };\r\n}\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(3);\r\nexports.Researcher = \"chroniclesv2\";\r\nexports.ExperimentName = \"chroniclesv2draft\";\r\nexports.ExpVersion = \"V0\";\r\nexports.IsProd = true;\r\nexports.FilePathPrefix = exports.IsProd ? \"https://logical-interactions.github.io/chroniclesv2/dist/\" : \"./dist/\";\r\nexports.DEBUG = true && !exports.IsProd; // if its prod debug must be false\r\nexports.IsChronicles = true;\r\nexports.ExperimentLatencyOption = helper_1.LatencyOption.High;\r\nexports.BonusReward = 3;\r\nexports.ExtraBonusReward = 3;\r\nexports.TaskReward = 0.2;\r\nfunction judgeScreenSize() {\r\n    return (screen.width < 1080) || (screen.height < 800);\r\n}\r\nexports.judgeScreenSize = judgeScreenSize;\r\nfunction judgeWindowSize() {\r\n    return (window.innerWidth < 1000 || window.innerHeight < 450);\r\n}\r\nexports.judgeWindowSize = judgeWindowSize;\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ScatterChartsBrushs = [\"arrDelay\", \"depDelay\"];\r\nexports.AllCharts = [\"carrier\", \"day\", \"state\", \"delays\"];\r\nvar EventType;\r\n(function (EventType) {\r\n    EventType[EventType[\"Browser\"] = 0] = \"Browser\";\r\n    EventType[EventType[\"ExpVersion\"] = 1] = \"ExpVersion\";\r\n    EventType[EventType[\"IsMobile\"] = 2] = \"IsMobile\";\r\n    EventType[EventType[\"ScreenWidth\"] = 3] = \"ScreenWidth\";\r\n    EventType[EventType[\"ScreenHeight\"] = 4] = \"ScreenHeight\";\r\n    EventType[EventType[\"WindowWidth\"] = 5] = \"WindowWidth\";\r\n    EventType[EventType[\"WindowHeight\"] = 6] = \"WindowHeight\";\r\n    EventType[EventType[\"IsChronicles\"] = 7] = \"IsChronicles\";\r\n    EventType[EventType[\"HappyOrNot\"] = 8] = \"HappyOrNot\";\r\n    EventType[EventType[\"Clip\"] = 9] = \"Clip\";\r\n    EventType[EventType[\"Focus\"] = 10] = \"Focus\";\r\n    EventType[EventType[\"Blur\"] = 11] = \"Blur\";\r\n})(EventType = exports.EventType || (exports.EventType = {}));\r\n// Note: haven't yet used/implemented\r\nvar ScaleOption;\r\n(function (ScaleOption) {\r\n    ScaleOption[ScaleOption[\"Fixed\"] = 0] = \"Fixed\";\r\n    ScaleOption[ScaleOption[\"Variable\"] = 1] = \"Variable\";\r\n})(ScaleOption = exports.ScaleOption || (exports.ScaleOption = {}));\r\nvar LatencyOption;\r\n(function (LatencyOption) {\r\n    LatencyOption[LatencyOption[\"None\"] = 0] = \"None\";\r\n    LatencyOption[LatencyOption[\"Low\"] = 1] = \"Low\";\r\n    LatencyOption[LatencyOption[\"High\"] = 2] = \"High\";\r\n})(LatencyOption = exports.LatencyOption || (exports.LatencyOption = {}));\r\nvar HistoryDisplayOption;\r\n(function (HistoryDisplayOption) {\r\n    HistoryDisplayOption[HistoryDisplayOption[\"SmallMultiples\"] = 0] = \"SmallMultiples\";\r\n    HistoryDisplayOption[HistoryDisplayOption[\"Scrubber\"] = 1] = \"Scrubber\";\r\n    HistoryDisplayOption[HistoryDisplayOption[\"FilmStrip\"] = 2] = \"FilmStrip\";\r\n})(HistoryDisplayOption = exports.HistoryDisplayOption || (exports.HistoryDisplayOption = {}));\r\nfunction readFileSync(filename) {\r\n    var request = new XMLHttpRequest();\r\n    request.open(\"GET\", filename, false); // `false` makes the request synchronous\r\n    request.send(null);\r\n    if (request.status === 200) {\r\n        return request.responseText;\r\n    }\r\n    else {\r\n        return \"\";\r\n    }\r\n}\r\nexports.readFileSync = readFileSync;\r\nfunction readFileAsync(filename) {\r\n    return new Promise(function (resolve, reject) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(\"GET\", filename, true);\r\n        xhr.onload = function () { return resolve(xhr.responseText); };\r\n        xhr.onerror = function () { return reject(xhr.statusText); };\r\n        xhr.send();\r\n    });\r\n}\r\nexports.readFileAsync = readFileAsync;\r\nfunction getLatency(latencyOption) {\r\n    if (latencyOption === LatencyOption.None) {\r\n        return 0;\r\n    }\r\n    else if (latencyOption === LatencyOption.Low) {\r\n        return 500 + Math.random() * 500;\r\n    }\r\n    else {\r\n        return 3000 + Math.random() * 2000;\r\n    }\r\n}\r\nexports.getLatency = getLatency;\r\nfunction isLoading(v) {\r\n    if (!v) {\r\n        return true;\r\n    }\r\n    for (var i = 0; i < exports.AllCharts.length; i++) {\r\n        if (v.indexOf(exports.AllCharts[i]) < 0) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexports.isLoading = isLoading;\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.lightBlue = \"rgba(76, 120, 168, 0.5)\";\r\nexports.darkBlue = \"rgba(76, 120, 168, 1)\";\r\nexports.scatterDark = \"darkblue\";\r\nexports.scatterLight = \"LemonChiffon\";\r\nexports.scatterBaseDark = \"lightgray\";\r\nexports.scatterBaseLight = \"darkgray\";\r\nexports.lightGray = \"rgba(0, 0, 0, 0.07)\";\r\nexports.darkGray = \"rgba(0, 0, 0, 0.2)\";\r\nexports.brushColor = \"rgba(128,128,128, 0.3)\";\r\nexports.LayoutInfo = {\r\n    timeLine: {\r\n        width: 750,\r\n        height: 80,\r\n        marginBottom: 40,\r\n        marginLeft: 40,\r\n        marginRight: 50,\r\n        marginTop: 25,\r\n    },\r\n    delays: {\r\n        width: 250,\r\n        height: 300,\r\n        marginTop: 20,\r\n        marginBottom: 40,\r\n        marginLeft: 40,\r\n        marginRight: 10,\r\n    },\r\n    // flipped\r\n    carrier: {\r\n        width: 300,\r\n        height: 150,\r\n        marginLeft: 1,\r\n        marginTop: 10,\r\n        marginBottom: 60,\r\n        marginRight: 50,\r\n        verticalOrientation: false,\r\n    },\r\n    state: {\r\n        width: 300,\r\n        height: 150,\r\n        marginLeft: 1,\r\n        marginTop: 10,\r\n        marginBottom: 40,\r\n        marginRight: 50,\r\n        verticalOrientation: false,\r\n    },\r\n    // flipped\r\n    day: {\r\n        width: 300,\r\n        height: 150,\r\n        marginLeft: 1,\r\n        marginTop: 10,\r\n        marginBottom: 40,\r\n        marginRight: 50,\r\n        verticalOrientation: false,\r\n    }\r\n};\r\nexports.DefaultChartProps = {\r\n    baseFill: exports.lightBlue,\r\n    showIntro: false,\r\n    selectFill: exports.darkBlue,\r\n    annotations: true,\r\n    verticalOrientation: true,\r\n    debug: false,\r\n};\r\nfunction rectContains(bounds, x, y) {\r\n    if (!bounds)\r\n        return false;\r\n    return ((x < bounds.high && x > bounds.low) && (y < bounds.high2) && (y > bounds.low2));\r\n}\r\nexports.rectContains = rectContains;\r\nfunction rectToString(selected) {\r\n    if (selected && selected.low && selected.high && selected.low2 && selected.high2) {\r\n        return selected.low.toString() + selected.high.toString() + selected.low2.toString() + selected.high2.toString();\r\n    }\r\n    else {\r\n        return \"\";\r\n    }\r\n}\r\nexports.rectToString = rectToString;\r\nfunction isRect(object) {\r\n    return \"x1\" in object && \"x2\" in object;\r\n}\r\n// it's amazing that the syntax highligher knows the following is correct...\r\nfunction hasBrushSelection(s) {\r\n    if (s) {\r\n        if (typeof s === \"string\") {\r\n            return (s.length > 0);\r\n        }\r\n        else if (isRect(s)) {\r\n            return (s.low && s.high && s.low2 && s.high2) ? true : false;\r\n        }\r\n        else {\r\n            return (s.low && s.high) ? true : false;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexports.hasBrushSelection = hasBrushSelection;\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = __webpack_require__(2);\r\nexports.IntroSpec = new Map();\r\nexports.IntroSpec.set(\"sum\", \"This is the visualization dashboard of flights data and we will walk you through\\n  each piece of the dashboard. Don't worry if there is something that you don't understand---the tutorial\\nwill cover all the components.\");\r\nexports.IntroSpec.set(\"clickState\", \"For instance, this chart shows the count of flights to Hawaii by state.\\n  You can click on a bar to filter other charts.\\n  Go ahead and click on CA (first bar), then click next to continue the tutorial.\\n  \");\r\nexports.IntroSpec.set(\"dayBar\", \" After some delay, the charts will update with data filtered by your selection.\\n  During the delay, you will see a <b>yellow bar flashing</b> below the chart.\\n  This chart shows the number of flights per day in the first half of December.\\n  The gray bars in the background shows the results without any filters and the blue\\n  are the results filtered by your selections.\\n  Go ahead and click-and-drag <i>between</i> the bars to select multiple at once (you will see your\\n    mouse turn into a cross). Then click continue\");\r\nexports.IntroSpec.set(\"heatmap1\", \"This is a heatmap that compares arrival and departure delays, filtered by the\\n  selections you have made so far.\");\r\n// so this comes back\r\nexports.IntroSpec.set(\"delayLegend\", \"This is a legend for how to read the heatmap---the darker the color, the higher the density\");\r\nexports.IntroSpec.set(\"heatmap2\", \"You will notice that the left-bottom most region has a very high count\\n   and the light regions to have just one\\n   Click on a region of the heat map for the exact count\");\r\nexports.IntroSpec.set(\"delayDistribution\", \"This vertical bar provides a <b>faster way to read the delay</b>---flights with either arrival or departure\\n  delay of higher than 20 minutes will count as delayed, shown as red, otherwise white.\");\r\nexports.IntroSpec.set(\"carrierBar\", \"This chart shows the total count of flight by carriers.\\n   Also, note that some interactions that you have performed in the past may respond without delay\");\r\nexports.IntroSpec.set(\"resetBtn\", \"Click the reset button to remove the existing filter on the chart.  The button will only show when there is a filter.\");\r\nexports.IntroSpec.set(\"chronicles\", \"Browse your previous interactions by by clicking directly on any of the blocks (or arrow keys),\\n  each of which represents a past interaction.\\n  Blocks to the left are older, and blocks to the right are newer.\\n  <b>\\\"N\\\"</b> means the most recent block representing your interaction.\\n  <b>Orange</b> means the active interaction you are currently looking at.\\n  <b>Flashing</b> means that the data is loading for the block.\\n  Note that currently the keys are used for navigating the tutorial and will work after\\n  the tutorial session is done.\");\r\nexports.IntroSpec.set(\"historyButton\", \"This button removes past interactions you have created. You may find this useful to declutter the interface.\");\r\nexports.IntroSpec.set(\"unclipButton\", \"This button zooms the charts in, showing only the filtered results (the gray background data gone). It achieves a\\n  zooming effect, which is useful when the filtered data is small and the values difficult to read.\");\r\nexports.IntroSpec.set(\"feedback\", \"If at any time you feel happy, frustrated, or confused about the task,\\n  feel free to click the corresponding emoji to let us know.\");\r\nexports.IntroSpec.set(\"tutorial\", \"Click to walk through the tutorial again.\\n  After you start training tasks, you will not be able to see the tutorial.\");\r\nexports.IntroSpec.set(\"videos\", \"Click here for some videos demonstraiting the techniques.\\n   After you are done viewing all the techniques,\\n   you will be taken to the tasks page.\");\r\n// http://2ality.com/2017/04/conditional-literal-entries.html\r\nexports.IntroSteps = [\r\n    \"sum\", \"clickState\", \"dayBar\", \"resetBtn\", \"carrierBar\",\r\n    \"heatmap1\", \"delayLegend\", \"heatmap2\",\r\n    \"delayDistribution\",\r\n    \"unclipButton\"\r\n].concat((config_1.IsChronicles ? [\"chronicles\", \"historyButton\"] : []), [\r\n    \"feedback\", \"tutorial\", \"videos\"\r\n]);\r\nexports.videoTutorials = (config_1.IsChronicles ? [\r\n    {\r\n        title: \"Selection Without Waiting\",\r\n        videoLink: config_1.FilePathPrefix + \"concurrent_interaction.mov\",\r\n        texts: [\r\n            \"The visualization tool allows you to perform multiple interactions at the same time.\",\r\n            \"You can specify multiple filters across charts---there is\\n        no need to wait for individual ones.\"\r\n        ]\r\n    },\r\n    {\r\n        title: \"Navigate Results By Clicking on History Blocks\",\r\n        videoLink: config_1.FilePathPrefix + \"navigate.mov\",\r\n        texts: [\r\n            \"You can revisit these past results by clicking on the blocks or using arrow keys;\\n         this way, you don't have to wait for every single result before you proceed.\",\r\n            \"Know that you also have the option of using up/left or down/right\\n         keys for navigating in history in addition to clicking on the blocks.\\n         The keys may be faster.\"\r\n        ]\r\n    }\r\n] : []).slice();\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nmodule.exports = d3;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tasks_1 = __webpack_require__(9);\r\nvar config_1 = __webpack_require__(2);\r\nvar Airlines = [\"United\", \"Alaska\", \"Hawaiian\", \"Delta\", \"American\", \"Virgin\"];\r\nvar popAirlineAnswer = \"United\";\r\nvar popAirlineOption = Airlines.map(function (a) {\r\n    return {\r\n        text: a,\r\n        value: popAirlineAnswer === a ? 1 : 0\r\n    };\r\n});\r\nvar delaySearchAnswer = 9;\r\nvar delaySearchOptions = new Array(7).fill(0).map(function (_, i) {\r\n    return {\r\n        text: i + 5 + \"th\",\r\n        value: (i + 5 === delaySearchAnswer) ? 1 : 0,\r\n    };\r\n});\r\n// Note to self: make sure that there is only 1 or 0 values for training\r\n// otherwise it makes the result hard to display\r\nexports.trainingQA = [{\r\n        // fix me: not correct yet\r\n        qId: \"popAirline_training\",\r\n        question: \"Which airline do people from CA fly the most?\",\r\n        type: tasks_1.TaskTypes.ComplexCompareValue,\r\n        choices: popAirlineOption\r\n    },\r\n    // interstingly, this will depend on the strategy --- if the user realizes that\r\n    // they can directly search for the pattern; this might add variance to the latency times\r\n    // tho these kind of issues seem hard to avoid\r\n    {\r\n        qId: \"delaySearch_training\",\r\n        question: \"We found that on the day of the 4th, a Monday, delays were almost twice the average.\\n      Could you identify another day in that week that also has higher delays?\",\r\n        type: tasks_1.TaskTypes.PatternSearch,\r\n        choices: delaySearchOptions,\r\n    },\r\n    {\r\n        qId: \"delaySearch_mem_training\",\r\n        question: \"Did you notice any days that had very low delays?\",\r\n        type: tasks_1.TaskTypes.Recall,\r\n        linkedQId: \"delaySearch_training\",\r\n        note: \"The task you just completed is a \\\"memory tasks\\\"---we are curious if you remember any of the\\n          intermediate results you see on the page\",\r\n        choices: [\r\n            {\r\n                text: \"None\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"5th or 6th\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"7th or 8th\",\r\n                value: 1\r\n            },\r\n            {\r\n                text: \"9th or 10th\",\r\n                value: 0\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        qId: \"singleAirline_training\",\r\n        question: \"For the states with more flights (i.e., before TT in the chart of flights by state on the left), are there any states that flies with a single carrier? Select one that applies.\",\r\n        type: tasks_1.TaskTypes.PatternSearch,\r\n        choices: [\r\n            {\r\n                text: \"CA\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"WA\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"OR\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"AZ\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"TX\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"NV\",\r\n                value: 1\r\n            },\r\n            {\r\n                text: \"AK\",\r\n                value: 1\r\n            },\r\n            {\r\n                text: \"CO\",\r\n                value: 1\r\n            },\r\n        ]\r\n    }\r\n];\r\nvar carrierSearchAnswer = [\"Hawaiian\", \"Delta\"];\r\nvar carrierSearchChoices = Airlines.map(function (a) {\r\n    return {\r\n        text: a,\r\n        value: carrierSearchAnswer.indexOf(a) > -1 ? 1 : 0\r\n    };\r\n});\r\nvar carrierSearchMemAnswer = [\"Alaska\", \"Virgin\"];\r\nvar carrierSearchMemChoices = Airlines.map(function (a) {\r\n    return {\r\n        text: a,\r\n        value: carrierSearchMemAnswer.indexOf(a) > -1 ? 1 : 0\r\n    };\r\n});\r\ncarrierSearchMemChoices.push({\r\n    text: \"None\",\r\n    value: 0,\r\n});\r\nvar TaskStates = [\"CA\", \"WA\", \"AZ\", \"TX\", \"OR\", \"CO\", \"NV\", \"AK\", \"IL\", \"NY\", \"UT\", \"TT\", \"GA\", \"NJ\", \"MN\", \"VA\"];\r\nvar holidayStratAnswers = [\"CO\", \"IL\", \"NY\", \"UT\"];\r\nvar holidayStratChoices = TaskStates.map(function (text) { return ({\r\n    text: text,\r\n    value: holidayStratAnswers.indexOf(text) > -1 ? 1 : 0\r\n}); });\r\nvar holidayStratMemAnswers = [\"TX\", \"GA\", \"NJ\"];\r\nvar holidayStratMemChoices = TaskStates.map(function (text) { return ({\r\n    text: text,\r\n    value: holidayStratMemAnswers.indexOf(text) > -1 ? 1 : 0\r\n}); });\r\nvar popularStateAmericanChoices = TaskStates.map(function (text) { return ({\r\n    text: text,\r\n    value: text === \"AZ\" ? 1 : text === \"TX\" ? 0.5 : text === \"CA\" ? 0.1 : 0\r\n}); });\r\nexports.taskQA = [\r\n    {\r\n        // start with some easy questions\r\n        qId: \"popularStateAmerican_task\",\r\n        question: \"What is the <b>second</b> most popular state that flies with the carrier, <i>American</i>?\",\r\n        type: tasks_1.TaskTypes.SimpleCompareValue,\r\n        choices: popularStateAmericanChoices\r\n    },\r\n    {\r\n        qId: \"readNV24_task\",\r\n        question: \"What is the range of <b>arrival delay</b> for NV on the 24th?\",\r\n        type: tasks_1.TaskTypes.ReadValue,\r\n        choices: [\r\n            {\r\n                text: \"less than 60\",\r\n                value: 0,\r\n            },\r\n            {\r\n                text: \"60 to 100\",\r\n                value: 1,\r\n            },\r\n            {\r\n                text: \"more than 100\",\r\n                value: 0,\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        qId: \"readORCO_task\",\r\n        question: \"Is there more flights from TX with American on the 16th than flights from CO with United on the 20th?\",\r\n        type: tasks_1.TaskTypes.ComplexCompareValue,\r\n        choices: [{\r\n                text: \"yes\",\r\n                value: 1,\r\n            },\r\n            {\r\n                text: \"no\",\r\n                value: 0,\r\n            }]\r\n    },\r\n    {\r\n        qId: \"readORCO_mem_task\",\r\n        question: \"Do you remember if TX also flies with United on the 16th? And if so, more than CO's with United on the 20th?\",\r\n        type: tasks_1.TaskTypes.Recall,\r\n        linkedQId: \"readORCO_task\",\r\n        choices: [{\r\n                text: \"TX on 16th has less or none\",\r\n                value: 1,\r\n            },\r\n            {\r\n                text: \"TX on 16th has more\",\r\n                value: 0,\r\n            }]\r\n    },\r\n    {\r\n        // start with some easy questions\r\n        qId: \"holidayStrat_task\",\r\n        question: \"There are a few states with noticeable increase of fights for the holiday times (from around the 21st), find one (there maybe be more than one, but one is enough)\",\r\n        type: tasks_1.TaskTypes.PatternSearch,\r\n        choices: holidayStratChoices\r\n    },\r\n    {\r\n        qId: \"holidayStrat_mem_task\",\r\n        question: \"Do you remember seeing any states whose flight counts does not change at all through this period (second half of December)?\",\r\n        type: tasks_1.TaskTypes.Recall,\r\n        linkedQId: \"holidayStrat_task\",\r\n        choices: holidayStratMemChoices\r\n    },\r\n    {\r\n        qId: \"delayTrendHoliday_task\",\r\n        question: \"Is the delay longer or shorter around Christmas (23rd, 24th, 25th)?\",\r\n        type: tasks_1.TaskTypes.ComplexCompareValue,\r\n        choices: [\r\n            {\r\n                text: \"All days are normal\",\r\n                value: 0,\r\n            },\r\n            {\r\n                text: \"All days have longer delays\",\r\n                value: 0,\r\n            },\r\n            {\r\n                text: \"All days have shorter delays\",\r\n                value: 0,\r\n            },\r\n            {\r\n                text: \"Some days have shorter delays, others normal\",\r\n                value: 0,\r\n            },\r\n            {\r\n                text: \"Some days have longer delays, others normal\",\r\n                value: 1,\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        qId: \"delayTrendHoliday_mem_task\",\r\n        question: \"Do you remember what the longest <b>arrival</b> delay acorss these three days was, roughly?\",\r\n        type: tasks_1.TaskTypes.Recall,\r\n        linkedQId: \"delayTrendHoliday_task\",\r\n        choices: [\r\n            {\r\n                text: \"less than 300\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"between 300 and 400\",\r\n                value: 0\r\n            },\r\n            {\r\n                text: \"betwee 400 and 500\",\r\n                value: 1\r\n            },\r\n            {\r\n                text: \"more than 500\",\r\n                value: 0\r\n            }\r\n        ]\r\n    },\r\n    // similar question to training\r\n    {\r\n        qId: \"carrierSearch_task\",\r\n        question: \"Was there a carrier that did worse around Christmas compared to that carrier's average delays? (24th or 25th)?\",\r\n        type: tasks_1.TaskTypes.PatternSearch,\r\n        choices: carrierSearchChoices,\r\n    },\r\n    {\r\n        qId: \"carrierSearch_mem_task\",\r\n        question: \"Did you notice any carriers that have consistently low (always below an hour) delays?\",\r\n        type: tasks_1.TaskTypes.Recall,\r\n        linkedQId: \"carrierSearch_task\",\r\n        choices: carrierSearchMemChoices\r\n    }\r\n];\r\nif (config_1.DEBUG) {\r\n    // make sure that the qIds are all unique --- this is due to copy paste errors\r\n    // (I should invest in unit tests...)\r\n    // do this by bounting the set and the original length\r\n    var qIds = exports.trainingQA.concat(exports.taskQA).map(function (q) { return q.qId; });\r\n    var uniqueItems = new Set(qIds);\r\n    if (qIds.length - uniqueItems.size > 0) {\r\n        console.log(qIds, uniqueItems);\r\n        throw new Error(\"There are duplicate qIds!\");\r\n    }\r\n}\r\nexports.SurveyCount = 3;\r\nexports.holidayCount = exports.taskQA.length;\r\nexports.TotalAnalysisCount = exports.trainingQA.length + exports.taskQA.length;\r\nexports.TotalTaskCount = exports.TotalAnalysisCount + exports.SurveyCount;\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction assertQueryHasResult(r, query) {\r\n    if ((!r) || (!r.values)) {\r\n        throw new Error(\"Query \" + query + \" has NO result\");\r\n    }\r\n}\r\nexports.assertQueryHasResult = assertQueryHasResult;\r\n// for console debugging\r\nfunction d(db, sql) {\r\n    var r = db.exec(sql);\r\n    if (r.length > 0) {\r\n        r[0].values.map(function (v) {\r\n            v.map(function (c, i) {\r\n                if (r[0].columns[i] === \"ts\") {\r\n                    c = new Date(c).toDateString();\r\n                }\r\n            });\r\n        });\r\n        console.log(r[0].columns.join(\"\\t\"));\r\n        console.log(JSON.stringify(r[0].values).replace(/\\],\\[/g, \"\\n\").replace(\"[[\", \"\").replace(\"]]\", \"\").replace(/,/g, \"\\t\"));\r\n    }\r\n    else {\r\n        console.log(\"NO RESULT\");\r\n    }\r\n}\r\nexports.d = d;\r\nwindow.d = d;\r\nfunction log(msg, source) {\r\n    console.log(\"[\" + source + \"] \" + msg);\r\n    return 1;\r\n}\r\nexports.log = log;\r\nfunction timeNow() {\r\n    return +new Date();\r\n}\r\nexports.timeNow = timeNow;\r\n// this is needed because the groupby has non deterministic orderings\r\n// and I wasn't able to write a custom reducer\r\n// I suspect this is faster anyways\r\nfunction hashCompare(a, b) {\r\n    // split by -\r\n    var aVals = a.split(\"-\");\r\n    var bVals = b.split(\"-\");\r\n    var _loop_1 = function (i) {\r\n        var av = aVals[i];\r\n        var table = av.split(\":\")[0];\r\n        var bR = bVals.filter(function (bv) { return bv.split(\":\")[0] === table; });\r\n        if (bR.length !== 1) {\r\n            console.log(\"didn't find\", table, bVals);\r\n            return { value: 0 };\r\n        }\r\n        if (bR[0] !== av) {\r\n            return { value: 0 };\r\n        }\r\n    };\r\n    for (var i = 0; i < aVals.length; i++) {\r\n        var state_1 = _loop_1(i);\r\n        if (typeof state_1 === \"object\")\r\n            return state_1.value;\r\n    }\r\n    return 1;\r\n}\r\nexports.hashCompare = hashCompare;\r\nfunction prettyTimeNow() {\r\n    return new Date().toTimeString().substr(0, 8);\r\n}\r\nexports.prettyTimeNow = prettyTimeNow;\r\n/**********************\r\n * Debugging support\r\n *********************/\r\nfunction downloadHelper(blob, name) {\r\n    var a = document.createElement(\"a\");\r\n    a.href = window.URL.createObjectURL(blob);\r\n    a.download = name + \"_\" + prettyTimeNow() + \".db\";\r\n    a.onclick = function () {\r\n        setTimeout(function () {\r\n            window.URL.revokeObjectURL(a.href);\r\n        }, 1500);\r\n    };\r\n    a.click();\r\n}\r\nexports.downloadHelper = downloadHelper;\r\nfunction downloadQueryResultAsCSV(db, query) {\r\n    var csvContent = \"\";\r\n    var r = db.exec(query);\r\n    if (r.length && r[0].values) {\r\n        csvContent += r[0].columns.join(\",\") + \"\\r\\n\";\r\n        r[0].values.forEach(function (rowArray) {\r\n            var row = rowArray.join(\",\");\r\n            csvContent += row + \"\\r\\n\";\r\n        });\r\n        var b = new Blob([csvContent], { type: \"text/plain;charset=UTF-8\" });\r\n        downloadHelper(b, \"userData.csv\");\r\n        console.log(\"should have downloaded\", csvContent);\r\n    }\r\n    else {\r\n        console.log(\"NO RESULT\");\r\n    }\r\n}\r\nexports.downloadQueryResultAsCSV = downloadQueryResultAsCSV;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n// the goal of training tasks is to make sure that people understand what is going on\r\n// in this case they will do some simple ones\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// gong to limit the number of years to 3.\r\nvar FeedbackType;\r\n(function (FeedbackType) {\r\n    FeedbackType[FeedbackType[\"Happy\"] = 0] = \"Happy\";\r\n    FeedbackType[FeedbackType[\"Angry\"] = 1] = \"Angry\";\r\n    FeedbackType[FeedbackType[\"Confused\"] = 2] = \"Confused\";\r\n})(FeedbackType = exports.FeedbackType || (exports.FeedbackType = {}));\r\nvar TaskStep;\r\n(function (TaskStep) {\r\n    TaskStep[TaskStep[\"Description\"] = 0] = \"Description\";\r\n    TaskStep[TaskStep[\"Answering\"] = 1] = \"Answering\";\r\n    TaskStep[TaskStep[\"Submitted\"] = 2] = \"Submitted\";\r\n})(TaskStep = exports.TaskStep || (exports.TaskStep = {}));\r\nvar TaskTypes;\r\n(function (TaskTypes) {\r\n    TaskTypes[TaskTypes[\"ReadValue\"] = 0] = \"ReadValue\";\r\n    TaskTypes[TaskTypes[\"SimpleCompareValue\"] = 1] = \"SimpleCompareValue\";\r\n    TaskTypes[TaskTypes[\"ComplexCompareValue\"] = 2] = \"ComplexCompareValue\";\r\n    TaskTypes[TaskTypes[\"PatternSearch\"] = 3] = \"PatternSearch\";\r\n    TaskTypes[TaskTypes[\"Trend\"] = 4] = \"Trend\";\r\n    TaskTypes[TaskTypes[\"Recall\"] = 5] = \"Recall\";\r\n})(TaskTypes = exports.TaskTypes || (exports.TaskTypes = {}));\r\nvar TaskConfidence;\r\n(function (TaskConfidence) {\r\n    TaskConfidence[TaskConfidence[\"NotAtAll\"] = 0] = \"NotAtAll\";\r\n    TaskConfidence[TaskConfidence[\"Somewhat\"] = 1] = \"Somewhat\";\r\n    TaskConfidence[TaskConfidence[\"Very\"] = 2] = \"Very\";\r\n})(TaskConfidence = exports.TaskConfidence || (exports.TaskConfidence = {}));\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar ReactDOM = __webpack_require__(14);\r\nvar PageContainer_1 = __webpack_require__(15);\r\n// this is the place where DIEL should be loaded with the\r\n// generated .db file\r\nfunction loadPage() {\r\n    ReactDOM.render(React.createElement(PageContainer_1.PageContainer, null), document.getElementById(\"wrapper\"));\r\n}\r\nexports.loadPage = loadPage;\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar BarChart_1 = __webpack_require__(20);\r\nvar Scatterplot_1 = __webpack_require__(27);\r\nvar HappyOrNot_1 = __webpack_require__(28);\r\nvar ChronicleSlider_1 = __webpack_require__(29);\r\nvar config_1 = __webpack_require__(2);\r\nvar setup_1 = __webpack_require__(1);\r\nvar helper_1 = __webpack_require__(3);\r\nvar tutorialMaterial_1 = __webpack_require__(5);\r\nvar ScrubberView = /** @class */ (function (_super) {\r\n    __extends(ScrubberView, _super);\r\n    function ScrubberView(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        // by default show the most recent unless otherwise specified\r\n        _this.handleKeyDown = _this.handleKeyDown.bind(_this);\r\n        _this.toggleClip = _this.toggleClip.bind(_this);\r\n        // this is the refresh, not very sophisticated for now\r\n        _this.loadingSummary = _this.loadingSummary.bind(_this);\r\n        _this.focusItx = _this.focusItx.bind(_this);\r\n        // this.setStateKey = this.setStateKey.bind(this);\r\n        _this.setControl = _this.setControl.bind(_this);\r\n        _this.state = {\r\n            control: true,\r\n            stateKey: \"training\",\r\n            clipped: true,\r\n            focusItx: null,\r\n            itxIdsInfo: null,\r\n        };\r\n        // diel.SetStateRefresh(this.setStateKey);\r\n        setup_1.diel.BindFreeze(_this.setControl);\r\n        return _this;\r\n    }\r\n    ScrubberView.prototype.setControl = function (control) {\r\n        this.setState({ control: control });\r\n    };\r\n    // setStateKey() {\r\n    //   this.setState({stateKey: \"task\"});\r\n    // }\r\n    ScrubberView.prototype.focusItx = function (focusItx) {\r\n        this.setState({ focusItx: focusItx.itxId });\r\n    };\r\n    ScrubberView.prototype.loadingSummary = function (itxIdsInfo) {\r\n        // console.log(\"loading summary called with info\", itxIdsInfo);\r\n        this.setState({ itxIdsInfo: itxIdsInfo });\r\n    };\r\n    ScrubberView.prototype.componentWillMount = function () {\r\n        if (config_1.IsChronicles)\r\n            document.addEventListener(\"keydown\", this.handleKeyDown);\r\n    };\r\n    ScrubberView.prototype.componentWillUnmount = function () {\r\n        if (config_1.IsChronicles)\r\n            document.removeEventListener(\"keydown\", this.handleKeyDown);\r\n    };\r\n    ScrubberView.prototype.componentDidMount = function () {\r\n        setup_1.diel.BindOutput(\"loadingSummary\", this.loadingSummary);\r\n        setup_1.diel.BindOutput(\"focusItx\", this.focusItx, { singleRow: true });\r\n        // by this point all the bound functions should have been called\r\n        // need to force a refresh; a little bit brittle\r\n        console.log(\"React all setup, calling tick\");\r\n        setup_1.diel.tick()();\r\n    };\r\n    ScrubberView.prototype.handleKeyDown = function (e) {\r\n        // arrow up/down button should select next/previous list element\r\n        if (e.keyCode === 38 || e.keyCode === 37) {\r\n            setup_1.diel.Input.deltaItx({ $val: -1 });\r\n        }\r\n        else if (e.keyCode === 40 || e.keyCode === 39) {\r\n            setup_1.diel.Input.deltaItx({ $val: 1 });\r\n        }\r\n    };\r\n    ScrubberView.prototype.toggleClip = function () {\r\n        this.setState(function (prev) {\r\n            var clipped = !prev.clipped;\r\n            setup_1.diel.LogData.eventLog({\r\n                $eventName: helper_1.EventType[helper_1.EventType.Clip],\r\n                $parameter: clipped\r\n            });\r\n            return { clipped: clipped };\r\n        });\r\n    };\r\n    // resetAll() {\r\n    //   diel.Input.xBrushItx({$chart: });\r\n    // }\r\n    ScrubberView.prototype.render = function () {\r\n        var _this = this;\r\n        var showIntro = this.props.showIntro;\r\n        var _a = this.state, focusItx = _a.focusItx, itxIdsInfo = _a.itxIdsInfo, clipped = _a.clipped, control = _a.control;\r\n        var delays = React.createElement(Scatterplot_1.default, { ref: function (v) { return _this.delaysChart = v; }, clipped: clipped, showIntro: showIntro, chart: \"delays\", xLabel: \"arrival delay\", yLabel: \"departure delay\", key: \"delays\" });\r\n        var state = React.createElement(BarChart_1.default, { ref: function (v) { return _this.stateChart = v; }, clipped: clipped, xLabel: \"state\", yLabel: \"count\", chart: \"state\", isCategorical: true });\r\n        var carrier = React.createElement(BarChart_1.default, { ref: function (v) { return _this.carrierChart = v; }, clipped: clipped, xLabel: \"carrier\", yLabel: \"count\", chart: \"carrier\", isCategorical: true });\r\n        var day = React.createElement(BarChart_1.default, { ref: function (v) { return _this.dayChart = v; }, clipped: clipped, xLabel: \"day\", yLabel: \"count\", chart: \"day\", isCategorical: false, showIntro: showIntro });\r\n        var slider = config_1.IsChronicles ? React.createElement(ChronicleSlider_1.ChronicleSlider, { itxIdsInfo: itxIdsInfo, focusItx: focusItx }) : null;\r\n        // so when the item is not specified, the field is omitted\r\n        return React.createElement(\"div\", { key: this.state.stateKey, className: \"vis-portal \" + (control ? \"\" : \"dimmed\") },\r\n            React.createElement(\"div\", { style: { float: \"left\" } },\r\n                React.createElement(\"button\", { className: \"general-btn vis-btn \", style: { width: 75 }, onClick: this.toggleClip, \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"unclipButton\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"unclipButton\") : null },\r\n                    this.state.clipped ? \"\" : \"un\",\r\n                    \"zoom\"),\r\n                config_1.IsChronicles\r\n                    ? React.createElement(\"button\", { className: \"general-btn vis-btn\", onClick: setup_1.diel.Input.deleteItx, \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"historyButton\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"historyButton\") : null }, \"clear history\")\r\n                    : null),\r\n            React.createElement(\"div\", { style: { float: \"left\" }, \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"feedback\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"feedback\") : null },\r\n                React.createElement(HappyOrNot_1.default, null)),\r\n            React.createElement(\"br\", { style: { clear: \"both\" } }),\r\n            React.createElement(\"div\", { className: \"all-carts\", \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"sum\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"sum\") : null },\r\n                React.createElement(\"div\", { className: \"chart-layout-wrapper\", \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"clickState\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"clickState\") : null }, state),\r\n                React.createElement(\"div\", { className: \"chart-layout-wrapper\", \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"dayBar\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"dayBar\") : null }, day),\r\n                React.createElement(\"div\", { className: \"chart-layout-wrapper\", \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"carrierBar\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"carrierBar\") : null }, carrier),\r\n                React.createElement(\"div\", { className: \"chart-layout-wrapper\", \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"heatmap1\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"heatmap1\") : null },\r\n                    React.createElement(\"div\", { style: { overflow: \"auto\" } }, delays)),\r\n                React.createElement(\"div\", { style: { clear: \"both\" } })),\r\n            React.createElement(\"div\", { \"data-step\": showIntro && config_1.IsChronicles ? tutorialMaterial_1.IntroSteps.indexOf(\"chronicles\") + 1 : null, \"data-intro\": showIntro && config_1.IsChronicles ? tutorialMaterial_1.IntroSpec.get(\"chronicles\") : null }, slider));\r\n    };\r\n    ScrubberView.defaultProps = {\r\n        width: 800,\r\n        height: 100,\r\n        isTraining: false,\r\n    };\r\n    return ScrubberView;\r\n}(React.Component));\r\nexports.default = ScrubberView;\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar setup_1 = __webpack_require__(1);\r\nexports.ResetButton = function (p) {\r\n    if (p.selection && p.selection.length > 0) {\r\n        return React.createElement(\"div\", { style: { height: 30, width: p.width, overflow: \"hidden\" } },\r\n            React.createElement(\"button\", { style: { marginBottom: 10 }, onClick: function () { return setup_1.diel.Input.xBrushItx({ $chart: p.chart }); } }, \"reset\"));\r\n    }\r\n    else {\r\n        return React.createElement(\"div\", { style: { height: 30, width: p.width } });\r\n    }\r\n};\r\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = __webpack_require__(2);\r\nvar ExperimentStep;\r\n(function (ExperimentStep) {\r\n    ExperimentStep[ExperimentStep[\"Introduction\"] = 0] = \"Introduction\";\r\n    ExperimentStep[ExperimentStep[\"Demographics\"] = 1] = \"Demographics\";\r\n    ExperimentStep[ExperimentStep[\"TrainingIntro\"] = 2] = \"TrainingIntro\";\r\n    ExperimentStep[ExperimentStep[\"Tutorial\"] = 3] = \"Tutorial\";\r\n    ExperimentStep[ExperimentStep[\"Training\"] = 4] = \"Training\";\r\n    ExperimentStep[ExperimentStep[\"TasksIntro\"] = 5] = \"TasksIntro\";\r\n    ExperimentStep[ExperimentStep[\"Tasks\"] = 6] = \"Tasks\";\r\n    ExperimentStep[ExperimentStep[\"SurveyIntro\"] = 7] = \"SurveyIntro\";\r\n    ExperimentStep[ExperimentStep[\"FlowSurvey\"] = 8] = \"FlowSurvey\";\r\n    ExperimentStep[ExperimentStep[\"ToolSurvey\"] = 9] = \"ToolSurvey\";\r\n    ExperimentStep[ExperimentStep[\"FailedTraining\"] = 10] = \"FailedTraining\";\r\n    ExperimentStep[ExperimentStep[\"End\"] = 11] = \"End\";\r\n    ExperimentStep[ExperimentStep[\"CancelSurvey\"] = 12] = \"CancelSurvey\";\r\n})(ExperimentStep = exports.ExperimentStep || (exports.ExperimentStep = {}));\r\nvar CancelReason;\r\n(function (CancelReason) {\r\n    CancelReason[CancelReason[\"TasksTooHard\"] = 0] = \"TasksTooHard\";\r\n    CancelReason[CancelReason[\"DelaysFrustrating\"] = 1] = \"DelaysFrustrating\";\r\n    CancelReason[CancelReason[\"PayTooLow\"] = 2] = \"PayTooLow\";\r\n    CancelReason[CancelReason[\"Other\"] = 3] = \"Other\";\r\n})(CancelReason = exports.CancelReason || (exports.CancelReason = {}));\r\n/**\r\n * Returns the value associated with the given URL parameter name, otherwise\r\n * returns null if no such parameter value is set.\r\n * @param {string} sParam\r\n * @returns {string}\r\n */\r\nfunction getUrlParameter(sParam) {\r\n    var sPageURL = decodeURIComponent(window.location.search.substring(1)), sURLVariables = sPageURL.split(\"&\"), sParameterName, i;\r\n    for (i = 0; i < sURLVariables.length; i++) {\r\n        sParameterName = sURLVariables[i].split(\"=\");\r\n        if (sParameterName[0] === sParam) {\r\n            return sParameterName[1] === undefined ? null : sParameterName[1];\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexports.getUrlParameter = getUrlParameter;\r\nfunction setupExperimentForGpaas(numTasks) {\r\n    console.log(\"setting up experiment for\", numTasks);\r\n    return function () {\r\n        function clearTask() { }\r\n        function finish(opt) {\r\n            var submitTo = getUrlParameter(\"turkSubmitTo\");\r\n            if (config_1.DEBUG || submitTo === \"sandbox\") {\r\n                alert(\"finished all tasks\");\r\n            }\r\n            else {\r\n                opt.submit(); // submit HIT\r\n            }\r\n        }\r\n        // function trainingTask() {}\r\n        function viewTask() { }\r\n        // FIXME: these are wrong\r\n        return {\r\n            name: config_1.ExperimentName,\r\n            task: config_1.ExperimentName,\r\n            researcher: config_1.Researcher,\r\n            numTasks: numTasks,\r\n            params: {\r\n                params: [{ name: \"p\", type: \"UniformChoice\", options: [0] }]\r\n            },\r\n            clearTask: clearTask,\r\n            finish: finish,\r\n            trainingTasks: [],\r\n            viewTask: viewTask,\r\n        };\r\n    };\r\n}\r\nexports.setupExperimentForGpaas = setupExperimentForGpaas;\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nmodule.exports = ReactDOM;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar ExperimentContainer_1 = __webpack_require__(16);\r\n// import ScrubberView from \"./ScrubberView\";\r\nexports.PageContainer = function () { return (React.createElement(React.Fragment, null,\r\n    React.createElement(ExperimentContainer_1.default, null))); };\r\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/// <reference path=\"../../../external/gpaas.d.ts\" />\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar Survey_1 = __webpack_require__(17);\r\nvar Demographics_1 = __webpack_require__(18);\r\nvar TaskContainer_1 = __webpack_require__(19);\r\nvar TrainingIntro_1 = __webpack_require__(33);\r\nvar TaskIntro_1 = __webpack_require__(34);\r\nvar Instructions_1 = __webpack_require__(35);\r\nvar Tutorial_1 = __webpack_require__(36);\r\nvar experiment_1 = __webpack_require__(13);\r\nvar survey_1 = __webpack_require__(39);\r\nvar setup_1 = __webpack_require__(1);\r\nvar experimentQAs_1 = __webpack_require__(7);\r\nvar helper_1 = __webpack_require__(3);\r\nvar config_1 = __webpack_require__(2);\r\nvar CancelSurvey_1 = __webpack_require__(40);\r\nvar ExperimentContainer = /** @class */ (function (_super) {\r\n    __extends(ExperimentContainer, _super);\r\n    function ExperimentContainer(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.start = _this.start.bind(_this);\r\n        _this.submitDemographic = _this.submitDemographic.bind(_this);\r\n        _this.startTutorial = _this.startTutorial.bind(_this);\r\n        _this.startTraining = _this.startTraining.bind(_this);\r\n        _this.finishTraining = _this.finishTraining.bind(_this);\r\n        _this.startTasks = _this.startTasks.bind(_this);\r\n        _this.finishTasks = _this.finishTasks.bind(_this);\r\n        _this.finishFlowSurvey = _this.finishFlowSurvey.bind(_this);\r\n        _this.finishToolSurvey = _this.finishToolSurvey.bind(_this);\r\n        _this.actuallyCancel = _this.actuallyCancel.bind(_this);\r\n        _this.cancelTasks = _this.cancelTasks.bind(_this);\r\n        _this.startSurvey = _this.startSurvey.bind(_this);\r\n        var assignmentId = experiment_1.getUrlParameter(\"assignmentId\");\r\n        _this.state = {\r\n            step: experiment_1.ExperimentStep.Introduction,\r\n            assignmentId: assignmentId,\r\n            focusWarning: false,\r\n            focusWarningShown: null\r\n        };\r\n        return _this;\r\n    }\r\n    ExperimentContainer.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        window.addEventListener(\"focus\", function () {\r\n            _this.setState({ focusWarning: false });\r\n            setup_1.diel.LogData.eventLog({ $eventName: helper_1.EventType[helper_1.EventType.Focus] });\r\n        });\r\n        window.addEventListener(\"blur\", function () {\r\n            // show pop up if during task event\r\n            var t = setup_1.diel.IsDuringTask();\r\n            if (t.firstTime && (_this.state.focusWarningShown === null || _this.state.focusWarningShown < Date.now() - 10000)) {\r\n                _this.setState({\r\n                    focusWarningShown: Date.now(),\r\n                });\r\n                alert(\"Please try not to leave during your next task!\");\r\n            }\r\n            else if (t.duringTask) {\r\n                _this.setState({ focusWarning: true });\r\n            }\r\n            setup_1.diel.LogData.eventLog({ $eventName: helper_1.EventType[helper_1.EventType.Blur] });\r\n        });\r\n    };\r\n    ExperimentContainer.prototype._logStep = function (s) {\r\n        setup_1.diel.LogData.eventLog({\r\n            $eventName: \"step\",\r\n            $parameter: experiment_1.ExperimentStep[s]\r\n        });\r\n    };\r\n    ExperimentContainer.prototype.start = function () {\r\n        // this includes the surveys as well\r\n        // 3 surveys: demographic, flow and usability\r\n        var e = gpaas.startExperiment(experiment_1.setupExperimentForGpaas(experimentQAs_1.TotalTaskCount));\r\n        if (e.setupSuccessful) {\r\n            console.log(\"experiment started succesfully\");\r\n            setup_1.diel.LogData.eventLog({\r\n                $eventName: helper_1.EventType[helper_1.EventType.IsChronicles],\r\n                $parameter: config_1.IsChronicles ? \"true\" : \"false\"\r\n            });\r\n            setup_1.diel.LogData.eventLog({\r\n                $eventName: helper_1.EventType[helper_1.EventType.ExpVersion],\r\n                $parameter: config_1.ExpVersion\r\n            });\r\n            this._logStep(experiment_1.ExperimentStep.TrainingIntro);\r\n            this.setState({ step: experiment_1.ExperimentStep.TrainingIntro });\r\n        }\r\n        else {\r\n            console.log(\"failed to start experiment\");\r\n        }\r\n    };\r\n    ExperimentContainer.prototype.startTutorial = function () {\r\n        this._logStep(experiment_1.ExperimentStep.Tutorial);\r\n        this.setState({ step: experiment_1.ExperimentStep.Tutorial });\r\n    };\r\n    ExperimentContainer.prototype.startTraining = function () {\r\n        this._logStep(experiment_1.ExperimentStep.Training);\r\n        setup_1.diel.ClearHistory();\r\n        this.setState({ step: experiment_1.ExperimentStep.Training });\r\n    };\r\n    ExperimentContainer.prototype.finishTraining = function () {\r\n        // also setup db\r\n        // check if the answers were all wrong\r\n        var zeroCount = setup_1.diel.TrainingZeroCount();\r\n        if (zeroCount === experimentQAs_1.trainingQA.length) {\r\n            gpaas.cancelTasks();\r\n            this._logStep(experiment_1.ExperimentStep.FailedTraining);\r\n            this.setState({ step: experiment_1.ExperimentStep.FailedTraining });\r\n            // this.cancelTasks();\r\n        }\r\n        else {\r\n            this._logStep(experiment_1.ExperimentStep.TasksIntro);\r\n            setup_1.diel.ChangeToTask();\r\n            this.setState({ step: experiment_1.ExperimentStep.TasksIntro });\r\n        }\r\n    };\r\n    ExperimentContainer.prototype.startTasks = function () {\r\n        this._logStep(experiment_1.ExperimentStep.Tasks);\r\n        this.setState({ step: experiment_1.ExperimentStep.Tasks });\r\n    };\r\n    ExperimentContainer.prototype.finishTasks = function () {\r\n        // then make gpaas send it to server\r\n        this._logStep(experiment_1.ExperimentStep.SurveyIntro);\r\n        this.setState({ step: experiment_1.ExperimentStep.SurveyIntro });\r\n    };\r\n    ExperimentContainer.prototype.startSurvey = function () {\r\n        this._logStep(experiment_1.ExperimentStep.FlowSurvey);\r\n        this.setState({ step: experiment_1.ExperimentStep.FlowSurvey });\r\n    };\r\n    ExperimentContainer.prototype._logSurvey = function (data, s) {\r\n        var values = Object.keys(data).filter(function (k) { return k !== \"warn\"; })\r\n            .map(function (k) { return ({\r\n            qId: k,\r\n            answer: data[k]\r\n        }); });\r\n        gpaas.logData({\r\n            type: \"table\",\r\n            name: experiment_1.ExperimentStep[s],\r\n            values: values\r\n        });\r\n    };\r\n    ExperimentContainer.prototype.finishFlowSurvey = function (data) {\r\n        this._logStep(experiment_1.ExperimentStep.FlowSurvey);\r\n        this._logSurvey(data, experiment_1.ExperimentStep.FlowSurvey);\r\n        gpaas.nextTask();\r\n        this.setState({ step: experiment_1.ExperimentStep.ToolSurvey });\r\n    };\r\n    ExperimentContainer.prototype.finishToolSurvey = function (data) {\r\n        this._logStep(experiment_1.ExperimentStep.ToolSurvey);\r\n        this._logSurvey(data, experiment_1.ExperimentStep.ToolSurvey);\r\n        gpaas.nextTask();\r\n        this.setState({ step: experiment_1.ExperimentStep.Demographics });\r\n    };\r\n    ExperimentContainer.prototype.submitDemographic = function (data) {\r\n        this._logStep(experiment_1.ExperimentStep.Demographics);\r\n        this._logSurvey(data, experiment_1.ExperimentStep.Demographics);\r\n        gpaas.nextTask();\r\n        this.setState({ step: experiment_1.ExperimentStep.End });\r\n    };\r\n    ExperimentContainer.prototype.cancelTasks = function () {\r\n        this._logStep(experiment_1.ExperimentStep.CancelSurvey);\r\n        this.setState({ step: experiment_1.ExperimentStep.CancelSurvey });\r\n    };\r\n    ExperimentContainer.prototype.actuallyCancel = function (data) {\r\n        this._logSurvey(data, experiment_1.ExperimentStep.CancelSurvey);\r\n        gpaas.nextTask();\r\n        gpaas.cancelTasks();\r\n        this.setState({ step: experiment_1.ExperimentStep.End });\r\n        console.log(\"experiment cancelled\");\r\n    };\r\n    ExperimentContainer.prototype.render = function () {\r\n        var _a = this.state, step = _a.step, assignmentId = _a.assignmentId;\r\n        var content;\r\n        if (step === experiment_1.ExperimentStep.Introduction) {\r\n            content = React.createElement(Instructions_1.default, { onClick: this.start, disabled: assignmentId === \"ASSIGNMENT_ID_NOT_AVAILABLE\" });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.Demographics) {\r\n            content = React.createElement(Demographics_1.default, { onClick: this.submitDemographic });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.TrainingIntro) {\r\n            content = React.createElement(TrainingIntro_1.TrainingIntro, { onClick: this.startTutorial });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.Tutorial) {\r\n            content = React.createElement(Tutorial_1.default, { onClick: this.startTraining });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.Training) {\r\n            content = React.createElement(TaskContainer_1.default, { isTraining: true, cancel: this.cancelTasks, finish: this.finishTraining });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.TasksIntro) {\r\n            content = React.createElement(TaskIntro_1.TaskIntro, { onClick: this.startTasks });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.Tasks) {\r\n            content = React.createElement(TaskContainer_1.default, { isTraining: false, cancel: this.cancelTasks, finish: this.finishTasks });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.SurveyIntro) {\r\n            content = React.createElement(\"div\", null,\r\n                React.createElement(\"h3\", null, \"You are almost done!\"),\r\n                React.createElement(\"p\", null, \"We just need you to fill out three more quick surveys (each should take less than a minute). Don't worry if you are confused about exactly what the question means---try your best to provide an answer. If you are still worried, let us know in the comment section.\"),\r\n                React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: this.startSurvey }, \"Start Surveys\"));\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.FlowSurvey) {\r\n            content = React.createElement(Survey_1.default, { onClick: this.finishFlowSurvey, surveyQuestions: survey_1.FlowSurveyQuestions, surveySequence: survey_1.FlowSurveySequence, freeformPrompt: \"Feel free to comment on your experience completing the tasks here.\" });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.ToolSurvey) {\r\n            content = React.createElement(Survey_1.default, { onClick: this.finishToolSurvey, surveyQuestions: survey_1.UsabilitySurveyQuestions, surveySequence: survey_1.UsabilitySurveySequence, freeformPrompt: \"Feel free to comment on the tools or the effect of latency here. You can also share your ideas on how to improve, if you like.\" });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.CancelSurvey) {\r\n            content = React.createElement(CancelSurvey_1.default, { nextStep: this.actuallyCancel });\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.End) {\r\n            content = React.createElement(React.Fragment, null,\r\n                React.createElement(\"h2\", null, \"Thank you! All complete. You may close and leave the page now.\"),\r\n                React.createElement(\"p\", null, \"We will be sure to pay you within 2 weeks time!\"));\r\n        }\r\n        else if (step === experiment_1.ExperimentStep.FailedTraining) {\r\n            content = React.createElement(React.Fragment, null,\r\n                React.createElement(\"h2\", null, \"Failed to qualitfy for complete HIT\"),\r\n                React.createElement(\"p\", null, \"Thank you for attempting our HIT --- unfortuantely you got all three training questions wrong and are as a result not eligible to participate. You will be paid out for the tasks you have completed.\"));\r\n        }\r\n        else {\r\n            if (config_1.DEBUG)\r\n                throw new Error(\"step not handled: \" + experiment_1.ExperimentStep[step]);\r\n        }\r\n        return React.createElement(React.Fragment, null,\r\n            this.state.focusWarning ? React.createElement(\"p\", { className: \"warning\" }, \"Please stay on the page during your task\") : null,\r\n            content);\r\n    };\r\n    return ExperimentContainer;\r\n}(React.Component));\r\nexports.default = ExperimentContainer;\r\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nfunction radioHelper(surveyQuestions, i, name, state, onChange) {\r\n    var question = surveyQuestions.get(name);\r\n    var stateVal = state[name];\r\n    var radio = new Array(5).fill(0).map(function (_, i) { return React.createElement(\"td\", { style: { align: \"right\" } },\r\n        React.createElement(\"input\", { required: i === 0, type: \"radio\", style: { align: \"left\" }, name: name, value: i + 1, checked: stateVal === \"\" + (i + 1), onChange: onChange })); });\r\n    return (React.createElement(React.Fragment, null,\r\n        React.createElement(\"tr\", null,\r\n            React.createElement(\"td\", { style: { width: 500 } },\r\n                i + 1,\r\n                \". \",\r\n                question),\r\n            radio)));\r\n}\r\nvar Survey = /** @class */ (function (_super) {\r\n    __extends(Survey, _super);\r\n    function Survey(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.onChange = _this.onChange.bind(_this);\r\n        _this.onClick = _this.onClick.bind(_this);\r\n        _this.state = {\r\n            warn: \"false\",\r\n        };\r\n        return _this;\r\n    }\r\n    Survey.prototype.onChange = function (event) {\r\n        var _a;\r\n        this.setState((_a = {}, _a[event.target.name] = event.target.value, _a));\r\n    };\r\n    Survey.prototype.onClick = function () {\r\n        // make sure that they are selected\r\n        // check how many keys there are that's not comments\r\n        var numAnswers = Object.keys(this.state).filter(function (k) { return k !== \"comments\"; }).length;\r\n        if (numAnswers < this.props.surveyQuestions.size) {\r\n            this.setState({ warn: \"true\" });\r\n        }\r\n        else {\r\n            this.setState({ warn: \"false\" });\r\n            this.props.onClick(this.state);\r\n        }\r\n    };\r\n    Survey.prototype.render = function () {\r\n        var _this = this;\r\n        var _a = this.props, surveyQuestions = _a.surveyQuestions, surveySequence = _a.surveySequence, freeformPrompt = _a.freeformPrompt;\r\n        var questions = surveySequence.map(function (q, i) {\r\n            return radioHelper(surveyQuestions, i, q, _this.state, _this.onChange);\r\n        });\r\n        return (React.createElement(\"div\", null,\r\n            this.state.warn === \"true\"\r\n                ? React.createElement(\"p\", { className: \"warning\" }, \"Please answer all of the multiple choice questions.\")\r\n                : null,\r\n            React.createElement(\"table\", { style: { width: 800, borderBottom: \"solid\" } },\r\n                React.createElement(\"tr\", null,\r\n                    React.createElement(\"th\", { style: { width: 500 } }, \"Question\"),\r\n                    React.createElement(\"th\", { style: { align: \"left\", width: 100 } }, \"Not at all\"),\r\n                    React.createElement(\"th\", { style: { align: \"left\", width: 100 } }, \"Partly\"),\r\n                    React.createElement(\"th\", { style: { align: \"left\", width: 100 } }, \"Very much\"))),\r\n            React.createElement(\"table\", { style: { width: 800 } }, questions),\r\n            React.createElement(\"br\", null),\r\n            React.createElement(\"div\", { className: \"question-wrapper\", style: { width: 800 } },\r\n                React.createElement(\"label\", { htmlFor: \"comments\" },\r\n                    \"Optional feedback: \",\r\n                    freeformPrompt),\r\n                React.createElement(\"br\", null),\r\n                React.createElement(\"textarea\", { rows: 5, cols: 50, id: \"comments\", name: \"comments\", onChange: this.onChange })),\r\n            React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: this.onClick }, \"Submit Survey and Continue\")));\r\n    };\r\n    return Survey;\r\n}(React.Component));\r\nexports.default = Survey;\r\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar Demographics = /** @class */ (function (_super) {\r\n    __extends(Demographics, _super);\r\n    function Demographics(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.onChange = _this.onChange.bind(_this);\r\n        _this.onClick = _this.onClick.bind(_this);\r\n        _this.state = {\r\n            age: \"\",\r\n            computer: undefined,\r\n            education: \"N\",\r\n            gender: \"N\",\r\n            occupation: \"\",\r\n            viz: undefined,\r\n            warn: \"false\"\r\n        };\r\n        return _this;\r\n    }\r\n    Demographics.prototype.onChange = function (event) {\r\n        var _a;\r\n        this.setState((_a = {}, _a[event.target.name] = event.target.value, _a));\r\n    };\r\n    Demographics.prototype.onClick = function () {\r\n        // check for null\r\n        var _a = this.state, age = _a.age, computer = _a.computer, occupation = _a.occupation, viz = _a.viz;\r\n        if (age.length === 0 || computer === undefined || occupation.length === 0 || viz === undefined) {\r\n            this.setState({ warn: \"true\" });\r\n        }\r\n        else {\r\n            this.props.onClick(this.state);\r\n        }\r\n    };\r\n    Demographics.prototype.render = function () {\r\n        var _a = this.state, age = _a.age, computer = _a.computer, education = _a.education, gender = _a.gender, occupation = _a.occupation, viz = _a.viz;\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"h3\", null, \"Demographic Survey\"),\r\n            React.createElement(\"p\", null, \"Please fill out this brief survey to help us better understand the background of our participants. Your individual response to this survey will not be reported, but rather anonymized and aggregated together with the rest of the participant population.\"),\r\n            this.state.warn === \"true\"\r\n                ? React.createElement(\"p\", { className: \"warning\" }, \"Please answer all of the questions.\")\r\n                : null,\r\n            React.createElement(\"div\", { className: \"question-wrapper\" },\r\n                React.createElement(\"label\", { htmlFor: \"age\" },\r\n                    React.createElement(\"strong\", null, \"1.\"),\r\n                    \" Your Age:\"),\r\n                React.createElement(\"input\", { type: \"text\", id: \"age\", name: \"age\", value: age, onChange: this.onChange, required: true })),\r\n            React.createElement(\"div\", { className: \"question-wrapper\" },\r\n                React.createElement(\"label\", { htmlFor: \"gender\" },\r\n                    React.createElement(\"strong\", null, \"2.\"),\r\n                    \" Your Gender:\"),\r\n                React.createElement(\"select\", { id: \"gender\", name: \"gender\", value: gender, onChange: this.onChange, required: true },\r\n                    React.createElement(\"option\", { value: \"N\" }, \"Decline to state\"),\r\n                    React.createElement(\"option\", { value: \"M\" }, \"Male\"),\r\n                    React.createElement(\"option\", { value: \"F\" }, \"Female\"),\r\n                    React.createElement(\"option\", { value: \"O\" }, \"Other\"))),\r\n            React.createElement(\"div\", { className: \"question-wrapper\" },\r\n                React.createElement(\"label\", { htmlFor: \"education\" },\r\n                    React.createElement(\"strong\", null, \"3.\"),\r\n                    \" What is the highest educational degree you have earned?:\"),\r\n                React.createElement(\"select\", { id: \"education\", name: \"education\", value: education, onChange: this.onChange, required: true },\r\n                    React.createElement(\"option\", { value: \"N\" }, \"Decline to state\"),\r\n                    React.createElement(\"option\", { value: \"Middle\" }, \"Middle School Diploma\"),\r\n                    React.createElement(\"option\", { value: \"High\" }, \"High School Diploma\"),\r\n                    React.createElement(\"option\", { value: \"Bachelors\" }, \"Bachelor's Degree\"),\r\n                    React.createElement(\"option\", { value: \"Masters\" }, \"Master's Degree\"),\r\n                    React.createElement(\"option\", { value: \"Doctorate\" }, \"Doctorate Degree\"))),\r\n            React.createElement(\"div\", { className: \"question-wrapper\" },\r\n                React.createElement(\"label\", { htmlFor: \"occupation\" },\r\n                    React.createElement(\"strong\", null, \"4.\"),\r\n                    \" Your Occupation:\"),\r\n                React.createElement(\"input\", { type: \"text\", id: \"occupation\", name: \"occupation\", value: occupation, onChange: this.onChange, required: true })),\r\n            React.createElement(\"div\", { className: \"question-wrapper\" },\r\n                React.createElement(\"label\", { htmlFor: \"computer\" },\r\n                    React.createElement(\"strong\", null, \"5.\"),\r\n                    \" How often do you use a computer on a typical week?:\"),\r\n                React.createElement(\"div\", { className: \"radio-button-wrapper\" },\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"computer\", value: \"1\", checked: computer === \"1\", onChange: this.onChange, required: true }),\r\n                        \" Never\"),\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"computer\", value: \"2\", checked: computer === \"2\", onChange: this.onChange }),\r\n                        \" Rarely\"),\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"computer\", value: \"3\", checked: computer === \"3\", onChange: this.onChange }),\r\n                        \" Sometimes\"),\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"computer\", value: \"4\", checked: computer === \"4\", onChange: this.onChange }),\r\n                        \" Often\"),\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"computer\", value: \"5\", checked: computer === \"5\", onChange: this.onChange }),\r\n                        \" Always\"))),\r\n            React.createElement(\"div\", { className: \"question-wrapper\" },\r\n                React.createElement(\"label\", { htmlFor: \"viz\" },\r\n                    React.createElement(\"strong\", null, \"6.\"),\r\n                    \" How often do you interact with data visualizations on a typical week? (e.g. tables, charts, graphs):\"),\r\n                React.createElement(\"div\", { className: \"radio-button-wrapper\" },\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"viz\", value: \"1\", checked: viz === \"1\", onChange: this.onChange, required: true }),\r\n                        \" Never\"),\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"viz\", value: \"2\", checked: viz === \"2\", onChange: this.onChange }),\r\n                        \" Rarely\"),\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"viz\", value: \"3\", checked: viz === \"3\", onChange: this.onChange }),\r\n                        \" Sometimes\"),\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"viz\", value: \"4\", checked: viz === \"4\", onChange: this.onChange }),\r\n                        \" Often\"),\r\n                    React.createElement(\"label\", null,\r\n                        React.createElement(\"input\", { type: \"radio\", name: \"viz\", value: \"5\", checked: viz === \"5\", onChange: this.onChange }),\r\n                        \" Always\"))),\r\n            React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: this.onClick }, \"Complete HIT\")));\r\n    };\r\n    return Demographics;\r\n}(React.Component));\r\nexports.default = Demographics;\r\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar ScrubberView_1 = __webpack_require__(11);\r\nvar TaskQuestion_1 = __webpack_require__(31);\r\nvar experimentQAs_1 = __webpack_require__(7);\r\nvar setup_1 = __webpack_require__(1);\r\nvar config_1 = __webpack_require__(2);\r\nvar logHelper_1 = __webpack_require__(32);\r\nvar TaskOrTrainingContainer = /** @class */ (function (_super) {\r\n    __extends(TaskOrTrainingContainer, _super);\r\n    function TaskOrTrainingContainer(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.setControl = _this.setControl.bind(_this);\r\n        _this.nextTask = _this.nextTask.bind(_this);\r\n        _this.state = {\r\n            moneyEarned: props.isTraining ? 0 : config_1.TaskReward * experimentQAs_1.trainingQA.length,\r\n            step: 0,\r\n            control: true,\r\n        };\r\n        // this is a bit messy but oh well\r\n        // bind diel with control\r\n        setup_1.diel.BindFreeze(_this.setControl);\r\n        return _this;\r\n    }\r\n    TaskOrTrainingContainer.prototype.setControl = function (control) {\r\n        this.setState({ control: control });\r\n    };\r\n    TaskOrTrainingContainer.prototype.nextTask = function () {\r\n        // this is for logging and diel bookkeeping\r\n        logHelper_1.LoggedTablesForAnalysis.map(function (v) {\r\n            // in theory anything that has cross dependencies\r\n            // not very clean but don't really to be right now\r\n            gpaas.logData({\r\n                type: \"table\",\r\n                name: v,\r\n                values: setup_1.diel.GetLogs(v)\r\n            });\r\n        });\r\n        var length = this.props.isTraining ? experimentQAs_1.trainingQA.length : experimentQAs_1.taskQA.length;\r\n        var isFinalStep = this.state.step === length - 1;\r\n        // if (isFinalStep) {\r\n        //   gpaas.logData({\r\n        //     type: \"table\",\r\n        //     name: \"taskInfo\",\r\n        //     values: diel.GetLogs(\"taskInfo\")\r\n        //   });\r\n        // }\r\n        gpaas.nextTask();\r\n        setup_1.diel.ClearHistory();\r\n        // this is for control flow\r\n        if (isFinalStep) {\r\n            this.props.finish();\r\n            return;\r\n        }\r\n        else {\r\n            this.setState(function (prev) {\r\n                return {\r\n                    step: prev.step + 1,\r\n                    moneyEarned: prev.moneyEarned + config_1.TaskReward\r\n                };\r\n            });\r\n        }\r\n    };\r\n    TaskOrTrainingContainer.prototype.render = function () {\r\n        var _this = this;\r\n        var isTraining = this.props.isTraining;\r\n        var _a = this.state, step = _a.step, moneyEarned = _a.moneyEarned;\r\n        // lets feed some fake data into the set\r\n        var dashboard = React.createElement(ScrubberView_1.default, { showIntro: isTraining });\r\n        var qA = React.createElement(TaskQuestion_1.default, { isTraining: isTraining, question: this.props.isTraining ? experimentQAs_1.trainingQA[step] : experimentQAs_1.taskQA[step], nextTask: this.nextTask });\r\n        // style={{float: \"left\"}}\r\n        // using lineheight to align the button and the text\r\n        return React.createElement(React.Fragment, null,\r\n            dashboard,\r\n            React.createElement(\"div\", { className: \"task-container\" },\r\n                React.createElement(\"div\", { style: { textAlign: \"center\" } },\r\n                    React.createElement(\"button\", { className: \"general-btn exit-btn\", onClick: function () {\r\n                            var r = confirm(\"Are you sure you want to leave?\");\r\n                            if (r === true) {\r\n                                _this.props.cancel();\r\n                            } // otherwise do nothing\r\n                        } },\r\n                        \"Finish and claim current reward of $\",\r\n                        moneyEarned.toFixed(2))),\r\n                qA));\r\n    };\r\n    return TaskOrTrainingContainer;\r\n}(React.Component));\r\nexports.default = TaskOrTrainingContainer;\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar d3 = __webpack_require__(6);\r\nvar ResetButton_1 = __webpack_require__(12);\r\nvar setup_1 = __webpack_require__(1);\r\nvar chartHelper_1 = __webpack_require__(4);\r\nvar LinearChartHelper_1 = __webpack_require__(25);\r\nvar CategoricalChartHelper_1 = __webpack_require__(26);\r\nvar tutorialMaterial_1 = __webpack_require__(5);\r\nvar BarChart = /** @class */ (function (_super) {\r\n    __extends(BarChart, _super);\r\n    function BarChart(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.refreshSelection = _this.refreshSelection.bind(_this);\r\n        _this.refreshData = _this.refreshData.bind(_this);\r\n        _this.refreshIsLoading = _this.refreshIsLoading.bind(_this);\r\n        _this.state = {\r\n            baseData: setup_1.diel.GetStaticView(props.chart + \"ChartInitData\"),\r\n            isLoading: { status: 1 }\r\n        };\r\n        return _this;\r\n    }\r\n    // setBaseData(baseData: BarChartDataType) {\r\n    //   this.setState({ baseData });\r\n    // }\r\n    BarChart.prototype.refreshSelection = function (selection) {\r\n        this.setState({ selection: selection });\r\n    };\r\n    BarChart.prototype.refreshData = function (data) {\r\n        this.setState({\r\n            data: data\r\n        });\r\n    };\r\n    BarChart.prototype.refreshIsLoading = function (isLoading) {\r\n        this.setState({\r\n            isLoading: isLoading\r\n        });\r\n    };\r\n    BarChart.prototype.componentDidMount = function () {\r\n        var chart = this.props.chart;\r\n        setup_1.diel.BindOutput(chart + \"ChartDataView\", this.refreshData);\r\n        setup_1.diel.BindOutput(chart + \"ChartSelection\", this.refreshSelection, { singleRow: true });\r\n        setup_1.diel.BindOutput(chart + \"ChartIsLoading\", this.refreshIsLoading, { singleRow: true });\r\n    };\r\n    BarChart.prototype.render = function () {\r\n        // yLabel\r\n        var _a = this.props, chart = _a.chart, xLabel = _a.xLabel, isCategorical = _a.isCategorical, clipped = _a.clipped;\r\n        if (!(this.state && this.state.baseData) || (this.state.baseData.length === 0)) {\r\n            throw new Error(\"Data for chart \" + chart + \" should be here already\");\r\n        }\r\n        // should refactor the following...\r\n        var _b = chartHelper_1.LayoutInfo[chart], marginTop = _b.marginTop, marginRight = _b.marginRight, marginLeft = _b.marginLeft, marginBottom = _b.marginBottom;\r\n        var _c = chartHelper_1.LayoutInfo[chart], width = _c.width, height = _c.height, verticalOrientation = _c.verticalOrientation;\r\n        var _d = this.state, baseData = _d.baseData, selection = _d.selection, data = _d.data, isLoading = _d.isLoading;\r\n        var chartWidth = width - marginLeft - marginRight;\r\n        var chartHeight = height - marginTop - marginBottom;\r\n        var content;\r\n        var r;\r\n        if (isCategorical) {\r\n            r = CategoricalChartHelper_1.CategoricalChartHelper({\r\n                baseData: baseData, data: data, selection: selection, chart: chart, chartWidth: chartWidth, chartHeight: chartHeight, clipped: clipped\r\n            });\r\n        }\r\n        else {\r\n            r = LinearChartHelper_1.linearChartHelper({\r\n                baseData: baseData, data: data, selection: selection, chart: chart, chartWidth: chartWidth, chartHeight: chartHeight, clipped: clipped\r\n            });\r\n        }\r\n        // brushing related\r\n        var brush = d3.brushX()\r\n            .extent([[0, 0], [chartWidth, chartHeight]])\r\n            .on(\"start\", function () {\r\n            // TODO\r\n            // console.log(\"brush started\");\r\n        })\r\n            .on(\"end\", function () {\r\n            // see https://github.com/d3/d3-brush/issues/10\r\n            if (!d3.event.sourceEvent)\r\n                return; // Only transition after input.\r\n            if (!d3.event.selection)\r\n                return; // Ignore empty selections.\r\n            var s = d3.brushSelection(this);\r\n            if (s !== null) {\r\n                r.brushFn(Math.min(s[0], s[1]), Math.max(s[0], s[1]));\r\n            }\r\n            d3.select(this).call(brush.move, null);\r\n        });\r\n        var brushDiv = React.createElement(\"g\", { ref: function (g) { return d3.select(g).call(brush); } });\r\n        // axis rlated\r\n        var tickNum = 5;\r\n        var maxYvalue = this.props.clipped\r\n            ? tickNum\r\n            : this.state.data\r\n                ? Math.min(Math.max.apply(Math, this.state.data.map(function (d) { return d.y; })), tickNum)\r\n                : tickNum;\r\n        var xTicks = baseData.length;\r\n        var xAxis = d3.axisBottom(r.x).ticks(xTicks);\r\n        var yAxis = d3.axisLeft(r.y).ticks(maxYvalue, \"d\").tickSizeOuter(0);\r\n        var tickXClassName = verticalOrientation ? \"\" : \"rotate90x\";\r\n        var tickYClassName = verticalOrientation ? \"\" : \"rotate90y\";\r\n        var ticks = React.createElement(React.Fragment, null,\r\n            React.createElement(\"g\", { ref: function (g) { d3.select(g).call(yAxis); }, transform: verticalOrientation ? \"\" : \"translate(\" + chartWidth + \", 0)\", className: tickXClassName }),\r\n            React.createElement(\"g\", { ref: function (g) { d3.select(g).call(xAxis); }, transform: \"translate(0,\" + chartHeight + \")\", className: tickYClassName }));\r\n        //         <text\r\n        //   className=\"chart-label\"\r\n        //   x={verticalOrientation ? 10 : height / 2}\r\n        //   y={verticalOrientation ? height / 2 : width}\r\n        //   transform={verticalOrientation ? `rotate(-90, ${10}, ${height / 2})` : \"\" }\r\n        //   textAnchor=\"middle\"\r\n        // >{yLabel}\r\n        // </text>\r\n        var axesLabels = (React.createElement(\"g\", null,\r\n            React.createElement(\"text\", { className: \"chart-label\", x: verticalOrientation ? (chartWidth / 2) + marginLeft : 10, y: verticalOrientation ? height - 5 : width / 2, transform: verticalOrientation ? \"\" : \"rotate(-90, \" + 10 + \", \" + width / 2 + \")\", textAnchor: \"middle\" },\r\n                \" \",\r\n                xLabel)));\r\n        // if (DEBUG) {\r\n        //   r.rectsSpec.map(d => {\r\n        //     if (isNaN(d.y)) {\r\n        //       throw\r\n        //     }\r\n        //   })\r\n        // }\r\n        var xFilterBars = r.rectsSpec.map(function (d) { return React.createElement(\"rect\", { className: d.className ? d.className : \"select-bars\", x: d.x, y: d.y, width: d.barWidth, height: chartHeight - d.y, fill: d.color, onClick: d.onClick }); });\r\n        // put them together\r\n        var wrap;\r\n        var transformedWidth = width;\r\n        var transformedHeight = height;\r\n        // note that brush need to have lower z-index because otherwise clicking would not be captured.\r\n        var innerContent = React.createElement(\"g\", { transform: \"translate(\" + marginLeft + \", \" + marginTop + \")\" },\r\n            ticks,\r\n            brushDiv,\r\n            xFilterBars);\r\n        if (verticalOrientation) {\r\n            wrap = innerContent;\r\n        }\r\n        else {\r\n            transformedWidth = height;\r\n            transformedHeight = width;\r\n            // ${height / 2} apparently 0 works well\r\n            wrap = React.createElement(\"g\", { transform: \"translate(\" + transformedWidth + \", 0) rotate(90)\" }, innerContent);\r\n        }\r\n        content = React.createElement(\"svg\", { width: transformedWidth, height: transformedHeight, className: \"chart-svg\" },\r\n            wrap,\r\n            axesLabels);\r\n        var loadingClass = (isLoading.status === 1) ? \"indicatorLine\" : \"\";\r\n        var selectionText;\r\n        if (isCategorical) {\r\n            selectionText = this.state.selection ?\r\n                this.state.selection.selection\r\n                : null;\r\n            selectionText = selectionText\r\n                ? selectionText.length > 10\r\n                    ? selectionText.slice(0, 10) + \"...\"\r\n                    : selectionText\r\n                : null;\r\n        }\r\n        else {\r\n            // get it if it's the same value\r\n            if (this.state.selection) {\r\n                var low = this.state.selection.low;\r\n                var high = this.state.selection.high;\r\n                if (low) {\r\n                    if (low === high) {\r\n                        selectionText = \"\" + low;\r\n                    }\r\n                    else {\r\n                        selectionText = low + \" to \" + high;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return (React.createElement(\"div\", { className: \"chart-container bar-chart\" },\r\n            React.createElement(\"div\", { style: { height: 20, overflow: \"hidden\" } },\r\n                React.createElement(\"p\", { className: \"chart-filter\" }, selectionText ? \"selected \" + selectionText : \" \")),\r\n            content,\r\n            React.createElement(\"div\", { style: { height: 5 }, className: loadingClass }),\r\n            React.createElement(\"div\", { \"data-step\": chart === \"day\" ? tutorialMaterial_1.IntroSteps.indexOf(\"resetBtn\") + 1 : null, \"data-intro\": chart === \"day\" ? tutorialMaterial_1.IntroSpec.get(\"resetBtn\") : null },\r\n                React.createElement(ResetButton_1.ResetButton, { width: transformedWidth, disabled: !r.hasSelection, chart: chart, selection: selectionText }))));\r\n    };\r\n    BarChart.defaultProps = chartHelper_1.DefaultChartProps;\r\n    return BarChart;\r\n}(React.Component));\r\nexports.default = BarChart;\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar sql_js_1 = __webpack_require__(22);\r\nvar __1 = __webpack_require__(10);\r\nvar dbHelper_1 = __webpack_require__(8);\r\nvar dielHelper_1 = __webpack_require__(23);\r\nvar workerSetup_1 = __webpack_require__(24);\r\nvar config_1 = __webpack_require__(2);\r\nvar charts = [\"day\", \"carrier\", \"delays\", \"state\"];\r\nvar DBFile = {\r\n    training: {\r\n        main: config_1.FilePathPrefix + \"main_training.db\",\r\n        worker: config_1.FilePathPrefix + \"worker_training.db\"\r\n    },\r\n    task: {\r\n        main: config_1.FilePathPrefix + \"main_task.db\",\r\n        worker: config_1.FilePathPrefix + \"worker_task.db\"\r\n    }\r\n};\r\nvar defaultOuptConfig = { singleRow: false, notNull: false };\r\nvar Diel = /** @class */ (function () {\r\n    // public methods\r\n    function Diel() {\r\n        var _this = this;\r\n        this.LoadAll = function (mainFile, workerFile, shouldLoadPage) { return __awaiter(_this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        console.log(\"diel Load\", mainFile, workerFile);\r\n                        return [4 /*yield*/, this.loadMain(mainFile)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this.loadWorker(workerFile)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        workerSetup_1.setUpWorker(this.worker);\r\n                        // populates all the prepared statements\r\n                        this.setup();\r\n                        // calls react\r\n                        // if diel has been set up already\r\n                        // we need to retarget all the binds\r\n                        // basically find all the view names\r\n                        if (this.boundFns.length > 0) {\r\n                            this.boundFns.map(function (f) {\r\n                                f.s = _this.output.get(f.view);\r\n                            });\r\n                        }\r\n                        this.deadRequests = [];\r\n                        this.activeRequests = [];\r\n                        shouldLoadPage ? __1.loadPage() : null;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        this.loadMain = function (mainFile) { return __awaiter(_this, void 0, void 0, function () {\r\n            var response, bufferRaw;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        // if the current db is not null, close it\r\n                        if (this.db) {\r\n                            this.db.close();\r\n                        }\r\n                        return [4 /*yield*/, fetch(mainFile)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        return [4 /*yield*/, response.arrayBuffer()];\r\n                    case 2:\r\n                        bufferRaw = _a.sent();\r\n                        this.buffer = new Uint8Array(bufferRaw);\r\n                        this.db = new sql_js_1.Database(this.buffer);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        this.loadWorker = function (file) { return __awaiter(_this, void 0, void 0, function () {\r\n            var response, bufferRaw, buffer;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, fetch(file)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        return [4 /*yield*/, response.arrayBuffer()];\r\n                    case 2:\r\n                        bufferRaw = _a.sent();\r\n                        buffer = new Uint8Array(bufferRaw);\r\n                        this.worker.postMessage({\r\n                            id: \"opened\",\r\n                            action: \"open\",\r\n                            buffer: buffer,\r\n                        });\r\n                        this.workerLoaded = true;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        console.log(\"Diel initializing for training\");\r\n        this.LoadAll(DBFile.training.main, DBFile.training.worker, true);\r\n        this.worker = new Worker((config_1.IsProd ? \"./\" : \"./dist/\") + \"worker.sql.js\");\r\n        this.boundFns = [];\r\n        this.workerLoaded = false;\r\n        this.activeRequests = [];\r\n    }\r\n    // has to be done at run time since the react functions need to be constructed.\r\n    Diel.prototype.BindOutput = function (view, reactFn, cIn) {\r\n        if (cIn === void 0) { cIn = {}; }\r\n        // console.log(\"config\", cIn, view);\r\n        if (!this.output.has(view)) {\r\n            throw new Error(\"output not defined \" + view + \" \" + Array.from(this.output.keys()).join(\", \"));\r\n        }\r\n        // immtable assign...\r\n        var c = Object.assign({}, defaultOuptConfig, cIn);\r\n        // console.log(\"final config\", c);\r\n        this.boundFns.push({ view: view, s: this.output.get(view), f: reactFn, c: c });\r\n    };\r\n    // SetStateRefresh(f: () => void) {\r\n    //   this.stateRefresh = f;\r\n    // }\r\n    Diel.prototype.GetLogs = function (view) {\r\n        var s = this.logs.get(view);\r\n        if (!s) {\r\n            console.log(view + \" not found in diel logs\", this.logs);\r\n            throw new Error(view + \" not found in diel logs\");\r\n        }\r\n        s.bind({});\r\n        var r = [];\r\n        while (s.step()) {\r\n            r.push(s.getAsObject());\r\n        }\r\n        return r;\r\n    };\r\n    Diel.prototype.GetStaticView = function (view) {\r\n        var s = this.staticViews.get(view);\r\n        s.bind({});\r\n        var r = [];\r\n        while (s.step()) {\r\n            r.push(s.getAsObject());\r\n        }\r\n        if (r.length === 0) {\r\n            throw new Error(\"Static view \" + view + \" should not be empty\");\r\n        }\r\n        return r;\r\n    };\r\n    Diel.prototype.SetFreeze = function (v) {\r\n        this.frozen = v;\r\n        this.frozenBind(!v);\r\n    };\r\n    // hmm, this is not a bad pattern\r\n    // avoids the jumping around\r\n    Diel.prototype.BindFreeze = function (f) {\r\n        this.frozenBind = f;\r\n    };\r\n    /**\r\n     * @all: problematic to delete since there might be memory tasks with dependencies\r\n     */\r\n    Diel.prototype.ClearHistory = function () {\r\n        var _this = this;\r\n        // must be more recent that 10 seconds ago, as GC\r\n        this.deadRequests = this.deadRequests.concat(this.activeRequests).filter(function (r) { return r.ts > Date.now() - 10000; });\r\n        // console.log(\"timeouts right now\", this.deadRequests);\r\n        var tablesWithoutItxId = [\r\n            // non reactive state\r\n            \"eqChart_SP\",\r\n            // interactions whose itxId are different from those of the brushes\r\n            \"navigateItx\", \"deltaItx\", \"deleteItx\"\r\n        ];\r\n        tablesWithoutItxId.map(function (t) { return _this.db.run(\"delete from \" + t); });\r\n        var tablesWithItxId = [\r\n            // itx state programs\r\n            \"itxId_SP\", \"brushState_SP\", \"brushDep_SP\", \"dataParamHashes_SP\",\r\n            // data state programs\r\n            \"stateChartData\", \"dayChartData\", \"carrierChartData\",\r\n            \"delaysChartData\", \"chartDataAtomic\",\r\n            // brush has to be the last one due to foreign key issues\r\n            \"xBrushItx\",\r\n        ];\r\n        tablesWithItxId.map(function (t) {\r\n            // console.log(\"delteing\", t);\r\n            _this.db.run(\"delete from \" + t + \" where itxId > 4\");\r\n        });\r\n        // force refresh\r\n        this.tick()();\r\n    };\r\n    Diel.prototype.processInput = function (s, i) {\r\n        if (this.frozen) {\r\n            return;\r\n        }\r\n        var tsI = Object.assign({ $ts: dbHelper_1.timeNow() }, i);\r\n        s.run(tsI);\r\n    };\r\n    // the rest are private functions\r\n    Diel.prototype.setup = function () {\r\n        var _this = this;\r\n        var db = this.db;\r\n        db.run(\"PRAGMA foreign_keys = ON;\");\r\n        // must do this manually because bundling minimizes the function names...\r\n        db.create_function(\"tick\", this.tick());\r\n        db.create_function(\"workerGetChartDataView\", this.workerGetChartDataView());\r\n        db.create_function(\"workerShareItx\", this.workerShareItx());\r\n        db.create_function(\"timeNow\", dbHelper_1.timeNow);\r\n        db.create_function(\"log\", dbHelper_1.log);\r\n        db.create_function(\"hashCompare\", dbHelper_1.hashCompare);\r\n        this.input = {\r\n            xBrushItx: db.prepare(\"\\n        insert into xBrushItx (ts, chart, low, high, low2, high2, selection)\\n        values ($ts, $chart, $low, $high, $low2, $high2, $selection)\"),\r\n            navigateItx: db.prepare(\"\\n        insert into navigateItx (ts, xFilterItxId)\\n        values ($ts, $xFilterItxId)\"),\r\n            deltaItx: db.prepare(\"\\n        insert into deltaItx (ts, val)\\n        values ($ts, $val)\"),\r\n            deleteItx: db.prepare(\"\\n        insert into deleteItx (ts)\\n        values ($ts)\")\r\n        };\r\n        this.Input = {\r\n            xBrushItx: function (i) {\r\n                if (i.$low) {\r\n                    if (isNaN(i.$high) || isNaN(i.$low)) {\r\n                        throw new Error(\"number has to be defined\");\r\n                    }\r\n                }\r\n                _this.processInput(_this.input.xBrushItx, i);\r\n            },\r\n            navigateItx: function (i) {\r\n                _this.processInput(_this.input.navigateItx, i);\r\n            },\r\n            deltaItx: function (i) {\r\n                _this.processInput(_this.input.deltaItx, i);\r\n            },\r\n            deleteItx: function () {\r\n                _this.input.deleteItx.run({ $ts: dbHelper_1.timeNow() });\r\n            }\r\n        };\r\n        this.logData = {\r\n            eventLog: db.prepare(\"\\n        insert into eventLog (ts, eventName, parameter)\\n        values ($ts, $eventName, $parameter);\\n      \"),\r\n            taskInfo: db.prepare(\"\\n        insert into taskInfo (qId, taskType, isTraining)\\n        values ($qId, $taskType, $isTraining);\\n      \"),\r\n            taskTimes: db.prepare(\"\\n        insert into taskTimes (ts, qId, eventType)\\n        values ($ts, $qId, $eventType);\\n      \"),\r\n            answers: db.prepare(\"\\n        insert into answers (qId, answer, confidence, score, comment)\\n        values ($qId, $answer, $confidence, $score, $comment);\\n      \"),\r\n            memoryTask: db.prepare(\"\\n        insert into memoryTask (qId, linkedQId)\\n        values ($qId, $linkedQId);\\n      \")\r\n        };\r\n        // log data should not run process input which has freeze logic\r\n        this.LogData = {\r\n            eventLog: function (i) {\r\n                var tsI = Object.assign({ $ts: dbHelper_1.timeNow() }, i);\r\n                _this.logData.eventLog.run(tsI);\r\n            },\r\n            taskInfo: function (i) {\r\n                _this.logData.taskInfo.run(i);\r\n            },\r\n            taskTimes: function (i) {\r\n                var tsI = Object.assign({ $ts: dbHelper_1.timeNow() }, i);\r\n                _this.logData.taskTimes.run(tsI);\r\n            },\r\n            answers: function (i) {\r\n                _this.logData.answers.run(i);\r\n            },\r\n            memoryTask: function (i) {\r\n                _this.logData.memoryTask.run(i);\r\n            },\r\n        };\r\n        this.output = new Map();\r\n        // FIXME: when writing the parser, change this directly into code level\r\n        // since it's actually fixed at compile time\r\n        [\"ChartSelection\", \"ChartIsLoading\", \"ChartDataView\"].map(function (v) {\r\n            charts.map(function (c) {\r\n                var view = \"\" + c + v;\r\n                _this.output.set(view, db.prepare(\"select * from \" + view));\r\n            });\r\n        });\r\n        this.logs = new Map();\r\n        Diel.ItxLogsViews.map(function (v) { return _this.logs.set(v, db.prepare(\"select * from \" + v)); });\r\n        Diel.TaskLogsViews.map(function (v) { return _this.logs.set(v, db.prepare(\"select * from \" + v)); });\r\n        // one off ones\r\n        [\"loadingSummary\", \"focusItx\"].map(function (v) { return _this.output.set(v, db.prepare(\"select * from \" + v)); });\r\n        // static ones\r\n        this.staticViews = new Map();\r\n        charts.map(function (c) {\r\n            var view = c + \"ChartInitData\";\r\n            _this.staticViews.set(view, db.prepare(\"select * from \" + view));\r\n        });\r\n    };\r\n    // tick is invoked inside sql (though it can be invoked here sort of as well)\r\n    Diel.prototype.tick = function () {\r\n        var boundFns = this.boundFns;\r\n        var runOutput = this.runOutput;\r\n        return function () {\r\n            // console.log(\"ticked!\", boundFns);\r\n            boundFns.map(function (b) {\r\n                runOutput(b);\r\n            });\r\n        };\r\n    };\r\n    Diel.prototype.Sanity = function () {\r\n        // does some basic sanity check to help developer against dumb mistakes\r\n        // TODO: first is to make sure that all output views are actually bound to something.\r\n    };\r\n    // temp hack\r\n    Diel.prototype.IsDuringTask = function () {\r\n        // console.log(d(`select * from taskTimes`));\r\n        var r = this.db.exec(\"select count(*) from taskTimes\");\r\n        return {\r\n            firstTime: r[0].values[0][0] === 1,\r\n            duringTask: (r[0].values[0][0] % 2) === 1\r\n        };\r\n    };\r\n    Diel.prototype.exec = function (sql) {\r\n        // these should be internal DIEL use\r\n        // e.g., worker code should also be internal\r\n        // console.log(\"DIEL exec\", sql);\r\n        return this.db.exec(sql);\r\n    };\r\n    Diel.prototype.workerShareItx = function () {\r\n        var worker = this.worker;\r\n        return function () {\r\n            // we are going to share currentItx\r\n            // a bit hard coded; need to think about the IR for moving tables around\r\n            var filterQuery = \"SELECT * FROM currentItx\";\r\n            var shareSql = dielHelper_1.generateSQLForTableCopy(\"currentItx\", filterQuery);\r\n            worker.postMessage({\r\n                id: \"updateCurrentItx\",\r\n                action: \"exec\",\r\n                sql: shareSql\r\n            });\r\n        };\r\n    };\r\n    Diel.prototype.workerGetChartDataView = function () {\r\n        var _this = this;\r\n        var worker = this.worker;\r\n        return function (itxId, chart) {\r\n            var hash = dbHelper_1.timeNow() + \"-\" + itxId + \"=\" + chart;\r\n            _this.activeRequests.push({ id: hash, ts: Date.now() });\r\n            worker.postMessage({\r\n                id: \"share:\" + itxId + \":\" + chart + \":\" + hash,\r\n                action: \"exec\",\r\n                sql: \"SELECT * FROM \" + chart + \"ChartDataView;\"\r\n            });\r\n        };\r\n    };\r\n    // only because sql.js does not support user defined aggregates right now\r\n    Diel.prototype.runOutput = function (b) {\r\n        // s: Statement, reactFn: ReactFunc, singleRow: boolean) {\r\n        // takes a statement and a react function\r\n        // console.log(\"updating view\", b.view);\r\n        var s = b.s, f = b.f, c = b.c;\r\n        s.bind({});\r\n        var r = [];\r\n        while (s.step()) {\r\n            r.push(s.getAsObject());\r\n        }\r\n        if (c.notNull && r.length === 0) {\r\n            throw new Error(b.view + \" should not be null\");\r\n        }\r\n        if (r.length > 0 && c.singleRow) {\r\n            f(r[0]);\r\n        }\r\n        else {\r\n            f(r);\r\n        }\r\n    };\r\n    Diel.prototype.ChangeToTask = function () {\r\n        this.LoadAll(DBFile.task.main, DBFile.task.worker, false);\r\n    };\r\n    Diel.prototype.TrainingZeroCount = function () {\r\n        // check if the score for answers are ALL zero\r\n        var r = this.db.exec(\"select count(*) from answers where score = 0\");\r\n        return r[0].values[0][0];\r\n    };\r\n    Diel.prototype.downloadDB = function () {\r\n        // console.log(\"download session\");\r\n        var dRaw = this.db.export();\r\n        var blob = new Blob([dRaw]);\r\n        dbHelper_1.downloadHelper(blob, \"session\");\r\n    };\r\n    Diel.prototype.downloadWorkerDB = function () {\r\n        this.worker.postMessage({\r\n            id: \"download\",\r\n            action: \"export\",\r\n        });\r\n    };\r\n    Diel.ItxLogsViews = [\r\n        // state programs\r\n        \"itxId_SP\", \"brushState_SP\", \"brushDep_SP\",\r\n        \"eqChart_SP\", \"chartDataAtomic\",\r\n        \"eventLog\",\r\n        // interactions\r\n        \"navigateItx\", \"deltaItx\", \"deleteItx\",\r\n        \"xBrushItx\"\r\n    ];\r\n    // these will only be deleted when the training switches to task\r\n    // so each time this is sent to ClearHistory, it's not cleared\r\n    // no need to be removed since the entire DB will be dropped\r\n    Diel.TaskLogsViews = [\r\n        // task info\r\n        \"memoryTask\", \"taskTimes\", \"answers\", \"taskInfo\",\r\n    ];\r\n    return Diel;\r\n}());\r\nexports.default = Diel;\r\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\nmodule.exports = SQL;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar setup_1 = __webpack_require__(1);\r\nvar dbHelper_1 = __webpack_require__(8);\r\n// the input should already be from a group_concat\r\n// they can just specify the remote\r\n// to add the string properly I would need some AST representation for the query definition...\r\n// just going to add quotes to EVERYTHING, since sqlite seems to do the cohersion properly from string to numbers anyways...\r\nfunction generateSQLForTableCopy(sharedTable, shareQuery) {\r\n    var tableRes = setup_1.diel.exec(shareQuery)[0];\r\n    dbHelper_1.assertQueryHasResult(tableRes, \"currentItx\");\r\n    // FIXME: have more robust typing here...\r\n    // need to make null explicit here...\r\n    // selection needs to have a quote around it...\r\n    var values = tableRes.values.map(function (d) { return \"(\" + d.map(function (v) { return (v === null) ? \"null\" : \"'\" + v + \"'\"; }).join(\", \") + \")\"; });\r\n    var shareSql = \"\\n    DELETE from \" + sharedTable + \";\\n    INSERT INTO \" + sharedTable + \" VALUES \" + values + \";\";\r\n    return shareSql;\r\n}\r\nexports.generateSQLForTableCopy = generateSQLForTableCopy;\r\nfunction dW(sql) {\r\n    setup_1.diel.worker.postMessage({\r\n        id: \"print\",\r\n        action: \"exec\",\r\n        sql: sql\r\n    });\r\n}\r\nexports.dW = dW;\r\nwindow.dW = dW;\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(3);\r\nvar setup_1 = __webpack_require__(1);\r\nvar dbHelper_1 = __webpack_require__(8);\r\nvar config_1 = __webpack_require__(2);\r\nfunction setUpWorker(worker) {\r\n    worker.onmessage = function (event) {\r\n        setup_1.diel.exec(\"insert into workerCmds values ('\" + event.data.id + \"')\");\r\n        var args = event.data.id.split(\":\");\r\n        var cmd = args[0];\r\n        switch (cmd) {\r\n            case \"download\": {\r\n                var blob = new Blob([event.data.buffer]);\r\n                dbHelper_1.downloadHelper(blob, \"workerSession\");\r\n                break;\r\n            }\r\n            case \"share\": {\r\n                var itxId_1 = args[1];\r\n                var chart_1 = args[2];\r\n                var hash_1 = args[3];\r\n                var sql_1 = \"\";\r\n                // TODO: deal with pagination later\r\n                if (event.data.results[0] && event.data.results[0].values.length > 0) {\r\n                    var values = event.data.results[0].values;\r\n                    // TODO: automtically check for type...\r\n                    var fn = void 0;\r\n                    if (chart_1 === \"carrier\" || chart_1 === \"state\") {\r\n                        fn = function (r) { return \"(\" + itxId_1 + \", '\" + r[0] + \"', \" + r[1] + \")\"; };\r\n                    }\r\n                    else if (chart_1 === \"delays\") {\r\n                        fn = function (r) { return \"(\" + itxId_1 + \", \" + r[0] + \", \" + r[1] + \", \" + r[2] + \")\"; };\r\n                    }\r\n                    else {\r\n                        fn = function (r) { return \"(\" + itxId_1 + \", \" + r[0] + \", \" + r[1] + \")\"; };\r\n                    }\r\n                    sql_1 = \"INSERT INTO \" + chart_1 + \"ChartData VALUES \" + values.map(fn) + \";\";\r\n                }\r\n                else {\r\n                    console.log(\"No result for\", chart_1, itxId_1);\r\n                }\r\n                sql_1 += \"\\nINSERT INTO chartDataAtomic VALUES (\" + dbHelper_1.timeNow() + \", \" + itxId_1 + \", '\" + chart_1 + \"');\";\r\n                window.setTimeout(function () {\r\n                    if (setup_1.diel.deadRequests.indexOf(hash_1) > -1) {\r\n                        console.log(\"expired\", itxId_1, chart_1);\r\n                        return;\r\n                    }\r\n                    else {\r\n                        setup_1.diel.exec(sql_1);\r\n                    }\r\n                }, helper_1.getLatency(config_1.ExperimentLatencyOption));\r\n                break;\r\n            }\r\n            /**\r\n             * helper calls\r\n             */\r\n            case \"print\": {\r\n                var r_1 = event.data.results;\r\n                if (r_1 && r_1.length > 0) {\r\n                    r_1[0].values.map(function (v) {\r\n                        v.map(function (c, i) {\r\n                            if (r_1[0].columns[i] === \"ts\") {\r\n                                c = new Date(c).toDateString();\r\n                            }\r\n                        });\r\n                    });\r\n                    console.log(\"Printing results\");\r\n                    console.log(r_1[0].columns.join(\"\\t\"));\r\n                    console.log(JSON.stringify(r_1[0].values).replace(/\\],\\[/g, \"\\n\").replace(\"[[\", \"\").replace(\"]]\", \"\").replace(/,/g, \"\\t\"));\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    };\r\n}\r\nexports.setUpWorker = setUpWorker;\r\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar d3 = __webpack_require__(6);\r\nvar setup_1 = __webpack_require__(1);\r\nvar chartHelper_1 = __webpack_require__(4);\r\nfunction linearChartHelper(p) {\r\n    var baseData = p.baseData, selection = p.selection, data = p.data, chart = p.chart, chartWidth = p.chartWidth, chartHeight = p.chartHeight, clipped = p.clipped;\r\n    var unclippable = (!clipped) && data && (data.length > 0);\r\n    var yMax = unclippable ? d3.max(data, function (d) { return d.y; }) : d3.max(baseData, function (d) { return d.y; });\r\n    var y = d3.scaleLinear().rangeRound([chartHeight, 0]).domain([0, yMax]);\r\n    var extent = d3.extent(baseData, function (d) { return d.x; });\r\n    var numBars = (extent[1] - extent[0] + 1);\r\n    var xDomain = [extent[0], extent[1] + (extent[1] - extent[0]) / numBars];\r\n    var barWidth = chartWidth * 0.6 / numBars;\r\n    var x = d3.scaleLinear().rangeRound([1, chartWidth]).domain(xDomain);\r\n    var brushFn = function (x1, x2) {\r\n        var v1 = Math.round(x.invert(x1));\r\n        var v2 = Math.floor(x.invert(x2));\r\n        console.log(\"brush data\", v1, v2);\r\n        setup_1.diel.Input.xBrushItx({ $low: v1, $high: v2, $chart: chart });\r\n    };\r\n    var clickFn = function (x) { return function () { return setup_1.diel.Input.xBrushItx({ $low: x, $high: x, $chart: chart }); }; };\r\n    var rectsSpec = [];\r\n    var hasSelection = (selection && selection.low) ? true : false;\r\n    // <rect\r\n    // className=\"chart-label\"\r\n    // x={x(selection.low)}\r\n    // y={y(selection.high2)}\r\n    // width={x(selection.high) - x(selection.low)}\r\n    // height={Math.abs(y(selection.high2) - y(selection.low2))}\r\n    // fill={\"gray\"}\r\n    // fill-opacity=\"0.3\"\r\n    // ></rect>\r\n    unclippable ? [] : baseData.map(function (d) {\r\n        var color = selection\r\n            ? (d.x <= selection.high && d.x >= selection.low)\r\n                ? chartHelper_1.darkGray\r\n                : chartHelper_1.lightGray\r\n            : chartHelper_1.lightGray;\r\n        rectsSpec.push({\r\n            x: x(d.x),\r\n            y: y(d.y),\r\n            color: color,\r\n            onClick: clickFn(d.x),\r\n            barWidth: barWidth,\r\n        });\r\n    });\r\n    if (data) {\r\n        data.filter(function (d) { return d.y > 0; }).map(function (d) {\r\n            var color = selection\r\n                ? (d.x <= selection.high && d.x >= selection.low)\r\n                    ? chartHelper_1.darkBlue\r\n                    : chartHelper_1.lightBlue\r\n                : chartHelper_1.lightBlue;\r\n            rectsSpec.push({\r\n                x: x(d.x),\r\n                y: y(d.y),\r\n                color: color,\r\n                onClick: clickFn(d.x),\r\n                barWidth: barWidth,\r\n            });\r\n        });\r\n    }\r\n    if (hasSelection) {\r\n        // this has to be pushed back otherwise click are going to be hard to register...\r\n        rectsSpec.push({\r\n            className: \"selector\",\r\n            x: Math.max(x(selection.low) - 5, 0),\r\n            y: 0,\r\n            barWidth: x(selection.high) - x(selection.low) + barWidth + 10,\r\n            color: chartHelper_1.brushColor,\r\n            onClick: null\r\n        });\r\n    }\r\n    // console.log(`rectspec is`, chartWidth, barWidth, JSON.stringify(rectsSpec));\r\n    return {\r\n        brushFn: brushFn,\r\n        rectsSpec: rectsSpec,\r\n        x: x,\r\n        y: y,\r\n        hasSelection: hasSelection\r\n    };\r\n}\r\nexports.linearChartHelper = linearChartHelper;\r\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar d3 = __webpack_require__(6);\r\nvar setup_1 = __webpack_require__(1);\r\nvar chartHelper_1 = __webpack_require__(4);\r\nfunction CategoricalChartHelper(p) {\r\n    var baseData = p.baseData, selection = p.selection, data = p.data, chart = p.chart, chartWidth = p.chartWidth, chartHeight = p.chartHeight, clipped = p.clipped;\r\n    var unclippable = (!clipped) && data && (data.length > 0);\r\n    // scale realted\r\n    var yMax = unclippable ? d3.max(data, function (d) { return d.y; }) : d3.max(baseData, function (d) { return d.y; });\r\n    var y = d3.scaleLinear().rangeRound([chartHeight, 0]).domain([0, yMax]);\r\n    var xDomain = baseData.map(function (d) { return d.x; });\r\n    var x = d3.scaleBand().rangeRound([0, chartWidth]).padding(0.4).domain(xDomain);\r\n    // brushing related\r\n    var brushFn = function (x1, x2) {\r\n        var selectionOrdinal = xDomain.filter(function (v) { return x(v) && (x(v) < x2) && (x(v) > x1); }).join(\",\");\r\n        setup_1.diel.Input.xBrushItx({ $selection: selectionOrdinal, $chart: chart });\r\n    };\r\n    var clickFn = function (x) { return function () { return setup_1.diel.Input.xBrushItx({ $selection: x, $chart: chart }); }; };\r\n    var barWidth = x.bandwidth();\r\n    var rectsSpec = [];\r\n    var brushBounds = [];\r\n    if (selection && selection.selection) {\r\n        selection.selection.split(\",\").map(function (s) { return brushBounds.push(x(s)); });\r\n    }\r\n    // if the value is too low, then also clip on a background selection, but only at the height of half\r\n    baseData.map(function (d) {\r\n        rectsSpec.push({\r\n            x: x(d.x),\r\n            y: chartHeight / 2,\r\n            color: \"rgba(0, 0, 0, 0)\",\r\n            onClick: clickFn(d.x),\r\n            barWidth: barWidth,\r\n        });\r\n    });\r\n    unclippable ? [] : baseData.map(function (d) {\r\n        var color = chartHelper_1.lightGray;\r\n        if (selection && selection.selection && selection.selection.includes(d.x)) {\r\n            color = chartHelper_1.darkGray;\r\n        }\r\n        rectsSpec.push({\r\n            x: x(d.x), y: y(d.y),\r\n            color: color,\r\n            onClick: clickFn(d.x),\r\n            barWidth: barWidth,\r\n        });\r\n    });\r\n    if (data) {\r\n        data.filter(function (d) { return d.y > 0; }).map(function (d) {\r\n            var color = chartHelper_1.lightBlue;\r\n            if (selection && selection.selection && selection.selection.includes(d.x)) {\r\n                color = chartHelper_1.darkBlue;\r\n            }\r\n            rectsSpec.push({\r\n                x: x(d.x), y: y(d.y),\r\n                color: color,\r\n                onClick: clickFn(d.x),\r\n                barWidth: barWidth\r\n            });\r\n        });\r\n    }\r\n    if (brushBounds.length > 0) {\r\n        rectsSpec.push({\r\n            className: \"selector\",\r\n            x: Math.max(d3.min(brushBounds) - 5, 0),\r\n            y: 0,\r\n            color: chartHelper_1.brushColor,\r\n            barWidth: d3.max(brushBounds) - d3.min(brushBounds) + barWidth + 10,\r\n            onClick: null\r\n        });\r\n    }\r\n    var hasSelection = (selection && selection.selection) ? true : false;\r\n    return {\r\n        brushFn: brushFn,\r\n        rectsSpec: rectsSpec,\r\n        x: x,\r\n        y: y,\r\n        hasSelection: hasSelection\r\n    };\r\n}\r\nexports.CategoricalChartHelper = CategoricalChartHelper;\r\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar d3 = __webpack_require__(6);\r\nvar React = __webpack_require__(0);\r\nvar ResetButton_1 = __webpack_require__(12);\r\nvar setup_1 = __webpack_require__(1);\r\nvar chartHelper_1 = __webpack_require__(4);\r\nvar tutorialMaterial_1 = __webpack_require__(5);\r\nvar config_1 = __webpack_require__(2);\r\nvar Scatterplot = /** @class */ (function (_super) {\r\n    __extends(Scatterplot, _super);\r\n    function Scatterplot(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.refreshSelection = _this.refreshSelection.bind(_this);\r\n        _this.refreshData = _this.refreshData.bind(_this);\r\n        _this.refreshIsLoading = _this.refreshIsLoading.bind(_this);\r\n        _this.clickRect = _this.clickRect.bind(_this);\r\n        _this.state = {\r\n            baseData: setup_1.diel.GetStaticView(props.chart + \"ChartInitData\"),\r\n            isLoading: { status: 1 },\r\n            hoverInfo: null\r\n        };\r\n        return _this;\r\n    }\r\n    Scatterplot.prototype.refreshSelection = function (selection) {\r\n        this.setState({ selection: selection });\r\n    };\r\n    Scatterplot.prototype.refreshData = function (data) {\r\n        this.setState({\r\n            data: data,\r\n            // piggy back the reset\r\n            hoverInfo: null\r\n        });\r\n    };\r\n    Scatterplot.prototype.refreshIsLoading = function (isLoading) {\r\n        // console.log(\"isLoading scatter\", isLoading);\r\n        this.setState({ isLoading: isLoading });\r\n    };\r\n    Scatterplot.prototype.componentDidMount = function () {\r\n        var chart = this.props.chart;\r\n        setup_1.diel.BindOutput(chart + \"ChartDataView\", this.refreshData);\r\n        setup_1.diel.BindOutput(chart + \"ChartSelection\", this.refreshSelection, { singleRow: true });\r\n        setup_1.diel.BindOutput(chart + \"ChartIsLoading\", this.refreshIsLoading, { singleRow: true });\r\n    };\r\n    Scatterplot.prototype.clickRect = function (value, xPos, yPos) {\r\n        var _this = this;\r\n        return function () {\r\n            _this.setState({ hoverInfo: { value: value, xPos: xPos, yPos: yPos } });\r\n        };\r\n    };\r\n    Scatterplot.prototype.render = function () {\r\n        var _this = this;\r\n        var _a = this.props, chart = _a.chart, xLabel = _a.xLabel, yLabel = _a.yLabel, clipped = _a.clipped, showIntro = _a.showIntro;\r\n        if (!(this.state && this.state.baseData) || (this.state.baseData.length === 0)) {\r\n            throw new Error(\"should be here already\");\r\n        }\r\n        var _b = chartHelper_1.LayoutInfo[chart], width = _b.width, height = _b.height, marginBottom = _b.marginBottom, marginLeft = _b.marginLeft, marginRight = _b.marginRight, marginTop = _b.marginTop;\r\n        var _c = this.state, selection = _c.selection, data = _c.data, isLoading = _c.isLoading, baseData = _c.baseData;\r\n        var chartWidth = width - marginLeft - marginRight;\r\n        var chartHeight = height - marginTop - marginBottom;\r\n        // if true, use data\r\n        var unclippable = (!clipped) && data && (data.length > 0);\r\n        var label;\r\n        var brush = null;\r\n        // let content: JSX.Element = null;\r\n        var axesLabels;\r\n        var xDomain = this.props.xDomain ? this.props.xDomain : [\r\n            // force it to be zero\r\n            0,\r\n            // force the additional padding, bigger to make selection easier\r\n            unclippable ? d3.max(data.map(function (d) { return d.x; })) + 40 : d3.max(baseData.map(function (d) { return d.x; })) + 40\r\n        ];\r\n        var iColor = d3.interpolateRgb(chartHelper_1.scatterLight, chartHelper_1.scatterDark);\r\n        // const iColor = d3.interpolateRgb(\"rgb(245, 251, 239)\", \"rgb(13, 84, 148)\");\r\n        var iBaseColor = d3.interpolateRgb(chartHelper_1.lightGray, chartHelper_1.darkGray);\r\n        var yDomain = this.props.yDomain ? this.props.yDomain : [\r\n            0,\r\n            unclippable ? d3.max(data.map(function (d) { return d.y; })) + 40 : d3.max(baseData.map(function (d) { return d.y; })) + 40\r\n        ];\r\n        // note that vDomain remains that of baseData regardless of clipping\r\n        var vDomain = [d3.min(baseData.map(function (d) { return d.v; })), d3.max(baseData.map(function (d) { return d.v; }))];\r\n        var x = d3.scaleLinear()\r\n            .domain(xDomain)\r\n            .rangeRound([0, chartWidth]);\r\n        // hard coding 20 here\r\n        var rectWidth = Math.abs(x(20) - x(0));\r\n        var y = d3.scaleLinear()\r\n            .domain(yDomain)\r\n            .rangeRound([chartHeight, 0]);\r\n        var rectHeight = Math.abs(y(20) - y(0));\r\n        var v = d3.scaleLog()\r\n            .domain(vDomain)\r\n            .range([0, 1]);\r\n        if (selection && selection.low) {\r\n            if (config_1.DEBUG && isNaN(y(selection.high2))) {\r\n                throw new Error(\"y scale must get valid result\");\r\n            }\r\n            label = (React.createElement(\"rect\", { className: \"selector\", x: x(selection.low), y: y(selection.high2), width: x(selection.high) - x(selection.low), height: Math.abs(y(selection.high2) - y(selection.low2)), fill: \"gray\", \"fill-opacity\": \"0.3\" }));\r\n        }\r\n        var axisBottom = d3.axisBottom(x).ticks(5, \"d\");\r\n        var axisLeft = d3.axisLeft(y).ticks(10, \"d\");\r\n        // generate a brush that interacts with the chart\r\n        brush = d3.brush()\r\n            .extent([[0, 0], [chartWidth, chartHeight]])\r\n            .on(\"end\", function () {\r\n            // see https://github.com/d3/d3-brush/issues/10\r\n            if (!d3.event.sourceEvent)\r\n                return; // Only transition after input.\r\n            if (!d3.event.selection)\r\n                return; // Ignore empty selections.\r\n            // [[x0, y0], [x1, y1]],\r\n            var s = d3.brushSelection(this);\r\n            if (s !== null) {\r\n                var low = Math.min(x.invert(s[0][0]), x.invert(s[1][0]));\r\n                var high = Math.max(x.invert(s[0][0]), x.invert(s[1][0]));\r\n                var low2 = Math.min(y.invert(s[1][1]), y.invert(s[0][1]));\r\n                var high2 = Math.max(y.invert(s[1][1]), y.invert(s[0][1]));\r\n                setup_1.diel.Input.xBrushItx({ $low: low, $high: high, $low2: low2, $high2: high2, $chart: chart });\r\n            }\r\n            d3.select(this).call(brush.move, null);\r\n        });\r\n        var brushDiv = React.createElement(\"g\", { ref: function (g) { return d3.select(g).call(brush); } });\r\n        var delayDistribution;\r\n        var baseRects = unclippable ? [] : baseData.map(function (d) {\r\n            var xPos = x(d.x);\r\n            var yPos = y(d.y + 20);\r\n            if (config_1.DEBUG && isNaN(yPos)) {\r\n                throw new Error(\"y scale must get valid result\");\r\n            }\r\n            return React.createElement(\"rect\", { key: d.x + \"_\" + d.y + \"_base_heat\", fill: iBaseColor(v(d.v)), fillOpacity: 0.8, x: xPos, y: yPos, width: rectWidth, height: rectHeight, \r\n                // it's ok that there will be overlap, since the mouse event does not go down z-index\r\n                onClick: _this.clickRect(d.v, xPos, yPos) });\r\n        });\r\n        var rects;\r\n        if (data) {\r\n            rects = data.map(function (d) {\r\n                var xPos = x(d.x);\r\n                var yPos = y(d.y + 20);\r\n                if (config_1.DEBUG && isNaN(yPos)) {\r\n                    throw new Error(\"y scale must get valid result\");\r\n                }\r\n                // getting rid of the title since it's so cluncky<title>{d.v}</title>\r\n                return React.createElement(\"rect\", { key: d.x + \"_\" + d.y + \"_filter_heat\", fill: iColor(v(d.v)), className: \"hoverable\", fillOpacity: 0.8, x: xPos, y: yPos, width: rectWidth, height: rectHeight, onClick: _this.clickRect(d.v, xPos, yPos) });\r\n            });\r\n            // also add the vertical bar that shows the relative distribution\r\n            // first push the count of delays\r\n            // we could do this in SQL if this becomes too slow\r\n            var delayCount = data.filter(function (d) { return d.x > 0; }).reduce(function (a, b) { return a + b.v; }, 0);\r\n            var totalCount = data.reduce(function (a, b) { return a + b.v; }, 0);\r\n            // console.log(\"total flights\", totalCount, delayCount);\r\n            var annotationWidth = 10;\r\n            var annotationHeight = chartHeight * 2 / 3;\r\n            delayDistribution = React.createElement(\"svg\", { width: 20, height: height },\r\n                React.createElement(\"rect\", { className: \"delayDistributionRect\", x: 5, y: chartHeight / 6, width: annotationWidth, height: delayCount / totalCount * annotationHeight, fill: \"red\", stroke: \"black\", strokeWidth: 1 }),\r\n                React.createElement(\"rect\", { className: \"delayDistributionRect\", x: 5, y: chartHeight / 6 + delayCount / totalCount * annotationHeight, width: annotationWidth, height: (1 - delayCount / totalCount) * annotationHeight, fill: \"white\", stroke: \"black\", strokeWidth: 1 }));\r\n        }\r\n        if (this.state.hoverInfo && this.state.hoverInfo.xPos && this.state.hoverInfo.yPos) {\r\n            rects.push(React.createElement(\"rect\", { key: \"clicked_sactter\", x: this.state.hoverInfo.xPos, y: this.state.hoverInfo.yPos, width: rectWidth, height: rectHeight, style: { fill: \"none\", stroke: \"black\", strokeWidth: 2 } }));\r\n        }\r\n        var ticks = React.createElement(React.Fragment, null,\r\n            React.createElement(\"g\", { ref: function (g) { return d3.select(g).call(axisBottom); }, transform: \"translate(0, \" + chartHeight + \")\" }),\r\n            React.createElement(\"g\", { ref: function (g) { return d3.select(g).call(axisLeft); } }));\r\n        axesLabels = (React.createElement(\"g\", null,\r\n            React.createElement(\"text\", { className: \"chart-label\", y: height - 5, x: (chartWidth / 2) + marginLeft, textAnchor: \"middle\" },\r\n                \" \",\r\n                xLabel),\r\n            React.createElement(\"text\", { className: \"chart-label\", x: 10, y: height / 2, transform: \"rotate(-90, \" + 10 + \", \" + height / 2 + \")\", textAnchor: \"middle\" },\r\n                \" \",\r\n                yLabel)));\r\n        var content = React.createElement(\"svg\", { width: width, height: height, \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"heatmap2\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"heatmap2\") : null },\r\n            React.createElement(\"g\", { transform: \"translate(\" + marginLeft + \",\" + marginTop + \")\" },\r\n                ticks,\r\n                brushDiv,\r\n                baseRects,\r\n                rects,\r\n                this.state.hoverInfo\r\n                    ? React.createElement(\"text\", { className: \"tooltip\", fontStyle: \"bold\", x: this.state.hoverInfo.xPos - 3, y: this.state.hoverInfo.yPos - 5 }, this.state.hoverInfo.value)\r\n                    : null,\r\n                label),\r\n            axesLabels);\r\n        var legend = React.createElement(\"svg\", { width: 25, height: height, \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"delayLegend\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"delayLegend\") : null },\r\n            React.createElement(\"defs\", null,\r\n                React.createElement(\"linearGradient\", { id: \"linear\", x1: \"0%\", y1: \"0%\", x2: \"0%\", y2: \"100%\" },\r\n                    React.createElement(\"stop\", { offset: \"0%\", \"stop-color\": chartHelper_1.scatterLight }),\r\n                    React.createElement(\"stop\", { offset: \"100%\", \"stop-color\": chartHelper_1.scatterDark }))),\r\n            React.createElement(\"rect\", { x: 5, y: 20, width: 5, height: height - 60, fill: \"url(#linear)\" }),\r\n            React.createElement(\"text\", { x: 5, y: 10, fontSize: 10 }, vDomain[0]),\r\n            React.createElement(\"text\", { x: 0, y: height - 30, fontSize: 10 }, vDomain[1]));\r\n        var loadingClass = isLoading.status ? \"indicatorLine\" : \"\";\r\n        return (React.createElement(\"div\", { className: \"scatter-chart chart-container\" },\r\n            content,\r\n            legend,\r\n            React.createElement(\"div\", { style: { overflow: \"auto\", display: \"inline-block\" }, \"data-step\": showIntro ? tutorialMaterial_1.IntroSteps.indexOf(\"delayDistribution\") + 1 : null, \"data-intro\": showIntro ? tutorialMaterial_1.IntroSpec.get(\"delayDistribution\") : null }, delayDistribution),\r\n            React.createElement(\"div\", { style: { height: 5 }, className: loadingClass }),\r\n            React.createElement(ResetButton_1.ResetButton, { width: width, disabled: !(selection && selection.low), chart: chart, selection: (selection && selection.low) ? \"brush\" : \"\" })));\r\n    };\r\n    Scatterplot.defaultProps = chartHelper_1.DefaultChartProps;\r\n    return Scatterplot;\r\n}(React.Component));\r\nexports.default = Scatterplot;\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar setup_1 = __webpack_require__(1);\r\nvar helper_1 = __webpack_require__(3);\r\nvar tasks_1 = __webpack_require__(9);\r\nvar HappyOrNot = /** @class */ (function (_super) {\r\n    __extends(HappyOrNot, _super);\r\n    function HappyOrNot(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.state = {\r\n            lastClick: null\r\n        };\r\n        return _this;\r\n    }\r\n    HappyOrNot.prototype.onClick = function (paramter) {\r\n        var _this = this;\r\n        return function () {\r\n            _this.setState({ lastClick: Date.now() });\r\n            setTimeout(function () {\r\n                if (_this.state.lastClick < Date.now() - 3000) {\r\n                    _this.setState({ lastClick: null });\r\n                }\r\n            }, 3001);\r\n            // diel log\r\n            setup_1.diel.LogData.eventLog({\r\n                $eventName: helper_1.EventType[helper_1.EventType.HappyOrNot],\r\n                $parameter: tasks_1.FeedbackType[paramter]\r\n            });\r\n        };\r\n    };\r\n    HappyOrNot.prototype.render = function () {\r\n        return React.createElement(\"div\", null,\r\n            React.createElement(\"button\", { className: \"happyOrNotBtn zoomOnHover\", onClick: this.onClick(tasks_1.FeedbackType.Happy) }, \"\\uD83D\\uDE03\"),\r\n            React.createElement(\"button\", { className: \"happyOrNotBtn zoomOnHover\", onClick: this.onClick(tasks_1.FeedbackType.Angry) }, \"\\uD83D\\uDE21\"),\r\n            React.createElement(\"button\", { className: \"happyOrNotBtn zoomOnHover\", onClick: this.onClick(tasks_1.FeedbackType.Confused) }, \"\\uD83D\\uDE35\"),\r\n            this.state.lastClick ? React.createElement(\"p\", { style: { display: \"inline\" } }, \"Got your feedback!\") : null);\r\n    };\r\n    return HappyOrNot;\r\n}(React.Component));\r\nexports.default = HappyOrNot;\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar SvgSpinner_1 = __webpack_require__(30);\r\nvar chartHelper_1 = __webpack_require__(4);\r\nvar setup_1 = __webpack_require__(1);\r\n// this will only be manaing the index, not the absolute, and so this is the same as the\r\n// key up/down\r\nexports.ChronicleSlider = function (p) {\r\n    var focusItx = p.focusItx, itxIdsInfo = p.itxIdsInfo;\r\n    var width = chartHelper_1.LayoutInfo.timeLine.width;\r\n    if (!itxIdsInfo) {\r\n        // 10 is just a filler\r\n        return React.createElement(\"div\", { style: { marginTop: 50, width: width, height: 10 } });\r\n    }\r\n    // make the new distance deterministic, and make it grow left to right\r\n    // scrolling's affordances are BAD, let it grow down\r\n    // const minWidth = itxIdsInfo.length * height * 0.5;\r\n    // const adjustedWidth = Math.max(minWidth, width);\r\n    // const x = d3.scaleLinear()\r\n    //             .domain([0, itxIdsInfo.length + 1])\r\n    //             .rangeRound([30, adjustedWidth]);\r\n    // focusItx === itx.itxId ? (height * 0.1 + 3) : height * 0.1\r\n    var rectWidth = 30;\r\n    var maxRectCols = Math.floor(width / rectWidth);\r\n    var maxRectsRows = Math.ceil(itxIdsInfo.length / maxRectCols);\r\n    var height = (maxRectsRows + 1) * rectWidth;\r\n    var rects = itxIdsInfo.map(function (itx, i) {\r\n        var x = rectWidth * (i % maxRectCols);\r\n        // the additional - 1 is because y start counting at the top\r\n        var y = (maxRectsRows - Math.floor(i / maxRectCols) - 1) * rectWidth;\r\n        return React.createElement(React.Fragment, null,\r\n            React.createElement(\"rect\", { x: x, y: y, width: rectWidth - 5, height: rectWidth - 5, fill: focusItx === itx.itxId ? \"orange\" : \"green\", \r\n                // className={ \"\" : \"flashing\"}\r\n                onClick: function () { return setup_1.diel.Input.navigateItx({ $xFilterItxId: itx.itxId }); }, style: { cursor: \"pointer\" } }),\r\n            !itx.loaded\r\n                ? React.createElement(SvgSpinner_1.SvgSpinner, { cx: x + rectWidth / 2, cy: y + rectWidth / 2, radius: rectWidth / 2, color: \"white\" })\r\n                : null,\r\n            React.createElement(\"text\", { x: x + 5, y: y + 15, \"font-size\": \"15\", style: { pointerEvents: \"none\" }, fill: \"white\" }, i === itxIdsInfo.length - 1 ? \"N\" : i + 1));\r\n    });\r\n    // let lines =     <line\r\n    //     x1={0} x2={width} y1={height * 0.3} y2={height * 0.3} stroke=\"#4CAF50\" strokeWidth={3}>\r\n    //   </line>;\r\n    // \"width={width} height={height} style={{overflowX: \"scroll\"}}\r\n    // <div style={{marginTop: 50, width: width, height: height, overflowX: \"scroll\", overscrollBehavior: \"none\"}}>\r\n    return React.createElement(\"svg\", { width: width, height: height }, rects);\r\n};\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nfunction helper(begin, cx, cy, radius) {\r\n    return (React.createElement(\"circle\", { cx: cx, cy: cy, r: \"1\" },\r\n        React.createElement(\"animate\", { attributeName: \"r\", begin: begin, dur: \"1.8s\", values: \"1; \" + radius, calcMode: \"spline\", keyTimes: \"0; 1\", keySplines: \"0.165, 0.84, 0.44, 1\", repeatCount: \"indefinite\" }),\r\n        React.createElement(\"animate\", { attributeName: \"stroke-opacity\", begin: \"0s\", dur: \"1.8s\", values: \"1; 0\", calcMode: \"spline\", keyTimes: \"0; 1\", keySplines: \"0.3, 0.61, 0.355, 1\", repeatCount: \"indefinite\" })));\r\n}\r\nexports.SvgSpinner = function (props) {\r\n    return (React.createElement(\"g\", { fill: \"none\", stroke: props.color, \"fill-rule\": \"evenodd\", \"stroke-width\": \"2\" },\r\n        helper(\"0s\", props.cx, props.cy, props.radius),\r\n        helper(\"-0.9s\", props.cx, props.cy, props.radius)));\r\n};\r\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar setup_1 = __webpack_require__(1);\r\nvar tasks_1 = __webpack_require__(9);\r\nfunction setUpHelper(q, isTraining) {\r\n    setup_1.diel.LogData.taskInfo({\r\n        $qId: q.qId,\r\n        $taskType: tasks_1.TaskTypes[q.type],\r\n        $isTraining: isTraining ? 1 : 0\r\n    });\r\n    if (q.type === tasks_1.TaskTypes.Recall) {\r\n        setup_1.diel.LogData.memoryTask({ $qId: q.qId, $linkedQId: q.linkedQId });\r\n    }\r\n}\r\nvar Task = /** @class */ (function (_super) {\r\n    __extends(Task, _super);\r\n    function Task(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.nextStep = _this.nextStep.bind(_this);\r\n        _this.onChangeAnswer = _this.onChangeAnswer.bind(_this);\r\n        _this.onCommentChange = _this.onCommentChange.bind(_this);\r\n        _this.setConfidence = _this.setConfidence.bind(_this);\r\n        _this.tick = _this.tick.bind(_this);\r\n        // by default show the most recent unless otherwise specified\r\n        _this.state = {\r\n            step: tasks_1.TaskStep.Description,\r\n            answer: null,\r\n            confidence: null,\r\n            answerValue: null,\r\n            comment: null,\r\n            timer: null,\r\n            timeElapsed: 0,\r\n            warn: false\r\n        };\r\n        setup_1.diel.SetFreeze(true);\r\n        var q = _this.props.question;\r\n        setUpHelper(q, _this.props.isTraining);\r\n        return _this;\r\n    }\r\n    Task.prototype.tick = function () {\r\n        this.setState({\r\n            timeElapsed: this.state.timeElapsed + 1\r\n        });\r\n    };\r\n    Task.prototype.componentWillReceiveProps = function (p) {\r\n        // reset state, but make sure to check that the props has changed...\r\n        if (p.question.qId !== this.props.question.qId) {\r\n            clearTimeout(this.state.timer);\r\n            setUpHelper(p.question, this.props.isTraining);\r\n            this.setState({\r\n                answer: null,\r\n                confidence: null,\r\n                timeElapsed: 0,\r\n                step: tasks_1.TaskStep.Description\r\n            });\r\n        }\r\n    };\r\n    Task.prototype.onChangeAnswer = function (event) {\r\n        var answer = event.target.value;\r\n        var answerValue = event.target.getAttribute(\"data-score\");\r\n        console.log(\"data score\", answerValue);\r\n        this.setState({ warn: false, answer: answer, answerValue: answerValue });\r\n    };\r\n    Task.prototype.setConfidence = function (confidence) {\r\n        this.setState({ warn: false, confidence: confidence });\r\n    };\r\n    Task.prototype.onCommentChange = function (event) {\r\n        this.setState({ comment: event.target.value });\r\n    };\r\n    // look into if I need to not use logEvents?\r\n    Task.prototype.nextStep = function (step) {\r\n        var qId = this.props.question.qId;\r\n        console.log(\"is this event called\", step);\r\n        if (step === tasks_1.TaskStep.Answering) {\r\n            if (this.props.question.type !== tasks_1.TaskTypes.Recall) {\r\n                setup_1.diel.SetFreeze(false);\r\n            }\r\n            setup_1.diel.LogData.taskTimes({ $qId: qId, $eventType: \"start\" });\r\n            console.log(\"logged start\");\r\n            this.setState({\r\n                timer: window.setInterval(this.tick, 1000),\r\n                step: step\r\n            });\r\n            return;\r\n        }\r\n        if (step === tasks_1.TaskStep.Submitted) {\r\n            if (this.state.answer === null || this.state.confidence === null) {\r\n                // must have an asnwer\r\n                this.setState({\r\n                    warn: true,\r\n                });\r\n                return;\r\n            }\r\n            clearInterval(this.state.timer);\r\n            setup_1.diel.SetFreeze(true);\r\n            setup_1.diel.LogData.taskTimes({ $qId: qId, $eventType: \"end\" });\r\n            console.log(\"logged end\");\r\n            this.setState({ step: step });\r\n            return;\r\n        }\r\n    };\r\n    Task.prototype.render = function () {\r\n        var _this = this;\r\n        var _a = this.props, question = _a.question, nextTask = _a.nextTask;\r\n        var _b = this.state, step = _b.step, answer = _b.answer, confidence = _b.confidence;\r\n        var questionDiv = React.createElement(\"p\", { className: \"question\", dangerouslySetInnerHTML: { __html: question.question } });\r\n        var choices = question.choices.map(function (q) { return React.createElement(\"label\", null,\r\n            React.createElement(\"input\", { required: true, type: \"radio\", disabled: (step !== tasks_1.TaskStep.Answering), value: q.text, checked: answer ? answer.indexOf(q.text) > -1 : false, \"data-score\": q.value, onChange: _this.onChangeAnswer }),\r\n            q.text); });\r\n        var setConfidence = this.setConfidence;\r\n        function _genRadio(c, text) {\r\n            return React.createElement(\"label\", null,\r\n                React.createElement(\"input\", { required: true, type: \"radio\", disabled: (step !== tasks_1.TaskStep.Answering), value: tasks_1.TaskConfidence[c], checked: confidence === c, onChange: function () { return setConfidence(c); } }),\r\n                text);\r\n        }\r\n        var confidenceDiv = React.createElement(React.Fragment, null,\r\n            React.createElement(\"p\", { className: \"question\" }, \"How confident are you?\"),\r\n            React.createElement(\"div\", { className: \"radio-button-wrapper\" },\r\n                _genRadio(tasks_1.TaskConfidence.NotAtAll, \"Not At All\"),\r\n                _genRadio(tasks_1.TaskConfidence.Somewhat, \"Somewhat\"),\r\n                _genRadio(tasks_1.TaskConfidence.Very, \"Very\")));\r\n        var additional;\r\n        var button;\r\n        if (step === tasks_1.TaskStep.Description) {\r\n            button = React.createElement(React.Fragment, null,\r\n                React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: function () { return _this.nextStep(tasks_1.TaskStep.Answering); } }, \"Start Task\"),\r\n                React.createElement(\"span\", { className: \"footnote\" }, \"click to activate\"));\r\n        }\r\n        else if (step === tasks_1.TaskStep.Answering) {\r\n            button = React.createElement(\"button\", { className: \"general-btn submit-btn\", onClick: function () { return _this.nextStep(tasks_1.TaskStep.Submitted); } }, \"Submit\");\r\n        }\r\n        else if (step === tasks_1.TaskStep.Submitted) {\r\n            button = React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: function () {\r\n                    // if there is an anwer, log that, as well as the comment\r\n                    setup_1.diel.LogData.answers({\r\n                        $qId: _this.props.question.qId,\r\n                        $answer: _this.state.answer,\r\n                        $confidence: tasks_1.TaskConfidence[_this.state.confidence],\r\n                        $score: _this.state.answerValue,\r\n                        $comment: _this.state.comment\r\n                    });\r\n                    nextTask();\r\n                } }, \"Next Task\");\r\n            var answerDiv = void 0;\r\n            // note that we do not include partial answers in the instructions\r\n            var correctAnswers = question.choices.filter(function (c) { return c.value === 1; });\r\n            var correct = correctAnswers.filter(function (c) { return c.text === _this.state.answer; }).length > 0;\r\n            if (correct) {\r\n                answerDiv = React.createElement(\"div\", null,\r\n                    React.createElement(\"hr\", null),\r\n                    React.createElement(\"p\", { className: \"correct\" }, \"Correct!\"),\r\n                    correctAnswers.length > 1\r\n                        ? React.createElement(\"p\", null,\r\n                            \"Other possible correct answers: \",\r\n                            correctAnswers.filter(function (c) { return c.text !== _this.state.answer; }).map(function (c) { return c.text + \" \"; }))\r\n                        : null);\r\n            }\r\n            else {\r\n                answerDiv = React.createElement(\"div\", null,\r\n                    React.createElement(\"hr\", null),\r\n                    React.createElement(\"p\", { className: \"warning\" }, \"Wrong.\"),\r\n                    correctAnswers.length > 1\r\n                        ? React.createElement(\"p\", null,\r\n                            \"Possible correct answers is any of the following: \",\r\n                            correctAnswers.map(function (c) { return c.text + \" \"; }))\r\n                        : React.createElement(\"p\", null,\r\n                            \"Correct answer: \",\r\n                            correctAnswers[0].text));\r\n            }\r\n            additional = React.createElement(React.Fragment, null,\r\n                answerDiv,\r\n                React.createElement(\"hr\", null),\r\n                React.createElement(\"p\", { className: \"footnote\" }, \"\\uD83D\\uDCA1 Feel free to take a break now before you start your next question! Otherwise, please try to complete the next task in one sitting.\"));\r\n        }\r\n        return React.createElement(\"div\", null,\r\n            this.props.question.type === tasks_1.TaskTypes.Recall ?\r\n                this.props.isTraining ?\r\n                    React.createElement(\"p\", null, \"In this question we are testing your ability to recall some information you might have seen while doing the previous task (\\\"memory question\\\"). You cannot interact with the visualizations for these questions ---try your best to remember.\")\r\n                    : React.createElement(\"p\", null, \"Memory Question\")\r\n                : null,\r\n            questionDiv,\r\n            this.state.warn ? React.createElement(\"p\", { className: \"warning\" }, \"Please answer both questions\") : null,\r\n            React.createElement(\"div\", { className: \"radio-button-wrapper\" }, choices),\r\n            confidenceDiv,\r\n            additional,\r\n            React.createElement(\"div\", { style: { height: 5 } }),\r\n            step === tasks_1.TaskStep.Submitted\r\n                ? React.createElement(React.Fragment, null,\r\n                    React.createElement(\"label\", { htmlFor: \"comments\" },\r\n                        React.createElement(\"i\", null, \"Optional\"),\r\n                        \" note on how you approached the problem\"),\r\n                    React.createElement(\"br\", null),\r\n                    React.createElement(\"textarea\", { rows: 5, cols: 39, id: \"comments\", name: \"comments\", onChange: this.onCommentChange }))\r\n                : null,\r\n            button,\r\n            step === tasks_1.TaskStep.Description\r\n                ? null\r\n                : React.createElement(\"p\", { style: { color: \"gray\" } },\r\n                    \"Time \",\r\n                    step === tasks_1.TaskStep.Submitted ? \"Taken\" : \"\",\r\n                    \": \",\r\n                    this.state.timeElapsed,\r\n                    \" s\"),\r\n            \"    \");\r\n    };\r\n    return Task;\r\n}(React.Component));\r\nexports.default = Task;\r\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LoggedTablesForAnalysis = [\r\n    // raw events\r\n    \"eventLog\",\r\n    \"navigateItx\",\r\n    \"deltaItx\",\r\n    \"deleteItx\",\r\n    \"xBrushItx\",\r\n    // SP\r\n    \"itxId_SP\",\r\n    \"brushState_SP\",\r\n    // this is important for recognizing cached results\r\n    \"eqChart_SP\",\r\n    \"chartDataAtomic\",\r\n    // this can tell us how many of the interactions\r\n    // was with a different view than the one immediately before\r\n    \"brushDep_SP\",\r\n    // task related\r\n    \"taskTimes\",\r\n    \"memoryTask\",\r\n    \"answers\",\r\n    \"taskInfo\"\r\n];\r\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar config_1 = __webpack_require__(2);\r\nexports.TrainingIntro = function (p) {\r\n    return React.createElement(React.Fragment, null,\r\n        React.createElement(\"div\", { className: \"introSection\" },\r\n            React.createElement(\"h2\", null, \"Analyze flights fun! \\u2708\\uFE0F\"),\r\n            React.createElement(\"p\", null,\r\n                \"You will be viewing an interactive visualization dashboard of \",\r\n                React.createElement(\"b\", null, \"flights to Hawaii from other US states, in December 2017\"),\r\n                \". It visualizes the information about flights containing information about their departure state, the day of the month, flight carrier, and delay information.\"),\r\n            React.createElement(\"p\", null,\r\n                \"We have synthesized the data based on real data. Please \",\r\n                React.createElement(\"strong\", null, \"do not\"),\r\n                \" use your existing knowledge to complete the tasks. Also please do not Google the results---it will not be needed and interferes with our results.\")),\r\n        React.createElement(\"p\", null,\r\n            React.createElement(\"b\", null, \"We will walk you through a tutorial and a set of tasks. If you answer all of the initial three tasks incorrectly, you will be disqualified from the HIT.\")),\r\n        React.createElement(\"p\", null, \"The training questions will be over the data from the first half of December, and the actual tasks will be over the second half of December. The visualization tool will stay the same, and the questions similar.\"),\r\n        React.createElement(\"div\", { className: \"introSection\" },\r\n            React.createElement(\"h2\", null, \"Time!\\u23F1\\uFE0F\"),\r\n            React.createElement(\"p\", null,\r\n                \"You are encouraged to complete the tasks both accurately and efficiently. Please try not to take breaks \",\r\n                React.createElement(\"strong\", null, \"during \"),\r\n                \"a task (usually less than 1 minute to 3 minutes), but feel free to take breaks \",\r\n                React.createElement(\"strong\", null, \"between\"),\r\n                \" tasks. If we detect that you left the window \",\r\n                React.createElement(\"strong\", null, \"during\"),\r\n                \" a task, you might not be paid the bonus in full. We may send out up to $\",\r\n                config_1.ExtraBonusReward.toFixed(2),\r\n                \" of additional reward for those who performed effectively (in addition to the base $\",\r\n                config_1.BonusReward.toFixed(2),\r\n                \").\")),\r\n        React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: p.onClick }, \"next\"));\r\n};\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar experimentQAs_1 = __webpack_require__(7);\r\nexports.TaskIntro = function (p) {\r\n    return React.createElement(React.Fragment, null,\r\n        React.createElement(\"h2\", null, \"Analysis for the Holiday Season!\\uD83C\\uDF84\"),\r\n        React.createElement(\"p\", null, \"You will now be viewing an interactive visualization over the same data but from the second half of the month. Again, we remind you to try to complete the tasks as quickly and as accurately as possible.\"),\r\n        React.createElement(\"p\", null,\r\n            \"There will be \",\r\n            experimentQAs_1.holidayCount,\r\n            \" tasks total. Good luck!\"),\r\n        React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: p.onClick }, \"Start\"));\r\n};\r\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar config_1 = __webpack_require__(2);\r\nvar experimentQAs_1 = __webpack_require__(7);\r\nvar setup_1 = __webpack_require__(1);\r\nvar helper_1 = __webpack_require__(3);\r\nvar Instructions = /** @class */ (function (_super) {\r\n    __extends(Instructions, _super);\r\n    function Instructions(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.resizeListener = _this.resizeListener.bind(_this);\r\n        var w = window;\r\n        var isSafari = /constructor/i.test(w.HTMLElement)\r\n            || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!w[\"safari\"] || (typeof w.safari !== \"undefined\" && w.safari.pushNotification));\r\n        var isChrome = !!window.chrome && !!window.chrome.webstore;\r\n        var isMobile = false;\r\n        (function (a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4)))\r\n            isMobile = true; })(navigator.userAgent || navigator.vendor || w.opera);\r\n        setup_1.diel.LogData.eventLog({ $eventName: helper_1.EventType[helper_1.EventType.IsMobile], $parameter: isMobile ? \"true\" : \"false\" });\r\n        setup_1.diel.LogData.eventLog({ $eventName: helper_1.EventType[helper_1.EventType.Browser], $parameter: isSafari ? \"safari\" : isChrome ? \"chrome\" : \"other\" });\r\n        _this.state = {\r\n            isScreenSmall: null,\r\n            isWindowSmall: null,\r\n            isChrome: isChrome,\r\n            isSafari: isSafari,\r\n            isMobile: isMobile\r\n        };\r\n        // to avoid copy/paste\r\n        _this.resizeListener();\r\n        return _this;\r\n    }\r\n    Instructions.prototype.resizeListener = function () {\r\n        this.setState({\r\n            isScreenSmall: config_1.judgeScreenSize(),\r\n            isWindowSmall: config_1.judgeWindowSize()\r\n        });\r\n        setup_1.diel.LogData.eventLog({ $eventName: helper_1.EventType[helper_1.EventType.ScreenWidth], $parameter: screen.width });\r\n        setup_1.diel.LogData.eventLog({ $eventName: helper_1.EventType[helper_1.EventType.ScreenHeight], $parameter: screen.height });\r\n        setup_1.diel.LogData.eventLog({ $eventName: helper_1.EventType[helper_1.EventType.WindowWidth], $parameter: window.innerWidth });\r\n        setup_1.diel.LogData.eventLog({ $eventName: helper_1.EventType[helper_1.EventType.WindowHeight], $parameter: window.innerHeight });\r\n    };\r\n    Instructions.prototype.componentDidMount = function () {\r\n        window.addEventListener(\"resize\", this.resizeListener);\r\n    };\r\n    Instructions.prototype.componentWillUnmount = function () {\r\n        window.removeEventListener(\"resize\", this.resizeListener);\r\n    };\r\n    Instructions.prototype.render = function () {\r\n        var _a = this.props, onClick = _a.onClick, disabled = _a.disabled;\r\n        var _b = this.state, isScreenSmall = _b.isScreenSmall, isWindowSmall = _b.isWindowSmall, isChrome = _b.isChrome, isSafari = _b.isSafari, isMobile = _b.isMobile;\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"h2\", null, \"Interactive Visualization User Study\"),\r\n            React.createElement(\"p\", null,\r\n                React.createElement(\"b\", null,\r\n                    \"This HIT consists of \",\r\n                    experimentQAs_1.TotalAnalysisCount,\r\n                    \" visual analysis tasks and \",\r\n                    experimentQAs_1.SurveyCount,\r\n                    \" which should take 1 to 3 minutes each. If completed, you will receive a total ranging from $\",\r\n                    (config_1.TaskReward * experimentQAs_1.TotalTaskCount + config_1.BonusReward).toFixed(2),\r\n                    \" to $\",\r\n                    (config_1.TaskReward * experimentQAs_1.TotalTaskCount + config_1.BonusReward + config_1.ExtraBonusReward).toFixed(2),\r\n                    \". We expect the overall HIT to take about 30 minutes of total time.\")),\r\n            React.createElement(\"p\", null,\r\n                \"You will receive a $\",\r\n                config_1.TaskReward.toFixed(2),\r\n                \" reward for each task completed---which includes the tasks as well as the surveys. After completing all of the tasks, you will receive a $\",\r\n                config_1.BonusReward.toFixed(2),\r\n                \"-$\",\r\n                (config_1.BonusReward + config_1.ExtraBonusReward).toFixed(2),\r\n                \" completion bonus reward (depending on the acuracy and speed of your answer). You must complete \",\r\n                React.createElement(\"b\", null, \"all\"),\r\n                \" the tasks in this HIT to receive the completion bonus. Most of the payment is in the bonus because we cannot make use of any of the results unless all tasks are completed. The payment is our estimation of the task time and the minimum wage of $11 per hour.\"),\r\n            React.createElement(\"p\", null, \"If you do not wish to complete all the tasks, you can press the \\\"Finish and claim current reward\\\" button to exit this HIT and be paid your accumulated reward for tasks completed so far. You will only be paid once you complete all the tasks or click the finish button, given that the tasks are done with reasonable effort.\"),\r\n            React.createElement(\"p\", null, \"Your participation in this study is voluntary. In these tasks, you will be presented with an interactive visualization dashboard of some flight delay data. You will be asked to perform basic analysis of the data, which requires interacting with the data visualization.\"),\r\n            React.createElement(\"p\", null,\r\n                \"The results of these tasks will be used for a research study on novel user experience design for interactive visualizations. The purpose of the study is to inform the design of interfaces for visual analytics tasks when there are delays. You may view our \",\r\n                React.createElement(\"a\", { href: \"./policy.html\", target: \"_blank\" }, \"privacy policy\"),\r\n                \" for more information. Your anonymized data may be used for publication.\"),\r\n            React.createElement(\"p\", null,\r\n                React.createElement(\"b\", null, \"Please ensure that you are using either Chrome or Safari browswer on a computer with screen size of at least 1080 by 800.\")),\r\n            !(isChrome || isSafari)\r\n                ? React.createElement(\"p\", { className: \"warning\" },\r\n                    \"Please ensure that you are using the \",\r\n                    React.createElement(\"strong\", null, \"Chrome or Safari\"),\r\n                    \" browswers (we have detected that you might be using an incompatible browswer), otherwise you will not be able to continue.\")\r\n                : null,\r\n            isMobile\r\n                ? React.createElement(\"p\", { className: \"warning\" }, \"We have detected that you might be using a mobile device. This may cause the tool for the tasks to mal function, and we not be able to compensate you for your tasks.\")\r\n                : null,\r\n            isScreenSmall\r\n                ? React.createElement(\"p\", { className: \"warning\" }, \"We have detected that your current screen is smaller than 1080 by 800 Please find a device with a bigger screen instead. Otherwise, this will result in a lower payment since we cannot make use of your work.\")\r\n                : null,\r\n            !isScreenSmall && isWindowSmall\r\n                ? React.createElement(\"p\", { className: \"warning\" }, \"We have detected that your current window is smaller than 1080 by 800 Please resize the window to be larger. Otherwise, this will result in a lower payment since we cannot make use of your work.\")\r\n                : null,\r\n            React.createElement(\"p\", null, \"If you are ready to begin, please click the button below.\"),\r\n            React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: onClick, disabled: disabled }, \"I understand, and consent to participate\")));\r\n    };\r\n    return Instructions;\r\n}(React.Component));\r\nexports.default = Instructions;\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar ScrubberView_1 = __webpack_require__(11);\r\nvar VideoPopup_1 = __webpack_require__(37);\r\nvar ScatterCompareTutorial_1 = __webpack_require__(38);\r\nvar tutorialMaterial_1 = __webpack_require__(5);\r\nvar tutorialMaterial_2 = __webpack_require__(5);\r\nvar Tutorial = /** @class */ (function (_super) {\r\n    __extends(Tutorial, _super);\r\n    function Tutorial(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.startAgain = _this.startAgain.bind(_this);\r\n        _this.setStep = _this.setStep.bind(_this);\r\n        _this.state = {\r\n            // meh can't be bothered to create enums\r\n            step: -1,\r\n            introTour: null,\r\n            showPopup: false,\r\n        };\r\n        return _this;\r\n    }\r\n    Tutorial.prototype.componentDidMount = function () {\r\n        var introTour = introJs().setOptions({\r\n            exitOnOverlayClick: false\r\n        });\r\n        introTour.start();\r\n        this.setState({ introTour: introTour });\r\n    };\r\n    Tutorial.prototype.setStep = function (step) {\r\n        this.setState({ step: step });\r\n    };\r\n    Tutorial.prototype.startAgain = function () {\r\n        this.state.introTour.start();\r\n    };\r\n    Tutorial.prototype.render = function () {\r\n        var s = this.setStep;\r\n        var step = this.state.step;\r\n        var content;\r\n        if (step === 0) {\r\n            content = React.createElement(\"div\", { className: \"popup\" },\r\n                React.createElement(\"div\", { className: \"popup-inner\" },\r\n                    React.createElement(\"div\", { style: { margin: \"auto\", maxWidth: 600 } },\r\n                        React.createElement(\"p\", null,\r\n                            \"To help you make use of the tool better, complete the tasks faster, and a higher chance at extra bonus, we will show you \",\r\n                            tutorialMaterial_2.videoTutorials.length + 1,\r\n                            \" additional training modules (\",\r\n                            React.createElement(\"b\", null, \"no\"),\r\n                            \" audio required).\"),\r\n                        React.createElement(\"p\", null, \"Each part should take about a minute or less. Also, some of the training may appear to repeat the previous instruction---we just want to make sure you get it!\"),\r\n                        React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: function () { return s(1); } }, \"Start\"))));\r\n        }\r\n        else if (step > 0 && step < tutorialMaterial_2.videoTutorials.length + 1) {\r\n            var tut = tutorialMaterial_2.videoTutorials[step - 1];\r\n            content = React.createElement(VideoPopup_1.VideoPopup, { title: tut.title + (\" (\" + step + \"/\" + (tutorialMaterial_2.videoTutorials.length + 1) + \")\"), videoLink: tut.videoLink, texts: tut.texts, prev: (step > 0) ? function () { return s(step - 1); } : null, next: function () { return s(step + 1); } });\r\n        }\r\n        else if (step === tutorialMaterial_2.videoTutorials.length + 1) {\r\n            content = React.createElement(ScatterCompareTutorial_1.ScatterCompareTutorial, { title: \"How to Read and Compare Delay Heatmaps (\" + step + \"/\" + (tutorialMaterial_2.videoTutorials.length + 1) + \")\", prev: function () { return s(step - 1); }, next: function () { return s(step + 1); } });\r\n        }\r\n        return React.createElement(React.Fragment, null,\r\n            React.createElement(ScrubberView_1.default, { showIntro: true }),\r\n            React.createElement(\"div\", { style: { float: \"left\", paddingLeft: 20 } },\r\n                content,\r\n                React.createElement(\"button\", { className: \"tour-btn general-btn\", onClick: this.startAgain, \"data-step\": tutorialMaterial_1.IntroSteps.indexOf(\"tutorial\") + 1, \"data-intro\": tutorialMaterial_1.IntroSpec.get(\"tutorial\") }, \"Show Tour Again\"),\r\n                React.createElement(\"hr\", null),\r\n                React.createElement(\"div\", { \"data-step\": tutorialMaterial_1.IntroSteps.indexOf(\"video\") + 1, \"data-intro\": tutorialMaterial_1.IntroSpec.get(\"video\") }, step === tutorialMaterial_2.videoTutorials.length + 2\r\n                    ? React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: this.props.onClick }, \"Start Tasks\")\r\n                    : React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: function () { return s(0); } }, \"Start Techniques\"))));\r\n    };\r\n    return Tutorial;\r\n}(React.Component));\r\nexports.default = Tutorial;\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nexports.VideoPopup = function (p) {\r\n    var next = p.next, videoLink = p.videoLink, texts = p.texts, title = p.title, prev = p.prev;\r\n    return (React.createElement(\"div\", { className: \"popup\" },\r\n        React.createElement(\"div\", { className: \"popup-inner\" },\r\n            React.createElement(\"div\", { style: { margin: \"auto\" } },\r\n                React.createElement(\"h3\", { style: { textAlign: \"center\" } }, title),\r\n                React.createElement(\"div\", { className: \"description\" }, texts.map(function (t) { return React.createElement(\"p\", null, t); })),\r\n                React.createElement(\"video\", { width: 400, autoPlay: true, src: videoLink, controls: true, loop: true }),\r\n                React.createElement(\"br\", null),\r\n                React.createElement(\"button\", { className: \"general-btn\", onClick: prev, disabled: prev === null }, \"prev\"),\r\n                React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: next }, \"next\")))));\r\n};\r\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nexports.ScatterCompareTutorial = function (p) {\r\n    var prev = p.prev, next = p.next, title = p.title;\r\n    return (React.createElement(\"div\", { className: \"popup\" },\r\n        React.createElement(\"div\", { className: \"popup-inner\" },\r\n            React.createElement(\"div\", { style: { padding: 10 } },\r\n                React.createElement(\"h3\", { style: { textAlign: \"center\" } }, title),\r\n                React.createElement(\"p\", null, \"The heatmap encodes a lot of information. We illustrate by reading two different views of the same filtered data. On the left, we have the \\\"unzoomed\\\" view of the data. The rightmost distribution of delayed flights count (red and white bars) shows that only a tiny portion of the flights are delayed. The heat map to the left shows more detail---how delayed are the delayed flights. However, it is somewhat difficult to read witht the gray in the background. This is when you can \\\"zoom,\\\" which brings us to the image to the right.\"),\r\n                React.createElement(\"p\", null, \"For the image to the right, the gray background data is no longer plotted (hence \\\"zoomed\\\" in). While easy to read individually, it makes it difficult to compare across charts, since the scale is changing.\"),\r\n                React.createElement(\"img\", { width: 300, src: \"https://logical-interactions.github.io/chroniclesv2/dist/heat_unzoomed.png\" }),\r\n                React.createElement(\"img\", { width: 300, src: \"https://logical-interactions.github.io/chroniclesv2/dist/heat_zoomed.png\" }),\r\n                React.createElement(\"button\", { className: \"general-btn\", onClick: prev }, \"Prev\"),\r\n                React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: next }, \"Finish Techniques\")))));\r\n};\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar config_1 = __webpack_require__(2);\r\nexports.FlowSurveyQuestions = new Map();\r\n// creating hashes as a sanity check\r\nexports.FlowSurveyQuestions.set(\"flowChallenge\", \"I feel just the right amount of challenge\");\r\nexports.FlowSurveyQuestions.set(\"flowSmooth\", \"My thoughts/activities run fluidly and smoothly\");\r\nexports.FlowSurveyQuestions.set(\"flowTime\", \"I do not notice time passing\");\r\nexports.FlowSurveyQuestions.set(\"flowConcentrate\", \"I have no difficulty concentrating\");\r\nexports.FlowSurveyQuestions.set(\"flowClear\", \"My mind is completely clear\");\r\nexports.FlowSurveyQuestions.set(\"flowAbsorbed\", \"I am totally absorbed in what I am doing\");\r\nexports.FlowSurveyQuestions.set(\"flowAccord\", \"The right thoughts/movements occur of their own accord\");\r\nexports.FlowSurveyQuestions.set(\"flowKnow\", \"I know what I have to do each step of the way\");\r\nexports.FlowSurveyQuestions.set(\"flowControl\", \"I feel that I have everything under control\");\r\nexports.FlowSurveyQuestions.set(\"flowLost\", \"I am completely lost in thought\");\r\nexports.FlowSurveyQuestions.set(\"flowStake\", \"Something important to me is at stake here\");\r\nexports.FlowSurveyQuestions.set(\"flowMistake\", \"I must not make any mistakes here\");\r\nexports.FlowSurveyQuestions.set(\"flowWorried\", \"I am worried about failing\");\r\nexports.FlowSurveyQuestions.set(\"flowCompare\", \"Compared to all other activities which I partake easy in, this one is difficult\");\r\nexports.FlowSurveyQuestions.set(\"flowCompetence\", \"I think that my competence in this area is high\");\r\nexports.FlowSurveyQuestions.set(\"flowDemand\", \"For me personally, the current demands are too high\");\r\nexports.FlowSurveySequence = [\"flowChallenge\", \"flowSmooth\", \"flowTime\",\r\n    \"flowConcentrate\", \"flowClear\", \"flowAbsorbed\", \"flowAccord\",\r\n    \"flowKnow\", \"flowControl\", \"flowLost\", \"flowStake\", \"flowMistake\",\r\n    \"flowWorried\", \"flowCompare\", \"flowCompetence\", \"flowDemand\"];\r\nexports.UsabilitySurveyQuestions = new Map();\r\nexports.UsabilitySurveyQuestions.set(\"tool\", \"Do you feel like the tool supported your performing the task?\");\r\nif (config_1.IsChronicles) {\r\n    exports.UsabilitySurveyQuestions.set(\"chronicles\", \"Did you find the ability to navigate between histories helpful?\");\r\n}\r\nexports.UsabilitySurveyQuestions.set(\"delayFrustration\", \"Were the delays frustrating?\");\r\nexports.UsabilitySurveyQuestions.set(\"delayDifficulty\", \"Did the delays make thing difficult?\");\r\nexports.UsabilitySurveySequence = [\r\n    \"tool\",\r\n    \"delayFrustration\",\r\n    \"delayDifficulty\"\r\n].concat((config_1.IsChronicles ? [\"chronicles\"] : []));\r\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = __webpack_require__(0);\r\nvar experiment_1 = __webpack_require__(13);\r\nvar CancelSurvey = /** @class */ (function (_super) {\r\n    __extends(CancelSurvey, _super);\r\n    function CancelSurvey(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.onCommentChange = _this.onCommentChange.bind(_this);\r\n        _this.nextStep = _this.nextStep.bind(_this);\r\n        _this.toggleChoices = _this.toggleChoices.bind(_this);\r\n        _this.state = {\r\n            choices: [],\r\n            comment: \"\",\r\n            warn: false,\r\n        };\r\n        return _this;\r\n    }\r\n    CancelSurvey.prototype.onCommentChange = function (event) {\r\n        this.setState({ comment: event.target.value });\r\n    };\r\n    CancelSurvey.prototype.toggleChoices = function (c) {\r\n        this.setState(function (prev) {\r\n            var idx = prev.choices.indexOf(c);\r\n            if (idx > -1) {\r\n                prev.choices.splice(idx, 1);\r\n            }\r\n            else {\r\n                prev.choices.push(c);\r\n            }\r\n            return prev;\r\n        });\r\n    };\r\n    CancelSurvey.prototype.nextStep = function () {\r\n        // check for null\r\n        var choices = this.state.choices;\r\n        if (choices.length === 0) {\r\n            this.setState({ warn: true });\r\n        }\r\n        else {\r\n            this.props.nextStep({\r\n                choices: this.state.choices.join(\", \"),\r\n                comment: this.state.comment\r\n            });\r\n        }\r\n    };\r\n    CancelSurvey.prototype.render = function () {\r\n        var _this = this;\r\n        var choices = this.state.choices;\r\n        var toggleChoices = this.toggleChoices;\r\n        function _genRadio(c, text) {\r\n            return React.createElement(\"label\", null,\r\n                React.createElement(\"input\", { required: true, type: \"checkbox\", value: experiment_1.CancelReason[c], checked: choices.indexOf(c) > -1, onChange: function () { return toggleChoices(c); } }),\r\n                text);\r\n        }\r\n        var choicesDiv = React.createElement(React.Fragment, null,\r\n            React.createElement(\"p\", { className: \"question\" }, \"Why did you decide to cancel?\"),\r\n            React.createElement(\"div\", { className: \"radio-button-wrapper\" },\r\n                _genRadio(experiment_1.CancelReason.TasksTooHard, \"Tasks are too hard\"),\r\n                _genRadio(experiment_1.CancelReason.DelaysFrustrating, \"Delays are frustrating\"),\r\n                _genRadio(experiment_1.CancelReason.PayTooLow, \"Pay is too low\"),\r\n                _genRadio(experiment_1.CancelReason.Other, \"Other (please specify below)\")));\r\n        return React.createElement(React.Fragment, null,\r\n            this.state.warn === true\r\n                ? React.createElement(\"p\", { className: \"warning\" }, \"Please select at least one choice.\")\r\n                : null,\r\n            choicesDiv,\r\n            React.createElement(\"label\", { htmlFor: \"comments\" },\r\n                React.createElement(\"i\", null, \"(Optional)\"),\r\n                \" Any additional comments?\"),\r\n            React.createElement(\"br\", null),\r\n            React.createElement(\"textarea\", { rows: 5, cols: 39, id: \"comments\", name: \"comments\", onChange: this.onCommentChange }),\r\n            React.createElement(\"br\", null),\r\n            React.createElement(\"button\", { className: \"general-btn exp-nav-btn\", onClick: function () { return _this.nextStep(); } }, \"Submit and Exit\"));\r\n    };\r\n    return CancelSurvey;\r\n}(React.Component));\r\nexports.default = CancelSurvey;\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 188f26450e92c1cc873d","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0","import Diel from \"./diel\";\nimport { DEBUG } from \"../lib/experiment/config\";\n\nexport const diel = new Diel();\n(<any>window).diel = diel;\n\nif (!DEBUG) {\n  console.log = () => {};\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/diel/setup.ts","import { LatencyOption } from \"../helper\";\n\nexport const Researcher = \"chroniclesv2\";\nexport const ExperimentName = \"chroniclesv2draft\";\n\nexport const ExpVersion = \"V0\";\nexport const IsProd = true;\nexport const FilePathPrefix = IsProd ? \"https://logical-interactions.github.io/chroniclesv2/dist/\" : \"./dist/\";\nexport const DEBUG = true && !IsProd; // if its prod debug must be false\nexport const IsChronicles = true;\nexport const ExperimentLatencyOption = LatencyOption.High;\n\nexport const BonusReward = 3;\nexport const ExtraBonusReward = 3;\nexport const TaskReward = 0.2;\n\nexport function judgeScreenSize() {\n  return (screen.width < 1080) || (screen.height < 800);\n}\n\nexport function judgeWindowSize() {\n  return (window.innerWidth < 1000 || window.innerHeight < 450);\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/experiment/config.ts","export const ScatterChartsBrushs = [\"arrDelay\", \"depDelay\"];\nexport const AllCharts = [\"carrier\", \"day\", \"state\", \"delays\"];\n\n\nexport enum EventType {\n  Browser,\n  ExpVersion,\n  IsMobile, // true/false\n  ScreenWidth,\n  ScreenHeight,\n  WindowWidth,\n  WindowHeight,\n  IsChronicles, // a label for whether it is chronicles\n  HappyOrNot,\n  Clip,\n  Focus,\n  Blur\n}\n\n\n// Note: haven't yet used/implemented\nexport enum ScaleOption {\n  Fixed,\n  Variable\n}\n\nexport enum LatencyOption {\n  None,\n  Low,\n  High\n}\n\nexport enum HistoryDisplayOption {\n  SmallMultiples,\n  Scrubber,\n  FilmStrip\n}\n\nexport function readFileSync(filename: string): string {\n  let request = new XMLHttpRequest();\n  request.open(\"GET\", filename, false);  // `false` makes the request synchronous\n  request.send(null);\n  if (request.status === 200) {\n    return request.responseText;\n  } else {\n    return \"\";\n  }\n}\n\nexport function readFileAsync(filename: string): Promise<any> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"GET\", filename, true);\n    xhr.onload = () => resolve(xhr.responseText);\n    xhr.onerror = () => reject(xhr.statusText);\n    xhr.send();\n  });\n}\n\nexport function getLatency(latencyOption: LatencyOption) {\n  if (latencyOption === LatencyOption.None) {\n    return 0;\n  } else if (latencyOption === LatencyOption.Low) {\n    return 500 + Math.random() * 500;\n  } else {\n    return 3000 + Math.random() * 2000;\n  }\n}\n\nexport function isLoading(v: string) {\n  if (!v) {\n    return true;\n  }\n  for (let i = 0; i < AllCharts.length; i ++) {\n    if (v.indexOf(AllCharts[i]) < 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/helper.ts","import { AxisScale } from \"d3\";\n\nexport const lightBlue = \"rgba(76, 120, 168, 0.5)\";\nexport const darkBlue = \"rgba(76, 120, 168, 1)\";\nexport const scatterDark = \"darkblue\";\nexport const scatterLight = \"LemonChiffon\";\nexport const scatterBaseDark = \"lightgray\";\nexport const scatterBaseLight = \"darkgray\";\nexport const lightGray = \"rgba(0, 0, 0, 0.07)\";\nexport const darkGray = \"rgba(0, 0, 0, 0.2)\";\nexport const brushColor = \"rgba(128,128,128, 0.3)\";\n\n// TODO: when creating the diel compiler, we will also create a typed object file\n// for the purpose used in the following.\nexport type IsLoading = {status: number}; // should be boolean but sqlite does not have boolean type\nexport type LinearBarChartType = { x: number; y: number; }[];\nexport type CategoricalBarChartType = { x: string; y: number; }[];\nexport type BarChartDataType = CategoricalBarChartType | LinearBarChartType;\nexport type ScatterPlotDataType = {x: number, y: number, v: number}[];\nexport type LoadingSummary = {itxId: number, loaded: boolean}[];\nexport type RectSVGSpec = {\n  x: number,\n  y: number,\n  color: string,\n  onClick: () => void,\n  barWidth: number,\n  className?: string;\n}[];\n\nexport interface RangeSelection {low: number; high: number; }\nexport interface StringSelection { selection: string; }\n\nexport interface RectSection {\n  low: number;\n  low2: number;\n  high: number;\n  high2: number;\n}\nexport type BrushSelection = string\n                            | RangeSelection\n                            | RectSection;\n\nexport type ChartHelperReturnValue = {\n    brushFn: (low: number, high: number) => void;\n    rectsSpec: RectSVGSpec;\n    x: AxisScale<any>;\n    y: AxisScale<any>;\n    hasSelection: boolean;\n  };\n\nexport const LayoutInfo: {[index: string]: {\n  width: number, height: number,\n  marginTop: number,\n  marginLeft: number,\n  marginRight: number,\n  marginBottom: number,\n  verticalOrientation?: boolean\n}} = {\n  timeLine: {\n    width: 750,\n    height: 80,\n    marginBottom: 40,\n    marginLeft: 40,\n    marginRight: 50,\n    marginTop: 25,\n  },\n  delays: {\n    width: 250,\n    height: 300,\n    marginTop: 20,\n    marginBottom: 40,\n    marginLeft: 40,\n    marginRight: 10,\n  },\n  // flipped\n  carrier: {\n    width: 300,\n    height: 150,\n    marginLeft: 1,\n    marginTop: 10,\n    marginBottom: 60,\n    marginRight: 50,\n    verticalOrientation: false,\n  },\n  state: {\n    width: 300,\n    height: 150,\n    marginLeft: 1,\n    marginTop: 10,\n    marginBottom: 40,\n    marginRight: 50,\n    verticalOrientation: false,\n  },\n  // flipped\n  day: {\n    width: 300,\n    height: 150,\n    marginLeft: 1,\n    marginTop: 10,\n    marginBottom: 40,\n    marginRight: 50,\n    verticalOrientation: false,\n  }\n};\n\nexport interface SharedChartConfig {\n  baseFill: string;\n  selectFill: string;\n  showIntro: boolean;\n  annotations: boolean;\n  verticalOrientation: boolean;\n  debug: boolean;\n}\n\nexport interface SharedChartProps extends Partial<SharedChartConfig> {\n  chart: string;\n  // the following are all provided directly via configurations\n  // height: number;\n  // width: number;\n  // marginBottom: number;\n  // marginLeft: number;\n  // marginRight: number;\n  // marginTop: number;\n  xLabel: string;\n  yLabel: string;\n}\n\nexport const DefaultChartProps: SharedChartConfig = {\n  baseFill: lightBlue,\n  showIntro: false,\n  selectFill: darkBlue,\n  annotations: true,\n  verticalOrientation: true,\n  debug: false,\n};\n\nexport function rectContains(bounds: RectSection, x: number, y: number) {\n  if (!bounds) return false;\n  return ((x < bounds.high && x > bounds.low) && (y < bounds.high2) && (y > bounds.low2));\n}\n\nexport function rectToString(selected: RectSection) {\n  if (selected && selected.low && selected.high && selected.low2 && selected.high2) {\n    return selected.low.toString() + selected.high.toString() + selected.low2.toString() + selected.high2.toString();\n  } else {\n    return \"\";\n  }\n}\n\n\nfunction isRect(object: any): object is RectSection {\n  return \"x1\" in object && \"x2\" in object;\n}\n\n// it's amazing that the syntax highligher knows the following is correct...\nexport function hasBrushSelection(s: BrushSelection | RectSection): boolean {\n  if (s) {\n    if (typeof s === \"string\") {\n      return (s.length > 0);\n    } else if (isRect(s)) {\n      return (s.low && s.high && s.low2 && s.high2) ? true : false;\n    } else {\n      return (s.low && s.high) ? true : false;\n    }\n  }\n  return false;\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/chart/chartHelper.ts","import { IsChronicles, FilePathPrefix } from \"./config\";\n\nexport const IntroSpec = new Map<string, string>();\nIntroSpec.set(\"sum\",\n  `This is the visualization dashboard of flights data and we will walk you through\n  each piece of the dashboard. Don't worry if there is something that you don't understand---the tutorial\nwill cover all the components.`);\n  IntroSpec.set(\"clickState\",\n  `For instance, this chart shows the count of flights to Hawaii by state.\n  You can click on a bar to filter other charts.\n  Go ahead and click on CA (first bar), then click next to continue the tutorial.\n  `);\nIntroSpec.set(\"dayBar\",\n  ` After some delay, the charts will update with data filtered by your selection.\n  During the delay, you will see a <b>yellow bar flashing</b> below the chart.\n  This chart shows the number of flights per day in the first half of December.\n  The gray bars in the background shows the results without any filters and the blue\n  are the results filtered by your selections.\n  Go ahead and click-and-drag <i>between</i> the bars to select multiple at once (you will see your\n    mouse turn into a cross). Then click continue`);\nIntroSpec.set(\"heatmap1\",\n  `This is a heatmap that compares arrival and departure delays, filtered by the\n  selections you have made so far.`);\n// so this comes back\nIntroSpec.set(\"delayLegend\",\n  `This is a legend for how to read the heatmap---the darker the color, the higher the density`);\nIntroSpec.set(\"heatmap2\",\n  `You will notice that the left-bottom most region has a very high count\n   and the light regions to have just one\n   Click on a region of the heat map for the exact count`);\nIntroSpec.set(\"delayDistribution\",\n  `This vertical bar provides a <b>faster way to read the delay</b>---flights with either arrival or departure\n  delay of higher than 20 minutes will count as delayed, shown as red, otherwise white.`);\nIntroSpec.set(\"carrierBar\",\n  `This chart shows the total count of flight by carriers.\n   Also, note that some interactions that you have performed in the past may respond without delay`);\nIntroSpec.set(\"resetBtn\",\n  `Click the reset button to remove the existing filter on the chart.  The button will only show when there is a filter.`);\nIntroSpec.set(\"chronicles\",\n  `Browse your previous interactions by by clicking directly on any of the blocks (or arrow keys),\n  each of which represents a past interaction.\n  Blocks to the left are older, and blocks to the right are newer.\n  <b>\"N\"</b> means the most recent block representing your interaction.\n  <b>Orange</b> means the active interaction you are currently looking at.\n  <b>Flashing</b> means that the data is loading for the block.\n  Note that currently the keys are used for navigating the tutorial and will work after\n  the tutorial session is done.`);\nIntroSpec.set(\"historyButton\",\n  `This button removes past interactions you have created. You may find this useful to declutter the interface.`);\nIntroSpec.set(\"unclipButton\",\n  `This button zooms the charts in, showing only the filtered results (the gray background data gone). It achieves a\n  zooming effect, which is useful when the filtered data is small and the values difficult to read.`);\nIntroSpec.set(\"feedback\",\n  `If at any time you feel happy, frustrated, or confused about the task,\n  feel free to click the corresponding emoji to let us know.`);\nIntroSpec.set(\"tutorial\",\n  `Click to walk through the tutorial again.\n  After you start training tasks, you will not be able to see the tutorial.`);\nIntroSpec.set(\"videos\",\n  `Click here for some videos demonstraiting the techniques.\n   After you are done viewing all the techniques,\n   you will be taken to the tasks page.`);\n\n// http://2ality.com/2017/04/conditional-literal-entries.html\nexport const IntroSteps = [\n  \"sum\", \"clickState\", \"dayBar\", \"resetBtn\", \"carrierBar\",\n  \"heatmap1\", \"delayLegend\", \"heatmap2\",\n  \"delayDistribution\",\n  \"unclipButton\",\n  ...(IsChronicles ? [\"chronicles\", \"historyButton\"] : []),\n  \"feedback\", \"tutorial\", \"videos\"\n];\n\nexport const videoTutorials = [\n  ...(IsChronicles ? [\n    {\n      title: \"Selection Without Waiting\",\n      videoLink: `${FilePathPrefix}concurrent_interaction.mov`,\n      texts: [\n        `The visualization tool allows you to perform multiple interactions at the same time.`,\n        `You can specify multiple filters across charts---there is\n        no need to wait for individual ones.`\n      ]\n    },\n    {\n      title: \"Navigate Results By Clicking on History Blocks\",\n      videoLink: `${FilePathPrefix}navigate.mov`,\n      texts: [\n        `You can revisit these past results by clicking on the blocks or using arrow keys;\n         this way, you don't have to wait for every single result before you proceed.`,\n         `Know that you also have the option of using up/left or down/right\n         keys for navigating in history in addition to clicking on the blocks.\n         The keys may be faster.`\n        ]\n    }] : []),\n  ];\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/experiment/tutorialMaterial.ts","module.exports = d3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 6\n// module chunks = 0","import { TaskQA, TaskTypes } from \"./tasks\";\nimport { DEBUG } from \"./config\";\n\nconst Airlines = [\"United\", \"Alaska\", \"Hawaiian\", \"Delta\", \"American\", \"Virgin\"];\n\nconst popAirlineAnswer = \"United\";\nconst popAirlineOption = Airlines.map(a => {return {\n    text: a,\n    value: popAirlineAnswer === a ? 1 : 0\n  };\n});\n\nconst delaySearchAnswer = 9;\nconst delaySearchOptions = new Array(7).fill(0).map((_, i) => {\n  return {\n    text: `${i + 5}th`,\n    value: (i + 5 === delaySearchAnswer) ? 1 : 0,\n  };\n});\n\n\n// Note to self: make sure that there is only 1 or 0 values for training\n// otherwise it makes the result hard to display\nexport const trainingQA: TaskQA[] = [{\n    // fix me: not correct yet\n    qId: \"popAirline_training\",\n    question: `Which airline do people from CA fly the most?`,\n    type: TaskTypes.ComplexCompareValue,\n    choices: popAirlineOption\n  },\n  // interstingly, this will depend on the strategy --- if the user realizes that\n  // they can directly search for the pattern; this might add variance to the latency times\n  // tho these kind of issues seem hard to avoid\n  {\n    qId: \"delaySearch_training\",\n    question: `We found that on the day of the 4th, a Monday, delays were almost twice the average.\n      Could you identify another day in that week that also has higher delays?`,\n    type: TaskTypes.PatternSearch,\n    choices: delaySearchOptions,\n  },\n  {\n    qId: \"delaySearch_mem_training\",\n    question: \"Did you notice any days that had very low delays?\",\n    type: TaskTypes.Recall,\n    linkedQId: \"delaySearch_training\",\n    note: `The task you just completed is a \"memory tasks\"---we are curious if you remember any of the\n          intermediate results you see on the page`,\n    choices: [\n      {\n        text: \"None\",\n        value: 0\n      },\n      {\n        text: \"5th or 6th\",\n        value: 0\n      },\n      {\n        text: \"7th or 8th\",\n        value: 1\n      },\n      {\n        text: \"9th or 10th\",\n        value: 0\n      }]\n  },\n  {\n    qId: \"singleAirline_training\",\n    question: \"For the states with more flights (i.e., before TT in the chart of flights by state on the left), are there any states that flies with a single carrier? Select one that applies.\",\n    type: TaskTypes.PatternSearch,\n    choices: [\n      {\n        text: \"CA\",\n        value: 0\n      },\n      {\n        text: \"WA\",\n        value: 0\n      },\n      {\n        text: \"OR\",\n        value: 0\n      },\n      {\n        text: \"AZ\",\n        value: 0\n      },\n      {\n        text: \"TX\",\n        value: 0\n      },\n      {\n        text: \"NV\",\n        value: 1\n      },\n      {\n        text: \"AK\",\n        value: 1\n      },\n      {\n        text: \"CO\",\n        value: 1\n      },\n    ]\n  }\n];\n\nconst carrierSearchAnswer = [\"Hawaiian\", \"Delta\"];\nconst carrierSearchChoices = Airlines.map(a => {return {\n    text: a,\n    value: carrierSearchAnswer.indexOf(a) > -1 ? 1 : 0\n  };\n});\n\nconst carrierSearchMemAnswer = [\"Alaska\", \"Virgin\"];\nlet carrierSearchMemChoices = Airlines.map(a => {return {\n    text: a,\n    value: carrierSearchMemAnswer.indexOf(a) > -1 ? 1 : 0\n  };\n});\ncarrierSearchMemChoices.push({\n  text: \"None\",\n  value: 0,\n});\n\nconst TaskStates = [\"CA\", \"WA\", \"AZ\", \"TX\", \"OR\", \"CO\", \"NV\", \"AK\", \"IL\", \"NY\", \"UT\", \"TT\", \"GA\", \"NJ\", \"MN\", \"VA\"];\nconst holidayStratAnswers = [\"CO\", \"IL\", \"NY\", \"UT\"];\nconst holidayStratChoices = TaskStates.map(text => ({\n  text,\n  value: holidayStratAnswers.indexOf(text) > -1 ? 1 : 0\n}));\nconst holidayStratMemAnswers = [\"TX\", \"GA\", \"NJ\"];\nconst holidayStratMemChoices = TaskStates.map(text => ({\n  text,\n  value: holidayStratMemAnswers.indexOf(text) > -1 ? 1 : 0\n}));\n\nconst popularStateAmericanChoices = TaskStates.map(text => ({\n  text,\n  value: text === \"AZ\" ? 1 : text === \"TX\" ? 0.5 : text === \"CA\" ? 0.1 : 0\n}));\n\nexport const taskQA: TaskQA[] = [\n  {\n    // start with some easy questions\n    qId: \"popularStateAmerican_task\",\n    question: \"What is the <b>second</b> most popular state that flies with the carrier, <i>American</i>?\",\n    type: TaskTypes.SimpleCompareValue,\n    choices: popularStateAmericanChoices\n  },\n  {\n    qId: \"readNV24_task\",\n    question: \"What is the range of <b>arrival delay</b> for NV on the 24th?\",\n    type: TaskTypes.ReadValue,\n    choices: [\n      {\n        text: \"less than 60\",\n        value: 0,\n      },\n      {\n        text: \"60 to 100\",\n        value: 1,\n      },\n      {\n        text: \"more than 100\",\n        value: 0,\n      }\n    ]\n  },\n  {\n    qId: \"readORCO_task\",\n    question: \"Is there more flights from TX with American on the 16th than flights from CO with United on the 20th?\",\n    type: TaskTypes.ComplexCompareValue,\n    choices: [{\n      text: \"yes\",\n      value: 1,\n    },\n    {\n      text: \"no\",\n      value: 0,\n    }]\n  },\n  {\n    qId: \"readORCO_mem_task\",\n    question: \"Do you remember if TX also flies with United on the 16th? And if so, more than CO's with United on the 20th?\",\n    type: TaskTypes.Recall,\n    linkedQId: \"readORCO_task\",\n    choices: [{\n      text: \"TX on 16th has less or none\",\n      value: 1,\n    },\n    {\n      text: \"TX on 16th has more\",\n      value: 0,\n    }]\n  },\n  {\n    // start with some easy questions\n    qId: \"holidayStrat_task\",\n    question: \"There are a few states with noticeable increase of fights for the holiday times (from around the 21st), find one (there maybe be more than one, but one is enough)\",\n    type: TaskTypes.PatternSearch,\n    choices: holidayStratChoices\n  },\n  {\n    qId: \"holidayStrat_mem_task\",\n    question: \"Do you remember seeing any states whose flight counts does not change at all through this period (second half of December)?\",\n    type: TaskTypes.Recall,\n    linkedQId: \"holidayStrat_task\",\n    choices: holidayStratMemChoices\n  },\n  {\n    qId: \"delayTrendHoliday_task\",\n    question: \"Is the delay longer or shorter around Christmas (23rd, 24th, 25th)?\",\n    type: TaskTypes.ComplexCompareValue,\n    choices: [\n      {\n        text: \"All days are normal\",\n        value: 0,\n      },\n      {\n        text: \"All days have longer delays\",\n        value: 0,\n      },\n      {\n        text: \"All days have shorter delays\",\n        value: 0,\n      },\n      {\n        text: \"Some days have shorter delays, others normal\",\n        value: 0,\n      },\n      {\n        text: \"Some days have longer delays, others normal\",\n        value: 1,\n      }\n    ]\n  },\n  {\n    qId: \"delayTrendHoliday_mem_task\",\n    question: \"Do you remember what the longest <b>arrival</b> delay acorss these three days was, roughly?\",\n    type: TaskTypes.Recall,\n    linkedQId: \"delayTrendHoliday_task\",\n    choices: [\n      {\n        text: \"less than 300\",\n        value: 0\n      },\n      {\n        text: \"between 300 and 400\",\n        value: 0\n      },\n      {\n        text: \"betwee 400 and 500\",\n        value: 1\n      },\n      {\n        text: \"more than 500\",\n        value: 0\n      }\n    ]\n  },\n  // similar question to training\n  {\n    qId: \"carrierSearch_task\",\n    question: `Was there a carrier that did worse around Christmas compared to that carrier's average delays? (24th or 25th)?`,\n    type: TaskTypes.PatternSearch,\n    choices: carrierSearchChoices,\n  },\n  {\n    qId: \"carrierSearch_mem_task\",\n    question: \"Did you notice any carriers that have consistently low (always below an hour) delays?\",\n    type: TaskTypes.Recall,\n    linkedQId: \"carrierSearch_task\",\n    choices: carrierSearchMemChoices\n  }\n];\n\nif (DEBUG) {\n  // make sure that the qIds are all unique --- this is due to copy paste errors\n  // (I should invest in unit tests...)\n  // do this by bounting the set and the original length\n  const qIds = trainingQA.concat(taskQA).map(q => q.qId);\n  const uniqueItems = new Set(qIds);\n  if (qIds.length - uniqueItems.size > 0) {\n    console.log(qIds, uniqueItems);\n    throw new Error(`There are duplicate qIds!`);\n  }\n}\n\nexport const SurveyCount = 3;\nexport const holidayCount = taskQA.length;\nexport const TotalAnalysisCount = trainingQA.length + taskQA.length;\nexport const TotalTaskCount = TotalAnalysisCount + SurveyCount;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/experiment/experimentQAs.ts","import { QueryResults, Database } from \"sql.js\";\n\nexport function assertQueryHasResult(r: QueryResults, query?: string) {\n  if ((!r) || (!r.values)) {\n    throw new Error(`Query ${query} has NO result`);\n  }\n}\n\n// for console debugging\nexport function d(db: Database, sql: string) {\n  let r = db.exec(sql);\n  if (r.length > 0) {\n    r[0].values.map((v) => {\n      v.map((c, i) => {\n        if (r[0].columns[i] === \"ts\") {\n          c = new Date(c as number).toDateString();\n        }\n      });\n    });\n    console.log(r[0].columns.join(\"\\t\"));\n    console.log(JSON.stringify(r[0].values).replace(/\\],\\[/g, \"\\n\").replace(\"[[\", \"\").replace(\"]]\", \"\").replace(/,/g, \"\\t\"));\n  } else {\n    console.log(\"NO RESULT\");\n  }\n}\n(<any>window).d = d;\n\n\nexport function log(msg: string, source: string) {\n  console.log(`[${source}] ${msg}`);\n  return 1;\n}\n\nexport function timeNow() {\n  return +new Date();\n}\n\n// this is needed because the groupby has non deterministic orderings\n// and I wasn't able to write a custom reducer\n// I suspect this is faster anyways\nexport function hashCompare(a: string, b: string): number {\n  // split by -\n  const aVals = a.split(\"-\");\n  const bVals = b.split(\"-\");\n  for (let i = 0; i < aVals.length; i++) {\n    const av = aVals[i];\n    const table = av.split(\":\")[0];\n    const bR = bVals.filter(bv => bv.split(\":\")[0] === table);\n    if (bR.length !== 1) {\n      console.log(\"didn't find\", table, bVals);\n      return 0;\n    }\n    if (bR[0] !== av) {\n      return 0;\n    }\n  }\n  return 1;\n}\n\nexport function prettyTimeNow() {\n  return new Date().toTimeString().substr(0, 8);\n}\n\n/**********************\n * Debugging support\n *********************/\n\nexport function downloadHelper(blob: Blob, name: string) {\n  let a = document.createElement(\"a\");\n  a.href = window.URL.createObjectURL(blob);\n  a.download = name + \"_\" + prettyTimeNow() + \".db\";\n  a.onclick = function() {\n    setTimeout(function() {\n      window.URL.revokeObjectURL(a.href);\n    }, 1500);\n  };\n  a.click();\n}\n\n\nexport function downloadQueryResultAsCSV(db: Database, query: string) {\n  let csvContent = \"\";\n  let r = db.exec(query);\n  if (r.length && r[0].values) {\n    csvContent += r[0].columns.join(\",\") + \"\\r\\n\";\n    r[0].values.forEach((rowArray) => {\n      let row = rowArray.join(\",\");\n      csvContent += row + \"\\r\\n\";\n    });\n    let b = new Blob([csvContent], {type: \"text/plain;charset=UTF-8\"});\n    downloadHelper(b, \"userData.csv\");\n    console.log(\"should have downloaded\", csvContent);\n  } else {\n    console.log(\"NO RESULT\");\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!../shared/dbHelper.ts","// the goal of training tasks is to make sure that people understand what is going on\n// in this case they will do some simple ones\n\n// gong to limit the number of years to 3.\n\nexport enum FeedbackType {\n  Happy,\n  Angry,\n  Confused\n}\n\nexport enum TaskStep {\n  Description,\n  Answering,\n  Submitted,\n}\n\nexport enum TaskTypes {\n  ReadValue,\n  SimpleCompareValue,\n  ComplexCompareValue,\n  PatternSearch,\n  Trend,\n  Recall,\n}\n\nexport enum TaskConfidence {\n  NotAtAll,\n  Somewhat,\n  Very\n}\n\nexport type TaskQA = {\n  // this is for logging\n  qId: string,\n  type: TaskTypes,\n  question: string,\n  // too much effort, changing to just select any that applies\n  choices: {\n    text: string,\n    value: number\n  }[],\n  note?: string,\n  linkedQId?: string;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/experiment/tasks.ts","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nimport { PageContainer } from \"./components/PageContainer\";\n\n// this is the place where DIEL should be loaded with the\n// generated .db file\nexport function loadPage() {\n  ReactDOM.render(\n    <PageContainer/>,\n    document.getElementById(\"wrapper\")\n  );\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/index.tsx","import * as React from \"react\";\n\nimport BarChart from \"./Charts/BarChart\";\nimport Scatterplot from \"./Charts/Scatterplot\";\nimport HappyOrNot from \"./HappyOrNot\";\nimport { ChronicleSlider } from \"./ChronicleSlider\";\nimport { IsChronicles } from \"../lib/experiment/config\";\nimport { diel } from \"../diel/setup\";\nimport { EventType } from \"../lib/helper\";\nimport { LoadingSummary } from \"../lib/chart/chartHelper\";\nimport { IntroSpec, IntroSteps } from \"../lib/experiment/tutorialMaterial\";\n\ninterface ScrubberViewProps {\n  // itxIdOffset?: number;\n  showIntro?: boolean;\n  width?: number;\n  height?: number;\n}\n\ninterface ScrubberViewState {\n  stateKey: string;\n  clipped: boolean;\n  focusItx: number;\n  itxIdsInfo: LoadingSummary;\n  control: boolean;\n}\n\nexport default class ScrubberView extends React.Component<ScrubberViewProps, ScrubberViewState> {\n  carrierChart: BarChart;\n  stateChart: BarChart;\n  dayChart: BarChart;\n  delaysChart: Scatterplot;\n\n  static defaultProps = {\n    width: 800,\n    height: 100,\n    isTraining: false,\n  };\n\n  constructor(props: ScrubberViewProps) {\n    super(props);\n    // by default show the most recent unless otherwise specified\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.toggleClip = this.toggleClip.bind(this);\n    // this is the refresh, not very sophisticated for now\n    this.loadingSummary = this.loadingSummary.bind(this);\n    this.focusItx = this.focusItx.bind(this);\n    // this.setStateKey = this.setStateKey.bind(this);\n    this.setControl = this.setControl.bind(this);\n    this.state = {\n      control: true,\n      stateKey: \"training\",\n      clipped: true,\n      focusItx: null,\n      itxIdsInfo: null,\n    };\n    // diel.SetStateRefresh(this.setStateKey);\n    diel.BindFreeze(this.setControl);\n  }\n\n  setControl(control: boolean) {\n    this.setState({control});\n  }\n\n  // setStateKey() {\n  //   this.setState({stateKey: \"task\"});\n  // }\n\n  focusItx(focusItx: {itxId: number}) {\n    this.setState({focusItx: focusItx.itxId});\n  }\n\n  loadingSummary(itxIdsInfo: LoadingSummary) {\n    // console.log(\"loading summary called with info\", itxIdsInfo);\n    this.setState({itxIdsInfo});\n  }\n\n  componentWillMount() {\n    if (IsChronicles) document.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    if (IsChronicles) document.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentDidMount() {\n    diel.BindOutput(\"loadingSummary\", this.loadingSummary);\n    diel.BindOutput(\"focusItx\", this.focusItx, {singleRow: true});\n    // by this point all the bound functions should have been called\n    // need to force a refresh; a little bit brittle\n    console.log(\"React all setup, calling tick\");\n    diel.tick()();\n  }\n\n  handleKeyDown(e: any) {\n    // arrow up/down button should select next/previous list element\n    if (e.keyCode === 38 || e.keyCode === 37) {\n      diel.Input.deltaItx({$val: -1});\n    } else if (e.keyCode === 40 || e.keyCode === 39) {\n      diel.Input.deltaItx({$val: 1});\n    }\n  }\n\n  toggleClip() {\n    this.setState((prev) => {\n      const clipped = !prev.clipped;\n      diel.LogData.eventLog({\n        $eventName: EventType[EventType.Clip],\n        $parameter: clipped\n      });\n      return {clipped};\n    });\n  }\n\n  // resetAll() {\n  //   diel.Input.xBrushItx({$chart: });\n  // }\n\n  render() {\n    let { showIntro } = this.props;\n    let { focusItx, itxIdsInfo, clipped, control } = this.state;\n    let delays =\n        <Scatterplot\n          ref={v => this.delaysChart = v}\n          clipped={clipped}\n          showIntro={showIntro}\n          chart={\"delays\"}\n          xLabel={\"arrival delay\"}\n          yLabel={\"departure delay\"}\n          key={\"delays\"}\n        />;\n    let state = <BarChart\n          ref={v => this.stateChart = v}\n          clipped={clipped}\n          xLabel={\"state\"}\n          yLabel={\"count\"}\n          chart={\"state\"}\n          isCategorical={true}\n        />;\n    let carrier = <BarChart\n          ref={v => this.carrierChart = v}\n          clipped={clipped}\n          xLabel={\"carrier\"}\n          yLabel={\"count\"}\n          chart={\"carrier\"}\n          isCategorical={true}\n        />;\n    let day = <BarChart\n        ref={v => this.dayChart = v}\n        clipped={clipped}\n        xLabel={\"day\"}\n        yLabel={\"count\"}\n        chart={\"day\"}\n        isCategorical={false}\n        showIntro={showIntro}\n      />;\n    const slider = IsChronicles ? <ChronicleSlider\n      itxIdsInfo={itxIdsInfo}\n      focusItx={focusItx}\n    /> : null;\n\n    // so when the item is not specified, the field is omitted\n    return <div key={this.state.stateKey} className={`vis-portal ${control ? \"\" : \"dimmed\"}`}>\n      <div style={{float: \"left\"}}>\n        <button\n          className=\"general-btn vis-btn \"\n          style={{width: 75}}\n          onClick={this.toggleClip}\n          data-step={showIntro ? IntroSteps.indexOf(\"unclipButton\") + 1 : null}\n          data-intro={showIntro ? IntroSpec.get(\"unclipButton\") : null}\n          >{this.state.clipped ? \"\" : \"un\"}zoom</button>\n        {/* <button\n          className=\"general-btn vis-btn \"\n          onClick={this.resetAll}\n          data-step={showIntro ? IntroSteps.indexOf(\"resetAllBtn\") + 1 : null}\n          data-intro={showIntro ? IntroSpec.get(\"resetAllBtn\") : null}\n          >reset filters</button> */}\n        {IsChronicles\n          ? <button\n            className=\"general-btn vis-btn\"\n            onClick={diel.Input.deleteItx}\n            data-step={showIntro ? IntroSteps.indexOf(\"historyButton\") + 1 : null}\n            data-intro={showIntro ? IntroSpec.get(\"historyButton\") : null}\n            >clear history</button>\n          : null}\n      </div>\n      <div style={{float: \"left\"}}\n          data-step={showIntro ? IntroSteps.indexOf(\"feedback\") + 1 : null}\n          data-intro={showIntro ? IntroSpec.get(\"feedback\") : null}\n        >\n          <HappyOrNot />\n      </div>\n      <br style={{clear: \"both\"}} />\n      <div className=\"all-carts\"\n        data-step={showIntro ? IntroSteps.indexOf(\"sum\") + 1 : null}\n        data-intro={showIntro ? IntroSpec.get(\"sum\") : null}\n      >\n        <div className=\"chart-layout-wrapper\"\n          data-step={showIntro ? IntroSteps.indexOf(\"clickState\") + 1 : null}\n          data-intro={showIntro ? IntroSpec.get(\"clickState\") : null}\n        >\n          {state}\n        </div>\n        <div className=\"chart-layout-wrapper\"\n          data-step={showIntro ? IntroSteps.indexOf(\"dayBar\") + 1 : null}\n          data-intro={showIntro ? IntroSpec.get(\"dayBar\") : null}\n        >\n          {day}\n        </div>\n        <div className=\"chart-layout-wrapper\"\n          data-step={showIntro ? IntroSteps.indexOf(\"carrierBar\") + 1 : null}\n          data-intro={showIntro ? IntroSpec.get(\"carrierBar\") : null}\n        >\n          {carrier}\n        </div>\n        <div className=\"chart-layout-wrapper\"\n          data-step={showIntro ? IntroSteps.indexOf(\"heatmap1\") + 1 : null}\n          data-intro={showIntro ? IntroSpec.get(\"heatmap1\") : null}\n        >\n          <div\n            style={{overflow: \"auto\"}}\n          >\n            {delays}\n          </div>\n        </div>\n        <div style={{clear: \"both\"}}></div>\n      </div>\n      <div\n        data-step={showIntro && IsChronicles ? IntroSteps.indexOf(\"chronicles\") + 1 : null}\n        data-intro={showIntro && IsChronicles ? IntroSpec.get(\"chronicles\") : null}\n      >\n      {slider}\n      </div>\n    </div>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/ScrubberView.tsx","import * as React from \"react\";\n\nimport { diel } from \"../diel/setup\";\n\ninterface ResetButtonProps {\n  width: number; // width should be the same as the chart\n  chart: string;\n  disabled: boolean;\n  selection: string;\n}\n\nexport const ResetButton: React.StatelessComponent<ResetButtonProps> = (p) => {\n  if (p.selection && p.selection.length > 0) {\n    return <div style={{height: 30, width: p.width, overflow: \"hidden\"}}>\n      <button\n        style={{ marginBottom: 10 }}\n        onClick={() => diel.Input.xBrushItx({$chart: p.chart})}>\n          reset\n      </button>\n    </div>;\n  } else {\n    return <div style={{height: 30, width: p.width}}>\n    </div>;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/ResetButton.tsx","import { DEBUG, Researcher, ExperimentName } from \"./config\";\n\nexport enum ExperimentStep {\n  Introduction,\n  Demographics,\n  TrainingIntro,\n  Tutorial,\n  Training,\n  TasksIntro,\n  Tasks,\n  SurveyIntro,\n  FlowSurvey,\n  ToolSurvey,\n  FailedTraining,\n  End,\n  CancelSurvey\n}\n\nexport enum CancelReason {\n  TasksTooHard,\n  DelaysFrustrating,\n  PayTooLow,\n  Other\n}\n\n\nexport type ExperimentUnitParams = {\n  qId: string;\n};\n\n/**\n * Returns the value associated with the given URL parameter name, otherwise\n * returns null if no such parameter value is set.\n * @param {string} sParam\n * @returns {string}\n */\nexport function getUrlParameter(sParam: string) {\n  let sPageURL = decodeURIComponent(window.location.search.substring(1)),\n    sURLVariables = sPageURL.split(\"&\"),\n    sParameterName,\n    i;\n\n  for (i = 0; i < sURLVariables.length; i++) {\n    sParameterName = sURLVariables[i].split(\"=\");\n\n    if (sParameterName[0] === sParam) {\n      return sParameterName[1] === undefined ? null : sParameterName[1];\n    }\n  }\n  return null;\n}\n\nexport function setupExperimentForGpaas(numTasks: number) {\n  console.log(\"setting up experiment for\", numTasks);\n  return () => {\n    function clearTask() {}\n    function finish(opt: any) {\n      const submitTo = getUrlParameter(\"turkSubmitTo\");\n      if (DEBUG || submitTo === \"sandbox\") {\n        alert(\"finished all tasks\");\n      } else {\n        opt.submit(); // submit HIT\n      }\n    }\n    // function trainingTask() {}\n    function viewTask() {}\n    // FIXME: these are wrong\n    return {\n      name: ExperimentName,\n      task: ExperimentName,\n      researcher: Researcher,\n      numTasks,\n      params: {\n        params: [{ name: \"p\",  type: \"UniformChoice\", options: [0] }]\n      },\n      clearTask: clearTask,\n      finish: finish,\n      trainingTasks: [] as any, // () => trainingTask\n      viewTask: viewTask,\n    };\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/experiment/experiment.ts","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 14\n// module chunks = 0","import * as React from \"react\";\n\n\nimport ExperimentContainer from \"./Experiment/ExperimentContainer\";\n// import ScrubberView from \"./ScrubberView\";\n\nexport const PageContainer = () => (<>\n  <ExperimentContainer/>\n</>);\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/PageContainer.tsx","/// <reference path=\"../../../external/gpaas.d.ts\" />\n\nimport * as React from \"react\";\n\nimport Survey from \"./Survey\";\nimport Demographics from \"./Demographics\";\nimport TaskOrTrainingContainer from \"./TaskContainer\";\nimport { TrainingIntro } from \"./TrainingIntro\";\nimport { TaskIntro } from \"./TaskIntro\";\nimport Instructions from \"./Instructions\";\nimport Tutorial from \"./Tutorial\";\n\nimport { getUrlParameter, ExperimentStep, setupExperimentForGpaas } from \"../../lib/experiment/experiment\";\nimport { FlowSurveyQuestions, FlowSurveySequence, UsabilitySurveyQuestions, UsabilitySurveySequence } from \"../../lib/experiment/survey\";\nimport { diel } from \"../../diel/setup\";\nimport { trainingQA, TotalTaskCount } from \"../../lib/experiment/experimentQAs\";\nimport { EventType } from \"../../lib/helper\";\nimport { IsChronicles, ExpVersion, DEBUG } from \"../../lib/experiment/config\";\nimport CancelSurvey from \"./CancelSurvey\";\n\ninterface ExperimentContainerState {\n  step: ExperimentStep;\n  assignmentId: string;\n  focusWarning: boolean;\n  focusWarningShown: number; // hacking together a throttle\n}\n\nexport default class ExperimentContainer extends React.Component<{}, ExperimentContainerState> {\n  constructor(props: undefined) {\n    super(props);\n    this.start = this.start.bind(this);\n    this.submitDemographic = this.submitDemographic.bind(this);\n    this.startTutorial = this.startTutorial.bind(this);\n    this.startTraining = this.startTraining.bind(this);\n    this.finishTraining = this.finishTraining.bind(this);\n    this.startTasks = this.startTasks.bind(this);\n    this.finishTasks = this.finishTasks.bind(this);\n    this.finishFlowSurvey = this.finishFlowSurvey.bind(this);\n    this.finishToolSurvey = this.finishToolSurvey.bind(this);\n    this.actuallyCancel = this.actuallyCancel.bind(this);\n    this.cancelTasks = this.cancelTasks.bind(this);\n    this.startSurvey = this.startSurvey.bind(this);\n    const assignmentId = getUrlParameter(\"assignmentId\");\n    this.state = {\n      step: ExperimentStep.Introduction,\n      assignmentId,\n      focusWarning: false,\n      focusWarningShown: null\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"focus\", () => {\n      this.setState({focusWarning: false});\n      diel.LogData.eventLog({$eventName: EventType[EventType.Focus]});\n    });\n    window.addEventListener(\"blur\", () => {\n      // show pop up if during task event\n      const t = diel.IsDuringTask();\n      if (t.firstTime && (this.state.focusWarningShown === null || this.state.focusWarningShown < Date.now() - 10000)) {\n        this.setState({\n          focusWarningShown: Date.now(),\n        });\n        alert(`Please try not to leave during your next task!`);\n      } else if (t.duringTask) {\n        this.setState({focusWarning: true});\n      }\n      diel.LogData.eventLog({$eventName: EventType[EventType.Blur]});\n    });\n  }\n\n  _logStep(s: ExperimentStep) {\n    diel.LogData.eventLog({\n      $eventName: \"step\",\n      $parameter: ExperimentStep[s]\n    });\n  }\n\n  start() {\n    // this includes the surveys as well\n    // 3 surveys: demographic, flow and usability\n    const e = gpaas.startExperiment(setupExperimentForGpaas(TotalTaskCount));\n    if (e.setupSuccessful) {\n      console.log(\"experiment started succesfully\");\n      diel.LogData.eventLog({\n        $eventName: EventType[EventType.IsChronicles],\n        $parameter: IsChronicles ? \"true\" : \"false\"\n      });\n      diel.LogData.eventLog({\n        $eventName: EventType[EventType.ExpVersion],\n        $parameter: ExpVersion\n      });\n      this._logStep(ExperimentStep.TrainingIntro);\n      this.setState({ step: ExperimentStep.TrainingIntro });\n    } else {\n      console.log(\"failed to start experiment\");\n    }\n  }\n\n  startTutorial() {\n    this._logStep(ExperimentStep.Tutorial);\n    this.setState({ step: ExperimentStep.Tutorial });\n  }\n\n  startTraining() {\n    this._logStep(ExperimentStep.Training);\n    diel.ClearHistory();\n    this.setState({ step: ExperimentStep.Training });\n  }\n\n  finishTraining() {\n    // also setup db\n    // check if the answers were all wrong\n    const zeroCount = diel.TrainingZeroCount();\n    if (zeroCount === trainingQA.length) {\n      gpaas.cancelTasks();\n      this._logStep(ExperimentStep.FailedTraining);\n      this.setState({ step: ExperimentStep.FailedTraining});\n      // this.cancelTasks();\n    } else {\n      this._logStep(ExperimentStep.TasksIntro);\n      diel.ChangeToTask();\n      this.setState({ step: ExperimentStep.TasksIntro });\n    }\n  }\n\n  startTasks() {\n    this._logStep(ExperimentStep.Tasks);\n    this.setState({ step: ExperimentStep.Tasks });\n  }\n\n  finishTasks() {\n    // then make gpaas send it to server\n    this._logStep(ExperimentStep.SurveyIntro);\n    this.setState({ step: ExperimentStep.SurveyIntro });\n  }\n\n  startSurvey() {\n    this._logStep(ExperimentStep.FlowSurvey);\n    this.setState({ step: ExperimentStep.FlowSurvey });\n  }\n\n  _logSurvey(data: any, s: ExperimentStep) {\n    const values = Object.keys(data).filter(k => k !== \"warn\")\n      .map(k => ({\n        qId: k,\n        answer: data[k]\n      }));\n    gpaas.logData({\n      type: \"table\",\n      name: ExperimentStep[s],\n      values\n    });\n  }\n\n  finishFlowSurvey(data: any) {\n    this._logStep(ExperimentStep.FlowSurvey);\n    this._logSurvey(data, ExperimentStep.FlowSurvey);\n    gpaas.nextTask();\n    this.setState({ step: ExperimentStep.ToolSurvey });\n  }\n\n  finishToolSurvey(data: any) {\n    this._logStep(ExperimentStep.ToolSurvey);\n    this._logSurvey(data, ExperimentStep.ToolSurvey);\n    gpaas.nextTask();\n    this.setState({ step: ExperimentStep.Demographics });\n  }\n\n  submitDemographic(data: any) {\n    this._logStep(ExperimentStep.Demographics);\n    this._logSurvey(data, ExperimentStep.Demographics);\n    gpaas.nextTask();\n    this.setState({ step: ExperimentStep.End });\n  }\n\n  cancelTasks() {\n    this._logStep(ExperimentStep.CancelSurvey);\n    this.setState({ step: ExperimentStep.CancelSurvey });\n  }\n\n  actuallyCancel(data: any) {\n    this._logSurvey(data, ExperimentStep.CancelSurvey);\n    gpaas.nextTask();\n    gpaas.cancelTasks();\n    this.setState({ step: ExperimentStep.End });\n    console.log(\"experiment cancelled\");\n  }\n\n  render() {\n    let { step, assignmentId } = this.state;\n    let content: JSX.Element;\n    if (step === ExperimentStep.Introduction) {\n      content = <Instructions\n        onClick={this.start}\n        disabled={assignmentId === \"ASSIGNMENT_ID_NOT_AVAILABLE\"}\n      />;\n    } else if (step === ExperimentStep.Demographics) {\n      content = <Demographics\n        onClick={this.submitDemographic}\n        />;\n    } else if (step === ExperimentStep.TrainingIntro) {\n      content = <TrainingIntro\n        onClick={this.startTutorial}\n      />;\n    } else if (step === ExperimentStep.Tutorial) {\n      content = <Tutorial\n        onClick={this.startTraining}\n      />;\n    }\n    else if (step === ExperimentStep.Training) {\n      content = <TaskOrTrainingContainer\n        isTraining={true}\n        cancel={this.cancelTasks}\n        finish={this.finishTraining}\n      />;\n    } else if (step === ExperimentStep.TasksIntro) {\n      content = <TaskIntro\n        onClick={this.startTasks}\n      />;\n    } else if (step === ExperimentStep.Tasks) {\n      content = <TaskOrTrainingContainer\n        isTraining={false}\n        cancel={this.cancelTasks}\n        finish={this.finishTasks}\n      />;\n    } else if (step === ExperimentStep.SurveyIntro) {\n      content = <div>\n        <h3>You are almost done!</h3>\n        <p>\n          We just need you to fill out three more quick surveys (each should take less than a minute).\n          Don't worry if you are confused about exactly what the question means---try your best to provide an answer.\n          If you are still worried, let us know in the comment section.\n        </p>\n        <button className=\"general-btn exp-nav-btn\" onClick={this.startSurvey}>Start Surveys</button>\n      </div>;\n    } else if (step === ExperimentStep.FlowSurvey) {\n      content = <Survey\n        onClick={this.finishFlowSurvey}\n        surveyQuestions={FlowSurveyQuestions}\n        surveySequence={FlowSurveySequence}\n        freeformPrompt={\"Feel free to comment on your experience completing the tasks here.\"}\n      />;\n    } else if (step === ExperimentStep.ToolSurvey) {\n      content = <Survey\n        onClick={this.finishToolSurvey}\n        surveyQuestions={UsabilitySurveyQuestions}\n        surveySequence={UsabilitySurveySequence}\n        freeformPrompt={\"Feel free to comment on the tools or the effect of latency here. You can also share your ideas on how to improve, if you like.\"}\n      />;\n    } else if (step === ExperimentStep.CancelSurvey) {\n      content = <CancelSurvey nextStep={this.actuallyCancel}/>;\n    } else if (step === ExperimentStep.End) {\n      content = <>\n          <h2>Thank you! All complete. You may close and leave the page now.</h2>\n          <p>We will be sure to pay you within 2 weeks time!</p>\n        </>;\n    } else if (step === ExperimentStep.FailedTraining) {\n      content = <>\n        <h2>Failed to qualitfy for complete HIT</h2>\n        <p>Thank you for attempting our HIT --- unfortuantely you got all three training\n        questions wrong and are as a result not eligible to participate.\n        You will be paid out for the tasks you have completed.</p>\n        </>;\n    } else {\n      if (DEBUG) throw new Error(`step not handled: ${ExperimentStep[step]}`);\n    }\n    return <>\n      {this.state.focusWarning ? <p className=\"warning\">Please stay on the page during your task</p> : null }\n      {content}\n    </>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/ExperimentContainer.tsx","import * as React from \"react\";\n\ninterface SurveyProps {\n  onClick: (data: any) => void;\n  surveyQuestions: Map<string, string>;\n  surveySequence: string[];\n  freeformPrompt: string;\n}\n\ninterface SurveyState { [index: string]: string; }\n\nfunction radioHelper(\n  surveyQuestions: Map<string, string>,\n  i: number,\n  name: string,\n  state: {[index: string]: string},\n  onChange: (event: any) => void\n) {\n  const question = surveyQuestions.get(name);\n  const stateVal = state[name];\n  const radio = new Array(5).fill(0).map((_, i) => <td style={{align: \"right\"}}>\n      <input\n        required={i === 0}\n        type=\"radio\"\n        style={{align: \"left\"}}\n        name={name}\n        value={i + 1}\n        checked={stateVal === `${i + 1}`}\n        onChange={onChange}\n      />\n    </td>);\n  return (<>\n    <tr>\n      <td style={{width: 500}}>{i + 1}. {question}</td>\n      {radio}\n    </tr>\n </>);\n}\n\nexport default class Survey extends React.Component<SurveyProps, SurveyState> {\n  constructor(props: SurveyProps) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.state = {\n      warn: \"false\", // hack because state was to work with other survey items\n    };\n\n  }\n\n  onChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) {\n    this.setState({ [event.target.name]: event.target.value });\n  }\n\n  onClick() {\n    // make sure that they are selected\n    // check how many keys there are that's not comments\n    const numAnswers = Object.keys(this.state).filter(k => k !== \"comments\").length;\n    if (numAnswers < this.props.surveyQuestions.size) {\n      this.setState({warn: \"true\"});\n    } else {\n      this.setState({warn: \"false\"});\n      this.props.onClick(this.state);\n    }\n  }\n\n  render() {\n    const { surveyQuestions, surveySequence, freeformPrompt } = this.props;\n\n    let questions = surveySequence.map((q, i) => {\n      return radioHelper(surveyQuestions, i, q, this.state, this.onChange);\n    });\n    return (\n      <div>\n        {this.state.warn === \"true\"\n          ? <p className=\"warning\">\n            Please answer all of the multiple choice questions.</p>\n          : null}\n        <table style={{width: 800, borderBottom: \"solid\"}}>\n          <tr>\n            <th style={{width: 500}}>Question</th>\n            <th style={{align: \"left\", width: 100}}>Not at all</th>\n            <th style={{align: \"left\", width: 100}}>Partly</th>\n            <th style={{align: \"left\", width: 100}}>Very much</th>\n          </tr>\n        </table>\n        <table style={{width: 800}}>\n          {questions}\n        </table>\n        <br/>\n        <div className=\"question-wrapper\" style={{width: 800}}>\n          <label htmlFor=\"comments\">Optional feedback: {freeformPrompt}</label>\n          <br/>\n          <textarea\n            rows={5}\n            cols={50}\n            id=\"comments\"\n            name=\"comments\"\n            onChange={this.onChange}></textarea>\n        </div>\n        <button className=\"general-btn exp-nav-btn\" onClick={this.onClick}>Submit Survey and Continue</button>\n      </div>\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/Survey.tsx","import * as React from \"react\";\n\ninterface DemographicsProps {\n  onClick: (data: any) => void;\n}\n\ninterface DemographicsState {\n  [index: string]: string;\n}\n\nexport default class Demographics extends React.Component<DemographicsProps, DemographicsState> {\n  constructor(props: DemographicsProps) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.state = {\n      age: \"\",\n      computer: undefined,\n      education: \"N\",\n      gender: \"N\",\n      occupation: \"\",\n      viz: undefined,\n      warn: \"false\"\n    };\n  }\n\n  onChange(event: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) {\n    this.setState({ [event.target.name]: event.target.value });\n  }\n\n  onClick() {\n    // check for null\n    const { age, computer, occupation, viz } = this.state;\n    if (age.length === 0 || computer === undefined || occupation.length === 0 || viz === undefined) {\n      this.setState({warn: \"true\"});\n    } else {\n      this.props.onClick(this.state);\n    }\n  }\n\n  render() {\n    const { age, computer, education, gender, occupation, viz } = this.state;\n\n    return (\n      <div>\n        <h3>Demographic Survey</h3>\n        <p>\n          Please fill out this brief survey to help us better understand the background of our participants.\n          Your individual response to this survey will not be reported, but rather anonymized and aggregated together with the rest of the participant population.</p>\n        {this.state.warn === \"true\"\n        ? <p className=\"warning\">\n          Please answer all of the questions.</p>\n        : null}\n        <div className=\"question-wrapper\">\n          <label htmlFor=\"age\"><strong>1.</strong> Your Age:</label>\n          <input type=\"text\" id=\"age\" name=\"age\" value={age} onChange={this.onChange} required/>\n        </div>\n        <div className=\"question-wrapper\">\n          <label htmlFor=\"gender\"><strong>2.</strong> Your Gender:</label>\n          <select id=\"gender\" name=\"gender\" value={gender} onChange={this.onChange} required>\n            <option value=\"N\">Decline to state</option>\n            <option value=\"M\">Male</option>\n            <option value=\"F\">Female</option>\n            <option value=\"O\">Other</option>\n          </select>\n        </div>\n        <div className=\"question-wrapper\">\n          <label htmlFor=\"education\"><strong>3.</strong> What is the highest educational degree you have earned?:</label>\n          <select id=\"education\" name=\"education\" value={education} onChange={this.onChange} required>\n            <option value=\"N\">Decline to state</option>\n            <option value=\"Middle\">Middle School Diploma</option>\n            <option value=\"High\">High School Diploma</option>\n            <option value=\"Bachelors\">Bachelor's Degree</option>\n            <option value=\"Masters\">Master's Degree</option>\n            <option value=\"Doctorate\">Doctorate Degree</option>\n          </select>\n        </div>\n        <div className=\"question-wrapper\">\n          <label htmlFor=\"occupation\"><strong>4.</strong> Your Occupation:</label>\n          <input type=\"text\" id=\"occupation\" name=\"occupation\" value={occupation} onChange={this.onChange} required/>\n        </div>\n        <div className=\"question-wrapper\">\n          <label htmlFor=\"computer\"><strong>5.</strong> How often do you use a computer on a typical week?:</label>\n          <div className=\"radio-button-wrapper\">\n            <label><input type=\"radio\" name=\"computer\" value=\"1\" checked={computer === \"1\"} onChange={this.onChange} required/> Never</label>\n            <label><input type=\"radio\" name=\"computer\" value=\"2\" checked={computer === \"2\"} onChange={this.onChange}/> Rarely</label>\n            <label><input type=\"radio\" name=\"computer\" value=\"3\" checked={computer === \"3\"} onChange={this.onChange}/> Sometimes</label>\n            <label><input type=\"radio\" name=\"computer\" value=\"4\" checked={computer === \"4\"} onChange={this.onChange}/> Often</label>\n            <label><input type=\"radio\" name=\"computer\" value=\"5\" checked={computer === \"5\"} onChange={this.onChange}/> Always</label>\n          </div>\n        </div>\n        <div className=\"question-wrapper\">\n          <label htmlFor=\"viz\"><strong>6.</strong> How often do you interact with data visualizations on a typical week? (e.g. tables, charts, graphs):</label>\n          <div className=\"radio-button-wrapper\">\n            <label><input type=\"radio\" name=\"viz\" value=\"1\" checked={viz === \"1\"} onChange={this.onChange} required/> Never</label>\n            <label><input type=\"radio\" name=\"viz\" value=\"2\" checked={viz === \"2\"} onChange={this.onChange}/> Rarely</label>\n            <label><input type=\"radio\" name=\"viz\" value=\"3\" checked={viz === \"3\"} onChange={this.onChange}/> Sometimes</label>\n            <label><input type=\"radio\" name=\"viz\" value=\"4\" checked={viz === \"4\"} onChange={this.onChange}/> Often</label>\n            <label><input type=\"radio\" name=\"viz\" value=\"5\" checked={viz === \"5\"} onChange={this.onChange}/> Always</label>\n          </div>\n        </div>\n        <button className=\"general-btn exp-nav-btn\" onClick={this.onClick}>Complete HIT</button>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/Demographics.tsx","import * as React from \"react\";\n\nimport ScrubberView from \"../ScrubberView\";\nimport TaskQuestion from \"./TaskQuestion\";\nimport { trainingQA, taskQA } from \"../../lib/experiment/experimentQAs\";\nimport { diel } from \"../../diel/setup\";\nimport { TaskReward } from \"../../lib/experiment/config\";\nimport { LoggedTablesForAnalysis } from \"../../../../shared/logHelper\";\n\ninterface TrainingProps {\n  isTraining: boolean;\n  cancel: () => void;\n  finish: () => void;\n}\n\ninterface TrainingState {\n  moneyEarned: number;\n  step: number;\n  control: boolean;\n}\n\nexport default class TaskOrTrainingContainer extends React.Component<TrainingProps, TrainingState> {\n  constructor(props: TrainingProps) {\n    super(props);\n    this.setControl = this.setControl.bind(this);\n    this.nextTask = this.nextTask.bind(this);\n    this.state = {\n      moneyEarned: props.isTraining ? 0 : TaskReward * trainingQA.length,\n      step: 0,\n      control: true,\n    };\n    // this is a bit messy but oh well\n    // bind diel with control\n    diel.BindFreeze(this.setControl);\n  }\n\n  setControl(control: boolean) {\n    this.setState({control});\n  }\n\n  nextTask() {\n    // this is for logging and diel bookkeeping\n    LoggedTablesForAnalysis.map(v => {\n      // in theory anything that has cross dependencies\n      // not very clean but don't really to be right now\n      gpaas.logData({\n        type: \"table\",\n        name: v,\n        values: diel.GetLogs(v)\n      });\n    });\n    const length = this.props.isTraining ? trainingQA.length : taskQA.length;\n    const isFinalStep = this.state.step === length - 1;\n    // if (isFinalStep) {\n    //   gpaas.logData({\n    //     type: \"table\",\n    //     name: \"taskInfo\",\n    //     values: diel.GetLogs(\"taskInfo\")\n    //   });\n    // }\n    gpaas.nextTask();\n    diel.ClearHistory();\n\n    // this is for control flow\n    if (isFinalStep) {\n      this.props.finish();\n      return;\n    } else {\n      this.setState(prev => {\n        return {\n          step: prev.step + 1,\n          moneyEarned: prev.moneyEarned + TaskReward\n        };\n      });\n    }\n  }\n\n  render() {\n    let { isTraining } = this.props;\n    let { step, moneyEarned } = this.state;\n    // lets feed some fake data into the set\n    let dashboard = <ScrubberView\n      showIntro={isTraining}\n    />;\n    const qA = <TaskQuestion\n      isTraining={isTraining}\n      question={this.props.isTraining ? trainingQA[step] : taskQA[step]}\n      nextTask={this.nextTask}\n    />;\n    // style={{float: \"left\"}}\n    // using lineheight to align the button and the text\n    return <>\n      {dashboard}\n      <div className=\"task-container\">\n        <div style={{textAlign: \"center\"}}>\n          <button className=\"general-btn exit-btn\" onClick={() => {\n              const r = confirm(\"Are you sure you want to leave?\");\n              if (r === true) {\n                this.props.cancel();\n              } // otherwise do nothing\n            }}>Finish and claim current reward of ${moneyEarned.toFixed(2)}\n          </button>\n        </div>\n        {qA}\n      </div>\n    </>;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/TaskContainer.tsx","import * as React from \"react\";\nimport * as d3 from \"d3\";\n\nimport { ResetButton } from \"../ResetButton\";\nimport { diel } from \"../../diel/setup\";\nimport {  RangeSelection, BarChartDataType, StringSelection,\n  DefaultChartProps, SharedChartProps,\n  ChartHelperReturnValue, IsLoading, LayoutInfo} from \"../../lib/chart/chartHelper\";\n\nimport { linearChartHelper, LinearChartProps } from \"../../lib/chart/LinearChartHelper\";\nimport { CategoricalChartHelper, CategoricalChartProps } from \"../../lib/chart/CategoricalChartHelper\";\nimport { IntroSpec, IntroSteps } from \"../../lib/experiment/tutorialMaterial\";\n// import { DEBUG } from \"../../lib/experiment/config\";\n\ninterface BarChartProps extends SharedChartProps {\n  isCategorical: boolean;\n  clipped: boolean;\n}\n\ninterface BarChartState {\n  baseData: BarChartDataType;\n  isLoading: IsLoading;\n  data?: BarChartDataType;\n  selection?: RangeSelection | StringSelection;\n}\n\nexport default class BarChart extends React.Component<BarChartProps, BarChartState> {\n  static defaultProps = DefaultChartProps;\n\n  constructor(props: BarChartProps) {\n    super(props);\n    this.refreshSelection = this.refreshSelection.bind(this);\n    this.refreshData = this.refreshData.bind(this);\n    this.refreshIsLoading = this.refreshIsLoading.bind(this);\n    this.state = {\n      baseData: diel.GetStaticView(`${props.chart}ChartInitData`) as BarChartDataType,\n      isLoading: {status: 1}\n    };\n  }\n\n  // setBaseData(baseData: BarChartDataType) {\n  //   this.setState({ baseData });\n  // }\n\n  refreshSelection(selection: RangeSelection | StringSelection) {\n    this.setState({ selection });\n  }\n\n  refreshData(data: BarChartDataType) {\n    this.setState({\n      data\n    });\n  }\n\n  refreshIsLoading(isLoading: IsLoading) {\n    this.setState({\n      isLoading\n    });\n  }\n\n  componentDidMount() {\n    let { chart } = this.props;\n    diel.BindOutput(`${chart}ChartDataView`, this.refreshData);\n    diel.BindOutput(`${chart}ChartSelection`, this.refreshSelection, {singleRow: true});\n    diel.BindOutput(`${chart}ChartIsLoading`, this.refreshIsLoading, {singleRow: true});\n  }\n\n  render() {\n    // yLabel\n    let { chart, xLabel, isCategorical, clipped } = this.props;\n\n    if (!(this.state && this.state.baseData) || (this.state.baseData.length === 0))  {\n      throw new Error(`Data for chart ${chart} should be here already`);\n    }\n    // should refactor the following...\n    const {marginTop, marginRight, marginLeft, marginBottom} = LayoutInfo[chart];\n    let { width, height, verticalOrientation } = LayoutInfo[chart];\n    let { baseData, selection, data, isLoading } = this.state;\n    const chartWidth = width! - marginLeft! - marginRight!;\n    const chartHeight = height! - marginTop! - marginBottom!;\n\n    let content: JSX.Element;\n    let r: ChartHelperReturnValue;\n    if (isCategorical) {\n      r = CategoricalChartHelper({\n        baseData, data, selection, chart, chartWidth, chartHeight, clipped\n      } as CategoricalChartProps);\n    } else {\n      r = linearChartHelper({\n        baseData, data, selection, chart, chartWidth, chartHeight, clipped\n      } as LinearChartProps);\n    }\n\n    // brushing related\n    const brush = d3.brushX()\n      .extent([[0, 0], [chartWidth, chartHeight]])\n      .on(\"start\", function() {\n        // TODO\n        // console.log(\"brush started\");\n      })\n      .on(\"end\", function() {\n        // see https://github.com/d3/d3-brush/issues/10\n        if (!d3.event.sourceEvent) return; // Only transition after input.\n        if (!d3.event.selection) return; // Ignore empty selections.\n        const s = d3.brushSelection(this) as [number, number];\n        if (s !== null) {\n          r.brushFn(Math.min(s[0], s[1]), Math.max(s[0], s[1]));\n        }\n        d3.select(this).call(brush.move, null);\n      });\n    const brushDiv = <g ref={ g => d3.select(g).call(brush as any) }></g>;\n\n    // axis rlated\n    const tickNum = 5;\n    const maxYvalue = this.props.clipped\n                        ? tickNum\n                        : this.state.data\n                          ? Math.min(Math.max(...(this.state.data as any).map((d: any) => d.y)), tickNum)\n                          : tickNum;\n    const xTicks = baseData.length;\n    let xAxis = d3.axisBottom(r.x).ticks(xTicks);\n    let yAxis = d3.axisLeft(r.y).ticks(maxYvalue, \"d\").tickSizeOuter(0);\n    const tickXClassName = verticalOrientation ? \"\" : \"rotate90x\";\n    const tickYClassName = verticalOrientation ? \"\" : \"rotate90y\";\n    const ticks = <>\n      <g ref={(g) => {d3.select(g).call(yAxis as any); }}\n        transform={verticalOrientation ? \"\" : `translate(${chartWidth}, 0)`}\n          className={tickXClassName}></g>\n      <g ref={(g) => { d3.select(g).call(xAxis as any); }}\n        transform={`translate(0,` + chartHeight + \")\"}\n        className={tickYClassName}></g></>;\n\n    //         <text\n    //   className=\"chart-label\"\n    //   x={verticalOrientation ? 10 : height / 2}\n    //   y={verticalOrientation ? height / 2 : width}\n    //   transform={verticalOrientation ? `rotate(-90, ${10}, ${height / 2})` : \"\" }\n    //   textAnchor=\"middle\"\n    // >{yLabel}\n    // </text>\n    const axesLabels = (\n      <g>\n        <text\n          className=\"chart-label\"\n          x={verticalOrientation ? (chartWidth / 2) + marginLeft : 10}\n          y={verticalOrientation ? height - 5 : width / 2}\n          transform={verticalOrientation ? `` : `rotate(-90, ${10}, ${width / 2})`}\n          textAnchor=\"middle\"\n        > {xLabel}\n        </text>\n      </g>);\n\n    // if (DEBUG) {\n    //   r.rectsSpec.map(d => {\n    //     if (isNaN(d.y)) {\n    //       throw\n    //     }\n    //   })\n    // }\n    let xFilterBars = r.rectsSpec.map(d => <rect\n      className={d.className ? d.className : \"select-bars\"}\n      x={d.x}\n      y={d.y}\n      width={d.barWidth}\n      height={chartHeight - d.y}\n      fill={d.color}\n      onClick={d.onClick}\n      ></rect>);\n    // put them together\n    let wrap: JSX.Element;\n    let transformedWidth = width;\n    let transformedHeight = height;\n    // note that brush need to have lower z-index because otherwise clicking would not be captured.\n    let innerContent = <g transform={`translate(${marginLeft}, ${marginTop})`} >\n        {ticks}\n        {brushDiv}\n        {xFilterBars}\n      </g>;\n    if (verticalOrientation) {\n      wrap = innerContent;\n    } else {\n      transformedWidth = height;\n      transformedHeight = width;\n      // ${height / 2} apparently 0 works well\n      wrap = <g transform={`translate(${transformedWidth}, 0) rotate(90)`}>{innerContent}</g>;\n    }\n\n    content = <svg width={transformedWidth} height={transformedHeight} className=\"chart-svg\">\n      {wrap}\n      {axesLabels}\n    </svg>;\n    const loadingClass = (isLoading.status === 1) ? \"indicatorLine\" : \"\";\n\n    let selectionText;\n    if (isCategorical) {\n      selectionText = this.state.selection ?\n        (this.state.selection as StringSelection).selection\n        : null;\n      selectionText = selectionText\n        ? selectionText.length > 10\n          ? selectionText.slice(0, 10) + \"...\"\n          : selectionText\n        : null;\n    } else {\n      // get it if it's the same value\n      if (this.state.selection) {\n        const low = (this.state.selection as RangeSelection).low;\n        const high = (this.state.selection as RangeSelection).high;\n        if (low) {\n          if (low === high) {\n            selectionText = `${low}`;\n          } else {\n            selectionText = `${low} to ${high}`;\n          }\n        }\n      }\n    }\n    return(<div className=\"chart-container bar-chart\">\n      <div style={{height: 20, overflow: \"hidden\"}}>\n        <p className=\"chart-filter\">{selectionText ? `selected ${selectionText}` : \" \"}</p>\n      </div>\n      {content}\n      <div style={{height: 5}} className={loadingClass}></div>\n      <div\n        data-step={chart === \"day\" ? IntroSteps.indexOf(\"resetBtn\") + 1 : null}\n        data-intro={chart === \"day\" ? IntroSpec.get(\"resetBtn\") : null}\n      >\n        <ResetButton\n          width={transformedWidth}\n          disabled={!r.hasSelection}\n          chart={chart}\n          selection={selectionText}\n        />\n      </div>\n    </div>);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Charts/BarChart.tsx","import { Database, Statement } from \"sql.js\";\n\nimport { loadPage } from \"..\";\nimport { hashCompare, timeNow, log, downloadHelper } from \"../../../shared/dbHelper\";\nimport { generateSQLForTableCopy } from \"./dielHelper\";\nimport { setUpWorker } from \"./workerSetup\";\nimport { IsProd, FilePathPrefix } from \"../lib/experiment/config\";\n\ntype ReactFunc = (v: any) => void;\nconst charts = [\"day\", \"carrier\", \"delays\", \"state\"];\n\nconst DBFile = {\n  training: {\n    main: `${FilePathPrefix}main_training.db`,\n    worker: `${FilePathPrefix}worker_training.db`\n  },\n  task: {\n    main: `${FilePathPrefix}main_task.db`,\n    worker: `${FilePathPrefix}worker_task.db`\n  }\n};\n\n// diel should generate this as well.\ntype XBrushItxInputType = {$chart: string, $low?: number, $high?: number, $low2?: number, $high2?: number, $selection?: string};\ntype NavigateItxInputType = {$xFilterItxId: number};\ntype DeltaItxInputType = {$val: number};\ntype EventLogType = {$eventName: string, $parameter?: any};\ntype AllInputType = XBrushItxInputType\n                   | NavigateItxInputType\n                   | DeltaItxInputType\n                   | EventLogType\n                   | TaskTimesType;\ntype OutputConfig = {singleRow?: boolean, notNull?: boolean};\ntype TickBind = {view: string, s: Statement, f: ReactFunc, c: OutputConfig};\ntype TaskInfoType = {$qId: string, $taskType: string, $isTraining: number};\ntype MemoryTaskType = {$qId: string, $linkedQId: string};\ntype TaskTimesType = {$qId: string, $eventType: string};\ntype AnswersType = {$qId: string, $answer: string, $confidence: string, $score: number, $comment: string};\n\nconst defaultOuptConfig = {singleRow: false, notNull: false};\n\nexport default class Diel {\n  // public\n  Input: {\n    xBrushItx: (i: XBrushItxInputType) => void;\n    navigateItx: (i: NavigateItxInputType) => void;\n    deltaItx: (i: DeltaItxInputType) => void;\n    deleteItx: () => void;\n  };\n\n  LogData: {\n    eventLog: (i: EventLogType) => void;\n    taskInfo: (i: TaskInfoType) => void;\n    memoryTask: (i: MemoryTaskType) => void;\n    taskTimes: (i: TaskTimesType) => void;\n    answers: (i: AnswersType) => void;\n  };\n  static readonly ItxLogsViews = [\n    // state programs\n    \"itxId_SP\", \"brushState_SP\", \"brushDep_SP\",\n    \"eqChart_SP\", \"chartDataAtomic\",\n    \"eventLog\",\n    // interactions\n    \"navigateItx\", \"deltaItx\", \"deleteItx\",\n    \"xBrushItx\"\n  ];\n\n  // these will only be deleted when the training switches to task\n  // so each time this is sent to ClearHistory, it's not cleared\n  // no need to be removed since the entire DB will be dropped\n  static readonly TaskLogsViews = [\n    // task info\n    \"memoryTask\", \"taskTimes\", \"answers\", \"taskInfo\",\n  ];\n\n  // private\n  private db: Database;\n  private buffer: Uint8Array;\n  private input: {\n    xBrushItx: Statement,\n    navigateItx: Statement,\n    deltaItx: Statement,\n    deleteItx: Statement,\n  };\n  private logData: {\n    eventLog: Statement,\n    taskInfo: Statement,\n    memoryTask: Statement,\n    taskTimes: Statement,\n    answers: Statement,\n  };\n  private output: Map<string, Statement>;\n  private logs: Map<string, Statement>;\n  private activeRequests: {id: string, ts: number}[];\n  deadRequests: {id: string, ts: number}[];\n  staticViews: Map<string, Statement>;\n  boundFns: TickBind[];\n  frozen: boolean;\n  frozenBind: (control: boolean) => void; // this is a bit messy\n  worker: Worker;\n  workerLoaded: boolean;\n  stateRefresh: () => void;\n\n  // public methods\n  constructor() {\n    console.log(\"Diel initializing for training\");\n    this.LoadAll(DBFile.training.main, DBFile.training.worker, true);\n    this.worker = new Worker(`${IsProd ? \"./\" : \"./dist/\"}worker.sql.js`);\n    this.boundFns = [];\n    this.workerLoaded = false;\n    this.activeRequests = [];\n  }\n\n  // has to be done at run time since the react functions need to be constructed.\n  BindOutput(view: string, reactFn: ReactFunc, cIn = {} as OutputConfig) {\n    // console.log(\"config\", cIn, view);\n    if (!this.output.has(view)) {\n      throw new Error(`output not defined ${view} ${Array.from(this.output.keys()).join(\", \")}`);\n    }\n    // immtable assign...\n    const c = Object.assign({}, defaultOuptConfig, cIn);\n    // console.log(\"final config\", c);\n    this.boundFns.push({view, s: this.output.get(view), f: reactFn, c });\n  }\n\n  // SetStateRefresh(f: () => void) {\n  //   this.stateRefresh = f;\n  // }\n\n  GetLogs(view: string) {\n    const s = this.logs.get(view);\n    if (!s) {\n      console.log(`${view} not found in diel logs`, this.logs);\n      throw new Error(`${view} not found in diel logs`);\n    }\n    s.bind({});\n    let r = [];\n    while (s.step()) {\n      r.push(s.getAsObject());\n    }\n    return r;\n  }\n\n  GetStaticView(view: string) {\n    const s = this.staticViews.get(view);\n    s.bind({});\n    let r = [];\n    while (s.step()) {\n      r.push(s.getAsObject());\n    }\n    if (r.length === 0) {\n      throw new Error(`Static view ${view} should not be empty`);\n    }\n    return r;\n  }\n\n  LoadAll = async (mainFile: string, workerFile: string, shouldLoadPage: boolean) => {\n    console.log(\"diel Load\", mainFile, workerFile);\n    await this.loadMain(mainFile);\n    await this.loadWorker(workerFile);\n    setUpWorker(this.worker);\n    // populates all the prepared statements\n    this.setup();\n    // calls react\n    // if diel has been set up already\n    // we need to retarget all the binds\n    // basically find all the view names\n    if (this.boundFns.length > 0) {\n      this.boundFns.map(f => {\n        f.s = this.output.get(f.view);\n      });\n    }\n    this.deadRequests = [];\n    this.activeRequests = [];\n    shouldLoadPage ? loadPage() : null;\n    // forcing a tick here to refresh\n    // this.Input.xBrushItx({$chart: \"day\"});\n  }\n\n  SetFreeze(v: boolean) {\n    this.frozen = v;\n    this.frozenBind(!v);\n  }\n\n  // hmm, this is not a bad pattern\n  // avoids the jumping around\n  BindFreeze(f: (control: boolean) => void) {\n    this.frozenBind = f;\n  }\n\n  loadMain = async (mainFile: string) => {\n    // if the current db is not null, close it\n    if (this.db) {\n      this.db.close();\n    }\n    const response = await fetch(mainFile);\n    const bufferRaw = await response.arrayBuffer();\n    this.buffer = new Uint8Array(bufferRaw);\n    this.db = new Database(this.buffer);\n  }\n\n  loadWorker = async (file: string) => {\n    // first close then open\n    // based on the source code\n    // they already seem to be closing the db\n    // https://github.com/kripken/sql.js/blob/master/coffee/worker.coffee\n    const response = await fetch(file);\n    const bufferRaw = await response.arrayBuffer();\n    const buffer = new Uint8Array(bufferRaw);\n    this.worker.postMessage({\n      id: \"opened\",\n      action: \"open\",\n      buffer,\n    });\n    this.workerLoaded = true;\n  }\n\n  /**\n   * @all: problematic to delete since there might be memory tasks with dependencies\n   */\n  ClearHistory() {\n    // must be more recent that 10 seconds ago, as GC\n    this.deadRequests = this.deadRequests.concat(this.activeRequests).filter(r => r.ts > Date.now() - 10000);\n    // console.log(\"timeouts right now\", this.deadRequests);\n    const tablesWithoutItxId = [\n      // non reactive state\n      \"eqChart_SP\",\n      // interactions whose itxId are different from those of the brushes\n      \"navigateItx\", \"deltaItx\", \"deleteItx\"\n    ];\n    tablesWithoutItxId.map(t => this.db.run(`delete from ${t}`));\n    const tablesWithItxId = [\n      // itx state programs\n      \"itxId_SP\", \"brushState_SP\", \"brushDep_SP\", \"dataParamHashes_SP\",\n      // data state programs\n      \"stateChartData\", \"dayChartData\", \"carrierChartData\",\n      \"delaysChartData\", \"chartDataAtomic\",\n      // brush has to be the last one due to foreign key issues\n      \"xBrushItx\",\n    ];\n    tablesWithItxId.map(t => {\n      // console.log(\"delteing\", t);\n      this.db.run(`delete from ${t} where itxId > 4`);\n    });\n    // force refresh\n    this.tick()();\n  }\n\n  processInput(s: Statement, i: AllInputType) {\n    if (this.frozen) {\n      return;\n    }\n    let tsI = Object.assign({$ts: timeNow()}, i);\n    s.run(tsI);\n  }\n\n  // the rest are private functions\n  setup() {\n    let db = this.db;\n    db.run(\"PRAGMA foreign_keys = ON;\");\n    // must do this manually because bundling minimizes the function names...\n    db.create_function(\"tick\", this.tick());\n    db.create_function(\"workerGetChartDataView\", this.workerGetChartDataView());\n    db.create_function(\"workerShareItx\", this.workerShareItx());\n    db.create_function(\"timeNow\", timeNow);\n    db.create_function(\"log\", log);\n    db.create_function(\"hashCompare\", hashCompare);\n    this.input = {\n      xBrushItx: db.prepare(`\n        insert into xBrushItx (ts, chart, low, high, low2, high2, selection)\n        values ($ts, $chart, $low, $high, $low2, $high2, $selection)`),\n      navigateItx: db.prepare(`\n        insert into navigateItx (ts, xFilterItxId)\n        values ($ts, $xFilterItxId)`),\n      deltaItx: db.prepare(`\n        insert into deltaItx (ts, val)\n        values ($ts, $val)`),\n      deleteItx: db.prepare(`\n        insert into deleteItx (ts)\n        values ($ts)`)\n    };\n    this.Input = {\n      xBrushItx: (i: XBrushItxInputType) => {\n        if (i.$low) {\n          if (isNaN(i.$high) || isNaN(i.$low) ) {\n            throw new Error(\"number has to be defined\");\n          }\n        }\n        this.processInput(this.input.xBrushItx, i);\n      },\n      navigateItx: (i: NavigateItxInputType) => {\n        this.processInput(this.input.navigateItx, i);\n      },\n      deltaItx: (i: DeltaItxInputType) => {\n        this.processInput(this.input.deltaItx, i);\n      },\n      deleteItx: () => {\n        this.input.deleteItx.run({$ts: timeNow()});\n      }\n    };\n    this.logData = {\n      eventLog: db.prepare(`\n        insert into eventLog (ts, eventName, parameter)\n        values ($ts, $eventName, $parameter);\n      `),\n      taskInfo: db.prepare(`\n        insert into taskInfo (qId, taskType, isTraining)\n        values ($qId, $taskType, $isTraining);\n      `),\n      taskTimes: db.prepare(`\n        insert into taskTimes (ts, qId, eventType)\n        values ($ts, $qId, $eventType);\n      `),\n      answers: db.prepare(`\n        insert into answers (qId, answer, confidence, score, comment)\n        values ($qId, $answer, $confidence, $score, $comment);\n      `),\n      memoryTask: db.prepare(`\n        insert into memoryTask (qId, linkedQId)\n        values ($qId, $linkedQId);\n      `)\n    };\n    // log data should not run process input which has freeze logic\n    this.LogData = {\n      eventLog: (i: EventLogType) => {\n        let tsI = Object.assign({$ts: timeNow()}, i);\n        this.logData.eventLog.run(tsI);\n      },\n      taskInfo: (i: TaskInfoType) => {\n        this.logData.taskInfo.run(i);\n      },\n      taskTimes: (i: TaskTimesType) => {\n        let tsI = Object.assign({$ts: timeNow()}, i);\n        this.logData.taskTimes.run(tsI);\n      },\n      answers: (i: AnswersType) => {\n        this.logData.answers.run(i);\n      },\n      memoryTask: (i: MemoryTaskType) => {\n        this.logData.memoryTask.run(i);\n      },\n    };\n    this.output = new Map();\n    // FIXME: when writing the parser, change this directly into code level\n    // since it's actually fixed at compile time\n    [\"ChartSelection\", \"ChartIsLoading\", \"ChartDataView\"].map(v => {\n      charts.map(c => {\n        const view = `${c}${v}`;\n        this.output.set(view, db.prepare(`select * from ${view}`));\n      });\n    });\n    this.logs = new Map();\n    Diel.ItxLogsViews.map(v => this.logs.set(v, db.prepare(`select * from ${v}`)));\n    Diel.TaskLogsViews.map(v => this.logs.set(v, db.prepare(`select * from ${v}`)));\n    // one off ones\n    [\"loadingSummary\", \"focusItx\"].map(v => this.output.set(v, db.prepare(`select * from ${v}`)));\n\n    // static ones\n    this.staticViews = new Map();\n    charts.map(c => {\n      const view = `${c}ChartInitData`;\n      this.staticViews.set(view, db.prepare(`select * from ${view}`));\n    });\n  }\n\n  // tick is invoked inside sql (though it can be invoked here sort of as well)\n  tick() {\n    const boundFns = this.boundFns;\n    const runOutput = this.runOutput;\n    return () => {\n      // console.log(\"ticked!\", boundFns);\n      boundFns.map(b => {\n        runOutput(b);\n      });\n    };\n  }\n\n  Sanity() {\n    // does some basic sanity check to help developer against dumb mistakes\n    // TODO: first is to make sure that all output views are actually bound to something.\n  }\n\n  // temp hack\n  IsDuringTask() {\n    // console.log(d(`select * from taskTimes`));\n    const r = this.db.exec(`select count(*) from taskTimes`);\n    return {\n      firstTime: r[0].values[0][0] as number === 1,\n      duringTask: (r[0].values[0][0] as number % 2) === 1\n    };\n  }\n\n  exec(sql: string) {\n    // these should be internal DIEL use\n    // e.g., worker code should also be internal\n    // console.log(\"DIEL exec\", sql);\n    return this.db.exec(sql);\n  }\n\n  workerShareItx() {\n    const worker = this.worker;\n    return () => {\n      // we are going to share currentItx\n      // a bit hard coded; need to think about the IR for moving tables around\n      const filterQuery = `SELECT * FROM currentItx`;\n      const shareSql = generateSQLForTableCopy(\"currentItx\", filterQuery);\n      worker.postMessage({\n        id: `updateCurrentItx`,\n        action: \"exec\",\n        sql: shareSql\n      });\n    };\n  }\n\n  workerGetChartDataView() {\n    const worker = this.worker;\n    return (itxId: number, chart: string) => {\n      const hash = `${timeNow()}-${itxId}=${chart}`;\n      this.activeRequests.push({id: hash, ts: Date.now()});\n      worker.postMessage({\n        id: `share:${itxId}:${chart}:${hash}`,\n        action: \"exec\",\n        sql: `SELECT * FROM ${chart}ChartDataView;`\n      });\n    };\n  }\n\n  // only because sql.js does not support user defined aggregates right now\n  runOutput(b: TickBind) {\n    // s: Statement, reactFn: ReactFunc, singleRow: boolean) {\n    // takes a statement and a react function\n    // console.log(\"updating view\", b.view);\n    let { s, f, c} = b;\n    s.bind({});\n    let r = [];\n    while (s.step()) {\n      r.push(s.getAsObject());\n    }\n    if (c.notNull && r.length === 0) {\n      throw new Error(`${b.view} should not be null`);\n    }\n    if (r.length > 0 && c.singleRow) {\n      f(r[0]);\n    } else {\n      f(r);\n    }\n  }\n\n  ChangeToTask() {\n    this.LoadAll(DBFile.task.main, DBFile.task.worker, false);\n  }\n\n  TrainingZeroCount() {\n    // check if the score for answers are ALL zero\n    let r = this.db.exec(`select count(*) from answers where score = 0`);\n    return r[0].values[0][0] as number;\n  }\n\n  downloadDB() {\n    // console.log(\"download session\");\n    let dRaw = this.db.export();\n    let blob = new Blob([dRaw]);\n    downloadHelper(blob,  \"session\");\n  }\n\n  downloadWorkerDB() {\n    this.worker.postMessage({\n      id: \"download\",\n      action: \"export\",\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/diel/diel.ts","module.exports = SQL;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"SQL\"\n// module id = 22\n// module chunks = 0","import { diel } from \"./setup\";\nimport { assertQueryHasResult } from \"../../../shared/dbHelper\";\n\n// the input should already be from a group_concat\n// they can just specify the remote\n// to add the string properly I would need some AST representation for the query definition...\n// just going to add quotes to EVERYTHING, since sqlite seems to do the cohersion properly from string to numbers anyways...\nexport function generateSQLForTableCopy(sharedTable: string, shareQuery: string) {\n  let tableRes = diel.exec(shareQuery)[0];\n  assertQueryHasResult(tableRes, \"currentItx\");\n  // FIXME: have more robust typing here...\n  // need to make null explicit here...\n  // selection needs to have a quote around it...\n  const values = tableRes.values.map((d: any[]) => `(${d.map((v: any) => (v === null) ? \"null\" : `'${v}'`).join(\", \")})`);\n  let shareSql = `\n    DELETE from ${sharedTable};\n    INSERT INTO ${sharedTable} VALUES ${values};`;\n  return shareSql;\n}\n\n\nexport function dW(sql: string) {\n  diel.worker.postMessage({\n    id: \"print\",\n    action: \"exec\",\n    sql\n  });\n}\n(<any>window).dW = dW;\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/diel/dielHelper.ts","\nimport { getLatency } from \"../lib/helper\";\nimport { diel } from \"./setup\";\nimport { downloadHelper, timeNow } from \"../../../shared/dbHelper\";\nimport { ExperimentLatencyOption } from \"../lib/experiment/config\";\n\nexport function setUpWorker(worker: Worker) {\n  worker.onmessage = function(event) {\n    diel.exec(`insert into workerCmds values ('${event.data.id}')`);\n    const args = event.data.id.split(\":\");\n    const cmd = args[0];\n    switch (cmd) {\n      case \"download\": {\n        let blob = new Blob([event.data.buffer]);\n        downloadHelper(blob, \"workerSession\");\n        break;\n      }\n      case \"share\": {\n        const itxId = args[1];\n        const chart = args[2];\n        const hash = args[3];\n        let sql: string = \"\";\n        // TODO: deal with pagination later\n        if (event.data.results[0] && event.data.results[0].values.length > 0) {\n          const values = event.data.results[0].values;\n          // TODO: automtically check for type...\n          let fn: (r: any) => string;\n          if (chart === \"carrier\" || chart === \"state\" ) {\n            fn = (r: any) => `(${itxId}, '${r[0]}', ${r[1]})`;\n          } else if (chart === \"delays\") {\n            fn = (r: any) => `(${itxId}, ${r[0]}, ${r[1]}, ${r[2]})`;\n          } else {\n            fn = (r: any) => `(${itxId}, ${r[0]}, ${r[1]})`;\n          }\n          sql = `INSERT INTO ${chart}ChartData VALUES ${values.map(fn)};`;\n        } else {\n          console.log(\"No result for\", chart, itxId);\n        }\n        sql += `\\nINSERT INTO chartDataAtomic VALUES (${timeNow()}, ${itxId}, '${chart}');`;\n        window.setTimeout(() => {\n          if (diel.deadRequests.indexOf(hash) > -1) {\n            console.log(\"expired\", itxId, chart);\n            return;\n          } else {\n            diel.exec(sql);\n          }\n        }, getLatency(ExperimentLatencyOption));\n        break;\n      }\n      /**\n       * helper calls\n       */\n      case \"print\": {\n        let r = event.data.results;\n        if (r && r.length > 0) {\n          r[0].values.map((v: any) => {\n            v.map((c: any, i: any) => {\n              if (r[0].columns[i] === \"ts\") {\n                c = new Date(c as number).toDateString();\n              }\n            });\n          });\n          console.log(\"Printing results\");\n          console.log(r[0].columns.join(\"\\t\"));\n          console.log(JSON.stringify(r[0].values).replace(/\\],\\[/g, \"\\n\").replace(\"[[\", \"\").replace(\"]]\", \"\").replace(/,/g, \"\\t\"));\n        }\n        break;\n      }\n    }\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/diel/workerSetup.ts","import * as d3 from \"d3\";\n\nimport { diel } from \"../../diel/setup\";\nimport { lightGray, lightBlue, darkBlue, brushColor,\n  RectSVGSpec, darkGray, ChartHelperReturnValue,\n  LinearBarChartType, RangeSelection} from \"./chartHelper\";\n\n\nexport interface LinearChartProps {\n  selection: RangeSelection;\n  baseData: LinearBarChartType;\n  data: LinearBarChartType;\n  chart: string;\n  chartWidth: number;\n  chartHeight: number;\n  clipped: boolean;\n}\n\nexport function linearChartHelper(p: LinearChartProps): ChartHelperReturnValue {\n  let { baseData, selection, data, chart, chartWidth, chartHeight, clipped } = p;\n  const unclippable = (!clipped) && data && (data.length > 0);\n\n  const yMax = unclippable ? d3.max(data, d => d.y) : d3.max(baseData, (d) => d.y)!;\n  let y = d3.scaleLinear().rangeRound([chartHeight, 0]).domain([0, yMax]);\n  const extent = d3.extent(baseData, d => d.x);\n  const numBars = (extent[1] - extent[0] + 1);\n  const xDomain = [extent[0], extent[1] + (extent[1] - extent[0]) / numBars];\n  const barWidth = chartWidth * 0.6 / numBars;\n  const x = d3.scaleLinear().rangeRound([1, chartWidth]).domain(xDomain);\n\n  const brushFn = (x1: number, x2: number) => {\n    let v1 = Math.round(x.invert(x1));\n    let v2 = Math.floor(x.invert(x2));\n    console.log(\"brush data\", v1, v2);\n    diel.Input.xBrushItx({$low: v1, $high: v2, $chart: chart});\n  };\n  const clickFn = (x: number) => () => diel.Input.xBrushItx({$low: x, $high: x, $chart: chart});\n\n  let rectsSpec: RectSVGSpec = [];\n\n  const hasSelection: boolean = (selection && selection.low) ? true : false;\n  // <rect\n  // className=\"chart-label\"\n  // x={x(selection.low)}\n  // y={y(selection.high2)}\n  // width={x(selection.high) - x(selection.low)}\n  // height={Math.abs(y(selection.high2) - y(selection.low2))}\n  // fill={\"gray\"}\n  // fill-opacity=\"0.3\"\n  // ></rect>\n\n\n  unclippable ? [] : baseData.map(d => {\n    const color = selection\n      ? (d.x <= selection.high && d.x >= selection.low)\n        ? darkGray\n        : lightGray\n      : lightGray;\n    rectsSpec.push({\n      x: x(d.x)!,\n      y: y(d.y)!,\n      color,\n      onClick: clickFn(d.x),\n      barWidth,\n    });\n  });\n  if (data) {\n    data.filter(d => d.y > 0).map(d => {\n      const color = selection\n        ? (d.x <= selection.high && d.x >= selection.low)\n          ? darkBlue\n          : lightBlue\n        : lightBlue;\n      rectsSpec.push({\n        x: x(d.x),\n        y: y(d.y),\n        color,\n        onClick: clickFn(d.x),\n        barWidth,\n      });\n    });\n  }\n\n  if (hasSelection) {\n    // this has to be pushed back otherwise click are going to be hard to register...\n    rectsSpec.push({\n      className: \"selector\",\n      x: Math.max(x(selection.low) - 5, 0),\n      y: 0,\n      barWidth: x(selection.high) - x(selection.low) + barWidth + 10, // need to be double of 5 duh\n      color: brushColor,\n      onClick: null\n    });\n  }\n  // console.log(`rectspec is`, chartWidth, barWidth, JSON.stringify(rectsSpec));\n  return {\n    brushFn,\n    rectsSpec,\n    x,\n    y,\n    hasSelection\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/chart/LinearChartHelper.ts","import * as d3 from \"d3\";\n\nimport { diel } from \"../../diel/setup\";\n\nimport { lightGray, lightBlue, darkBlue, darkGray, brushColor,\n  ChartHelperReturnValue, StringSelection,\n  RectSVGSpec, CategoricalBarChartType} from \"./chartHelper\";\n\nexport interface CategoricalChartProps {\n  selection: StringSelection;\n  baseData: CategoricalBarChartType;\n  data: CategoricalBarChartType;\n  chart: string;\n  chartWidth: number;\n  chartHeight: number;\n  clipped: boolean;\n}\n\nexport function CategoricalChartHelper(p: CategoricalChartProps): ChartHelperReturnValue {\n    let { baseData, selection, data, chart, chartWidth, chartHeight, clipped } = p;\n    const unclippable = (!clipped) && data && (data.length > 0);\n    // scale realted\n    const yMax = unclippable ? d3.max(data, d => d.y) : d3.max(baseData, (d) => d.y)!;\n    let y = d3.scaleLinear().rangeRound([chartHeight, 0]).domain([0, yMax]);\n    const xDomain = baseData.map(d => d.x);\n    const x = d3.scaleBand().rangeRound([0, chartWidth]).padding(0.4).domain(xDomain);\n\n    // brushing related\n    const brushFn = (x1: number, x2: number) => {\n      const selectionOrdinal = xDomain.filter(v => x(v) && (x(v)! < x2) && (x(v)! > x1)).join(\",\");\n      diel.Input.xBrushItx({$selection: selectionOrdinal, $chart: chart});\n    };\n    const clickFn = (x: string) => () => diel.Input.xBrushItx({$selection: x, $chart: chart});\n    const barWidth = x.bandwidth();\n    let rectsSpec: RectSVGSpec = [];\n    let brushBounds: number[] = [];\n    if (selection && selection.selection) {\n      selection.selection.split(\",\").map(s => brushBounds.push(x(s)));\n    }\n    // if the value is too low, then also clip on a background selection, but only at the height of half\n    baseData.map(d => {\n      rectsSpec.push({\n        x: x(d.x)!,\n        y: chartHeight / 2!,\n        color: \"rgba(0, 0, 0, 0)\",\n        onClick: clickFn(d.x),\n        barWidth,\n      });\n    });\n    unclippable ? [] : baseData.map(d => {\n      let color = lightGray;\n      if (selection && selection.selection && selection.selection.includes(d.x)) {\n        color = darkGray;\n      }\n      rectsSpec.push({\n        x: x(d.x)!, y: y(d.y)!,\n        color,\n        onClick: clickFn(d.x),\n        barWidth,\n      });\n    });\n    if (data) {\n      data.filter(d => d.y > 0).map(d => {\n        let color = lightBlue;\n        if (selection && selection.selection && selection.selection.includes(d.x)) {\n          color = darkBlue;\n        }\n        rectsSpec.push({\n          x: x(d.x)!, y: y(d.y)!,\n          color,\n          onClick: clickFn(d.x),\n          barWidth\n        });\n      });\n    }\n    if (brushBounds.length > 0) {\n      rectsSpec.push({\n        className: \"selector\",\n        x: Math.max(d3.min(brushBounds) - 5, 0),\n        y: 0,\n        color: brushColor,\n        barWidth: d3.max(brushBounds) - d3.min(brushBounds) + barWidth + 10,\n        onClick: null\n      });\n    }\n    const hasSelection: boolean = (selection && selection.selection) ? true : false;\n    return {\n      brushFn,\n      rectsSpec,\n      x,\n      y,\n      hasSelection\n    };\n  }\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/chart/CategoricalChartHelper.ts","import * as d3 from \"d3\";\nimport * as React from \"react\";\n\nimport { ResetButton } from \"../ResetButton\";\nimport { diel } from \"../../diel/setup\";\nimport { lightGray, darkGray, scatterDark, scatterLight,\n  ScatterPlotDataType, RectSection, LayoutInfo,\n  SharedChartProps, DefaultChartProps, IsLoading } from \"../../lib/chart/chartHelper\";\nimport { IntroSpec, IntroSteps } from \"../../lib/experiment/tutorialMaterial\";\nimport { DEBUG } from \"../../lib/experiment/config\";\n\ninterface ScatterplotProps extends SharedChartProps {\n  clipped: boolean;\n  xDomain?: [number, number];\n  yDomain?: [number, number];\n}\n\ninterface ScatterplotState {\n  hoverInfo: {xPos: number, yPos: number, value: number};\n  baseData: ScatterPlotDataType;\n  isLoading: IsLoading;\n  selection?: RectSection;\n  data?: ScatterPlotDataType;\n}\n\nexport default class Scatterplot extends React.Component<ScatterplotProps, ScatterplotState> {\n  static defaultProps = DefaultChartProps;\n\n  constructor(props: ScatterplotProps) {\n    super(props);\n    this.refreshSelection = this.refreshSelection.bind(this);\n    this.refreshData = this.refreshData.bind(this);\n    this.refreshIsLoading = this.refreshIsLoading.bind(this);\n    this.clickRect = this.clickRect.bind(this);\n    this.state = {\n      baseData: diel.GetStaticView(`${props.chart}ChartInitData`) as ScatterPlotDataType,\n      isLoading: {status: 1},\n      hoverInfo: null\n    };\n  }\n\n  refreshSelection(selection: RectSection) {\n    this.setState({ selection });\n  }\n\n  refreshData(data: ScatterPlotDataType) {\n    this.setState({\n      data,\n      // piggy back the reset\n      hoverInfo: null\n    });\n  }\n\n  refreshIsLoading(isLoading: IsLoading) {\n    // console.log(\"isLoading scatter\", isLoading);\n    this.setState({ isLoading });\n  }\n\n  componentDidMount() {\n    let { chart } = this.props;\n    diel.BindOutput(`${chart}ChartDataView`, this.refreshData);\n    diel.BindOutput(`${chart}ChartSelection`, this.refreshSelection, {singleRow: true});\n    diel.BindOutput(`${chart}ChartIsLoading`, this.refreshIsLoading, {singleRow: true});\n  }\n\n  clickRect(value: number, xPos: number, yPos: number) {\n    return () => {\n      this.setState({hoverInfo: {value, xPos, yPos}});\n    };\n  }\n\n  render() {\n    const { chart, xLabel, yLabel, clipped, showIntro } = this.props;\n\n    if (!(this.state && this.state.baseData) || (this.state.baseData.length === 0))  {\n      throw new Error(\"should be here already\");\n    }\n    const { width, height, marginBottom, marginLeft, marginRight, marginTop} = LayoutInfo[chart];\n    const { selection, data, isLoading, baseData } = this.state;\n\n    const chartWidth = width - marginLeft - marginRight;\n    const chartHeight = height - marginTop - marginBottom;\n    // if true, use data\n    const unclippable = (!clipped) && data && (data.length > 0);\n    let label;\n    let brush: any = null;\n    // let content: JSX.Element = null;\n    let axesLabels;\n    let xDomain = this.props.xDomain ? this.props.xDomain : [\n      // force it to be zero\n      0, // d3.min(baseData.map(d => d.x))\n      // force the additional padding, bigger to make selection easier\n      unclippable ? d3.max(data.map(d => d.x)) + 40 : d3.max(baseData.map(d => d.x)) + 40\n    ];\n\n    const iColor = d3.interpolateRgb(scatterLight, scatterDark);\n    // const iColor = d3.interpolateRgb(\"rgb(245, 251, 239)\", \"rgb(13, 84, 148)\");\n    const iBaseColor = d3.interpolateRgb(lightGray, darkGray);\n\n    let yDomain = this.props.yDomain ? this.props.yDomain : [\n        0, // d3.min(baseData.map(d => d.y)), // force 0\n        unclippable ? d3.max(data.map(d => d.y)) + 40 : d3.max(baseData.map(d => d.y)) + 40\n      ];\n    // note that vDomain remains that of baseData regardless of clipping\n    let vDomain = [d3.min(baseData.map(d => d.v)), d3.max(baseData.map(d => d.v))];\n    const x = d3.scaleLinear()\n                .domain(xDomain)\n                .rangeRound([0, chartWidth]);\n\n    // hard coding 20 here\n    const rectWidth = Math.abs(x(20) - x(0));\n    const y = d3.scaleLinear()\n                .domain(yDomain)\n                .rangeRound([chartHeight, 0]);\n    const rectHeight = Math.abs(y(20) - y(0));\n    const v = d3.scaleLog()\n                .domain(vDomain)\n                .range([0, 1]);\n    if (selection && selection.low) {\n      if (DEBUG && isNaN(y(selection.high2))) {\n        throw new Error(\"y scale must get valid result\");\n      }\n      label = (\n        <rect\n          className=\"selector\"\n          x={x(selection.low)}\n          y={y(selection.high2)}\n          width={x(selection.high) - x(selection.low)}\n          height={Math.abs(y(selection.high2) - y(selection.low2))}\n          fill={\"gray\"}\n          fill-opacity=\"0.3\"\n        ></rect>\n      );\n    }\n    const axisBottom = d3.axisBottom(x).ticks(5, \"d\");\n    const axisLeft = d3.axisLeft(y).ticks(10, \"d\");\n\n    // generate a brush that interacts with the chart\n    brush = d3.brush()\n    .extent([[0, 0], [chartWidth, chartHeight]])\n    .on(\"end\", function() {\n      // see https://github.com/d3/d3-brush/issues/10\n      if (!d3.event.sourceEvent) return; // Only transition after input.\n      if (!d3.event.selection) return; // Ignore empty selections.\n      // [[x0, y0], [x1, y1]],\n      const s = d3.brushSelection(this) as [[number, number], [number, number]];\n      if (s !== null) {\n        let low = Math.min(x.invert(s[0][0]), x.invert(s[1][0]));\n        let high = Math.max(x.invert(s[0][0]), x.invert(s[1][0]));\n        let low2 = Math.min(y.invert(s[1][1]), y.invert(s[0][1]));\n        let high2 = Math.max(y.invert(s[1][1]), y.invert(s[0][1]));\n        diel.Input.xBrushItx({$low: low, $high: high, $low2: low2, $high2: high2, $chart: chart});\n      }\n      d3.select(this).call(brush.move, null);\n    });\n    const brushDiv = <g ref={ g => d3.select(g).call(brush) }></g>;\n    let delayDistribution: JSX.Element;\n    const baseRects = unclippable ? [] : baseData.map((d) => {\n      const xPos = x(d.x);\n      const yPos = y(d.y + 20);\n      if (DEBUG && isNaN(yPos)) {\n        throw new Error(\"y scale must get valid result\");\n      }\n      return <rect\n        key={`${d.x}_${d.y}_base_heat`}\n        fill={iBaseColor(v(d.v))}\n        fillOpacity={0.8}\n        x={xPos}\n        y={yPos}\n        width={rectWidth}\n        height={rectHeight}\n        // it's ok that there will be overlap, since the mouse event does not go down z-index\n        onClick={this.clickRect(d.v, xPos, yPos)}\n      ></rect>;\n    });\n    let rects: JSX.Element[];\n    if (data) {\n      rects = data.map((d) => {\n      const xPos = x(d.x);\n      const yPos = y(d.y + 20);\n      if (DEBUG && isNaN(yPos)) {\n        throw new Error(\"y scale must get valid result\");\n      }\n      // getting rid of the title since it's so cluncky<title>{d.v}</title>\n      return <rect\n        key={`${d.x}_${d.y}_filter_heat`}\n          fill={iColor(v(d.v))}\n          className=\"hoverable\"\n          fillOpacity={0.8}\n          x={xPos}\n          y={yPos}\n          width={rectWidth}\n          height={rectHeight}\n          onClick={this.clickRect(d.v, xPos, yPos)}\n        ></rect>;\n      });\n      // also add the vertical bar that shows the relative distribution\n      // first push the count of delays\n      // we could do this in SQL if this becomes too slow\n      const delayCount = data.filter(d => d.x > 0).reduce((a, b) => a + b.v, 0);\n      const totalCount = data.reduce((a, b) => a + b.v, 0);\n      // console.log(\"total flights\", totalCount, delayCount);\n      const annotationWidth = 10;\n      const annotationHeight = chartHeight  * 2 / 3;\n      delayDistribution = <svg\n          width={20}\n          height={height}\n        >\n        <rect\n          className=\"delayDistributionRect\"\n          x={5}\n          y={chartHeight / 6}\n          width={annotationWidth}\n          height={delayCount / totalCount * annotationHeight}\n          fill={\"red\"}\n          stroke={\"black\"}\n          strokeWidth={1}\n        ></rect>\n        <rect\n          className=\"delayDistributionRect\"\n          x={5}\n          y={chartHeight / 6 + delayCount / totalCount * annotationHeight}\n          width={annotationWidth}\n          height={(1 - delayCount / totalCount) * annotationHeight}\n          fill={\"white\"}\n          stroke={\"black\"}\n          strokeWidth={1}\n        ></rect>\n      </svg>;\n    }\n    if (this.state.hoverInfo && this.state.hoverInfo.xPos && this.state.hoverInfo.yPos) {\n      rects.push(<rect\n        key={\"clicked_sactter\"}\n        x={this.state.hoverInfo.xPos}\n        y={this.state.hoverInfo.yPos}\n        width={rectWidth}\n        height={rectHeight}\n        style={{fill: \"none\", stroke: \"black\", strokeWidth: 2}}\n      ></rect>);\n    }\n\n    const ticks = <>\n      <g ref={(g) => d3.select(g).call(axisBottom)}\n        transform={`translate(0, ${chartHeight})`}></g>\n      <g ref={(g) => d3.select(g).call(axisLeft)}></g></>;\n    axesLabels = (\n      <g>\n        <text\n          className=\"chart-label\"\n          y={height - 5}\n          x={(chartWidth / 2) + marginLeft}\n          textAnchor=\"middle\"\n        > {xLabel}\n        </text>\n        <text\n          className=\"chart-label\"\n          x={10}\n          y={height / 2}\n          transform={`rotate(-90, ${10}, ${height / 2})`}\n          textAnchor=\"middle\"\n        > {yLabel}\n        </text>\n      </g>);\n\n    const content = <svg width={width} height={height}\n      data-step={showIntro ? IntroSteps.indexOf(\"heatmap2\") + 1 : null}\n      data-intro={showIntro ? IntroSpec.get(\"heatmap2\") : null}\n      >\n        <g transform={\"translate(\" + marginLeft + \",\" + marginTop + \")\"}>\n          {ticks}\n          {brushDiv}\n          {baseRects}\n          {rects}\n          {this.state.hoverInfo\n            ? <text\n                className=\"tooltip\"\n                fontStyle=\"bold\"\n                x={this.state.hoverInfo.xPos - 3}\n                y={this.state.hoverInfo.yPos - 5}\n              >{this.state.hoverInfo.value}</text>\n            : null}\n          {label}\n        </g>\n        {axesLabels}\n      </svg>;\n    const legend = <svg\n      width={25}\n      height={height}\n      data-step={showIntro ? IntroSteps.indexOf(\"delayLegend\") + 1 : null}\n      data-intro={showIntro ? IntroSpec.get(\"delayLegend\") : null}\n    >\n    <defs>\n      <linearGradient id=\"linear\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n        <stop offset=\"0%\"   stop-color={scatterLight}/>\n        <stop offset=\"100%\" stop-color={scatterDark}/>\n      </linearGradient>\n    </defs>\n    <rect x={5} y={20} width={5} height={height - 60} fill=\"url(#linear)\" />\n    <text x={5} y={10} fontSize={10}>{vDomain[0]}</text>\n    <text x={0} y={height - 30} fontSize={10}>{vDomain[1]}</text>\n  </svg>;\n    const loadingClass = isLoading.status ? \"indicatorLine\" : \"\";\n    return (\n      <div className=\"scatter-chart chart-container\">\n        {content}\n        {legend}\n        <div\n          style={{overflow: \"auto\", display: \"inline-block\"}}\n          data-step={showIntro ? IntroSteps.indexOf(\"delayDistribution\") + 1 : null}\n          data-intro={showIntro ? IntroSpec.get(\"delayDistribution\") : null}\n        >\n        {delayDistribution}\n        </div>\n        <div style={{height: 5}} className={loadingClass}></div>\n        <ResetButton\n          width={width}\n          disabled={!(selection && selection.low)}\n          chart={chart}\n          selection={(selection && selection.low) ? \"brush\" : \"\"}\n        />\n      </div>\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Charts/Scatterplot.tsx","import * as React from \"react\";\nimport { diel } from \"../diel/setup\";\nimport { EventType } from \"../lib/helper\";\nimport { FeedbackType } from \"../lib/experiment/tasks\";\n\ninterface HappyOrNotState {\n  lastClick: number;\n}\n\nexport default class HappyOrNot extends React.Component<{}, HappyOrNotState> {\n\n  constructor(props: null) {\n    super(props);\n    this.state = {\n      lastClick: null\n    };\n  }\n\n  onClick(paramter: FeedbackType) {\n    return () => {\n      this.setState({lastClick: Date.now()});\n      setTimeout(() => {\n        if (this.state.lastClick < Date.now() - 3000) {\n          this.setState({lastClick: null});\n        }\n      }, 3001);\n      // diel log\n      diel.LogData.eventLog({\n        $eventName: EventType[EventType.HappyOrNot],\n        $parameter: FeedbackType[paramter]\n      });\n    };\n  }\n\n  render() {\n    return <div>\n      {/* <p style={{display: \"inline-block\"}} >How do you feel using the tool right now?</p> */}\n      <button className=\"happyOrNotBtn zoomOnHover\" onClick={this.onClick(FeedbackType.Happy)}></button>\n      <button className=\"happyOrNotBtn zoomOnHover\" onClick={this.onClick(FeedbackType.Angry)}></button>\n      <button className=\"happyOrNotBtn zoomOnHover\" onClick={this.onClick(FeedbackType.Confused)}></button>\n      {this.state.lastClick ? <p style={{display: \"inline\"}}>Got your feedback!</p> : null}\n    </div>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/HappyOrNot.tsx","import * as React from \"react\";\nimport { SvgSpinner } from \"./SvgSpinner\";\n\nimport { LayoutInfo } from \"../lib/chart/chartHelper\";\nimport { diel } from \"../diel/setup\";\n\ninterface ChronicleSliderProps {\n  itxIdsInfo: {itxId: number, loaded: boolean}[];\n  focusItx: number;\n}\n\n// this will only be manaing the index, not the absolute, and so this is the same as the\n// key up/down\nexport const ChronicleSlider: React.StatelessComponent<ChronicleSliderProps> = (p) => {\n  const { focusItx, itxIdsInfo } = p;\n  const { width } = LayoutInfo.timeLine;\n\n  if (!itxIdsInfo) {\n    // 10 is just a filler\n    return <div style={{marginTop: 50, width: width, height: 10}}></div>;\n  }\n\n  // make the new distance deterministic, and make it grow left to right\n  // scrolling's affordances are BAD, let it grow down\n  // const minWidth = itxIdsInfo.length * height * 0.5;\n  // const adjustedWidth = Math.max(minWidth, width);\n  // const x = d3.scaleLinear()\n  //             .domain([0, itxIdsInfo.length + 1])\n  //             .rangeRound([30, adjustedWidth]);\n  // focusItx === itx.itxId ? (height * 0.1 + 3) : height * 0.1\n  const rectWidth = 30;\n  const maxRectCols = Math.floor(width / rectWidth);\n  const maxRectsRows = Math.ceil(itxIdsInfo.length / maxRectCols);\n  const height = (maxRectsRows + 1) * rectWidth;\n\n  const rects = itxIdsInfo.map((itx, i) => {\n    const x = rectWidth * (i % maxRectCols);\n    // the additional - 1 is because y start counting at the top\n    const y = (maxRectsRows - Math.floor(i / maxRectCols) - 1) * rectWidth;\n    return <><rect\n      x={x}\n      y={y}\n      width={rectWidth - 5}\n      height={rectWidth - 5}\n      fill={focusItx === itx.itxId ? \"orange\" : \"green\"}\n      // className={ \"\" : \"flashing\"}\n      onClick={() => diel.Input.navigateItx({$xFilterItxId: itx.itxId})}\n      style={{cursor: \"pointer\"}}\n    ></rect>\n    {!itx.loaded\n      ? <SvgSpinner\n          cx={x + rectWidth / 2}\n          cy={y + rectWidth / 2}\n          radius={ rectWidth / 2}\n          color={\"white\"}\n        />\n      : null}\n    <text\n      x={x + 5}\n      y={y + 15}\n      font-size=\"15\"\n      style={{pointerEvents: \"none\"}}\n      fill=\"white\">\n      {i === itxIdsInfo.length - 1 ? \"N\" : i + 1}\n    </text></>;\n  });\n  // let lines =     <line\n  //     x1={0} x2={width} y1={height * 0.3} y2={height * 0.3} stroke=\"#4CAF50\" strokeWidth={3}>\n  //   </line>;\n\n  // \"width={width} height={height} style={{overflowX: \"scroll\"}}\n  // <div style={{marginTop: 50, width: width, height: height, overflowX: \"scroll\", overscrollBehavior: \"none\"}}>\n  return <svg width={width} height={height}>\n    {rects}\n  </svg>;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/ChronicleSlider.tsx","import * as React from \"react\";\n\ninterface SvgSpinnerProps  {\n  color: string;\n  cx: number;\n  cy: number;\n  radius: number;\n}\n\nfunction helper(begin: string, cx: number, cy: number, radius: number) {\n    return (\n      <circle cx={cx} cy={cy} r=\"1\">\n        <animate attributeName=\"r\"\n            begin={begin} dur=\"1.8s\"\n            values={`1; ${radius}`}\n            calcMode=\"spline\"\n            keyTimes=\"0; 1\"\n            keySplines=\"0.165, 0.84, 0.44, 1\"\n            repeatCount=\"indefinite\" />\n        <animate attributeName=\"stroke-opacity\"\n            begin=\"0s\" dur=\"1.8s\"\n            values=\"1; 0\"\n            calcMode=\"spline\"\n            keyTimes=\"0; 1\"\n            keySplines=\"0.3, 0.61, 0.355, 1\"\n            repeatCount=\"indefinite\" />\n      </circle>\n    );\n}\n\nexport const SvgSpinner = (props: SvgSpinnerProps) => {\n  return (\n      <g fill=\"none\" stroke={props.color} fill-rule=\"evenodd\" stroke-width=\"2\">\n        {helper(\"0s\", props.cx, props.cy, props.radius)}\n        {helper(\"-0.9s\", props.cx, props.cy, props.radius)}\n      </g>\n  );\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/SvgSpinner.tsx","import * as React from \"react\";\n\nimport { diel } from \"../../diel/setup\";\nimport { TaskStep, TaskQA, TaskTypes, TaskConfidence } from \"../../lib/experiment/tasks\";\n\ninterface TaskQuestionProps {\n  isTraining: boolean;\n  question: TaskQA;\n  nextTask: () => void;\n}\n\ninterface TaskState {\n  step: TaskStep;\n  answer: string;\n  confidence: TaskConfidence;\n  answerValue: number;\n  comment: string;\n  timeElapsed: number;\n  timer: number;\n  warn: boolean;\n}\n\nfunction setUpHelper(q: TaskQA, isTraining: boolean) {\n  diel.LogData.taskInfo({\n    $qId: q.qId,\n    $taskType: TaskTypes[q.type],\n    $isTraining: isTraining ? 1 : 0\n  });\n  if (q.type === TaskTypes.Recall) {\n    diel.LogData.memoryTask({$qId: q.qId, $linkedQId: q.linkedQId});\n  }\n}\n\nexport default class Task extends React.Component<TaskQuestionProps, TaskState> {\n\n  constructor(props: TaskQuestionProps) {\n    super(props);\n    this.nextStep = this.nextStep.bind(this);\n    this.onChangeAnswer = this.onChangeAnswer.bind(this);\n    this.onCommentChange = this.onCommentChange.bind(this);\n    this.setConfidence = this.setConfidence.bind(this);\n    this.tick = this.tick.bind(this);\n    // by default show the most recent unless otherwise specified\n    this.state = {\n      step: TaskStep.Description,\n      answer: null,\n      confidence: null,\n      answerValue: null,\n      comment: null,\n      timer: null,\n      timeElapsed: 0,\n      warn: false\n    };\n    diel.SetFreeze(true);\n    const q = this.props.question;\n    setUpHelper(q, this.props.isTraining);\n  }\n\n  tick() {\n    this.setState({\n      timeElapsed: this.state.timeElapsed + 1\n    });\n  }\n\n  componentWillReceiveProps(p: TaskQuestionProps) {\n    // reset state, but make sure to check that the props has changed...\n    if (p.question.qId !== this.props.question.qId) {\n      clearTimeout(this.state.timer);\n      setUpHelper(p.question, this.props.isTraining);\n      this.setState({\n        answer: null,\n        confidence: null,\n        timeElapsed: 0,\n        step: TaskStep.Description\n      });\n    }\n  }\n\n  onChangeAnswer(event: any) {\n    const answer = event.target.value;\n    const answerValue = event.target.getAttribute(\"data-score\");\n    console.log(\"data score\", answerValue);\n    this.setState({ warn: false, answer, answerValue });\n  }\n\n  setConfidence(confidence: TaskConfidence) {\n    this.setState({warn: false, confidence});\n  }\n\n  onCommentChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) {\n    this.setState({ comment: event.target.value });\n  }\n\n  // look into if I need to not use logEvents?\n  nextStep(step: TaskStep) {\n    const qId = this.props.question.qId;\n    console.log(\"is this event called\", step);\n    if (step === TaskStep.Answering) {\n      if (this.props.question.type !== TaskTypes.Recall) {\n        diel.SetFreeze(false);\n      }\n      diel.LogData.taskTimes({$qId: qId, $eventType: \"start\"});\n      console.log(\"logged start\");\n      this.setState({\n        timer: window.setInterval(this.tick, 1000),\n        step\n      });\n      return;\n    }\n    if (step === TaskStep.Submitted) {\n      if (this.state.answer === null || this.state.confidence === null) {\n        // must have an asnwer\n        this.setState({\n          warn: true,\n        });\n        return;\n      }\n      clearInterval(this.state.timer);\n      diel.SetFreeze(true);\n      diel.LogData.taskTimes({$qId: qId, $eventType: \"end\"});\n      console.log(\"logged end\");\n      this.setState({ step });\n      return;\n    }\n  }\n\n  render() {\n    let { question, nextTask } = this.props;\n    let { step, answer, confidence } = this.state;\n    const questionDiv =  <p className=\"question\" dangerouslySetInnerHTML={{ __html: question.question }}></p>;\n    const choices = question.choices.map(q => <label><input\n      required={true}\n      type=\"radio\"\n      disabled={(step !== TaskStep.Answering)}\n      value={q.text}\n      checked={answer ? answer.indexOf(q.text) > -1 : false}\n      data-score={q.value}\n      onChange={this.onChangeAnswer}\n    ></input>\n      {q.text}\n    </label>);\n    const setConfidence = this.setConfidence;\n    function _genRadio(c: TaskConfidence, text: string) {\n      return <label><input\n        required={true}\n        type=\"radio\"\n        disabled={(step !== TaskStep.Answering)}\n        value={TaskConfidence[c]}\n        checked={confidence === c}\n        onChange={() => setConfidence(c)}\n      ></input>{text}\n      </label>;\n    }\n    const confidenceDiv = <>\n     <p className=\"question\">How confident are you?</p>\n    <div className=\"radio-button-wrapper\">\n      {_genRadio(TaskConfidence.NotAtAll, \"Not At All\")}\n      {_genRadio(TaskConfidence.Somewhat, \"Somewhat\")}\n      {_genRadio(TaskConfidence.Very, \"Very\")}\n  </div></>;\n    let additional: JSX.Element;\n    let button: JSX.Element;\n    if (step === TaskStep.Description) {\n      button = <><button\n      className=\"general-btn exp-nav-btn\"\n      onClick={() => this.nextStep(TaskStep.Answering)}>\n        Start Task\n      </button><span className=\"footnote\">click to activate</span></>;\n    } else if (step === TaskStep.Answering) {\n      button = <button\n        className=\"general-btn submit-btn\"\n        onClick={() => this.nextStep(TaskStep.Submitted)}>\n        Submit\n      </button>;\n    } else if (step === TaskStep.Submitted) {\n      button = <button\n        className=\"general-btn exp-nav-btn\"\n        onClick={() => {\n          // if there is an anwer, log that, as well as the comment\n          diel.LogData.answers({\n            $qId: this.props.question.qId,\n            $answer: this.state.answer,\n            $confidence: TaskConfidence[this.state.confidence],\n            $score: this.state.answerValue,\n            $comment: this.state.comment\n          });\n          nextTask();\n        }}>\n          Next Task\n      </button>;\n      let answerDiv: JSX.Element;\n      // note that we do not include partial answers in the instructions\n      const correctAnswers = question.choices.filter(c => c.value === 1);\n      const correct = correctAnswers.filter(c => c.text === this.state.answer).length > 0;\n      if (correct) {\n        answerDiv = <div>\n          <hr/>\n          <p className=\"correct\">Correct!</p>\n          {correctAnswers.length > 1\n            ? <p>Other possible correct answers: {correctAnswers.filter(c => c.text !== this.state.answer).map(c => c.text + \" \")}</p>\n            : null}\n        </div>;\n      } else {\n        answerDiv = <div>\n          <hr/>\n          <p className=\"warning\">Wrong.</p>\n          {correctAnswers.length > 1\n            ? <p>Possible correct answers is any of the following: {correctAnswers.map(c => c.text + \" \")}</p>\n            : <p>Correct answer: {correctAnswers[0].text}</p>}\n        </div>;\n      }\n      additional = <>\n        {answerDiv}\n        <hr/>\n        <p className=\"footnote\"> Feel free to take a break now before you start your next question!\n          Otherwise, please try to complete the next task in one sitting.</p>\n      </>;\n    }\n    return <div>\n      {this.props.question.type === TaskTypes.Recall ?\n        this.props.isTraining ?\n          <p>\n            In this question we are testing your ability to recall some\n            information you might have seen while doing the previous task (\"memory question\").\n            You cannot interact with the visualizations for these questions\n            ---try your best to remember.</p>\n          : <p>Memory Question</p>\n        : null}\n      {questionDiv}\n      {this.state.warn ? <p className=\"warning\">Please answer both questions</p> : null}\n      <div className=\"radio-button-wrapper\">\n        {choices}\n      </div>\n      {confidenceDiv}\n      {additional}\n      <div style={{height: 5}}></div>\n      {step === TaskStep.Submitted\n        ? <>\n        <label htmlFor=\"comments\"><i>Optional</i> note on how you approached the problem</label>\n        <br/>\n        <textarea\n          rows={5}\n          cols={39}\n          id=\"comments\"\n          name=\"comments\"\n          onChange={this.onCommentChange}></textarea></>\n        : null}\n      {button}\n      {step === TaskStep.Description\n        ? null\n        : <p style={{color: \"gray\"}}>Time {step === TaskStep.Submitted ? \"Taken\" : \"\"}: {this.state.timeElapsed} s</p>\n      }    </div>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/TaskQuestion.tsx","export const LoggedTablesForAnalysis = [\n  // raw events\n  \"eventLog\",\n  \"navigateItx\",\n  \"deltaItx\",\n  \"deleteItx\",\n  \"xBrushItx\",\n  // SP\n  \"itxId_SP\",\n  \"brushState_SP\",\n  // this is important for recognizing cached results\n  \"eqChart_SP\",\n  \"chartDataAtomic\",\n  // this can tell us how many of the interactions\n  // was with a different view than the one immediately before\n  \"brushDep_SP\",\n  // task related\n  \"taskTimes\",\n  \"memoryTask\",\n  \"answers\",\n  \"taskInfo\"\n];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!../shared/logHelper.ts","import * as React from \"react\";\n\nimport {BonusReward, ExtraBonusReward } from \"../../lib/experiment/config\";\nexport const TrainingIntro: React.StatelessComponent<{onClick: () => void}> = (p) => {\n  return <>\n    <div className=\"introSection\">\n      <h2>Analyze flights fun! </h2>\n      <p>\n        You will be viewing an interactive visualization dashboard of <b>flights to Hawaii from other US states, in December 2017</b>.\n        It visualizes the information about flights containing information about their departure state, the day of the month,\n        flight carrier, and delay information.\n      </p>\n      <p>\n        We have synthesized the data based on real data. Please <strong>do not</strong> use your existing\n        knowledge to complete the tasks. Also please do not Google the results---it will not be needed and interferes\n        with our results.\n      </p>\n    </div>\n    <p><b>\n    We will walk you through a tutorial and a set of tasks. If you answer all of the initial three tasks incorrectly,\n    you will be disqualified from the HIT.\n    </b></p>\n    <p>\n      The training questions will be over the data from the first half of December,\n      and the actual tasks will be over the second half of December.\n      The visualization tool will stay the same, and the questions similar.\n    </p>\n    <div className=\"introSection\">\n    <h2>Time!</h2>\n      <p>\n        You are encouraged to complete the tasks both accurately and efficiently. Please try not to take breaks <strong>during </strong>\n        a task (usually less than 1 minute to 3 minutes), but feel free to take breaks <strong>between</strong> tasks.\n        If we detect that you left the window <strong>during</strong> a task, you might not be paid the bonus in full.\n        We may send out up to ${ExtraBonusReward.toFixed(2)} of additional reward for those who performed effectively (in addition to\n        the base ${BonusReward.toFixed(2)}).\n      </p>\n    </div>\n    <button className=\"general-btn exp-nav-btn\" onClick={p.onClick}>next</button>\n    </>;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/TrainingIntro.tsx","import * as React from \"react\";\nimport { holidayCount } from \"../../lib/experiment/experimentQAs\";\n\n\nexport const TaskIntro: React.StatelessComponent<{onClick: () => void}> = (p) => {\n  return <>\n    <h2>Analysis for the Holiday Season!</h2>\n    <p>\n      You will now be viewing an interactive visualization over the same data but from the second half of the month.\n      Again, we remind you to try to complete the tasks as quickly and as accurately as possible.\n    </p>\n    <p>\n      There will be {holidayCount} tasks total. Good luck!\n    </p>\n    <button className=\"general-btn exp-nav-btn\" onClick={p.onClick}>Start</button>\n  </>;\n};\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/TaskIntro.tsx","import * as React from \"react\";\n\nimport { BonusReward, TaskReward, ExtraBonusReward, judgeScreenSize, judgeWindowSize } from \"../../lib/experiment/config\";\nimport { TotalAnalysisCount, TotalTaskCount, SurveyCount } from \"../../lib/experiment/experimentQAs\";\nimport { diel } from \"../../diel/setup\";\nimport { EventType } from \"../../lib/helper\";\n\ninterface InstructionsProps {\n  onClick: () => void;\n  disabled: boolean;\n}\n\ninterface InstructionState {\n  isScreenSmall: boolean;\n  isWindowSmall: boolean;\n  isChrome: boolean;\n  isSafari: boolean;\n  isMobile: boolean;\n}\n\nexport default class Instructions extends React.Component<InstructionsProps, InstructionState> {\n  constructor(props: InstructionsProps) {\n    super(props);\n    this.resizeListener = this.resizeListener.bind(this);\n    const w = (window as any);\n    const isSafari = /constructor/i.test(w.HTMLElement)\n                      || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!w[\"safari\"] || (typeof w.safari !== \"undefined\" && w.safari.pushNotification));\n    const isChrome = !!(window as any).chrome && !!(window as any).chrome.webstore;\n    let isMobile = false;\n    (function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) isMobile = true; })(navigator.userAgent || navigator.vendor || w.opera);\n    diel.LogData.eventLog({$eventName: EventType[EventType.IsMobile], $parameter: isMobile ? \"true\" : \"false\"});\n    diel.LogData.eventLog({$eventName: EventType[EventType.Browser], $parameter: isSafari ? \"safari\" : isChrome ? \"chrome\" : \"other\"});\n    this.state = {\n      isScreenSmall: null,\n      isWindowSmall: null,\n      isChrome,\n      isSafari,\n      isMobile\n    };\n    // to avoid copy/paste\n    this.resizeListener();\n  }\n\n  resizeListener() {\n    this.setState({\n      isScreenSmall: judgeScreenSize(),\n      isWindowSmall: judgeWindowSize()\n    });\n    diel.LogData.eventLog({$eventName: EventType[EventType.ScreenWidth], $parameter: screen.width});\n    diel.LogData.eventLog({$eventName: EventType[EventType.ScreenHeight], $parameter: screen.height});\n    diel.LogData.eventLog({$eventName: EventType[EventType.WindowWidth], $parameter: window.innerWidth});\n    diel.LogData.eventLog({$eventName: EventType[EventType.WindowHeight], $parameter: window.innerHeight});\n  }\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resizeListener);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.resizeListener);\n  }\n\n  render() {\n    const { onClick, disabled } = this.props;\n    const { isScreenSmall, isWindowSmall, isChrome, isSafari, isMobile } = this.state;\n    return (\n      <div>\n        <h2>Interactive Visualization User Study</h2>\n        <p><b>\n          This HIT consists of {TotalAnalysisCount} visual analysis tasks and {SurveyCount} which should take 1 to 3 minutes each.\n          If completed, you will receive a total ranging from\n          ${(TaskReward * TotalTaskCount + BonusReward).toFixed(2)} to ${(TaskReward * TotalTaskCount + BonusReward + ExtraBonusReward).toFixed(2)}.\n          We expect the overall HIT to take about 30 minutes of total time.\n        </b></p>\n        <p>\n          You will receive a ${TaskReward.toFixed(2)} reward for each task completed---which includes the tasks as well as the surveys.\n          After completing all of the tasks, you will receive a ${BonusReward.toFixed(2)}-${(BonusReward + ExtraBonusReward).toFixed(2)} completion bonus reward (depending on the acuracy and speed of your answer).\n          You must complete <b>all</b> the tasks in this HIT to receive the completion bonus.\n          Most of the payment is in the bonus because we cannot make use of any of the results unless all tasks are completed.\n          The payment is our estimation of the task time and the minimum wage of $11 per hour.\n        </p>\n        <p>\n          If you do not wish to complete all the tasks, you can press the\n          \"Finish and claim current reward\" button to exit this HIT and be paid your accumulated\n          reward for tasks completed so far. You will only be paid once you complete all the tasks or click the finish button,\n          given that the tasks are done with reasonable effort.\n        </p>\n        <p>\n          Your participation in this study is voluntary. In these tasks, you will be presented with an interactive visualization dashboard of some flight delay data.\n          You will be asked to perform basic analysis of the data, which requires interacting with the data visualization.\n        </p>\n        <p>\n          The results of these tasks will be used for a research study on novel user experience design for interactive visualizations.\n          The purpose of the study is to inform the design of interfaces for visual analytics tasks when there are delays.\n          You may view our <a href=\"./policy.html\" target=\"_blank\">privacy policy</a> for more information. Your anonymized data may be used for publication.\n        </p>\n        <p><b>\n          Please ensure that you are using either Chrome or Safari browswer on a computer with screen size of at least 1080 by 800.\n        </b></p>\n        {!(isChrome || isSafari)\n          ? <p className=\"warning\">Please ensure that you are using the <strong>Chrome or Safari</strong> browswers (we have detected that you might be using an incompatible browswer), otherwise you will not be able to continue.</p>\n          : null\n        }\n        {isMobile\n          ? <p className=\"warning\">\n              We have detected that you might be using a mobile device.\n              This may cause the tool for the tasks to mal function, and we not be able to\n              compensate you for your tasks.\n            </p>\n          : null}\n        {isScreenSmall\n          ? <p className=\"warning\">We have detected that your current screen is smaller than 1080 by 800\n              Please find a device with a bigger screen instead.\n              Otherwise, this will result in a lower payment since we cannot make use of your work.</p>\n          : null}\n        {!isScreenSmall && isWindowSmall\n          ? <p className=\"warning\">We have detected that your current window is smaller than 1080 by 800\n          Please resize the window to be larger.\n          Otherwise, this will result in a lower payment since we cannot make use of your work.</p>\n      : null}\n        <p>If you are ready to begin, please click the button below.</p>\n        <button\n          className=\"general-btn exp-nav-btn\"\n          onClick={onClick}\n          disabled={disabled}\n        >I understand, and consent to participate</button>\n      </div>\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/Instructions.tsx","import * as React from \"react\";\n\nimport ScrubberView from \"../ScrubberView\";\nimport { VideoPopup } from \"./VideoPopup\";\nimport { ScatterCompareTutorial } from \"./ScatterCompareTutorial\";\n\nimport { IntroSteps, IntroSpec } from \"../../lib/experiment/tutorialMaterial\";\nimport { videoTutorials } from \"../../lib/experiment/tutorialMaterial\";\n\ninterface TutorialProps {\n  onClick: () => void;\n}\n\ninterface TutorialState {\n  step: number;\n  introTour: any;\n  showPopup: boolean;\n}\n\n\nexport default class Tutorial extends React.Component<TutorialProps, TutorialState> {\n  constructor(props: TutorialProps) {\n    super(props);\n    this.startAgain = this.startAgain.bind(this);\n    this.setStep = this.setStep.bind(this);\n    this.state = {\n      // meh can't be bothered to create enums\n      step: -1,\n      introTour: null,\n      showPopup: false,\n    };\n  }\n\n  componentDidMount() {\n    const introTour = introJs().setOptions({\n      exitOnOverlayClick: false\n    });\n    introTour.start();\n    this.setState({introTour});\n  }\n\n  setStep(step: number) {\n    this.setState({step});\n  }\n\n  startAgain() {\n    this.state.introTour.start();\n  }\n\n  render() {\n    const s = this.setStep;\n    const { step } = this.state;\n    let content: JSX.Element;\n    if (step === 0) {\n      content = <div className=\"popup\">\n      <div className=\"popup-inner\">\n        <div style={{margin: \"auto\", maxWidth: 600}}>\n          <p>\n            To help you make use of the tool better, complete the tasks faster, and a higher chance at extra bonus,\n            we will show you {videoTutorials.length + 1} additional training modules (<b>no</b> audio required).\n          </p>\n          <p>\n          Each part should take about a minute or less.\n          Also, some of the training may appear to repeat the previous instruction---we just want to make sure you get it!\n          </p>\n          <button  className=\"general-btn exp-nav-btn\" onClick={() => s(1)}>Start</button>\n        </div>\n      </div>\n    </div>;\n    } else if (step > 0 && step < videoTutorials.length + 1) {\n      const tut = videoTutorials[step - 1];\n      content = <VideoPopup\n          title={tut.title + ` (${step}/${videoTutorials.length + 1})`}\n          videoLink={tut.videoLink}\n          texts={tut.texts}\n          prev={(step > 0) ? () => s(step - 1) : null}\n          next={() => s(step + 1)}\n        />;\n    } else if (step === videoTutorials.length + 1) {\n      content = <ScatterCompareTutorial\n          title={`How to Read and Compare Delay Heatmaps (${step}/${videoTutorials.length + 1})`}\n          prev={() => s(step - 1)}\n          next={() => s(step + 1)}\n        />;\n    }\n    return <>\n        <ScrubberView\n          showIntro={true}\n        />\n        <div style={{float: \"left\", paddingLeft: 20}}>\n          {content}\n          <button\n            className=\"tour-btn general-btn\"\n            onClick={this.startAgain}\n            data-step={IntroSteps.indexOf(\"tutorial\") + 1}\n            data-intro={IntroSpec.get(\"tutorial\")}\n          >Show Tour Again</button>\n          <hr/>\n          <div\n            data-step={IntroSteps.indexOf(\"video\") + 1}\n            data-intro={IntroSpec.get(\"video\")}\n          >\n          {step === videoTutorials.length + 2\n            ? <button className=\"general-btn exp-nav-btn\" onClick={this.props.onClick}>Start Tasks</button>\n            : <button  className=\"general-btn exp-nav-btn\" onClick={() => s(0)}>Start Techniques</button>}\n          </div>\n        </div>\n    </>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/Tutorial.tsx","import * as React from \"react\";\n\ninterface PopupProps {\n  title: string;\n  videoLink: string;\n  texts: string[];\n  next: () => void;\n  prev: () => void;\n}\n\nexport const VideoPopup: React.StatelessComponent<PopupProps> = (p) =>{\n  let { next, videoLink, texts, title, prev } = p;\n  return (\n    <div className=\"popup\">\n      <div className=\"popup-inner\">\n        <div style={{margin: \"auto\"}}>\n          <h3 style={{textAlign: \"center\"}}>{title}</h3>\n          <div className=\"description\">\n            {texts.map(t => <p>{t}</p>)}\n          </div>\n          <video\n            width={400}\n            autoPlay\n            src={videoLink}\n            controls loop\n          ></video>\n          <br/>\n          <button className=\"general-btn\" onClick={prev} disabled={prev === null}>prev</button>\n          <button className=\"general-btn exp-nav-btn\" onClick={next}>next</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/VideoPopup.tsx","import * as React from \"react\";\n\ninterface ScatterCompareTutorialProps {\n  title: string;\n  prev: () => void;\n  next: () => void;\n}\n\nexport const ScatterCompareTutorial: React.StatelessComponent<ScatterCompareTutorialProps> = (p) =>{\n  let { prev, next, title } = p;\n  return (\n    <div className=\"popup\">\n      <div className=\"popup-inner\">\n        <div style={{padding: 10}}>\n          <h3 style={{textAlign: \"center\"}}>{title}</h3>\n          <p>\n            The heatmap encodes a lot of information.\n            We illustrate by reading two different views of the same filtered data.\n            On the left, we have the \"unzoomed\" view of the data.\n            The rightmost distribution of delayed flights count\n            (red and white bars) shows that only a tiny portion of the flights are delayed.\n            The heat map to the left shows more detail---how delayed are the delayed flights.\n            However, it is somewhat difficult to read witht the gray in the background. This is when you can \"zoom,\" which brings us to the image to the right.\n          </p>\n          <p>\n            For the image to the right, the gray background data is no longer plotted (hence \"zoomed\" in).\n            While easy to read individually, it makes it difficult to compare across charts, since the scale is changing.\n          </p>\n          <img width={300} src=\"https://logical-interactions.github.io/chroniclesv2/dist/heat_unzoomed.png\"></img>\n          <img width={300} src=\"https://logical-interactions.github.io/chroniclesv2/dist/heat_zoomed.png\"></img>\n          <button className=\"general-btn\" onClick={prev}>Prev</button>\n          <button className=\"general-btn exp-nav-btn\" onClick={next}>Finish Techniques</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/ScatterCompareTutorial.tsx","import { IsChronicles } from \"../../lib/experiment/config\";\n\nexport const FlowSurveyQuestions = new Map<string, string>();\n// creating hashes as a sanity check\nFlowSurveyQuestions.set(\"flowChallenge\", \"I feel just the right amount of challenge\");\nFlowSurveyQuestions.set(\"flowSmooth\", \"My thoughts/activities run fluidly and smoothly\");\nFlowSurveyQuestions.set(\"flowTime\", \"I do not notice time passing\");\nFlowSurveyQuestions.set(\"flowConcentrate\", \"I have no difficulty concentrating\");\nFlowSurveyQuestions.set(\"flowClear\", \"My mind is completely clear\");\nFlowSurveyQuestions.set(\"flowAbsorbed\", \"I am totally absorbed in what I am doing\");\nFlowSurveyQuestions.set(\"flowAccord\", \"The right thoughts/movements occur of their own accord\");\nFlowSurveyQuestions.set(\"flowKnow\", \"I know what I have to do each step of the way\");\nFlowSurveyQuestions.set(\"flowControl\", \"I feel that I have everything under control\");\nFlowSurveyQuestions.set(\"flowLost\", \"I am completely lost in thought\");\nFlowSurveyQuestions.set(\"flowStake\", \"Something important to me is at stake here\");\nFlowSurveyQuestions.set(\"flowMistake\", \"I must not make any mistakes here\");\nFlowSurveyQuestions.set(\"flowWorried\", \"I am worried about failing\");\nFlowSurveyQuestions.set(\"flowCompare\", \"Compared to all other activities which I partake easy in, this one is difficult\");\nFlowSurveyQuestions.set(\"flowCompetence\", \"I think that my competence in this area is high\");\nFlowSurveyQuestions.set(\"flowDemand\", \"For me personally, the current demands are too high\");\n\nexport const FlowSurveySequence = [\"flowChallenge\", \"flowSmooth\", \"flowTime\",\n\"flowConcentrate\", \"flowClear\", \"flowAbsorbed\", \"flowAccord\",\n\"flowKnow\", \"flowControl\", \"flowLost\", \"flowStake\", \"flowMistake\",\n\"flowWorried\", \"flowCompare\", \"flowCompetence\", \"flowDemand\"];\n\nexport const UsabilitySurveyQuestions = new Map<string, string>();\n\nUsabilitySurveyQuestions.set(\"tool\", \"Do you feel like the tool supported your performing the task?\");\nif (IsChronicles) {\n  UsabilitySurveyQuestions.set(\"chronicles\" , \"Did you find the ability to navigate between histories helpful?\");\n}\nUsabilitySurveyQuestions.set(\"delayFrustration\" , \"Were the delays frustrating?\");\nUsabilitySurveyQuestions.set(\"delayDifficulty\" , \"Did the delays make thing difficult?\");\n\nexport const UsabilitySurveySequence = [\n  \"tool\",\n  \"delayFrustration\",\n  \"delayDifficulty\",\n  ...(IsChronicles ? [\"chronicles\"] : [])\n];\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/lib/experiment/survey.ts","import * as React from \"react\";\nimport { CancelReason } from \"../../lib/experiment/experiment\";\n\n\ninterface CancelSurveyProps {\n  nextStep: (data: any) => void;\n}\n\ninterface CancelSurveyState {\n  choices: CancelReason[];\n  comment: string;\n  warn: boolean;\n}\n\nexport default class CancelSurvey extends React.Component<CancelSurveyProps, CancelSurveyState> {\n  constructor(props: CancelSurveyProps) {\n    super(props);\n    this.onCommentChange = this.onCommentChange.bind(this);\n    this.nextStep = this.nextStep.bind(this);\n    this.toggleChoices = this.toggleChoices.bind(this);\n    this.state = {\n      choices: [],\n      comment: \"\",\n      warn: false,\n    };\n  }\n\n  onCommentChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) {\n    this.setState({ comment: event.target.value });\n  }\n\n  toggleChoices(c: CancelReason) {\n    this.setState(prev => {\n      const idx = prev.choices.indexOf(c);\n      if (idx > -1) {\n        prev.choices.splice(idx, 1);\n      } else {\n        prev.choices.push(c);\n      }\n      return prev;\n    });\n  }\n\n  nextStep() {\n    // check for null\n    const { choices } = this.state;\n    if (choices.length === 0) {\n      this.setState({warn: true});\n    } else {\n      this.props.nextStep({\n        choices: this.state.choices.join(\", \"),\n        comment: this.state.comment\n      });\n    }\n  }\n\n  render() {\n    const { choices } = this.state;\n    const toggleChoices = this.toggleChoices;\n    function _genRadio(c: CancelReason, text: string) {\n      return <label><input\n        required={true}\n        type=\"checkbox\"\n        value={CancelReason[c]}\n        checked={choices.indexOf(c) > -1}\n        onChange={() => toggleChoices(c)}\n      ></input>{text}\n      </label>;\n    }\n    const choicesDiv = <>\n      <p className=\"question\">Why did you decide to cancel?</p>\n      <div className=\"radio-button-wrapper\">\n        {_genRadio(CancelReason.TasksTooHard, \"Tasks are too hard\")}\n        {_genRadio(CancelReason.DelaysFrustrating, \"Delays are frustrating\")}\n        {_genRadio(CancelReason.PayTooLow, \"Pay is too low\")}\n        {_genRadio(CancelReason.Other, \"Other (please specify below)\")}\n      </div>\n    </>;\n    return <>\n      {this.state.warn === true\n        ? <p className=\"warning\">\n          Please select at least one choice.</p>\n        : null}\n      {choicesDiv}\n      <label htmlFor=\"comments\"><i>(Optional)</i> Any additional comments?</label>\n      <br/>\n      <textarea\n        rows={5}\n        cols={39}\n        id=\"comments\"\n        name=\"comments\"\n        onChange={this.onCommentChange}>\n      </textarea>\n      <br/>\n      <button\n      className=\"general-btn exp-nav-btn\"\n      onClick={() => this.nextStep()}>\n        Submit and Exit\n      </button>\n    </>;\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/tslint-loader!./src/components/Experiment/CancelSurvey.tsx"],"sourceRoot":""}